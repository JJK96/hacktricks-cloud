# GCP - Serviceusage提权

{% hint style="success" %}
学习并练习AWS Hacking：<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
学习并练习GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>支持HackTricks</summary>

* 检查[**订阅计划**](https://github.com/sponsors/carlospolop)!
* **加入** 💬 [**Discord 群组**](https://discord.gg/hRep4RUj7f) 或 [**telegram 群组**](https://t.me/peass) 或 **关注**我们的 **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **通过向** [**HackTricks**](https://github.com/carlospolop/hacktricks) 和 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github 仓库提交 PR 来分享黑客技巧。**

</details>
{% endhint %}

## serviceusage

以下权限对于创建和窃取API密钥很有用，不包括文档中的内容：_API密钥是一个简单的加密字符串，**用于标识没有任何主体的应用程序**。它们用于匿名访问**公共数据**，并用于将API请求与您的项目**关联**以进行配额和**计费**。_

因此，通过API密钥，您可以让公司为您使用API付费，但您将无法提升权限。

要了解其他权限和生成API密钥的方法，请查看：

{% content-ref url="gcp-apikeys-privesc.md" %}
[gcp-apikeys-privesc.md](gcp-apikeys-privesc.md)
{% endcontent-ref %}

### `serviceusage.apiKeys.create`

发现了一个未记录的API，可用于**创建API密钥：**

{% code overflow="wrap" %}
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
### `serviceusage.apiKeys.list`

发现了另一个未记录的 API，用于列出已经创建的 API 密钥（API 密钥出现在响应中）：
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
{% endcode %}

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

具有这些权限，攻击者可以在项目中启用和使用新服务。这可能允许攻击者启用类似管理员或云身份的服务，以尝试访问 Workspace 信息，或者其他服务以访问有趣的数据。&#x20;

## **参考**

* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>支持 HackTricks 并获得好处！</strong></summary>

您在**网络安全公司**工作吗？您想看到您的**公司在 HackTricks 中被广告**吗？或者您想访问**PEASS 的最新版本或下载 HackTricks 的 PDF**吗？请查看[**订阅计划**](https://github.com/sponsors/carlospolop)！

发现[**PEASS Family**](https://opensea.io/collection/the-peass-family)，我们的独家[NFTs](https://opensea.io/collection/the-peass-family)收藏品

获取[**官方 PEASS & HackTricks 衣服**](https://peass.creator-spring.com)

**加入**[**💬**](https://emojipedia.org/speech-balloon/) **Discord 群组**](https://discord.gg/hRep4RUj7f) 或**电报群组**](https://t.me/peass) 或在**Twitter**上**关注**我[**🐦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**分享您的黑客技巧，通过向**[**hacktricks github 存储库提交 PR**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>
