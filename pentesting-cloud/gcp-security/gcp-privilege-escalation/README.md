# GCP - рд╡рд░реАрдпрддрд╛ рдЙрдиреНрдирддрд┐

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг AWS рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг GCP рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рд╣рдореЗрдВ **рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВред

</details>
{% endhint %}

## GCP рд╡рд░реАрдпрддрд╛ рдЙрдиреНрдирддрд┐ рдХрд╛ рдкрд░рд┐рдЪрдп <a href="#introduction-to-gcp-privilege-escalation" id="introduction-to-gcp-privilege-escalation"></a>

GCP, рдЬреИрд╕реЗ рдХрд┐ рдХреЛрдИ рднреА рдХреНрд▓рд╛рдЙрдб, рдХреБрдЫ **рдореВрд▓ рд╕рд┐рджреНрдзрд╛рдВрдд** рд░рдЦрддрд╛ рд╣реИ: рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рд╕рдореВрд╣ рдФрд░ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ, рдФрд░ рдХреБрдЫ **рд╕рдВрд╕рд╛рдзрди** рдЬреИрд╕реЗ рдХрдВрдкреНрдпреВрдЯ рдЗрдВрдЬрди, рдХреНрд▓рд╛рдЙрдб рдлрдВрдХреНрд╢рди...\
рдлрд┐рд░, рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ **рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ рдЙрди рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИрдВ**ред рдпрд╣ GCP рдореЗрдВ рд╕рдВрд╕рд╛рдзрди рдкрд░ рдПрдХ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рдкрд╛рд╕ рдХрд┐рддрдиреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ, рдЗрд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рд╣реИред\
рдХреБрдЫ рдРрд╕реА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ рдЬреЛ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕рдВрд╕рд╛рдзрди рдпрд╛ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдкрд░ **рдФрд░ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВрдЧреА, рдФрд░ рдЙрд╕реЗ **рд╡рд░реАрдпрддрд╛ рдЙрдиреНрдирддрд┐** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЬреЛ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреЛрд╖реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рднреА рд╣реИ)ред

рдЗрд╕рд▓рд┐рдП, рдореИрдВ GCP рд╡рд░реАрдпрддрд╛ рдЙрдиреНрдирддрд┐ рддрдХрдиреАрдХреЛрдВ рдХреЛ **2 рд╕рдореВрд╣реЛрдВ** рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛:

* **рдореБрдЦреНрдп рд╕рд┐рджреНрдзрд╛рдВрдд рдкрд░ рд╡рд░реАрдпрддрд╛**: рдпрд╣ рдЖрдкрдХреЛ **рдПрдХ рдЕрдиреНрдп рд╕рд┐рджреНрдзрд╛рдВрдд рдХреА рднреВрдорд┐рдХрд╛ рдЕрднрд┐рдирдп рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛, рдФрд░ рдЗрд╕рд▓рд┐рдП рдЙрд╕рдХреЗ рд╕рднреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред рдЙрджрд╛ред: рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреЛ рдЕрднрд┐рдирдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП _getAccessToken_ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░реЗрдВред
* **рд╕рдВрд╕рд╛рдзрди рдкрд░ рд╡рд░реАрдпрддрд╛**: рдпрд╣ рдЖрдкрдХреЛ **рд╡рд┐рд╢реЗрд╖ рд╕рдВрд╕рд╛рдзрди рдкрд░ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред рдЙрджрд╛ред: рдЖрдк _setIamPolicy_ рдЕрдиреБрдорддрд┐ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреНрд▓рд╛рдЙрдб рдлрдВрдХреНрд╢рдиреНрд╕ рдкрд░ рддреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреБрдЫ **рд╕рдВрд╕рд╛рдзрди рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЖрдкрдХреЛ рд╕рдВрд╕рд╛рдзрди рдкрд░ рдПрдХ рд╡рд┐рдЪрд┐рддреНрд░ рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛ рдЬреЛрдбрд╝рдиреЗ** рдХреА рднреА рдЕрдиреБрдорддрд┐ рджреЗрдВрдЧреАред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдк рдПрдХ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрд╕рд╛рдзрди рд▓реЙрдиреНрдЪ рдХрд░ рд╕рдХреЗрдВрдЧреЗ, рд╕рдВрд╕рд╛рдзрди рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░ рд╕рдХреЗрдВрдЧреЗ, рдФрд░ **рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдЯреЛрдХрди** рдЪреБрд░рд╛ рд╕рдХреЗрдВрдЧреЗред рдЗрд╕рд▓рд┐рдП, рдпрд╣ рдПрдХ рд╕рд┐рджреНрдзрд╛рдВрдд рддрдХ рд╡рд░реАрдпрддрд╛ рдЙрдиреНрдирддрд┐ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред рдпрд╣ рдкрд╣рд▓реЗ рдХрдИ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдореЗрдВ рд╣реБрдЖ рдерд╛, рд▓реЗрдХрд┐рди рдЕрдм рдпрд╣ рдХрдо рд╣реЛ рдЧрдпрд╛ рд╣реИ (рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ)ред

рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рд╡рд░реАрдпрддрд╛ рдЙрдиреНрдирддрд┐ рддрдХрдиреАрдХ рдЙрдиреНрд╣реАрдВ рдХреЗ рд╣реИрдВ рдЬреЛ **рджреВрд╕рд░реЗ рд╕рдореВрд╣** рдХреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЖрдкрдХреЛ **рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЕрдиреБрдорддрд┐рдпреЛрдВ рд╡рд╛рд▓реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдмрд╛рд╣рд░ рдЕрдзрд┐рдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдореЗрдВ рд╡реГрджреНрдзрд┐** рдЖрдкрдХреЛ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреА рд╣реИ рдпрд╛ рдпрд╣рд╛рдБ рддрдХ рдХрд┐ **рдЕрдиреНрдп рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ** рддрдХ (рд╢рд╛рдпрдж рдПрдХ рд╕реАрдХреНрд░реЗрдЯ рдкрдврд╝рдиреЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬреЛ рдПрдХ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдХрд╛ рдЯреЛрдХрди рд╕рдорд╛рд╣рд┐рдд рдХрд░рддрд╛ рд╣реИ)ред

{% hint style="warning" %}
рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ **GCP рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рджреЛрдиреЛрдВ рд╕рд┐рджреНрдзрд╛рдВрдд рдФрд░ рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдПрдХ рд╕реЗрд╡рд╛ рдЦрд╛рддреЗ рдореЗрдВ рд╡рд░реАрдпрддрд╛ рдЙрдиреНрдирддрд┐ рдХрд░рдирд╛ рдЖрдкрдХреЛ рдЗрд╕реЗ рднреА рдЕрднрд┐рдирдп рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред
{% endhint %}

{% hint style="info" %}
рдЧреЛрд▓рд┐рдпреЛрдВ рдХреЗ рдмреАрдЪ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЙрд╕ рдЕрдиреБрдорддрд┐ рдХреА рджрд┐рд╢рд╛ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рддреА рд╣реИрдВ рдЬрд┐рд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рддрд╛рдХрд┐ `gcloud` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреЛрд╖ рдХрд╛ рд╢реЛрдз рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред рдпрджрд┐ рдЗрд╕реЗ API рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджреЛрд╖ рдХрд╛ рд╢реЛрдз рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ рддреЛ рдпреЗ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреАред
{% endhint %}

## рд╡рд░реАрдпрддрд╛ рдЙрдиреНрдирддрд┐ рдореЗрдердбреЛрд▓реЙрдЬреА рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐рдпрд╛рдБ

рдпрд╣ рдореИрдВ **рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЕрдиреБрдорддрд┐рдпреЛрдВ** рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХреИрд╕реЗ рдХрд░рддрд╛ рд╣реВрдБ GCP рдХреЗ рдЕрдВрджрд░ред

1. рдЧрд┐рдЯрд╣рдм рд░реЗрдкреЛ [https://github.com/carlospolop/gcp\_privesc\_scripts](https://github.com/carlospolop/gcp\_privesc\_scripts) рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ
2. рдирдП рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ tests/ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ

## рдкрд╣реБрдВрдЪ рд╕реНрдХреЛрдкреНрд╕ рдХреЛ рдЫрд▓рдирд╛ <a href="#bypassing-access-scopes" id="bypassing-access-scopes"></a>

GCP рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╕реЗрд╡рд╛ рд╕реЗ рд▓реАрдХ рд╣реБрдП SA рдХреЗ рдЯреЛрдХрди рдореЗрдВ **рдкрд╣реБрдВрдЪ рд╕реНрдХреЛрдкреНрд╕** рд╣реЛрддреЗ рд╣реИрдВред рдпреЗ **рдЕрдиреБрдорддрд┐рдпреЛрдВ** рдкрд░ **рдкреНрд░рддрд┐рдмрдВрдз** рд╣реЛрддреЗ рд╣реИрдВ рдЬрд┐рдирдХреА рдЯреЛрдХрди рдореЗрдВ рд╣реЛрддреА рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЯреЛрдХрди рдореЗрдВ **`https://www.googleapis.com/auth/cloud-platform`** рд╕реНрдХреЛрдк рд╣реИ, рддреЛ рдЗрд╕реЗ рд╕рднреА GCP рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП **рдкреВрд░реА рдкрд╣реБрдВрдЪ** рд╣реЛрдЧреАред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрджрд┐ рдЯреЛрдХрди рдореЗрдВ **`https://www.googleapis.com/auth/cloud-platform.read-only`** рд╕реНрдХреЛрдк рд╣реИ, рддреЛ рдпрд╣ рдХреЗрд╡рд▓ рд╕рднреА GCP рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП **рдХреЗрд╡рд▓ рдкрдврд╝рдиреЗ рдХреА рдкрд╣реБрдВрдЪ** рд╣реЛрдЧреА рднрд▓реЗ рд╣реА SA рдореЗрдВ IAM рдореЗрдВ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдВред

рдЗрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдЫрд▓рдиреЗ рдХрд╛ рд╕реАрдзрд╛ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдк рд╣рдореЗрд╢рд╛ рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рд╣реЛрд╕реНрдЯ рдореЗрдВ **рдирдП рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓** рдЦреЛрдЬрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, **рд╕реЗрд╡рд╛ рдХреБрдВрдЬреА рдЦреЛрдЬреЗрдВ** рддрд╛рдХрд┐ рдкреНрд░рддрд┐рдмрдВрдз рдХреЗ рдмрд┐рдирд╛ рдУрдЖрде рдЯреЛрдХрди рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдпрд╛ **рдХрд┐рд╕реА рдЕрд▓рдЧ VM рдкрд░ рдЬрд╛рдПрдВ рдЬреЛ рдХрдо рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рд╣реЛ**ред

рдЬрдм [рдкрд╣реБрдВрдЪ рд╕реНрдХреЛрдкреНрд╕](https://cloud.google.com/compute/docs/access/service-accounts#accesscopesiam) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдЗрдВрд╕реНрдЯреЗрдВрд╕ (VM) рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрдиреНрди рдУрдЖрде рдЯреЛрдХрди рдореЗрдВ рдПрдХ [**рд╕реНрдХреЛрдк**](https://oauth.net/2/scope/) **рд╕реАрдорд╛ рд╢рд╛рдорд┐рд▓ рд╣реЛрддреА рд╣реИ**ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдк рдЗрд╕ рд╕реАрдорд╛ рдХреЛ **рдЫрд▓рдиреЗ** рдФрд░ рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рдЦрд╛рддреЗ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рд╢реЛрдз рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрд╕ рдкреНрд░рддрд┐рдмрдВрдз рдХреЛ рдЫрд▓рдиреЗ рдХрд╛ **рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛** рдпрд╛ рддреЛ рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рд╣реЛрд╕реНрдЯ рдореЗрдВ **рдирдП рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓** рдЦреЛрдЬрдирд╛ рд╣реИ, рддрд╛рдХрд┐ рдЖрдк рдмрд┐рдирд╛ рдкреНрд░рддрд┐рдмрдВрдз рдХреЗ рдУрдЖрде рдЯреЛрдХрди рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХреЗрдВ, рдпрд╛ **рд╕рдВрдХрдЯрдЧреНрд░рд╕реНрдд рдЕрд▓рдЧ VM рдХреЛ рд╕рдВрдХрдЯрд┐рдд рдХрд░рдирд╛**ред

рдЬрд╛рдВрдЪреЗрдВ SA рдХреЗ рд╕рд╛рде рдЬрдирд░реЗрдЯ рдХреА рдЧрдИ рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде:
```bash
for i in $(gcloud iam service-accounts list --format="table[no-heading](email)"); do
echo "Looking for keys for $i:"
gcloud iam service-accounts keys list --iam-account $i
done
```
## рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЙрдиреНрдирдпрди рддрдХрдиреАрдХреЗрдВ

AWS рдореЗрдВ рдЕрдкрдиреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдпрдирд┐рдд рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд░реНрдпрд╛рдкреНрдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ рдЖрдк рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рд╕реЗ рдЕрдиреНрдп рд╕реЗрд╡рд╛ рдЦрд╛рддрд╛/рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛/рд╕рдореВрд╣реЛрдВ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХреЗрдВред рд╕рдВрдЧрдарди рдкрд░ рдкреНрд░рд╢рд╛рд╕рдХреАрдп рдкрд╣реБрдВрдЪ рд╣реЛрдиреЗ рддрдХ рдЙрдиреНрдирдпрдиреЛрдВ рдХрд╛ рд╢реНрд░реГрдВрдЦрд▓рдиред

{% hint style="warning" %}
GCP рдореЗрдВ **рд╕реИрдХрдбрд╝реЛрдВ** (рдпрджрд┐ рди рд╣рдЬрд╛рд░реЛрдВ) **рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдХрд┐рд╕реА рдПрдВрдЯрд┐рдЯреА рдХреЛ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕ рдкреБрд╕реНрддрдХ рдореЗрдВ рдЖрдк **рдЙрди рд╕рднреА рдЕрдиреБрдорддрд┐рдпреЛрдВ** рдХреЛ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк **рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдпрди рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдкрдХреЛ рдпрд╣рд╛рдБ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдХрд┐рд╕реА рдорд╛рд░реНрдЧ рдХрд╛ **рдЬреНрдЮрд╛рди рд╣реИ**, рддреЛ рдХреГрдкрдпрд╛ рдЗрд╕реЗ **рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ**ред
{% endhint %}

**рдЗрд╕ рдЦрдВрдб рдХреЗ рдЙрдкрдкреГрд╖реНрда рд╕реЗрд╡рд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдХреНрд░рдордмрджреНрдз рд╣реИрдВред рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд╡рд╛ рдкрд░ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдпрди рдХрд░рдиреЗ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЗ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред**

### GCP рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЙрдиреНрдирдпрди рдХрд░рдирд╛

рдпрджрд┐ рдЖрдк GCP рдореЗрдВ рдПрдХ рдорд╢реАрди рдХреЗ рдЕрдВрджрд░ рд╣реИрдВ рддреЛ рдЖрдкрдХреЛ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЙрдиреНрдирдпрди рдХрд░рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ:

{% content-ref url="gcp-local-privilege-escalation-ssh-pivoting.md" %}
[gcp-local-privilege-escalation-ssh-pivoting.md](gcp-local-privilege-escalation-ssh-pivoting.md)
{% endcontent-ref %}

## рд╕рдВрджрд░реНрдн

* [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)
* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/#gcp-privesc-scanner)
* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг AWS рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг GCP рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдФрд░ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж рдкрд░ рд╣рдореЗрдВ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>
{% endhint %}
