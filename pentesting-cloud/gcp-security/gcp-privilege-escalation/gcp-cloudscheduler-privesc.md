# GCP - Cloudscheduler Εscalation προνομίων

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Κοινοποιήστε κόλπα χάκερ υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο github.

</details>
{% endhint %}

## cloudscheduler

### `cloudscheduler.jobs.create` , `iam.serviceAccounts.actAs`, (`cloudscheduler.locations.list`)

Ένας επιτιθέμενος με αυτές τις άδειες θα μπορούσε να εκμεταλλευτεί το **Cloud Scheduler** για να **πιστοποιήσει τις εργασίες cron ως ένα συγκεκριμένο Λογαριασμό Υπηρεσίας**. Με τη δημιουργία ενός αιτήματος HTTP POST, ο επιτιθέμενος προγραμματίζει ενέργειες, όπως η δημιουργία ενός κάδου αποθήκευσης, να εκτελούνται υπό την ταυτότητα του Λογαριασμού Υπηρεσίας. Αυτή η μέθοδος εκμεταλλεύεται τη **δυνατότητα του Scheduler να στοχεύει σε `*.googleapis.com` σημεία έναρξης και να πιστοποιεί αιτήματα**, επιτρέποντας στον επιτιθέμενο να χειρίζεται απευθείας τα σημεία έναρξης των Google API χρησιμοποιώντας ένα απλό `gcloud` εντολή.

Παράδειγμα για τη δημιουργία μιας νέας εργασίας που θα χρησιμοποιήσει ένα συγκεκριμένο Λογαριασμό Υπηρεσίας για να δημιουργήσει ένα νέο κάδο αποθήκευσης εκ μέρους μας, θα μπορούσαμε να εκτελέσουμε την ακόλουθη εντολή:

{% code overflow="wrap" %}
```bash
gcloud scheduler jobs create http test –schedule='* * * * *' –uri='https://storage.googleapis.com/storage/v1/b?project=<PROJECT-ID>' --message-body "{'name':'new-bucket-name'}" --oauth-service-account-email 111111111111-compute@developer.gserviceaccount.com –headers Content-Type=application/json
```
{% endcode %}

Για την ανάδειξη προνομίων, ένας **επιτιθέμενος απλώς δημιουργεί ένα αίτημα HTTP προς το API που επιθυμεί, προσωποποιώντας το συγκεκριμένο Λογαριασμό Υπηρεσίας**

## Αναφορές

* [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκινγκ υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
{% endhint %}
