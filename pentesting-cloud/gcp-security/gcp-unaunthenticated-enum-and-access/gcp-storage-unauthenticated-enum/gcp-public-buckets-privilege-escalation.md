# GCP - Genel Kovalar Ayrıcalık Yükseltme

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **HackTricks** ve **HackTricks Cloud** github depolarına PR göndererek hackleme püf noktalarını paylaşın.

</details>
{% endhint %}

## Kovalar Ayrıcalık Yükseltme

Eğer kova politikası "allUsers" veya "allAuthenticatedUsers"ın **kova politikasını değiştirmesine izin veriyorsa** (the **storage.buckets.setIamPolicy** izni)**,** o zaman herkes kova politikasını değiştirebilir ve kendisine tam erişim sağlayabilir.

### İzinleri Kontrol Etme

Bir kova üzerindeki izinleri kontrol etmenin 2 yolu vardır. İlk yöntem, istekte bulunarak izinleri kontrol etmektir: `https://www.googleapis.com/storage/v1/b/BUCKET_NAME/iam` veya `gsutil iam get gs://BUCKET_NAME` komutunu çalıştırmaktır.

Ancak, kullanıcı (potansiyel olarak allUsers veya allAuthenticatedUsers'a ait) kovanın iam politikasını okuma iznine (storage.buckets.getIamPolicy) sahip değilse, bu çalışmayacaktır.

Her zaman çalışacak diğer seçenek, belirli bir izne sahip olup olmadığınızı belirlemek için kovanın testPermissions uç noktasını kullanmaktır. Örneğin şuna erişerek: `https://www.googleapis.com/storage/v1/b/BUCKET_NAME/iam/testPermissions?permissions=storage.buckets.delete&permissions=storage.buckets.get&permissions=storage.buckets.getIamPolicy&permissions=storage.buckets.setIamPolicy&permissions=storage.buckets.update&permissions=storage.objects.create&permissions=storage.objects.delete&permissions=storage.objects.get&permissions=storage.objects.list&permissions=storage.objects.update`

### Yükseltme

`Tüm Kimliği Doğrulanmış Kullanıcılara` `Depolama Yöneticisi` ayrıcalığını vermek için şunu çalıştırmak mümkündür:
```
gsutil iam ch group:allAuthenticatedUsers:admin gs://BUCKET_NAME
```
Başka bir saldırı, **kovaı kaldırıp kendi hesabınızda yeniden oluşturarak sahipliği çalmak** olabilir.

## Referanslar

* [https://rhinosecuritylabs.com/gcp/google-cloud-platform-gcp-bucket-enumeration/](https://rhinosecuritylabs.com/gcp/google-cloud-platform-gcp-bucket-enumeration/)

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitimi AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitimi GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarını paylaşarak PR'ler göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>
{% endhint %}
