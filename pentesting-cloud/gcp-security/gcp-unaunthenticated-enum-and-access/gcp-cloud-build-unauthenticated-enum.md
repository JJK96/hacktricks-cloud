# GCP - Cloud Build Kimlik Doğrulamasız Enum

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın veya **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'ı takip edin.**
* **Hacking püf noktalarını paylaşarak** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına PR gönderin.

</details>
{% endhint %}

## Cloud Build

Cloud Build hakkında daha fazla bilgi için şu sayfaya bakın:

{% content-ref url="../gcp-services/gcp-cloud-build-enum.md" %}
[gcp-cloud-build-enum.md](../gcp-services/gcp-cloud-build-enum.md)
{% endcontent-ref %}

### cloudbuild.yml

Bir dosya olan **`cloudbuild.yml`** içeren bir depo üzerinde yazma erişiminiz varsa, bu dosyayı **arka kapı** olarak kullanabilirsiniz, bu dosya Cloud Build içinde **yürütülecek komutları belirtir** ve sırları dışa çıkarabilir, yapılan işi tehlikeye atabilir ve ayrıca **Cloud Build hizmet hesabını** tehlikeye atabilirsiniz.

{% hint style="info" %}
GCP'nin, yöneticilere dış PR'lerden yapılan derleme sistemlerinin yürütülmesini kontrol etmelerine izin verme seçeneği olan "Yorum Kontrolü" vardır. Yorum Kontrolü, işbirlikçilerin/proje sahiplerinin **derlemeyi tetiklemek için “/gcbrun” yorumunu yapmaları gerektiği** özelliğidir ve bu özellik kullanılarak, internetteki herhangi bir kişinin derleme sistemlerinizi tetiklemesini önler.
{% endhint %}

Benzer bilgiler için Github Actions'ı nasıl saldırabileceğinizi kontrol etmek için şu sayfaya bakabilirsiniz (bu sayfaya benzer):

{% content-ref url="../../../pentesting-ci-cd/github-security/abusing-github-actions/" %}
[abusing-github-actions](../../../pentesting-ci-cd/github-security/abusing-github-actions/)
{% endcontent-ref %}

### PR Onayları

Tetikleyici PR olduğunda **herkesin genel depolara PR yapabileceği** için sadece **herhangi bir PR ile tetikleyicinin yürütülmesine izin vermek** çok tehlikeli olacaktır. Bu nedenle, varsayılan olarak, yürütme yalnızca **sahipler ve işbirlikçiler için otomatik olacaktır** ve diğer kullanıcıların PR'leri ile tetikleyiciyi yürütmek için bir sahip veya işbirlikçinin `/gcbrun` yorum yapması gerekmektedir.

<figure><img src="../../../.gitbook/assets/image (339).png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="danger" %}
Bu nedenle, bu **`Gerekli Değil`** olarak ayarlanmışsa, bir saldırgan tetikleyiciyi yürütecek olan **`cloudbuild.yml`** dosyasına kötü amaçlı kod yürütme ekleyerek bir dalda PR yapabilir ve cloudbuild yürütmesini tehlikeye atabilir (unutmayın ki cloudbuild kodu PR'dAN indirecektir, bu nedenle kötü amaçlı **`cloudbuild.yml`** dosyasını yürütecektir).
{% endhint %}

Ayrıca, bir PR gönderdiğinizde bir cloudbuild yürütülmesinin yapılması gerekip gerekmediğini görmek kolaydır çünkü Github'da görünür:

<figure><img src="../../../.gitbook/assets/image (340).png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Dolayısıyla, cloudbuild yürütülmesi gerçekleştirilmese bile saldırgan, şirkete ait bir GCP projesinin **proje adını** görebilecektir.
{% endhint %}

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın veya **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'ı takip edin.**
* **Hacking püf noktalarını paylaşarak** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına PR gönderin.

</details>
{% endhint %}
