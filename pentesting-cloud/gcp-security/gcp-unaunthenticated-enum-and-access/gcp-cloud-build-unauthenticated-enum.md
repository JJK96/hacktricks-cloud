# GCP - Cloud Build Ongeverifieerde Enum

{% hint style="success" %}
Leer & oefen AWS Hack:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Controleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

## Cloud Build

Vir meer inligting oor Cloud Build, kyk:

{% content-ref url="../gcp-services/gcp-cloud-build-enum.md" %}
[gcp-cloud-build-enum.md](../gcp-services/gcp-cloud-build-enum.md)
{% endcontent-ref %}

### cloudbuild.yml

As jy skryftoegang oor 'n argief wat 'n l√™er met die naam **`cloudbuild.yml`** bevat, kompromitteer, kan jy hierdie l√™er **agterdeur** maak, wat die **opdragte spesifiseer wat binne 'n Cloud Build uitgevoer gaan word** en die geheime uitlek, kompromitteer wat gedoen word en ook die **Cloud Build-diensrekening** kompromitteer.

{% hint style="info" %}
Let daarop dat GCP die opsie het om administrateurs toe te laat om die uitvoering van boustelsels vanaf eksterne PR's te beheer via "Comment Control". Comment Control is 'n kenmerk waar medewerkers/projekteienaars **" /gcbrun " moet kommentaar lewer om die bou te aktiveer** teen die PR en deur hierdie kenmerk te gebruik, voorkom dit inherent dat enigiemand op die internet jou boustelsels kan aktiveer.
{% endhint %}

Vir enige verwante inligting kan jy die bladsy oor hoe om Github-handelinge aan te val (soortgelyk aan hierdie) nagaan:

{% content-ref url="../../../pentesting-ci-cd/github-security/abusing-github-actions/" %}
[abusing-github-actions](../../../pentesting-ci-cd/github-security/abusing-github-actions/)
{% endcontent-ref %}

### PR-goedkeurings

Wanneer die aansporing PR is omdat **enigiemand PR's na openbare argiewe kan doen**, sou dit baie gevaarlik wees om net **die uitvoering van die aansporing met enige PR toe te laat**. Daarom sal die uitvoering standaard slegs **outomaties vir eienaars en medewerkers** wees, en om die aansporing met ander gebruikers se PR's uit te voer, moet 'n eienaar of medewerker kommentaar lewer `/gcbrun`.

<figure><img src="../../../.gitbook/assets/image (339).png" alt="" width="563"><figcaption></figcaption></figure>

{% hint style="danger" %}
Daarom, as dit op **`Nie vereis nie`** ingestel is, kan 'n aanvaller 'n **PR na die tak** uitvoer wat die uitvoering sal aktiveer deur die kwaadwillige kode-uitvoering by die **`cloudbuild.yml`**-l√™er te voeg en die cloudbuild-uitvoering te kompromitteer (let daarop dat cloudbuild die kode VAN die PR sal aflaai, sodat dit die kwaadwillige **`cloudbuild.yml`** sal uitvoer).
{% endhint %}

Daarbenewens is dit maklik om te sien of 'n sekere cloudbuild-uitvoering uitgevoer moet word wanneer jy 'n PR stuur omdat dit in Github verskyn:

<figure><img src="../../../.gitbook/assets/image (340).png" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
Dus, selfs al word die cloudbuild nie uitgevoer nie, sal die aanvaller in staat wees om die **projeknaam van 'n GCP-projek** wat aan die maatskappy behoort, te sien.
{% endhint %}

{% hint style="success" %}
Leer & oefen AWS Hack:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
