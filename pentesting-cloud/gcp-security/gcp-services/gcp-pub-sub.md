# GCP - Pub/Sub Enum

{% hint style="success" %}
Leer & oefen AWS Hack:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

## Pub/Sub <a href="#reviewing-cloud-pubsub" id="reviewing-cloud-pubsub"></a>

[Google **Cloud Pub/Sub**](https://cloud.google.com/pubsub/) word beskryf as 'n diens wat die uitruil van boodskappe tussen onafhanklike toepassings fasiliteer. Die kernkomponente sluit **onderwerpe** in waaraan aansoeke kan **inteken**. Ingetekende aansoeke het die vermo√´ om **boodskappe te stuur en te ontvang**. Elke boodskap bestaan uit die werklike inhoud saam met geassosieerde metadata.

Die **onderwerp is die tou** waar boodskappe heen gestuur gaan word, terwyl die **inskrywings** die **voorwerpe** is wat gebruikers gaan gebruik om **toegang tot boodskappe in die onderwerpe** te verkry. Daar kan meer as **1 inskrywing per onderwerp** wees en daar is 4 tipes inskrywings:

* **Trek**: Die gebruiker(s) van hierdie inskrywing moet vir boodskappe trek.
* **Druk**: 'n URL-eindpunt word aangedui en boodskappe sal onmiddellik daarna gestuur word.
* **Groot vraag tabel**: Soos druk, maar stel die boodskappe binne 'n Groot vraag tabel.
* **Wolkmagazyn**: Stuur boodskappe direk na 'n bestaande emmer.

Standaard verval 'n **inskrywing na 31 dae**, alhoewel dit ingestel kan word om nooit te verval nie.

Standaard word 'n boodskap vir 7 dae behou, maar hierdie tyd kan **tot 31 dae verleng** word. Ook, as dit nie binne 10s **bevestig word nie**, gaan dit terug na die tou. Dit kan ook ingestel word dat bevestigde boodskappe steeds gestoor moet word.

'n Onderwerp word standaard versleutel met 'n **Google-bestuurde versleuteling sleutel**. Maar 'n **CMEK** (Klantbestuurde Versleuteling Sleutel) van KMS kan ook gekies word.

**Dooie brief**: Inskrywings kan 'n **maksimum aantal afleweringpogings** instel. Wanneer 'n boodskap nie afgelewer kan word nie, word dit **herpubliseer na die gespesifiseerde dooie brief onderwerp**.

### Snapskote & Skemas

'n Snapskoot is 'n kenmerk wat **die toestand van 'n inskrywing op 'n spesifieke tydstip vasvang**. Dit is essensieel 'n konstante **back-up van die onbevestigde boodskappe in 'n inskrywing**. Deur 'n snagskoot te skep, behou jy die boodskapbevestigingstoestand van die inskrywing, wat jou in staat stel om boodskapverbruik van die punt af voort te sit waar die snagskoot geneem is, selfs nadat die oorspronklike boodskappe andersins verwyder sou wees.\
As jy baie gelukkig is, kan 'n snagskoot **ou sensitiewe inligting** bevat van toe die snagskoot geneem is.

Wanneer jy 'n onderwerp skep, kan jy aandui dat die **onderwerpboodskappe 'n skema moet volg**.

### Enumerasie
```bash
# Get a list of topics in the project
gcloud pubsub topics list
gcloud pubsub topics describe <topic>
gcloud pubsub topics list-subscriptions <topic>
gcloud pubsub topics get-iam-policy <topic>

# Get a list of subscriptions across all topics
gcloud pubsub subscriptions list
gcloud pubsub subscriptions describe <subscription>
gcloud pubsub subscriptions get-iam-policy <subscription>

# Get list of schemas
gcloud pubsub schemas list
gcloud pubsub schemas describe <schema>
gcloud pubsub schemas list-revisions <schema>

# Get list of snapshots
gcloud pubsub snapshots list
gcloud pubsub snapshots describe <snapshot>
```
Togtans & Na-exploitasie

{% content-ref url="../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md" %}
[gcp-pub-sub-post-exploitation.md](../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md)
{% endcontent-ref %}

## Pub/Sub Lite

[**Pub/Sub Lite**](https://cloud.google.com/pubsub/docs/choosing-pubsub-or-lite) is 'n boodskapdiens met **zonale stoorplek**. Pub/Sub Lite kos 'n fraksie van Pub/Sub en is bedoel vir ho√´ volume stroom (tot 10 miljoen boodskappe per sekonde) pyplyne en gebeurtenisgedrewe stelsels waar lae koste die prim√™re oorweging is.

In PubSub Lite is daar **onderwerpe** en **inskrywings**, daar is nie **momentopnames** en **skemas** nie en daar is:

* **Reserverings**: Pub/Sub Lite Reserverings is 'n funksie wat gebruikers toelaat om kapasiteit in 'n spesifieke streek te reserveer vir hul boodskapstrome.
* **Operasies**: Verwys na die aksies en take wat betrokke is by die bestuur en administrasie van Pub/Sub Lite.

### Opsomming
```bash
# lite-topics
gcloud pubsub lite-topics list
gcloud pubsub lite-topics describe <topic>
gcloud pubsub lite-topics list-subscriptions <topic>

# lite-subscriptions
gcloud pubsub lite-subscriptions list
gcloud pubsub lite-subscriptions describe <subscription>

# lite-reservations
gcloud pubsub lite-reservations list
gcloud pubsub lite-reservations describe <topic>
gcloud pubsub lite-reservations list-topics <topic>

# lite-operations
gcloud pubsub lite-operations list
gcloud pubsub lite-operations describe <topic>
```
{% hint style="success" %}
Leer & oefen AWS-hacking: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP-hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
