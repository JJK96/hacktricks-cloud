# GCP - –ü–µ—Ä–µ–ª—ñ–∫ —Å—Ö–æ–≤–∏—â

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º AWS: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–®–∫–æ–ª–∞ –≤–∑–ª–æ–º—É HackTricks –¥–ª—è –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ —á–µ—Ä–≤–æ–Ω–∏—Ö –∫–æ–º–∞–Ω–¥ AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–®–∫–æ–ª–∞ –≤–∑–ª–æ–º—É HackTricks –¥–ª—è –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ —á–µ—Ä–≤–æ–Ω–∏—Ö –∫–æ–º–∞–Ω–¥ GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}

## –°—Ö–æ–≤–∏—â–µ

–°—Ö–æ–≤–∏—â–µ Google Cloud Platform (GCP) - —Ü–µ **—Ö–º–∞—Ä–Ω–µ —Å—Ö–æ–≤–∏—â–µ**, —è–∫–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –≤–∏—Å–æ–∫—É –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –æ–±'—î–∫—Ç–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞ –¥–ª—è –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö. –í–æ–Ω–æ –ø—Ä–æ–ø–æ–Ω—É—î **—Ä—ñ–∑–Ω—ñ –∫–ª–∞—Å–∏ —Å—Ö–æ–≤–∏—â** –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ —Ç–∞ –≤–∞—Ä—Ç–æ—Å—Ç—ñ, –≤–∫–ª—é—á–∞—é—á–∏ Standard, Nearline, Coldline —Ç–∞ Archive. –°—Ö–æ–≤–∏—â–µ GCP —Ç–∞–∫–æ–∂ –Ω–∞–¥–∞—î —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó, —Ç–∞–∫—ñ —è–∫ **–ø–æ–ª—ñ—Ç–∏–∫–∏ –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É, –≤–µ—Ä—Å—ñ—é–≤–∞–Ω–Ω—è —Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É**, –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–∞ –∑–∞—Ö–∏—Å—Ç—É –¥–∞–Ω–∏—Ö.

–í—ñ–¥—Ä–æ –º–æ–∂–µ –±—É—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–µ –≤ —Ä–µ–≥—ñ–æ–Ω—ñ, –≤ 2 —Ä–µ–≥—ñ–æ–Ω–∞—Ö –∞–±–æ **–≤ –±–∞–≥–∞—Ç—å–æ—Ö —Ä–µ–≥—ñ–æ–Ω–∞—Ö (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)**.

### –¢–∏–ø–∏ —Å—Ö–æ–≤–∏—â

* **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ —Å—Ö–æ–≤–∏—â–µ**: –¶–µ —Ç–∏–ø–æ–≤–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç —Å—Ö–æ–≤–∏—â–∞, —è–∫–∏–π **–ø—Ä–æ–ø–æ–Ω—É—î –≤–∏—Å–æ–∫—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –Ω–∏–∑—å–∫—É –∑–∞—Ç—Ä–∏–º–∫—É –¥–æ—Å—Ç—É–ø—É –¥–æ —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö**. –í–æ–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —à–∏—Ä–æ–∫–æ–≥–æ —Å–ø–µ–∫—Ç—Ä—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, –≤–∫–ª—é—á–∞—é—á–∏ –Ω–∞–¥–∞–Ω–Ω—è –≤–º—ñ—Å—Ç—É –≤–µ–±-—Å–∞–π—Ç—ñ–≤, –ø–æ—Ç–æ–∫–æ–≤–µ –º–µ–¥—ñ–∞ —Ç–∞ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –∫–æ–Ω–≤–µ—î—Ä—ñ–≤ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ –¥–∞–Ω–∏—Ö.
* **–°—Ö–æ–≤–∏—â–µ Nearline**: –¶–µ–π –∫–ª–∞—Å —Å—Ö–æ–≤–∏—â–∞ –ø—Ä–æ–ø–æ–Ω—É—î **–Ω–∏–∑—å–∫—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è** —Ç–∞ **–Ω–µ–∑–Ω–∞—á–Ω–æ –≤–∏—â—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –¥–æ—Å—Ç—É–ø** –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º —Å—Ö–æ–≤–∏—â–µ–º. –í–æ–Ω–æ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–µ –¥–ª—è –¥–∞–Ω–∏—Ö, –¥–æ —è–∫–∏—Ö —Ä—ñ–¥–∫–æ –∑–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è, –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —Ç–µ—Ä–º—ñ–Ω–æ–º –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è 30 –¥–Ω—ñ–≤. –¶–µ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ç–∞ –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è.
* **–°—Ö–æ–≤–∏—â–µ Coldline**: –¶–µ–π –∫–ª–∞—Å —Å—Ö–æ–≤–∏—â–∞ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è **–¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, –¥–æ —è–∫–∏—Ö —Ä—ñ–¥–∫–æ –∑–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è**, –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —Ç–µ—Ä–º—ñ–Ω–æ–º –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è 90 –¥–Ω—ñ–≤. –í–æ–Ω–æ –ø—Ä–æ–ø–æ–Ω—É—î **–Ω–∏–∑—å–∫—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è** –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑—ñ —Å—Ö–æ–≤–∏—â–µ–º Nearline, –∞–ª–µ –∑ **–≤–∏—â–∏–º–∏ –≤–∏—Ç—Ä–∞—Ç–∞–º–∏ –Ω–∞ –¥–æ—Å—Ç—É–ø**.
* **–°—Ö–æ–≤–∏—â–µ Archive**: –¶–µ–π –∫–ª–∞—Å —Å—Ö–æ–≤–∏—â–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Ö–æ–ª–æ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö, –¥–æ —è–∫–∏—Ö **–¥—É–∂–µ —Ä—ñ–¥–∫–æ –∑–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è**, –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º —Ç–µ—Ä–º—ñ–Ω–æ–º –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è 365 –¥–Ω—ñ–≤. –í–æ–Ω–æ –ø—Ä–æ–ø–æ–Ω—É—î **–Ω–∞–π–Ω–∏–∂—á—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–µ—Ä–µ–¥ —É—Å—ñ—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ —Å—Ö–æ–≤–∏—â GCP**, –∞–ª–µ –∑ **–Ω–∞–π–≤–∏—â–∏–º–∏ –≤–∏—Ç—Ä–∞—Ç–∞–º–∏ –Ω–∞ –¥–æ—Å—Ç—É–ø**. –í–æ–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∑ –º–µ—Ç–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –∞–±–æ —Ä–µ–≥—É–ª—è—Ç–∏–≤–Ω–∏—Ö –≤–∏–º–æ–≥.
* **–ê–≤—Ç–æ–∫–ª–∞—Å**: –Ø–∫—â–æ –≤–∏ **–Ω–µ –∑–Ω–∞—î—Ç–µ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ —á–∞—Å—Ç–æ –≤–∏ –±—É–¥–µ—Ç–µ –∑–≤–µ—Ä—Ç–∞—Ç–∏—Å—è** –¥–æ –¥–∞–Ω–∏—Ö, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–±—Ä–∞—Ç–∏ –ê–≤—Ç–æ–∫–ª–∞—Å, —ñ GCP **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–º—ñ–Ω–∏—Ç—å —Ç–∏–ø —Å—Ö–æ–≤–∏—â–∞ –¥–ª—è –≤–∞—Å, —â–æ–± –∑–Ω–∏–∑–∏—Ç–∏ –≤–∏—Ç—Ä–∞—Ç–∏**.

### –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É

–ó–∞ **–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º** —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –∫–µ—Ä—É–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø–æ–º —á–µ—Ä–µ–∑ **IAM**, –∞–ª–µ —Ç–∞–∫–æ–∂ –º–æ–∂–Ω–∞ **–∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ACL**.\
–Ø–∫—â–æ –≤–∏ –≤–∏–±–µ—Ä–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ª–∏—à–µ IAM (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) —ñ **–ø—Ä–æ–π–¥–µ 90 –¥–Ω—ñ–≤**, –≤–∏ **–Ω–µ –∑–º–æ–∂–µ—Ç–µ –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ ACL** –¥–ª—è –≤—ñ–¥—Ä–∞.

### –í–µ—Ä—Å—ñ—é–≤–∞–Ω–Ω—è

–ú–æ–∂–ª–∏–≤–æ –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –≤–µ—Ä—Å—ñ—é–≤–∞–Ω–Ω—è, —Ü–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å **–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å—Ç–∞—Ä—ñ –≤–µ—Ä—Å—ñ—ó —Ñ–∞–π–ª—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≤—ñ–¥—Ä–∞**. –ú–æ–∂–ª–∏–≤–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ **–∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–µ—Ä—Å—ñ–π, —è–∫—ñ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏** —Ç–∞ –Ω–∞–≤—ñ—Ç—å **—è–∫ –¥–æ–≤–≥–æ** –≤–∏ —Ö–æ—á–µ—Ç–µ, —â–æ–± **–Ω–µ–ø–æ—Ç–æ—á–Ω—ñ** –≤–µ—Ä—Å—ñ—ó (—Å—Ç–∞—Ä—ñ –≤–µ—Ä—Å—ñ—ó) —ñ—Å–Ω—É–≤–∞–ª–∏. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ **7 –¥–Ω—ñ–≤ –¥–ª—è —Ç–∏–ø—É Standard**.

**–ú–µ—Ç–∞–¥–∞–Ω—ñ –Ω–µ–ø–æ—Ç–æ—á–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è**. –ö—Ä—ñ–º —Ç–æ–≥–æ, **ACL –Ω–µ–ø–æ—Ç–æ—á–Ω–∏—Ö –≤–µ—Ä—Å—ñ–π —Ç–∞–∫–æ–∂ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è**, —Ç–æ–º—É —Å—Ç–∞—Ä—ñ –≤–µ—Ä—Å—ñ—ó –º–æ–∂—É—Ç—å –º–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ ACL –≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó.

–î—ñ–∑–Ω–∞–π—Ç–µ—Å—è –±—ñ–ª—å—à–µ –≤ [**–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó**](https://cloud.google.com/storage/docs/object-versioning).

### –ü–æ–ª—ñ—Ç–∏–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

–í–∫–∞–∂—ñ—Ç—å, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ **–¥–æ–≤–≥–æ** –≤–∏ —Ö–æ—á–µ—Ç–µ **–∑–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≤—ñ–¥—Ä–∞** (–¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–æ –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –ø—Ä–∏–Ω–∞–π–º–Ω—ñ).\
–û–¥–Ω–æ—á–∞—Å–Ω–æ –º–æ–∂–µ –±—É—Ç–∏ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ –ª–∏—à–µ –æ–¥–Ω–µ –∑ **–≤–µ—Ä—Å—ñ—é–≤–∞–Ω–Ω—è –∞–±–æ –ø–æ–ª—ñ—Ç–∏–∫—É –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è**.

### –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –æ–±'—î–∫—Ç–∏ **—à–∏—Ñ—Ä—É—é—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–µ—Ä–æ–≤–∞–Ω–∏—Ö –∫–ª—é—á—ñ–≤ Google**, –∞–ª–µ –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **–∫–ª—é—á –≤—ñ–¥ KMS**.

### –ü—É–±–ª—ñ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø

–ú–æ–∂–ª–∏–≤–æ –Ω–∞–¥–∞—Ç–∏ **–∑–æ–≤–Ω—ñ—à–Ω—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º** (—É–≤—ñ–π—à–æ–≤—à–∏ –≤ GCP –∞–±–æ –Ω—ñ) **–¥–æ—Å—Ç—É–ø –¥–æ –≤–º—ñ—Å—Ç—É –≤—ñ–¥—Ä–∞**.\
–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, –∫–æ–ª–∏ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –≤—ñ–¥—Ä–æ, –æ–ø—Ü—ñ—è **–ø—É–±–ª—ñ—á–Ω–æ–≥–æ –≤–∏–∫–ª–∞–¥–∞–Ω–Ω—è –≤—ñ–¥—Ä–∞ –≤–∏–º–∫–Ω–µ–Ω–∞**, –∞–ª–µ –∑ –¥–æ—Å—Ç–∞—Ç–Ω—ñ–º–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏ —ó—ó –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏.

**–§–æ—Ä–º–∞—Ç URL** –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –≤—ñ–¥—Ä–∞ - **`https://storage.googleapis.com/<—ñ–º'—è-–≤—ñ–¥—Ä–∞>` –∞–±–æ `https://<—ñ–º'—è_–≤—ñ–¥—Ä–∞>.storage.googleapis.com`** (–æ–±–∏–¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ —î –¥—ñ–π—Å–Ω–∏–º–∏).

### –ö–ª—é—á—ñ HMAC

–ö–ª—é—á HMAC - —Ü–µ —Ç–∏–ø _–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è_ —ñ –º–æ–∂–µ –±—É—Ç–∏ **–ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ –æ–±–ª—ñ–∫–æ–≤–∏–º –∑–∞–ø–∏—Å–æ–º —Å–ª—É–∂–±–∏ –∞–±–æ –æ–±–ª—ñ–∫–æ–≤–∏–º –∑–∞–ø–∏—Å–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ Cloud Storage**. –í–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –∫–ª—é—á HMAC –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è _–ø—ñ–¥–ø–∏—Å—ñ–≤_, —è–∫—ñ –ø–æ—Ç—ñ–º –≤–∫–ª—é—á–∞—é—Ç—å—Å—è –≤ –∑–∞–ø–∏—Ç–∏ –¥–æ Cloud Storage. –ü—ñ–¥–ø–∏—Å–∏ –ø–æ–∫–∞–∑—É—é—Ç—å, —â–æ **–¥–∞–Ω–∏–π –∑–∞–ø–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –∞–±–æ –æ–±–ª—ñ–∫–æ–≤–∏–º –∑–∞–ø–∏—Å–æ–º —Å–ª—É–∂–±–∏**.

–£ –∫–ª—é—á–∞—Ö HMAC —î –¥–≤—ñ –æ—Å–Ω–æ–≤–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏: _—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø—É_ —Ç–∞ _—Å–µ–∫—Ä–µ—Ç_.

*   **–Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø—É**: –ê–ª—Ñ–∞–≤—ñ—Ç–Ω–æ-—Ü–∏—Ñ—Ä–æ–≤–∏–π —Ä—è–¥–æ–∫, –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ –ø–µ–≤–Ω–æ—é —Å–ª—É–∂–±–æ—é –∞–±–æ –æ–±–ª—ñ–∫–æ–≤–∏–º –∑–∞–ø–∏—Å–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –ö–æ–ª–∏ –≤—ñ–Ω –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ –æ–±–ª—ñ–∫–æ–≤–∏–º –∑–∞–ø–∏—Å–æ–º —Å–ª—É–∂–±–∏, —Ä—è–¥–æ–∫ –º–∞—î –¥–æ–≤–∂–∏–Ω—É 61 —Å–∏–º–≤–æ–ª, –∞ –∫–æ–ª–∏ –≤—ñ–Ω –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ –æ–±–ª—ñ–∫–æ–≤–∏–º –∑–∞–ø–∏—Å–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —Ä—è–¥–æ–∫ –º–∞—î –¥–æ–≤–∂–∏–Ω—É 24 —Å–∏–º–≤–æ–ª–∏. –ù–∏–∂—á–µ –Ω–∞–≤–µ–¥–µ–Ω–æ –ø—Ä–∏–∫–ª–∞–¥ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞ –¥–æ—Å—Ç—É–ø—É:

`GOOGTS7C7FUP3AIRVJTE2BCDKINBTES3HC2GY5CBFJDCQ2SYHV6A6XXVTJFSA`
*   **–°–µ–∫—Ä–µ—Ç**: 40-—Å–∏–º–≤–æ–ª—å–Ω–∏–π —Ä—è–¥–æ–∫, –∑–∞–∫–æ–¥–æ–≤–∞–Ω–∏–π —É —Ñ–æ—Ä–º–∞—Ç—ñ Base-64, —è–∫–∏–π –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ –ø–µ–≤–Ω–∏–º —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–æ–º –¥–æ—Å—Ç—É–ø—É. –°–µ–∫—Ä–µ—Ç - —Ü–µ –∫–ª—é—á, —è–∫–∏–π –≤—ñ–¥–æ–º–∏–π –ª–∏—à–µ –≤–∞–º —Ç–∞ Cloud Storage. –í–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —Å–≤—ñ–π —Å–µ–∫—Ä–µ—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å—ñ–≤ —É –ø—Ä–æ—Ü–µ—Å—ñ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó. –ù–∏–∂—á–µ –Ω–∞–≤–µ–¥–µ–Ω–æ –ø—Ä–∏–∫–ª–∞–¥ —Å–µ–∫—Ä–µ—Ç—É:

`bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ`

–Ø–∫ **—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø—É, —Ç–∞–∫ —ñ —Å–µ–∫—Ä–µ—Ç —É–Ω—ñ–∫–∞–ª—å–Ω–æ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É—é—Ç—å –∫–ª—é—á HMAC**, –∞–ª–µ —Å–µ–∫—Ä–µ—Ç —î –Ω–∞–±–∞–≥–∞—Ç–æ –±—ñ–ª—å—à —á—É—Ç–ª–∏–≤–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è **—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å—ñ–≤**.

### –ü–µ—Ä–µ–ª—ñ–∫
```bash
# List all storage buckets in project
gsutil ls

# Get each bucket configuration (protections, CLs, times, configs...)
gsutil ls -L

# List contents of a specific bucket
gsutil ls gs://bucket-name/
gsutil ls -r gs://bucket-name/ # Recursive
gsutil ls -a gs://bucket-name/ # Get ALL versions of objects

# Cat the context of a file without copying it locally
gsutil cat 'gs://bucket-name/folder/object'
gsutil cat 'gs://bucket-name/folder/object#<num>' # cat specific version

# Copy an object from the bucket to your local storage for review
gsutil cp gs://bucket-name/folder/object ~/

# List using a raw OAuth token
## Useful because "CLOUDSDK_AUTH_ACCESS_TOKEN" and "gcloud config set auth/access_token_file" doesn't work with gsutil
curl -H "Authorization: Bearer $TOKEN" "https://storage.googleapis.com/storage/v1/b/<storage-name>/o"
# Download file content from bucket
curl -H "Authorization: Bearer $TOKEN" "https://storage.googleapis.com/storage/v1/b/supportstorage-58249/o/flag.txt?alt=media" --output -

# Enumerate HMAC keys
gsutil hmac list

# Get permissions
gcloud storage buckets get-iam-policy gs://bucket-name/
gcloud storage objects get-iam-policy gs://bucket-name/folder/object
```
–Ø–∫—â–æ –≤–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –ø–æ–º–∏–ª–∫—É –≤—ñ–¥–º–æ–≤–∏ —É –¥–æ—Å—Ç—É–ø—ñ –¥–æ –ø–µ—Ä–µ–ª—ñ–∫—É –≤—ñ–¥—Ä–∞, –≤–∏ –≤—Å–µ —â–µ –º–æ–∂–µ—Ç–µ –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –≤–º—ñ—Å—Ç—É. –¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –≤–∏ –∑–Ω–∞—î—Ç–µ –ø—Ä–æ –∫–æ–Ω–≤–µ–Ω—Ü—ñ—é —ñ–º–µ–Ω –≤—ñ–¥—Ä–∞, –≤–∏ –º–æ–∂–µ—Ç–µ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –º–æ–∂–ª–∏–≤–∏—Ö –Ω–∞–∑–≤ —ñ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ –Ω–∏—Ö –¥–æ—Å—Ç—É–ø:
```bash
for i in $(cat wordlist.txt); do gsutil ls -r gs://"$i"; done
```
–ó –¥–æ–∑–≤–æ–ª–∞–º–∏ `storage.objects.list` —Ç–∞ `storage.objects.get` –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤—Å—ñ —Ç–µ–∫–∏ —Ç–∞ —Ñ–∞–π–ª–∏ –∑—ñ —Å—Ö–æ–≤–∏—â–∞ –¥–ª—è —ó—Ö –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. –í–∏ –º–æ–∂–µ—Ç–µ –¥–æ—Å—è–≥—Ç–∏ —Ü—å–æ–≥–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ü—å–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä—ñ—é Python:
```python
import requests
import xml.etree.ElementTree as ET

def list_bucket_objects(bucket_name, prefix='', marker=None):
url = f"https://storage.googleapis.com/{bucket_name}?prefix={prefix}"
if marker:
url += f"&marker={marker}"
response = requests.get(url)
xml_data = response.content
root = ET.fromstring(xml_data)
ns = {'ns': 'http://doc.s3.amazonaws.com/2006-03-01'}
for contents in root.findall('.//ns:Contents', namespaces=ns):
key = contents.find('ns:Key', namespaces=ns).text
print(key)
next_marker = root.find('ns:NextMarker', namespaces=ns)
if next_marker is not None:
next_marker_value = next_marker.text
list_bucket_objects(bucket_name, prefix, next_marker_value)

list_bucket_objects('<storage-name>')
```
### –ü—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤

–ù–∞ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —è–∫ **–∑–ª–æ–≤–∂–∏–≤–∞—Ç–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏ –Ω–∞ —Å—Ö–æ–≤–∏—â–µ –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤**:

{% content-ref url="../gcp-privilege-escalation/gcp-storage-privesc.md" %}
[gcp-storage-privesc.md](../gcp-privilege-escalation/gcp-storage-privesc.md)
{% endcontent-ref %}

### –ù–µ–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-storage-unauthenticated-enum/" %}
[gcp-storage-unauthenticated-enum](../gcp-unaunthenticated-enum-and-access/gcp-storage-unauthenticated-enum/)
{% endcontent-ref %}

### –ü—ñ—Å–ª—è–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ–π–Ω–∞ –¥—ñ—è–ª—å–Ω—ñ—Å—Ç—å

{% content-ref url="../gcp-post-exploitation/gcp-storage-post-exploitation.md" %}
[gcp-storage-post-exploitation.md](../gcp-post-exploitation/gcp-storage-post-exploitation.md)
{% endcontent-ref %}

### –ü–æ—Å—Ç—ñ–π–Ω—ñ—Å—Ç—å

{% content-ref url="../gcp-persistence/gcp-storage-persistence.md" %}
[gcp-storage-persistence.md](../gcp-persistence/gcp-storage-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ GitHub.

</details>
{% endhint %}
