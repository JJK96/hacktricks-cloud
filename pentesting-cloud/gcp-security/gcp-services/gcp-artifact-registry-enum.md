# GCP - Καταγραφή Αντικειμένων Απαρίθμηση

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Ειδικός Ερυθρού Συνεργείου HackTricks AWS)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης των HackTricks:

* Αν θέλετε να δείτε την **εταιρεία σας διαφημισμένη στα HackTricks** ή να **κατεβάσετε τα HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα τηλεγραφήματος**](https://t.me/peass) ή **ακολουθήστε** με στο **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs** στα [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
* &#x20;αποθετήρια github.

</details>

## Βασικές Πληροφορίες

Το Google Cloud Artifact Registry είναι ένα πλήρως διαχειριζόμενο υπηρεσία που σάς επιτρέπει να **διαχειρίζεστε, αποθηκεύετε και ασφαλίζετε τα αντικείμενα λογισμικοών** σας. Βασικά είναι ένα αποθετήριο για **αποθήκευση εξαρτήσεων κατασκευής**, όπως εικόνες **Docker**, πακέτα **Maven**, πακέτα npm και άλλους τύπους αντικειμένων. Χρησιμοποιείται **συχνά σε αγωγούς CI/CD** για την αποθήκευση και την έκδοση των αντικειμένων που παράγονται κατά τη διαδικασία ανάπτυξης λογισμικού.

Τα βασικά χαρακτηριστικά του Artifact Registry περιλαμβάνουν:

1. **Ενοποιημένο Αποθετήριο**: Υποστηρίζει **πολλούς τύπους αντικειμένων**, επιτρέποντάς σας να έχετε ένα μόνο αποθετήριο για εικόνες Docker, πακέτα γλωσσών (όπως το Maven της Java, το npm του Node.js) και άλλους τύπους αντικειμένων, επιτρέποντας συνεπή ελέγχους πρόσβασης και μια ενοποιημένη προβολή σε όλα τα αντικείμενά σας.
2. **Πλήρως Διαχειριζόμενο**: Ως υπηρεσία διαχείρισης, αναλαμβάνει τη φροντίδα της υποκείμενης υποδομής, της κλιμάκωσης και της ασφάλειας, μειώνοντας τον υπερβολικό φόρτο συντήρησης για τους χρήστες.
3. **Ελεγχοί Πρόσβασης με Λεπτομερεία**: Ενσωματώνεται με τη Διαχείριση Ταυτότητας και Πρόσβασης του Google Cloud (IAM), επιτρέποντάς σας να ορίσετε ποιος μπορεί να έχει πρόσβαση, να μεταφορτώσει ή να κατεβάσει αντικείμενα στα αποθετήριά σας.
4. **Γεω-αναπαραγωγή**: Υποστηρίζει την αναπαραγωγή αντικειμένων σε πολλές περιοχές, βελτιώνοντας την ταχύτητα λήψης και εξασφαλίζοντας τη διαθεσιμότητα.
5. **Ενσωμάτωση με Υπηρεσίες Google Cloud**: Λειτουργεί αρμονικά με **άλλες υπηρεσίες GCP όπως το Cloud Build, το Kubernetes Engine και το Compute Engine**, κάνοντάς το μια βολική επιλογή για ομάδες που ήδη εργάζονται εντός του οικοσυστήματος του Google Cloud.
6. **Ασφάλεια**: Προσφέρει χαρακτηριστικά όπως **σάρωση ευπαθειών και ανάλυση εμφυλίου** για να βοηθήσει στη διασφάλιση ότι τα αποθηκευμένα αντικείμενα είναι ασφαλή και απαλλαγμένα από γνωστά ζητήματα ασφάλειας.

### Μορφές και Λειτουργίες

Κατά τη δημιουργία ενός νέου αποθετηρίου είναι δυνατόν να **επιλέξετε τη μορφή/τύπο** του αποθετηρίου μεταξύ πολλών όπως Docker, Maven, npm, Python... και τη λειτουργία που συνήθως μπορεί να είναι μία από αυτές τις τρεις:

* **Κανονικό Αποθετήριο**: Προεπιλεγμένη λειτουργία για **αποθήκευση των δικών σας αντικειμένων** (όπως εικόνες Docker, πακέτα Maven) απευθείας στο GCP. Είναι ασφαλές, κλιμακούμενο και ενσωματώνεται καλά μέσα στο οικοσύστημα του Google Cloud.
* **Απομακρυσμένο Αποθετήριο** (εάν είναι διαθέσιμο): Λειτουργεί ως πρόξενος για **προσωρινή αποθήκευση αντικειμένων από εξωτερικά**, δημόσια αποθετήρια. Βοηθά στην αποτροπή προβλημάτων από αλλαγές στις εξαρτήσεις ανά τον κόσμο και μειώνει την καθυστέρηση με την προσωρινή αποθήκευση συχνά προσπελαζόμενων αντικειμένων.
* **Εικονικό Αποθετήριο** (εάν είναι διαθέσιμο): Παρέχει μια **ενοποιημένη διεπαφή για πρόσβαση σε πολλά (κανονικά ή απομακρυσμένα) αποθετήρια** μέσω ενός μοναδικού σημείου πρόσβασης, απλοποιώντας τη διαμόρφωση στην πλευρά του πελάτη και τη διαχείριση πρόσβασης για αντικείμενα που είναι διασπαρμένα σε διάφορα αποθετήρια.
* Για ένα εικονικό αποθετήριο θα χρειαστεί να **επιλέξετε αποθετήρια και να τους δώσετε προτεραιότητα** (το αποθετήριο με τη μεγαλύτερη προτεραιότητα θα χρησιμοποιηθεί).
* Μπορείτε να **συνδυάσετε απομακρυσμένα και κανονικά** αποθετήρια σε ένα **εικονικό**, εάν η **προτεραιότητα** του **απομακρυσμένου** είναι **μεγαλύτερη** από το κανονικό, **τα πακέτα από το απομακρυσμένο (π.χ. PyPi) θα χρησιμοποιηθούν**. Αυτό θα μπορούσε να οδηγήσει σε **Σύγχυση Εξαρτήσεων**.

Σημειώστε ότι στη **Απομακρυσμένη έκδοση του Docker** είναι δυνατόν να δοθεί ένα όνομα χρήστη και διακριτικό για πρόσβαση στο Docker Hub. Το **διακριτικό αποθηκεύεται στον Διαχειριστή Μυστικών**.

### Κρυπτογράφηση

Όπως αναμένεται, από προεπιλογή χρησιμοποιείται ένα κλειδί που διαχειρίζεται από τη Google, αλλά μπορεί να υποδειχθεί ένα κλειδί που διαχειρίζεται από τον Πελάτη (CMEK).

### Πολιτικές Εκκαθάρισης

* **Διαγραφή αντικειμένων:** Τα αντικείμενα θα **διαγραφούν σύμφωνα με τα κριτήρια της πολιτικής εκκαθάρισης**.
* **Δοκιμή εκτέλεσης:** (Προεπιλεγ
```bash
# Get repositories
gcloud artifacts repositories list
gcloud artifacts repositories describe --location <location> <repo-name>
gcloud artifacts versions list --repository=<repo-name> -location <location> --package <package-name>

# Get settings of a repository (example using python but could be other)
gcloud artifacts print-settings python --repository <repo-name> --location <location>

# Get docker images
gcloud artifacts docker images list us-central1-docker.pkg.dev/<proj-name>/<repo-name>

# Get packages (like python and others...)
gcloud artifacts packages list --repository <repo-name> --location <location>

# Get SBOMB artifacts
gcloud artifacts sbom list

# Get vulnerabilities (docker images)
gcloud artifacts vulnerabilities list us-east1-docker.pkg.dev/project123/repository123/someimage@sha256:49765698074d6d7baa82f
gcloud artifacts docker images list-vulnerabilities projects/<proj-name>/locations/<location>/scans/<scan-uuid>
```
### Εscalation προνομίων

{% content-ref url="../gcp-privilege-escalation/gcp-artifact-registry-privesc.md" %}
[gcp-artifact-registry-privesc.md](../gcp-privilege-escalation/gcp-artifact-registry-privesc.md)
{% endcontent-ref %}

### Μη εξουσιοδοτημένη πρόσβαση

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md" %}
[gcp-artifact-registry-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md)
{% endcontent-ref %}

### Μετά την εκμετάλλευση

{% content-ref url="../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md" %}
[gcp-artifact-registry-post-exploitation.md](../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md)
{% endcontent-ref %}

### Διατήρηση

{% content-ref url="../gcp-persistence/gcp-artifact-registry-persistence.md" %}
[gcp-artifact-registry-persistence.md](../gcp-persistence/gcp-artifact-registry-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 στην [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα τηλεγράφου**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκινγκ υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
{% endhint %}
