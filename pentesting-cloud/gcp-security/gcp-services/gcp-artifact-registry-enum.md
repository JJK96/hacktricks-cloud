# GCP - Artefak Register Enum

<details>

<summary><strong>Leer AWS hak vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat** Kyk na die [**INSKRYWINGSPLANNE**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**Die PEASS Familie**](https://opensea.io/collection/the-peass-family), ons versameling van eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** 💬 [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** my op **Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Deel jou haktruuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
* &#x20;github repos.

</details>

## Basiese Inligting

Google Cloud Artefak Register is 'n ten volle bestuurde diens wat jou toelaat om jou sagteware artefakte te **bestuur, stoor, en beveilig**. Dit is in wese 'n argief vir **die stoor van bou afhanklikhede**, soos **Docker**-beeld, **Maven**, npm-pakkette, en ander tipes artefakte. Dit word **gewoonlik gebruik in CI/CD-pyplyne** vir die stoor en weergawebeheer van die artefakte wat tydens die sagteware-ontwikkelingsproses geproduseer word.

Kernkenmerke van Artefak Register sluit in:

1. **Eenheid Repository**: Dit ondersteun **verskeie tipes artefakte**, wat jou in staat stel om 'n enkele argief vir Docker-beelde, taalpakkette (soos Java se Maven, Node.js se npm), en ander tipes artefakte te hê, wat konsekwente toegangsbeheer en 'n eenvormige aansig oor al jou artefakte moontlik maak.
2. **Ten volle Bestuurde**: As 'n bestuurde diens, sorg dit vir die onderliggende infrastruktuur, skaalbaarheid, en sekuriteit, wat die instandhoudingsoorskot vir gebruikers verminder.
3. **Fynkorrelige Toegangsbeheer**: Dit integreer met Google Cloud se Identiteit en Toegangsbestuur (IAM), wat jou in staat stel om te bepaal wie toegang kan hê tot, artefakte kan oplaai, of aflaai in jou argiewe.
4. **Geo-replikasie**: Dit ondersteun die replikasie van artefakte oor verskeie streke, wat die spoed van aflaaie verbeter en beskikbaarheid verseker.
5. **Integrasie met Google Cloud Dienste**: Dit werk naatloos saam met **ander GCP-dienste soos Cloud Build, Kubernetes Engine, en Compute Engine**, wat dit 'n gerieflike keuse maak vir spanne wat reeds binne die Google Cloud-ekosisteem werk.
6. **Sekuriteit**: Bied kenmerke soos **kwesbaarheidsskandering en houerontleding** om te help verseker dat die gestoorde artefakte veilig is en vry van bekende sekuriteitskwessies.

### Formate en Modi

Wanneer 'n nuwe argief geskep word, is dit moontlik om 'n die formaat/tipe van die argief te **kies uit verskeie soos Docker, Maven, npm, Python...** en die modus wat gewoonlik een van hierdie drie kan wees:

* **Standaard Argief**: Standaardmodus vir **die stoor van jou eie artefakte** (soos Docker-beelde, Maven-pakkette) direk in GCP. Dit is veilig, skaalbaar, en integreer goed binne die Google Cloud-ekosisteem.
* **Afgeleë Argief** (indien beskikbaar): Tree op as 'n proksi vir **die kaching van artefakte van eksterne**, openbare argiewe. Dit help om probleme te voorkom wat voortspruit uit veranderende afhanklikhede stroomop en verminder latensie deur gereeld benaderde artefakte te kacheer.
* **Virtuele Argief** (indien beskikbaar): Verskaf 'n **geunifiseerde koppelvlak om toegang te verkry tot verskeie (standaard of afgeleë) argiewe** deur 'n enkele eindpunt, wat klientkantkonfigurasie en toegangsbestuur vir artefakte wat oor verskeie argiewe versprei is, vereenvoudig.
* Vir 'n virtuele argief sal jy **argiewe moet kies en hulle 'n prioriteit gee** (die argief met die grootste prioriteit sal gebruik word).
* Jy kan **afgeleë en standaard** argiewe in 'n **virtuele** een meng, as die **prioriteit** van die **afgeleë** groter is as die standaard, **pakkette van die afgeleë (PyPi byvoorbeeld) sal gebruik word**. Dit kan lei tot 'n **Afhanklikheidsverwarring.**

Merk op dat in die **Afgeleë weergawe van Docker** dit moontlik is om 'n gebruikersnaam en token te gee om toegang tot Docker Hub te verkry. Die **token word dan gestoor in die Geheime Bestuurder**.

### Versleuteling

Soos verwag, word standaard 'n deur Google bestuurde sleutel gebruik, maar 'n Kliëntbestuurde sleutel kan aangedui word (CMEK).

### Skoonmaakbeleide

* **Verwyder artefakte:** Artefakte sal **verwyder word volgens skoonmaakbeleid**-kriteria.
* **Droë loop:** (Verstek een) Artefakte sal **nie verwyder word nie**. Skoonmaakbeleide sal geëvalueer word, en toetsverwyderingsgebeure na Cloud Audit Logging gestuur word.

### Kwesbaarheidsskandering

Dit is moontlik om die **kwesbaarheidsskanderingsprogram** te aktiveer wat sal nagaan vir kwesbaarhede binne **houerbeelde**.

### Enumerasie
```bash
# Get repositories
gcloud artifacts repositories list
gcloud artifacts repositories describe --location <location> <repo-name>
gcloud artifacts versions list --repository=<repo-name> -location <location> --package <package-name>

# Get settings of a repository (example using python but could be other)
gcloud artifacts print-settings python --repository <repo-name> --location <location>

# Get docker images
gcloud artifacts docker images list us-central1-docker.pkg.dev/<proj-name>/<repo-name>

# Get packages (like python and others...)
gcloud artifacts packages list --repository <repo-name> --location <location>

# Get SBOMB artifacts
gcloud artifacts sbom list

# Get vulnerabilities (docker images)
gcloud artifacts vulnerabilities list us-east1-docker.pkg.dev/project123/repository123/someimage@sha256:49765698074d6d7baa82f
gcloud artifacts docker images list-vulnerabilities projects/<proj-name>/locations/<location>/scans/<scan-uuid>
```
### Voorregverhoging

{% content-ref url="../gcp-privilege-escalation/gcp-artifact-registry-privesc.md" %}
[gcp-artifact-registry-privesc.md](../gcp-privilege-escalation/gcp-artifact-registry-privesc.md)
{% endcontent-ref %}

### Ongeagte Toegang

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md" %}
[gcp-artifact-registry-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md)
{% endcontent-ref %}

### Na-Exploitasi

{% content-ref url="../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md" %}
[gcp-artifact-registry-post-exploitation.md](../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md)
{% endcontent-ref %}

### Volharding

{% content-ref url="../gcp-persistence/gcp-artifact-registry-persistence.md" %}
[gcp-artifact-registry-persistence.md](../gcp-persistence/gcp-artifact-registry-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Leer & oefen AWS Hack: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** 💬 [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
