# GCP - Filestore Enum

{% hint style="success" %}
Jifunze na zoezi la Udukuzi wa AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoezi la Udukuzi wa GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>unga mkono HackTricks</summary>

* Angalia [**mpango wa michango**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Taarifa Msingi

Google Cloud Filestore ni **huduma ya uhifadhi wa faili iliyosimamiwa** iliyoundwa kwa matumizi ya programu zinazohitaji **interface ya mfumo wa faili na mfumo wa faili ulioshirikiwa kwa data**. Huduma hii ina faida kwa kutoa hisa za faili zenye utendaji wa hali ya juu, ambazo zinaweza kuingizwa na huduma mbalimbali za GCP. Matumizi yake yanang'aa katika hali ambapo interface za mfumo wa faili za jadi na semantiki ni muhimu, kama vile katika usindikaji wa media, usimamizi wa maudhui, na nakala rudufu za maktaba za data.

Unaweza kufikiria hii kama **ghala la nyaraka lililoshirikiwa la NFS** lingine - chanzo kinachowezekana cha habari nyeti.

### Mawasiliano

Unapounda kifaa cha Filestore ni **chaguo kuchagua mtandao ambapo kitakuwa kinapatikana**.

Zaidi ya hayo, kwa **default wateja wote kwenye mtandao uliochaguliwa wa VPC na eneo wataweza kufikia**, hata hivyo, ni **chaguo kuzuia pia kwa anwani ya IP** au mbalimbali na kuonyesha haki ya ufikiaji (Msimamizi, Msimamizi Mwangalizi, Mhariri, Mwangalizi) ambayo mtumiaji atapata **kulingana na anwani ya IP**.

Pia inaweza kupatikana kupitia **Uunganisho wa Kufikia Huduma ya Kibinafsi:**

* Ni kwa mtandao wa VPC na inaweza kutumika kwenye huduma zote zilizosimamiwa kama Memorystore, Tensorflow na SQL.
* Ni **kati ya mtandao wako wa VPC na mtandao ulio milikiwa na Google kwa kutumia VPC peering**, kuruhusu mifano na huduma zako kuwasiliana kipekee kwa kutumia **anwani za IP za ndani**.
* Unda mradi uliojitenga kwako upande wa mtengenezaji wa huduma, maana wateja wengine hawashiriki. Utalipwa kwa rasilimali unazotumia tu.
* VPC peering itaingiza njia mpya kwenye VPC yako

### Nakala Rudufu

Inawezekana kuunda **nakala rudufu za hisa za faili**. Hizi zinaweza baadaye **kurejeshwa kwenye asili** kwenye kifaa kipya cha Fileshare au kwenye **vipya**.

### Ufichaji

Kwa default **ufunguo wa kuchakata wa Google uliosimamiwa** utatumika kuchakata data, lakini inawezekana kuchagua **ufunguo wa kuchakata uliosimamiwa na Mteja (CMEK)**.

### Uorodheshaji

Ukipata filestore inayopatikana kwenye mradi, unaweza **kuimount** kutoka kwenye Kifaa chako cha Kuhesabiwa kilichoharibiwa. Tumia amri ifuatayo kuona kama kuna yoyote.

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
Tafadhali kumbuka kuwa huduma ya hifadhi ya faili inaweza kuwa katika **mtandao mpya kabisa ulioanzishwa kwa ajili yake** (ndani ya Uunganisho wa Upatikanaji wa Huduma ya Kibinafsi, ambao ni **rafiki wa VPC**).\
Kwa hivyo unaweza kuhitaji **kuorodhesha marafiki wa VPC** pia kukimbia nmap kwenye hizo anuwai za mtandao.

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
{% endcode %}
{% endhint %}

### Upandishaji wa Mamlaka & Baada ya Kudukuliwa

Hakuna njia za kuinua mamlaka moja kwa moja katika GCP kwa kudhuru huduma hii, lakini kwa kutumia **mbinu za Baada ya Kudukuliwa inawezekana kupata ufikiaji wa data** na labda unaweza kupata baadhi ya siri za kuinua mamlaka:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### Uthabiti

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Jifunze & zoezi la Udukuzi wa AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze & zoezi la Udukuzi wa GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>unga mkono HackTricks</summary>

* Angalia [**mpango wa michango**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **fuata** sisi kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
