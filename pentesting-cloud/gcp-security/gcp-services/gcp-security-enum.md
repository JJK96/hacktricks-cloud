# GCP - Security Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* [**구독 플랜**](https://github.com/sponsors/carlospolop)을 확인하세요!
* **💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**telegram 그룹**](https://t.me/peass)에 가입하거나 **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)을 팔로우하세요.**
* **PR을 제출하여 해킹 트릭을 공유하세요** [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에.

</details>
{% endhint %}

## 기본 정보

Google Cloud Platform (GCP) 보안은 Google Cloud 환경 내의 리소스와 데이터를 보호하기 위해 설계된 **포괄적인 도구 및 관행**을 포함하며, **Security Command Center, Detections and Controls, Data Protection 및 Zero Trust**의 네 가지 주요 섹션으로 나뉩니다.

## **Security Command Center**

Google Cloud Platform (GCP) Security Command Center (SCC)는 조직이 클라우드 자산에 대한 가시성을 확보하고 제어할 수 있도록 하는 **GCP 리소스용 보안 및 위험 관리 도구**입니다. 이는 포괄적인 보안 분석을 제공하고, **잘못된 구성 식별**, 보안 표준 준수 보장, 자동화된 위협 탐지 및 대응을 위한 기타 보안 도구와의 **통합**을 통해 **위협을 감지하고 대응**하는 데 도움을 줍니다.

* **개요**: Security Command Center의 모든 결과를 **시각화하는 패널**.
* 위협: \[프리미엄 필요] 모든 **감지된 위협을 시각화하는 패널. 아래에서 위협에 대해 더 확인하세요**
* **취약점**: GCP 계정에서 **발견된 잘못된 구성을 시각화하는 패널**.
* **준수**: \[프리미엄 필요] 이 섹션은 조직 전체에서 **여러 준수 검사(예: PCI-DSS, NIST 800-53, CIS 벤치마크 등)에 대해 GCP 환경을 테스트**할 수 있습니다.
* **자산**: 이 섹션은 **사용 중인 모든 자산을 보여줍니다**, 시스템 관리자(및 아마도 공격자)가 한 페이지에서 실행 중인 내용을 확인하는 데 매우 유용합니다.
* **발견**: 이는 GCP 보안의 다양한 섹션(단순히 Command Center뿐만 아니라)의 **발견 결과를 테이블에 집계**하여 중요한 발견 결과를 쉽게 시각화할 수 있습니다.
* **소스**: GCP 보안의 다양한 섹션별로 **모든 섹션의 발견 결과 요약**을 보여줍니다.
* **자세**: \[프리미엄 필요] 보안 자세는 GCP 환경의 보안을 **정의, 평가 및 모니터링**할 수 있게 합니다. 이는 GCP의 리소스를 제어/모니터링하는 제약 또는 제한을 정의하는 정책을 생성하여 작동합니다. [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy)에서 여러 사전 정의된 자세 템플릿을 찾을 수 있습니다.

### **위협**

공격자의 관점에서, 이는 아마도 **공격자를 감지할 수 있기 때문에 가장 흥미로운 기능**일 것입니다. 그러나 이 기능은 **프리미엄**이 필요하므로(즉, 회사가 더 많은 비용을 지불해야 함) **활성화되지 않을 수도 있습니다**.

위협 탐지 메커니즘에는 3가지 유형이 있습니다:

* **이벤트 위협**: **Google**이 내부적으로 생성한 규칙을 기반으로 **Cloud Logging**의 이벤트를 일치시켜 생성된 발견 결과. **Google Workspace 로그**도 스캔할 수 있습니다.
* [**문서에서 모든 탐지 규칙의 설명을 찾을 수 있습니다**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how\_works)
* **컨테이너 위협**: 컨테이너의 커널의 저수준 동작을 분석한 후 생성된 발견 결과.
* **사용자 정의 위협**: 회사에서 생성한 규칙.

[https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response)에서 두 유형의 감지된 위협에 대한 권장 응답을 찾을 수 있습니다.

### 열거

{% code overflow="wrap" %}
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
{% endcode %}

### Post Exploitation

{% content-ref url="../gcp-post-exploitation/gcp-security-post-exploitation.md" %}
[gcp-security-post-exploitation.md](../gcp-post-exploitation/gcp-security-post-exploitation.md)
{% endcontent-ref %}

## Detections and Controls

* **Chronicle SecOps**: 보안 운영 팀이 위협 탐지, 조사 및 대응의 속도와 영향을 높일 수 있도록 설계된 고급 보안 운영 스위트.
* **reCAPTCHA Enterprise**: 인간 사용자와 봇을 구별하여 스크래핑, 자격 증명 채우기 및 자동화된 공격과 같은 사기 활동으로부터 웹사이트를 보호하는 서비스.
* **Web Security Scanner**: Google Cloud 또는 다른 웹 서비스에 호스팅된 웹 애플리케이션의 취약점 및 일반적인 보안 문제를 감지하는 자동화된 보안 스캐닝 도구.
* **Risk Manager**: 조직이 Google Cloud 위험 상태를 평가, 문서화 및 이해하는 데 도움을 주는 거버넌스, 위험 및 규정 준수(GRC) 도구.
* **Binary Authorization**: 기업이 설정한 정책에 따라 Kubernetes Engine 클러스터에 신뢰할 수 있는 컨테이너 이미지만 배포되도록 보장하는 컨테이너 보안 제어.
* **Advisory Notifications**: 잠재적인 보안 문제, 취약점 및 리소스를 안전하게 유지하기 위한 권장 조치에 대한 경고 및 권고를 제공하는 서비스.
* **Access Approval**: Google 직원이 데이터나 구성에 접근하기 전에 명시적인 승인을 요구할 수 있는 기능으로, 추가적인 제어 및 감사 가능성을 제공.
* **Managed Microsoft AD**: 사용자가 기존의 Microsoft AD 종속 앱 및 워크로드를 Google Cloud에서 사용할 수 있도록 하는 관리형 Microsoft Active Directory(AD) 서비스.

## Data Protection

* **Sensitive Data Protection**: 개인 정보나 지적 재산과 같은 민감한 데이터를 무단 접근이나 노출로부터 보호하기 위한 도구 및 관행.
* **Data Loss Prevention (DLP)**: 심층 콘텐츠 검사 및 포괄적인 데이터 보호 규칙을 적용하여 사용 중, 이동 중 및 저장 중인 데이터를 식별, 모니터링 및 보호하는 도구 및 프로세스.
* **Certificate Authority Service**: 내부 및 외부 서비스에 대한 SSL/TLS 인증서의 관리, 배포 및 갱신을 간소화하고 자동화하는 확장 가능하고 안전한 서비스.
* **Key Management**: 암호화 키의 생성, 가져오기, 회전, 사용 및 파기를 포함하여 애플리케이션을 위한 암호화 키를 관리할 수 있는 클라우드 기반 서비스. 자세한 정보는:

{% content-ref url="gcp-kms-enum.md" %}
[gcp-kms-enum.md](gcp-kms-enum.md)
{% endcontent-ref %}

* **Certificate Manager**: 웹 서비스 및 애플리케이션에 안전하고 암호화된 연결을 보장하기 위해 SSL/TLS 인증서를 관리하고 배포하는 서비스.
* **Secret Manager**: API 키, 비밀번호, 인증서 및 기타 민감한 데이터를 안전하고 편리하게 저장하는 시스템으로, 애플리케이션에서 이러한 비밀을 쉽게 안전하게 접근하고 관리할 수 있도록 함. 자세한 정보는:

{% content-ref url="gcp-secrets-manager-enum.md" %}
[gcp-secrets-manager-enum.md](gcp-secrets-manager-enum.md)
{% endcontent-ref %}

## Zero Trust

* **BeyondCorp Enterprise**: 전통적인 VPN 없이 내부 애플리케이션에 안전하게 접근할 수 있도록 사용자 및 장치 신뢰를 검증한 후 접근을 허용하는 제로 트러스트 보안 플랫폼.
* **Policy Troubleshooter**: 관리자가 조직 내에서 사용자가 특정 리소스에 접근할 수 있는 이유 또는 접근이 거부된 이유를 식별하여 제로 트러스트 정책 시행을 돕는 도구.
* **Identity-Aware Proxy (IAP)**: 요청이 발생한 네트워크가 아닌 요청의 신원 및 맥락을 기반으로 Google Cloud, 온프레미스 또는 다른 클라우드에서 실행되는 클라우드 애플리케이션 및 VM에 대한 접근을 제어하는 서비스.
* **VPC Service Controls**: 데이터 유출을 방지하고 세분화된 접근 제어를 제공하여 Google Cloud의 Virtual Private Cloud (VPC)에 호스팅된 리소스 및 서비스에 추가적인 보호 계층을 제공하는 보안 경계.
* **Access Context Manager**: Google Cloud의 BeyondCorp Enterprise의 일부로, 사용자의 신원 및 요청의 맥락(예: 장치 보안 상태, IP 주소 등)을 기반으로 세분화된 접근 제어 정책을 정의하고 시행하는 데 도움을 주는 도구.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
