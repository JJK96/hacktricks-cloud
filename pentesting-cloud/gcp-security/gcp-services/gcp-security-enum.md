# GCP - Security Enum

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtze HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

## Grundlegende Informationen

Google Cloud Platform (GCP) Security umfasst eine **umfassende Suite von Tools** und Praktiken, die darauf abzielen, die **Sicherheit** von Ressourcen und Daten innerhalb der Google Cloud-Umgebung zu gew√§hrleisten, unterteilt in vier Hauptbereiche: **Security Command Center, Detections and Controls, Data Protection und Zero Trust.**

## **Security Command Center**

Das Google Cloud Platform (GCP) Security Command Center (SCC) ist ein **Sicherheits- und Risikomanagement-Tool f√ºr GCP**-Ressourcen, das Organisationen erm√∂glicht, Einblick in ihre Cloud-Assets zu gewinnen und diese zu kontrollieren. Es hilft, **Bedrohungen zu erkennen und darauf zu reagieren**, indem es umfassende Sicherheitsanalysen bietet, **Fehlkonfigurationen identifiziert**, die **Einhaltung** von Sicherheitsstandards sicherstellt und **Integration** mit anderen Sicherheitstools f√ºr automatisierte Bedrohungserkennung und -reaktion erm√∂glicht.

* **√úbersicht**: Panel zur **Visualisierung einer √úbersicht** aller Ergebnisse des Security Command Center.
* Bedrohungen: \[Premium erforderlich] Panel zur Visualisierung aller **erkannten Bedrohungen. Weitere Informationen zu Bedrohungen siehe unten**
* **Schwachstellen**: Panel zur **Visualisierung gefundener Fehlkonfigurationen im GCP-Konto**.
* **Compliance**: \[Premium erforderlich] Dieser Abschnitt erm√∂glicht es, **Ihre GCP-Umgebung gegen mehrere Compliance-Pr√ºfungen** (wie PCI-DSS, NIST 800-53, CIS-Benchmarks...) √ºber die Organisation zu testen.
* **Assets**: Dieser Abschnitt **zeigt alle verwendeten Assets**, sehr n√ºtzlich f√ºr Sysadmins (und vielleicht Angreifer), um zu sehen, was auf einer Seite l√§uft.
* **Ergebnisse**: Dies **aggregiert** in einer **Tabelle Ergebnisse** verschiedener Abschnitte der GCP-Sicherheit (nicht nur Command Center), um leicht die relevanten Ergebnisse zu visualisieren.
* **Quellen**: Zeigt eine **Zusammenfassung der Ergebnisse** aller verschiedenen Abschnitte der GCP-Sicherheit **nach Abschnitt**.
* **Posture**: \[Premium erforderlich] Security Posture erm√∂glicht es, **die Sicherheit der GCP-Umgebung zu definieren, zu bewerten und zu √ºberwachen**. Es funktioniert, indem eine Richtlinie erstellt wird, die Einschr√§nkungen oder Beschr√§nkungen definiert, die die Ressourcen in GCP kontrollieren/√ºberwachen. Es gibt mehrere vordefinierte Posture-Vorlagen, die unter [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy) gefunden werden k√∂nnen.

### **Bedrohungen**

Aus der Perspektive eines Angreifers ist dies wahrscheinlich die **interessanteste Funktion, da sie den Angreifer erkennen k√∂nnte**. Beachten Sie jedoch, dass diese Funktion **Premium** erfordert (was bedeutet, dass das Unternehmen mehr bezahlen muss), sodass sie **m√∂glicherweise nicht einmal aktiviert ist**.&#x20;

Es gibt 3 Arten von Bedrohungserkennungsmechanismen:

* **Event Threats**: Ergebnisse, die durch das Abgleichen von Ereignissen aus **Cloud Logging** basierend auf **intern von Google erstellten Regeln** erzeugt werden. Es kann auch **Google Workspace-Protokolle** scannen.
* Es ist m√∂glich, die Beschreibung aller [**Erkennungsregeln in den Dokumenten**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how\_works) zu finden.
* **Container Threats**: Ergebnisse, die nach der Analyse des Low-Level-Verhaltens des Kernels von Containern erzeugt werden.
* **Custom Threats**: Vom Unternehmen erstellte Regeln.

Es ist m√∂glich, empfohlene Reaktionen auf erkannte Bedrohungen beider Typen unter [https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response) zu finden.

### Enumeration

{% code overflow="wrap" %}
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
{% endcode %}

### Post Exploitation

{% content-ref url="../gcp-post-exploitation/gcp-security-post-exploitation.md" %}
[gcp-security-post-exploitation.md](../gcp-post-exploitation/gcp-security-post-exploitation.md)
{% endcontent-ref %}

## Erkennungen und Kontrollen

* **Chronicle SecOps**: Eine fortschrittliche Sicherheitsoperationssuite, die Teams dabei hilft, die Geschwindigkeit und den Einfluss ihrer Sicherheitsoperationen zu erh√∂hen, einschlie√ülich Bedrohungserkennung, Untersuchung und Reaktion.
* **reCAPTCHA Enterprise**: Ein Dienst, der Websites vor betr√ºgerischen Aktivit√§ten wie Scraping, Credential Stuffing und automatisierten Angriffen sch√ºtzt, indem er zwischen menschlichen Benutzern und Bots unterscheidet.
* **Web Security Scanner**: Ein automatisiertes Sicherheitsscanning-Tool, das Schwachstellen und h√§ufige Sicherheitsprobleme in Webanwendungen erkennt, die auf Google Cloud oder einem anderen Webdienst gehostet werden.
* **Risk Manager**: Ein Governance-, Risiko- und Compliance-Tool (GRC), das Organisationen dabei hilft, ihre Google Cloud-Risikoposition zu bewerten, zu dokumentieren und zu verstehen.
* **Binary Authorization**: Eine Sicherheitskontrolle f√ºr Container, die sicherstellt, dass nur vertrauensw√ºrdige Container-Images gem√§√ü den von der Unternehmung festgelegten Richtlinien auf Kubernetes Engine-Clustern bereitgestellt werden.
* **Advisory Notifications**: Ein Dienst, der Warnungen und Hinweise zu potenziellen Sicherheitsproblemen, Schwachstellen und empfohlenen Ma√ünahmen zur Sicherung von Ressourcen bereitstellt.
* **Access Approval**: Eine Funktion, die es Organisationen erm√∂glicht, eine ausdr√ºckliche Genehmigung zu verlangen, bevor Google-Mitarbeiter auf ihre Daten oder Konfigurationen zugreifen k√∂nnen, und so eine zus√§tzliche Kontroll- und Pr√ºfungsebene bietet.
* **Managed Microsoft AD**: Ein Dienst, der verwaltetes Microsoft Active Directory (AD) anbietet und es Benutzern erm√∂glicht, ihre bestehenden Microsoft AD-abh√§ngigen Apps und Workloads auf Google Cloud zu nutzen.

## Datenschutz

* **Sensitive Data Protection**: Tools und Praktiken, die darauf abzielen, sensible Daten wie pers√∂nliche Informationen oder geistiges Eigentum vor unbefugtem Zugriff oder Offenlegung zu sch√ºtzen.
* **Data Loss Prevention (DLP)**: Eine Reihe von Tools und Prozessen, die verwendet werden, um Daten in Gebrauch, in Bewegung und im Ruhezustand durch tiefgehende Inhaltsinspektion zu identifizieren, zu √ºberwachen und zu sch√ºtzen und eine umfassende Reihe von Datenschutzregeln anzuwenden.
* **Certificate Authority Service**: Ein skalierbarer und sicherer Dienst, der die Verwaltung, Bereitstellung und Erneuerung von SSL/TLS-Zertifikaten f√ºr interne und externe Dienste vereinfacht und automatisiert.
* **Key Management**: Ein cloudbasierter Dienst, der es Ihnen erm√∂glicht, kryptografische Schl√ºssel f√ºr Ihre Anwendungen zu verwalten, einschlie√ülich der Erstellung, des Imports, der Rotation, der Nutzung und der Zerst√∂rung von Verschl√ºsselungsschl√ºsseln. Mehr Infos in:

{% content-ref url="gcp-kms-enum.md" %}
[gcp-kms-enum.md](gcp-kms-enum.md)
{% endcontent-ref %}

* **Certificate Manager**: Ein Dienst, der SSL/TLS-Zertifikate verwaltet und bereitstellt und so sichere und verschl√ºsselte Verbindungen zu Ihren Webdiensten und Anwendungen gew√§hrleistet.
* **Secret Manager**: Ein sicheres und praktisches Speichersystem f√ºr API-Schl√ºssel, Passw√∂rter, Zertifikate und andere sensible Daten, das den einfachen und sicheren Zugriff und die Verwaltung dieser Geheimnisse in Anwendungen erm√∂glicht. Mehr Infos in:

{% content-ref url="gcp-secrets-manager-enum.md" %}
[gcp-secrets-manager-enum.md](gcp-secrets-manager-enum.md)
{% endcontent-ref %}

## Zero Trust

* **BeyondCorp Enterprise**: Eine Zero-Trust-Sicherheitsplattform, die sicheren Zugriff auf interne Anwendungen ohne die Notwendigkeit eines traditionellen VPNs erm√∂glicht, indem sie die √úberpr√ºfung von Benutzer- und Ger√§tevertrauen vor dem Gew√§hren des Zugriffs voraussetzt.
* **Policy Troubleshooter**: Ein Tool, das Administratoren dabei hilft, Zugriffsprobleme in ihrer Organisation zu verstehen und zu l√∂sen, indem es identifiziert, warum ein Benutzer Zugriff auf bestimmte Ressourcen hat oder warum der Zugriff verweigert wurde, und so bei der Durchsetzung von Zero-Trust-Richtlinien unterst√ºtzt.
* **Identity-Aware Proxy (IAP)**: Ein Dienst, der den Zugriff auf Cloud-Anwendungen und VMs, die auf Google Cloud, vor Ort oder in anderen Clouds ausgef√ºhrt werden, basierend auf der Identit√§t und dem Kontext der Anfrage steuert, anstatt auf dem Netzwerk, von dem die Anfrage stammt.
* **VPC Service Controls**: Sicherheitsperimeter, die zus√§tzliche Schutzschichten f√ºr Ressourcen und Dienste bieten, die in Google Clouds Virtual Private Cloud (VPC) gehostet werden, Datenexfiltration verhindern und granulare Zugriffskontrollen bieten.
* **Access Context Manager**: Teil von Google Clouds BeyondCorp Enterprise, hilft dieses Tool dabei, feingranulare Zugriffskontrollrichtlinien basierend auf der Identit√§t eines Benutzers und dem Kontext seiner Anfrage, wie Ger√§tesicherheitsstatus, IP-Adresse und mehr, zu definieren und durchzusetzen.

{% hint style="success" %}
Lernen & √ºben Sie AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lernen & √ºben Sie GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtzen Sie HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichen.

</details>
{% endhint %}
