# Απαρίθμηση Stackdriver του GCP

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 στην [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκερ κάνοντας υποβολή PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## [Καταγραφή Stackdriver](https://cloud.google.com/sdk/gcloud/reference/logging/)

Το [**Stackdriver**](https://cloud.google.com/stackdriver/) αναγνωρίζεται ως ένα περιεκτικό **σύνολο καταγραφής υποδομής** που προσφέρεται από την Google. Διαθέτει τη δυνατότητα να καταγράφει ευαίσθητα δεδομένα μέσω χαρακτηριστικών όπως το syslog, το οποίο αναφέρει τις μεμονωμένες εντολές που εκτελούνται μέσα στις υπολογιστικές οντότητες. Επιπλέον, παρακολουθεί τις αιτήσεις HTTP που στέλνονται σε ισορροπητές φορτίου ή εφαρμογές App Engine, μεταδεδομένα πακέτων δικτύου εντός επικοινωνιών VPC και άλλα.

Για μια υπολογιστική οντότητα, ο αντίστοιχος λογαριασμός υπηρεσίας απαιτεί απλώς δικαιώματα **ΕΓΓΡΑΦΗΣ** για να διευκολύνει την καταγραφή των δραστηριοτήτων της οντότητας. Ωστόσο, είναι δυνατόν ένας διαχειριστής να παρέχει **κατά λάθος** στον λογαριασμό υπηρεσίας τόσο δικαιώματα **ΑΝΑΓΝΩΣΗΣ** όσο και **ΕΓΓΡΑΦΗΣ**. Σε τέτοιες περιπτώσεις, οι καταγραφές μπορούν να εξεταστούν για ευαίσθητες πληροφορίες.

Για να επιτευχθεί αυτό, το εργαλείο [gcloud logging](https://cloud.google.com/sdk/gcloud/reference/logging/) προσφέρει ένα σύνολο εργαλείων. Αρχικά, συνιστάται η αναγνώριση των τύπων καταγραφών που υπάρχουν στο τρέχον έργο σας.
```bash
# List logs
gcloud logging logs list

# Read logs
gcloud logging read [FOLDER]

# Write logs
# An attacker writing logs may confuse the Blue Team
gcloud logging write [FOLDER] [MESSAGE]

# List Buckets
gcloud logging buckets list
```
## Αναφορές

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/#reviewing-stackdriver-logging](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/#reviewing-stackdriver-logging)
* [https://initblog.com/2020/gcp-post-exploitation/](https://initblog.com/2020/gcp-post-exploitation/)

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
