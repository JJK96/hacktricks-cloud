# GCP - Kaynak Depoları Enum

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarını paylaşarak PR'ler göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>
{% endhint %}

## Temel Bilgiler <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Google Cloud Kaynak Depoları, tam özellikli, ölçeklenebilir, **özel Git depo hizmetidir**. Diğer GCP araçları ve hizmetleriyle sorunsuz entegre olan bir ortamda kaynak kodunuzu barındırmak üzere tasarlanmıştır. Ekiplerin kodlarını depolamak, yönetmek ve izlemek için işbirlikçi ve güvenli bir yer sunar.

Cloud Kaynak Depolarının temel özellikleri şunlardır:

1. **Tamamen Yönetilen Git Barındırma**: Git'in tanıdık işlevselliğini sunar, yani düzenli Git komutları ve iş akışlarını kullanabilirsiniz.
2. **GCP Hizmetleriyle Entegrasyon**: Cloud Build, Pub/Sub ve App Engine gibi diğer GCP hizmetleriyle entegre olarak kodunuzdan dağıtıma kadar izlenebilirlik sağlar.
3. **Özel Depolar**: Kodunuzun güvenli ve özel bir şekilde depolanmasını sağlar. Erişimi Cloud Kimlik ve Erişim Yönetimi (IAM) rollerini kullanarak kontrol edebilirsiniz.
4. **Kaynak Kodu Analizi**: Kaynak kodunuzun otomatik analizini sağlamak için diğer GCP araçlarıyla çalışarak hatalar, güvenlik açıkları veya kötü kodlama uygulamaları gibi potansiyel sorunları tanımlar.
5. **İşbirliği Araçları**: Birleştirme istekleri, yorumlar ve incelemeler gibi araçlarla işbirlikçi kodlama desteği sağlar.
6. **Ayna Desteği**: GitHub veya Bitbucket'ta barındırılan depolarla Cloud Kaynak Depolarını bağlamanıza olanak tanır, otomatik senkronizasyonu etkinleştirir ve tüm depolarınızın birleşik bir görünümünü sağlar.

### OffSec bilgileri <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* Bir projenin içindeki kaynak depoları yapılandırması, Cloud Pub/Sub mesajlarını yayınlamak için kullanılan bir **Hizmet Hesabı** içerecektir. Kullanılan varsayılan hesap **Compute SA**'dır. Ancak, kaynak depolarından token çalmanın mümkün olmadığını düşünüyorum çünkü arka planda yürütülüyor.
* GCP Cloud Kaynak Depoları web konsolunda ([https://source.cloud.google.com/](https://source.cloud.google.com/)) kodu görmek için kodun varsayılan olarak **ana dal içinde** olması gerekir.
* GitHub veya Bitbucket'tan bir repo'ya işaret eden bir ayna Cloud Deposu oluşturabilirsiniz (bu platformlara erişim sağlar).
* GCP içinden kod yazıp hata ayıklamak mümkündür.
* Varsayılan olarak, Kaynak Depoları **özel anahtarların taahhütlerde itilmesini engeller**, ancak bu devre dışı bırakılabilir.

### Bulutta Kabukta Aç

Depoyu Bulut Kabuğunda açmak mümkündür, şöyle bir iletişim kutusu görünecektir:

<figure><img src="../../../.gitbook/assets/image (325).png" alt=""><figcaption></figcaption></figure>

Bu, Bulut Kabuğunda kod yazmanıza ve hata ayıklamanıza olanak tanır (bu, cloudshell'in tehlikeye atılabileceği anlamına gelir).

### Numaralandırma

{% code overflow="wrap" %}
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
{% endcode %}

### Yetki Yükseltme ve Son Saldırı

{% content-ref url="../gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### Kimlik Doğrulamasız Sıralama

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarını paylaşarak PR göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>
{% endhint %}
