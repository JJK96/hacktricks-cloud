# GCP - Απαρίθμηση Αποθετηρίων Πηγής

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκερ κάνοντας υποβολή PRs** στα [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
{% endhint %}

## Βασικές Πληροφορίες <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Τα Αποθετήρια Πηγής του Google Cloud είναι ένα πλήρως λειτουργικό, επεκτάσιμο, **ιδιωτικό υπηρεσία αποθετηρίου Git**. Είναι σχεδιασμένο να **φιλοξενεί τον κώδικα πηγής σας σε ένα πλήρως διαχειριζόμενο περιβάλλον**, ενσωματώνοντας απρόσκοπτα με άλλα εργαλεία και υπηρεσίες του GCP. Προσφέρει ένα συνεργατικό και ασφαλές μέρος για ομάδες να αποθηκεύουν, διαχειρίζονται και παρακολουθούν τον κώδικά τους.

Τα κύρια χαρακτηριστικά των Αποθετηρίων Πηγής του Cloud περιλαμβάνουν:

1. **Πλήρως Διαχειριζόμενος Φιλοξενητής Git**: Προσφέρει την οικεία λειτουργικότητα του Git, που σημαίνει ότι μπορείτε να χρησιμοποιήσετε κανονικές εντολές και ροές εργασίας του Git.
2. **Ενσωμάτωση με Υπηρεσίες του GCP**: Ενσωματώνεται με άλλες υπηρεσίες του GCP όπως το Cloud Build, το Pub/Sub και το App Engine για πλήρη ανιχνευσιμότητα από τον κώδικα στην αναπτυξη.
3. **Ιδιωτικά Αποθετήρια**: Βεβαιώνει ότι ο κώδικάς σας αποθηκεύεται με ασφάλεια και ιδιωτικότητα. Μπορείτε να ελέγξετε την πρόσβαση χρησιμοποιώντας ρόλους Διαχείρισης Ταυτότητας και Πρόσβασης (IAM) του Cloud.
4. **Ανάλυση Κώδικα Πηγής**: Συνεργάζεται με άλλα εργαλεία του GCP για αυτόματη ανάλυση του κώδικά σας, εντοπίζοντας πιθανά θέματα όπως σφάλματα, ευπάθειες ή κακές πρακτικές κωδικοποίησης.
5. **Εργαλεία Συνεργασίας**: Υποστηρίζει τη συνεργατική κωδικοποίηση με εργαλεία όπως αιτήσεις συγχώνευσης, σχόλια και αξιολογήσεις.
6. **Υποστήριξη Καθρέπτη**: Σάς επιτρέπει να συνδέσετε τα Αποθετήρια Πηγής του Cloud με αποθετήρια που φιλοξενούνται στο GitHub ή στο Bitbucket, ενεργοποιώντας την αυτόματη συγχρονισμό και παρέχοντας μια ενιαία προβολή όλων των αποθετηρίων σας.

### Πληροφορίες OffSec <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* Η διαμόρφωση των αποθετηρίων πηγής μέσα σε ένα έργο θα έχει ένα **Λογαριασμό Υπηρεσίας** που χρησιμοποιείται για τη δημοσίευση μηνυμάτων Cloud Pub/Sub. Ο προεπιλεγμένος που χρησιμοποιείται είναι ο **Compute SA**. Ωστόσο, **δεν νομίζω ότι είναι δυνατό να κλέψετε το διακριτικό του** από τα Αποθετήρια Πηγής καθώς εκτελείται στο παρασκήνιο.
* Για να δείτε τον κώδικα μέσα στα Αποθετήρια Πηγής του GCP στον ιστότοπο ([https://source.cloud.google.com/](https://source.cloud.google.com/)), ο κώδικας πρέπει να είναι **μέσα στον κύριο κλαδί από προεπιλογή**.
* Μπορείτε επίσης να **δημιουργήσετε ένα καθρέπτη Αποθετηρίου Cloud** που να δείχνει σε ένα αποθετήριο από το **Github** ή το **Bitbucket** (παρέχοντας πρόσβαση σε αυτές τις πλατφόρμες).
* Είναι δυνατόν να **κωδικοποιήσετε και να αποσφαλματώσετε από μέσα στο GCP**.
* Από προεπιλογή, τα Αποθετήρια Πηγής **εμποδίζουν τα ιδιωτικά κλειδιά να πιέζονται σε δεσμεύσεις**, αλλά αυτό μπορεί να απενεργοποιηθεί.

### Άνοιγμα στο Cloud Shell

Είναι δυνατό να ανοίξετε το αποθετήριο στο Cloud Shell, θα εμφανιστεί ένα παράθυρο όπως αυτό:

<figure><img src="../../../.gitbook/assets/image (325).png" alt=""><figcaption></figcaption></figure>

Αυτό θα σας επιτρέψει να κωδικοποιήσετε και να αποσφαλματώσετε στο Cloud Shell (που θα μπορούσε να διαρρεύσει).

### Απαρίθμηση

{% code overflow="wrap" %}
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
{% endcode %}

### Εscalation προνομίων & Μετά από Εκμετάλλευση

{% content-ref url="../gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### Αποκωδικοποίηση χωρίς πιστοποίηση

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα hacking υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
{% endhint %}
