# GCP - –õ–æ–≥—É–≤–∞–Ω–Ω—è Enum

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –•–∞–∫—ñ–Ω–≥ AWS: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –•–∞–∫—ñ–Ω–≥ GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}

## –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–¶–µ–π —Å–µ—Ä–≤—ñ—Å –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –∑–±–µ—Ä—ñ–≥–∞—Ç–∏, —à—É–∫–∞—Ç–∏, –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏, –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ —Ç–∞ —Å–ø–æ–≤—ñ—â–∞—Ç–∏ –ø—Ä–æ **–¥–∞–Ω—ñ –∂—É—Ä–Ω–∞–ª—É —Ç–∞ –ø–æ–¥—ñ—ó** –∑ GCP.

Cloud Logging –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π –∑ —ñ–Ω—à–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏ GCP, –Ω–∞–¥–∞—é—á–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Å—Ö–æ–≤–∏—â–µ –¥–ª—è –∂—É—Ä–Ω–∞–ª—ñ–≤ –∑ —É—Å—ñ—Ö –≤–∞—à–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ GCP. –í—ñ–Ω **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–∏—Ä–∞—î –∂—É—Ä–Ω–∞–ª–∏ –∑ —Ä—ñ–∑–Ω–∏—Ö —Å–ª—É–∂–± GCP**, —Ç–∞–∫–∏—Ö —è–∫ App Engine, Compute Engine —Ç–∞ Cloud Functions. –í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Cloud Logging –¥–ª—è –¥–æ–¥–∞—Ç–∫—ñ–≤, —â–æ –ø—Ä–∞—Ü—é—é—Ç—å –≤ –æ—Ñ—ñ—Å—ñ –∞–±–æ –≤ —ñ–Ω—à–∏—Ö —Ö–º–∞—Ä–∞—Ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∞–≥–µ–Ω—Ç –∞–±–æ API Cloud Logging.

–û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

* **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –∂—É—Ä–Ω–∞–ª—É:** –ê–≥—Ä–µ–≥—É–π—Ç–µ –¥–∞–Ω—ñ –∂—É—Ä–Ω–∞–ª—É –∑ —Ä—ñ–∑–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª, –ø—Ä–æ–ø–æ–Ω—É—é—á–∏ –≤—Å–µ–±—ñ—á–Ω–∏–π –ø–æ–≥–ª—è–¥ –Ω–∞ –≤–∞—à—ñ –¥–æ–¥–∞—Ç–∫–∏ —Ç–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É.
* **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∂—É—Ä–Ω–∞–ª–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ:** –ü–æ—Ç—ñ–∫ –∂—É—Ä–Ω–∞–ª—ñ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ –¥–ª—è –Ω–µ–≥–∞–π–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É —Ç–∞ —Ä–µ–∞–≥—É–≤–∞–Ω–Ω—è.
* **–ü–æ—Ç—É–∂–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –¥–∞–Ω–∏—Ö:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –ø–æ—à—É–∫—É –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø—Ä–æ—Å—ñ—é–≤–∞–Ω–Ω—è –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ –¥–∞–Ω–∏—Ö –∂—É—Ä–Ω–∞–ª—É.
* **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ BigQuery:** –ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –∂—É—Ä–Ω–∞–ª–∏ –≤ BigQuery –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É —Ç–∞ –∑–∞–ø–∏—Ç—É–≤–∞–Ω–Ω—è.
* **–ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∂—É—Ä–Ω–∞–ª—ñ–≤:** –°—Ç–≤–æ—Ä—é–π—Ç–µ –≤–ª–∞—Å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–∞–Ω–∏—Ö –∂—É—Ä–Ω–∞–ª—É –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è.

### –ü–æ—Ç—ñ–∫ –∂—É—Ä–Ω–∞–ª—ñ–≤

<figure><img src="../../../.gitbook/assets/image (3) (1).png" alt=""><figcaption><p><a href="https://betterstack.com/community/guides/logging/gcp-logging/">https://betterstack.com/community/guides/logging/gcp-logging/</a></p></figcaption></figure>

–ü–æ —Å—É—Ç—ñ, —Å—Ç–æ–∫–∏ —Ç–∞ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∂—É—Ä–Ω–∞–ª—ñ–≤ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å, –¥–µ —Å–ª—ñ–¥ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∂—É—Ä–Ω–∞–ª.

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ GCP Logging

Cloud Logging –º–∞—î –≤–∏—Å–æ–∫—É –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞–Ω—ñ—Å—Ç—å –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω–∏–º –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∏–º –ø–æ—Ç—Ä–µ–±–∞–º:

1. **–ë–∞–∫–µ—Ç–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤ (–ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—ñ–≤ –≤ –º–µ—Ä–µ–∂—ñ):** –í–∏–∑–Ω–∞—á—Ç–µ –±–∞–∫–µ—Ç–∏ –≤ Cloud Logging –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è **–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º –∂—É—Ä–Ω–∞–ª—ñ–≤**, –Ω–∞–¥–∞—é—á–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç–∏–º, —è–∫ –¥–æ–≤–≥–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤–∞—à—ñ –∑–∞–ø–∏—Å–∏ –∂—É—Ä–Ω–∞–ª—É.
* –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –±–∞–∫–µ—Ç–∏ `_Default` —Ç–∞ `_Required` (–æ–¥–∏–Ω —Ä–µ—î—Å—Ç—Ä—É—î —Ç–µ, —â–æ —ñ–Ω—à–∏–π - –Ω—ñ).
*   **\_Required** —î:

{% code overflow="wrap" %}
```bash
LOG_ID("cloudaudit.googleapis.com/activity") OR LOG_ID("externalaudit.googleapis.com/activity") OR LOG_ID("cloudaudit.googleapis.com/system_event") OR LOG_ID("externalaudit.googleapis.com/system_event") OR LOG_ID("cloudaudit.googleapis.com/access_transparency") OR LOG_ID("externalaudit.googleapis.com/access_transparency")
```
{% endcode %}
* **–ü–µ—Ä—ñ–æ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è** –¥–∞–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –±–∞–∫–µ—Ç–∞ —ñ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ **–ø—Ä–∏–Ω–∞–π–º–Ω—ñ 1 –¥–µ–Ω—å**. –û–¥–Ω–∞–∫ **–ø–µ—Ä—ñ–æ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è \_Required —Å—Ç–∞–Ω–æ–≤–∏—Ç—å 400 –¥–Ω—ñ–≤** —ñ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω–∏–π.
* –ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –±–∞–∫–µ—Ç–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤ **–Ω–µ –≤–∏–¥–∏–º—ñ –≤ Cloud Storage**.
2. **–°—Ç–æ–∫–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤ (–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∂—É—Ä–Ω–∞–ª—ñ–≤ –≤ –º–µ—Ä–µ–∂—ñ):** –°—Ç–≤–æ—Ä—é–π—Ç–µ —Å—Ç–æ–∫–∏ –¥–ª—è **–µ–∫—Å–ø–æ—Ä—Ç—É –∑–∞–ø–∏—Å—ñ–≤ –∂—É—Ä–Ω–∞–ª—É** –¥–æ —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—å –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è, —Ç–∞–∫–∏—Ö —è–∫ Pub/Sub, BigQuery –∞–±–æ Cloud Storage –Ω–∞ –æ—Å–Ω–æ–≤—ñ **—Ñ—ñ–ª—å—Ç—Ä–∞**.
* –ó–∞ **–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º** —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è —Å—Ç–æ–∫–∏ –¥–ª—è –±–∞–∫–µ—Ç—ñ–≤ `_Default` —Ç–∞ `_Required`:
* ```bash
_Required  logging.googleapis.com/projects/<proj-name>/locations/global/buckets/_Required  LOG_ID("cloudaudit.googleapis.com/activity") OR LOG_ID("externalaudit.googleapis.com/activity") OR LOG_ID("cloudaudit.googleapis.com/system_event") OR LOG_ID("externalaudit.googleapis.com/system_event") OR LOG_ID("cloudaudit.googleapis.com/access_transparency") OR LOG_ID("externalaudit.googleapis.com/access_transparency")
_Default   logging.googleapis.com/projects/<proj-name>/locations/global/buckets/_Default   NOT LOG_ID("cloudaudit.googleapis.com/activity") AND NOT LOG_ID("externalaudit.googleapis.com/activity") AND NOT LOG_ID("cloudaudit.googleapis.com/system_event") AND NOT LOG_ID("externalaudit.googleapis.com/system_event") AND NOT LOG_ID("cloudaudit.googleapis.com/access_transparency") AND NOT LOG_ID("externalaudit.googleapis.com/access_transparency")
```
* **–§—ñ–ª—å—Ç—Ä–∏ –≤–∏–∫–ª—é—á–µ–Ω—å:** –ú–æ–∂–ª–∏–≤–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ **–≤–∏–∫–ª—é—á–µ–Ω–Ω—è –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–µ–≤–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –∂—É—Ä–Ω–∞–ª—É**, —â–æ –≤—Ö–æ–¥—è—Ç—å, —â–æ –¥–æ–∑–≤–æ–ª—è—î –µ–∫–æ–Ω–æ–º–∏—Ç–∏ –∫–æ—à—Ç–∏ —Ç–∞ –∑–º–µ–Ω—à—É–≤–∞—Ç–∏ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏–π —à—É–º.
3. **–ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∂—É—Ä–Ω–∞–ª—ñ–≤:** –ù–∞–ª–∞—à—Ç—É–π—Ç–µ **–≤–ª–∞—Å–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏** –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–º—ñ—Å—Ç—É –∂—É—Ä–Ω–∞–ª—ñ–≤, —â–æ –¥–æ–∑–≤–æ–ª—è—î —Å–ø–æ–≤—ñ—â–∞—Ç–∏ —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–∞–Ω–∏—Ö –∂—É—Ä–Ω–∞–ª—É.
4. **–ü–µ—Ä–µ–≥–ª—è–¥–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤:** –ü–µ—Ä–µ–≥–ª—è–¥–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤ –Ω–∞–¥–∞—é—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–µ —Ç–∞ **–¥–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–∏–º, —Ö—Ç–æ –º–∞—î –¥–æ—Å—Ç—É–ø** –¥–æ –∂—É—Ä–Ω–∞–ª—ñ–≤ —É –≤–∞—à–æ–º—É –±–∞–∫–µ—Ç—ñ –∂—É—Ä–Ω–∞–ª—ñ–≤.&#x20;
* Cloud Logging **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î –ø–µ—Ä–µ–≥–ª—è–¥ `_AllLogs` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –±–∞–∫–µ—Ç–∞**, —è–∫–∏–π –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –∂—É—Ä–Ω–∞–ª–∏. Cloud Logging —Ç–∞–∫–æ–∂ —Å—Ç–≤–æ—Ä—é—î –ø–µ—Ä–µ–≥–ª—è–¥ –¥–ª—è –±–∞–∫–µ—Ç–∞ `_Default` –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `_Default`. –ü–µ—Ä–µ–≥–ª—è–¥ `_Default` –¥–ª—è –±–∞–∫–µ—Ç–∞ `_Default` –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –∂—É—Ä–Ω–∞–ª–∏, –∑–∞ –≤–∏–Ω—è—Ç–∫–æ–º –∂—É—Ä–Ω–∞–ª—ñ–≤ –∞—É–¥–∏—Ç—É –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö. –ü–µ—Ä–µ–≥–ª—è–¥–∏ `_AllLogs` —Ç–∞ `_Default` –Ω–µ –º–æ–∂–Ω–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏.

–ú–æ–∂–ª–∏–≤–æ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–ª—É **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –ø–µ–≤–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ –∂—É—Ä–Ω–∞–ª—É** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø–æ–ª—ñ—Ç–∏–∫–∏ IAM, –ø–æ–¥—ñ–±–Ω–æ –¥–æ:

{% code overflow="wrap" %}
```json
{
"bindings": [
{
"members": [
"user:username@gmail.com"
],
"role": "roles/logging.viewAccessor",
"condition": {
"title": "Bucket reader condition example",
"description": "Grants logging.viewAccessor role to user username@gmail.com for the VIEW_ID log view.",
"expression":
"resource.name == \"projects/PROJECT_ID/locations/LOCATION/buckets/BUCKET_NAME/views/VIEW_ID\""
}
}
],
"etag": "BwWd_6eERR4=",
"version": 3
}
```
{% endcode %}

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –∂—É—Ä–Ω–∞–ª–∏

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –æ–ø–µ—Ä–∞—Ü—ñ—ó **Admin Write** (—Ç–∞–∫–æ–∂ –Ω–∞–∑–∏–≤–∞—é—Ç—å—Å—è –∂—É—Ä–Ω–∞–ª–∏ –∞—É–¥–∏—Ç—É –¥—ñ–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞) –ª–æ–≥—É—é—Ç—å—Å—è (–∑–∞–ø–∏—Å—É—é—Ç—å –º–µ—Ç–∞–¥–∞–Ω—ñ –∞–±–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó) —ñ **–Ω–µ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∏–º–∫–Ω–µ–Ω—ñ**.

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ —É–≤—ñ–º–∫–Ω—É—Ç–∏ **–∂—É—Ä–Ω–∞–ª–∏ –∞—É–¥–∏—Ç—É –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö**, —Ü–µ **Admin Read, Data Write —Ç–∞ Data Write**.

–ë—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ–∂–µ–Ω —Ç–∏–ø –∂—É—Ä–Ω–∞–ª—É –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó: [https://cloud.google.com/iam/docs/audit-logging](https://cloud.google.com/iam/docs/audit-logging)

–ü—Ä–æ—Ç–µ —Å–ª—ñ–¥ –∑–∞—É–≤–∞–∂–∏—Ç–∏, —â–æ —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥—ñ—ó **`GetIamPolicy`** —Ç–∞ —ñ–Ω—à—ñ –¥—ñ—ó —á–∏—Ç–∞–Ω–Ω—è **–Ω–µ –ª–æ–≥—É—é—Ç—å—Å—è**. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫, —è–∫–∏–π –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –ø–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ, –Ω–µ –±—É–¥–µ –≤–∏—è–≤–ª–µ–Ω–∏–π, —è–∫—â–æ —Å–∏—Å—Ç–µ–º–Ω–∏–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–≤ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –±—ñ–ª—å—à–µ –∂—É—Ä–Ω–∞–ª—ñ–≤.

–©–æ–± —É–≤—ñ–º–∫–Ω—É—Ç–∏ –±—ñ–ª—å—à–µ –∂—É—Ä–Ω–∞–ª—ñ–≤ —É –∫–æ–Ω—Å–æ–ª—ñ, —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º [https://console.cloud.google.com/iam-admin/audit](https://console.cloud.google.com/iam-admin/audit) —Ç–∞ —É–≤—ñ–º–∫–Ω—É—Ç–∏ —ó—Ö. –Ñ 2 —Ä—ñ–∑–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏:

* **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**: –ú–æ–∂–ª–∏–≤–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —Ç–∞ –ª–æ–≥—É–≤–∞—Ç–∏ –≤—Å—ñ –∂—É—Ä–Ω–∞–ª–∏ Admin Read —Ç–∞/–∞–±–æ Data Read —Ç–∞/–∞–±–æ Data Write —Ç–∞ –Ω–∞–≤—ñ—Ç—å –¥–æ–¥–∞—Ç–∏ –≤–∏–Ω—è—Ç–∫–æ–≤—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∞–ª–∏:

<figure><img src="../../../.gitbook/assets/image (338).png" alt=""><figcaption></figcaption></figure>

* **–í–∏–±—ñ—Ä —Å–µ—Ä–≤—ñ—Å—ñ–≤**: –ê–±–æ –ø—Ä–æ—Å—Ç–æ **–≤–∏–±–µ—Ä—ñ—Ç—å —Å–µ—Ä–≤—ñ—Å–∏**, –¥–ª—è —è–∫–∏—Ö –≤–∏ —Ö–æ—á–µ—Ç–µ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∂—É—Ä–Ω–∞–ª–∏, —Ç–∏–ø –∂—É—Ä–Ω–∞–ª—ñ–≤ —Ç–∞ –≤–∏–Ω—è—Ç–∫–æ–≤–∏–π –ø—Ä–∏–Ω—Ü–∏–ø–∞–ª –¥–ª—è —Ü—å–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É.

–¢–∞–∫–æ–∂ —Å–ª—ñ–¥ –∑–∞—É–≤–∞–∂–∏—Ç–∏, —â–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –ª–∏—à–µ —Ü—ñ –∂—É—Ä–Ω–∞–ª–∏, –æ—Å–∫—ñ–ª—å–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –±—ñ–ª—å—à–µ –∂—É—Ä–Ω–∞–ª—ñ–≤ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –≤–∏—Ç—Ä–∞—Ç.

### –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫

–ö–æ–º–∞–Ω–¥–Ω–∏–π —Ä—è–¥–æ–∫ `gcloud` —î –Ω–µ–≤—ñ–¥'—î–º–Ω–æ—é —á–∞—Å—Ç–∏–Ω–æ—é –µ–∫–æ—Å–∏—Å—Ç–µ–º–∏ GCP, —â–æ –¥–æ–∑–≤–æ–ª—è—î –∫–µ—Ä—É–≤–∞—Ç–∏ –≤–∞—à–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞ —Å–µ—Ä–≤—ñ—Å–∞–º–∏. –û—Å—å —è–∫ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `gcloud` –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è–º–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤ —Ç–∞ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ –∂—É—Ä–Ω–∞–ª—ñ–≤.
```bash
# List buckets
gcloud logging buckets list
gcloud logging buckets describe <bucket-name> --location <location>

# List log entries: only logs that contain log entries are listed.
gcloud logging logs list

# Get log metrics
gcloud logging metrics list
gcloud logging metrics describe <metric-name>

# Get log sinks
gcloud logging sinks list
gcloud logging sinks describe <sink-name>

# Get log views
gcloud logging views list --bucket <bucket> --location global
gcloud logging views describe --bucket <bucket> --location global <view-id> # view-id is usually the same as the bucket name

# Get log links
gcloud logging links list --bucket _Default --location global
gcloud logging links describe <link-id> --bucket _Default --location global
```
{% endcode %}

–ü—Ä–∏–∫–ª–∞–¥ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤ **`cloudresourcemanager`** (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è BF –¥–æ–∑–≤–æ–ª—ñ–≤): [https://console.cloud.google.com/logs/query;query=protoPayload.serviceName%3D%22cloudresourcemanager.googleapis.com%22;summaryFields=:false:32:beginning;cursorTimestamp=2024-01-20T00:07:14.482809Z;startTime=2024-01-01T11:12:26.062Z;endTime=2024-02-02T17:12:26.062Z?authuser=2\&project=digital-bonfire-410512](https://console.cloud.google.com/logs/query;query=protoPayload.serviceName%3D%22cloudresourcemanager.googleapis.com%22;summaryFields=:false:32:beginning;cursorTimestamp=2024-01-20T00:07:14.482809Z;startTime=2024-01-01T11:12:26.062Z;endTime=2024-02-02T17:12:26.062Z?authuser=2\&project=digital-bonfire-410512)

–ù–µ–º–∞—î –∂—É—Ä–Ω–∞–ª—ñ–≤ **`testIamPermissions`**:

<figure><img src="../../../.gitbook/assets/image (2) (1) (1).png" alt=""><figcaption></figcaption></figure>

### –ü—ñ—Å–ª—è–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ–π–Ω–∏–π –µ—Ç–∞–ø

{% content-ref url="../gcp-post-exploitation/gcp-logging-post-exploitation.md" %}
[gcp-logging-post-exploitation.md](../gcp-post-exploitation/gcp-logging-post-exploitation.md)
{% endcontent-ref %}

### –ù–∞–ø–æ–ª–µ–≥–ª–∏–≤—ñ—Å—Ç—å

{% content-ref url="../gcp-persistence/gcp-logging-persistence.md" %}
[gcp-logging-persistence.md](../gcp-persistence/gcp-logging-persistence.md)
{% endcontent-ref %}

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è

* [https://cloud.google.com/logging/docs/logs-views#gcloud](https://cloud.google.com/logging/docs/logs-views#gcloud)
* [https://betterstack.com/community/guides/logging/gcp-logging/](https://betterstack.com/community/guides/logging/gcp-logging/)

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ –≥—Ä—É–ø–∏ [**telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}
