# GCP - Firebase Enum

{% hint style="success" %}
**AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдкреНрд░реИрдХреНрдЯрд┐рд╕ рдХрд░реЗрдВ:**<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг AWS рд░реЗрдб рдЯреАрдо рдПрдХреНрд╕рдкрд░реНрдЯ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
**GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдкреНрд░реИрдХреНрдЯрд┐рд╕ рдХрд░реЗрдВ:** <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг GCP рд░реЗрдб рдЯреАрдо рдПрдХреНрд╕рдкрд░реНрдЯ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВред

</details>
{% endhint %}

## [Firebase](https://cloud.google.com/sdk/gcloud/reference/firebase/)

Firebase рд░рд┐рдпрд▓рдЯрд╛рдЗрдо рдбреЗрдЯрд╛рдмреЗрд╕ рдПрдХ рдХреНрд▓рд╛рдЙрдб-рд╣реЛрд╕реНрдЯреЗрдб NoSQL рдбреЗрдЯрд╛рдмреЗрд╕ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдмреАрдЪ рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░ рдФрд░ рд╕рд┐рдВрдХ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред [рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВ](https://firebase.google.com/products/realtime-database/).

### рдЕрдирдЖрдереЗрдВрдЯрд┐рдХреЗрдЯреЗрдб рдЗрдирдо

рдХреБрдЫ **Firebase рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕** рдХреЛ **рдореЛрдмрд╛рдЗрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕** рдореЗрдВ рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ Firebase рдПрдВрдбрдкреЙрдЗрдВрдЯ **рдЦрд░рд╛рдмреА рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛ рдЬрд┐рд╕рд╕реЗ рд╕рднреА рдХреЛ рдкрдврд╝рдиреЗ (рдФрд░ рд▓рд┐рдЦрдиреЗ) рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓ рдЬрд╛рдП**ред

рдпрд╣ рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП Firebase рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рдЦреЛрдЬ рдФрд░ рд╢реЛрдз рдХрд░рдиреЗ рдХрд╛ рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХрд╛ рд╣реИ:

1. **рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ APK рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ** рдЖрдк рдЗрд╕ POC рдХреЗ рд▓рд┐рдП рдЙрдкрдХрд░рдг рдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рднреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗ APK рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рднреА рдЙрдкрдХрд░рдг рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред\
рдЖрдк "APK рдПрдХреНрд╕рдЯреНрд░реИрдХреНрдЯрд░" рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ [https://play.google.com/store/apps/details?id=com.ext.ui\&hl=e](https://hackerone.com/redirect?signature=3774f35d1b5ea8a4fd209d80084daa9f5887b105\&url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.ext.ui%26hl%3Den)
2. **APK рдХреЛ рдбрд┐рдХреЙрдореНрдкрд╛рдЗрд▓** рдХрд░реЗрдВ apktool рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдХрдорд╛рдВрдб рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ рдФрд░ APK рд╕реЗ рд╕реНрд░реЛрдд рдХреЛрдб рдирд┐рдХрд╛рд▓реЗрдВред
3. _**res/values/strings.xml**_ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рдЗрд╕реЗ рдЦреЛрдЬреЗрдВ рдФрд░ "firebase" рд╢рдмреНрдж рдХреЗ рд▓рд┐рдП **рдЦреЛрдЬреЗрдВ**
4. рдЖрдкрдХреЛ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рдХрд╛ URL рдорд┐рд▓ рд╕рдХрддрд╛ рд╣реИ "_**https://xyz.firebaseio.com/**_"
5. рдЕрдЧрд▓реЗ, рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдЬрд╛рдПрдВ рдФрд░ **рдкрд╛рдП рдЧрдП URL рдкрд░ рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░реЗрдВ**: _https://xyz.firebaseio.com/.json_
6. 2 рдкреНрд░рдХрд╛рд░ рдХреЗ рдЬрд╡рд╛рдм рдЖ рд╕рдХрддреЗ рд╣реИрдВ:
1. "**рдЕрдиреБрдорддрд┐ рдирд╛рдХрд╛рдо**": рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдк рдЗрд╕реЗ рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдареАрдХ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ
2. "**null**" рдЬрд╡рд╛рдм рдпрд╛ рдПрдХ рд╕рдореВрд╣ **JSON рдбреЗрдЯрд╛**: рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╣реИ рдФрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХрдо рд╕реЗ рдХрдо рдкрдврд╝рдиреЗ рдХрд╛ рдЕрдзрд┐рдХрд╛рд░ рд╣реИред
1. рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдк **рд▓реЗрдЦрди рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**, рд▓реЗрдЦрди рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдпрд╣рд╛рдБ рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: [https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit](https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit)

**рджрд┐рд▓рдЪрд╕реНрдк рдиреЛрдЯ**: **MobSF** рдХреЗ рд╕рд╛рде рдПрдХ рдореЛрдмрд╛рдЗрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддреЗ рд╕рдордп, рдЕрдЧрд░ рдпрд╣ рдПрдХ рдлрд╛рдпрд░рдмреЗрд╕ рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд╛рддрд╛ рд╣реИ рддреЛ рдпрд╣ рдЬрд╛рдВрдЪреЗрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдпрд╣ **рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд░реВрдк рд╕реЗ рдЙрдкрд▓рдмреНрдз** рд╣реИ рдФрд░ рдЗрд╕реЗ рд╕реВрдЪрд┐рдд рдХрд░реЗрдЧрд╛ред

рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, рдЖрдк [Firebase рд╕реНрдХреИрдирд░](https://github.com/shivsahni/FireBaseScanner) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдиреАрдЪреЗ рджрд┐рдЦрд╛рдП рдЧрдП рддрд╛рд╕реНрдХ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ:
```bash
python FirebaseScanner.py -f <commaSeperatedFirebaseProjectNames>
```
### рдкреНрд░рдорд╛рдгреАрдХреГрдд рдЗрдирдо

рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ Firebase рдбреЗрдЯрд╛рдмреЗрд╕ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рд╣реИрдВ, рддреЛ рдЖрдк [**Baserunner**](https://github.com/iosiro/baserunner) рдЬреИрд╕рд╛ рдПрдХ рдЙрдкрдХрд░рдг рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдЬрд╛рдирдХрд╛рд░реА рдЖрд╕рд╛рдиреА рд╕реЗ рдкрд╣реБрдВрдЪ рд╕рдХреЗред рдпрд╛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрд░рд╣ рдХрд╛ рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ:
```python
#Taken from https://blog.assetnote.io/bug-bounty/2020/02/01/expanding-attack-surface-react-native/
import pyrebase

config = {
"apiKey": "FIREBASE_API_KEY",
"authDomain": "FIREBASE_AUTH_DOMAIN_ID.firebaseapp.com",
"databaseURL": "https://FIREBASE_AUTH_DOMAIN_ID.firebaseio.com",
"storageBucket": "FIREBASE_AUTH_DOMAIN_ID.appspot.com",
}

firebase = pyrebase.initialize_app(config)

db = firebase.database()

print(db.get())
```
### APPID рдФрд░ API Key рдХреЗ рд╕рд╛рде рдПрдХреНрд╕реЗрд╕ рдЬрд╛рдирдХрд╛рд░реА <a href="#access-info-with-appid-and-api-key" id="access-info-with-appid-and-api-key"></a>

рдпрджрд┐ рдЖрдк iOS рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдбрд┐рдХреЙрдВрдкрд╛рдЗрд▓ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдлрд╝рд╛рдЗрд▓ `GoogleService-Info.plist` рдЦреЛрд▓рддреЗ рд╣реИрдВ рдФрд░ рдЖрдкрдХреЛ API Key рдФрд░ APP ID рдорд┐рд▓рддрд╛ рд╣реИ:

* API KEY **AIzaSyAs1\[...]**
* APP ID **1:612345678909:ios:c212345678909876**

рдЖрдк рдХреБрдЫ рджрд┐рд▓рдЪрд╕реНрдк рдЬрд╛рдирдХрд╛рд░реА рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ

**Request**

`curl -v -X POST "https://firebaseremoteconfig.googleapis.com/v1/projects/612345678909/namespaces/firebase:fetch?key=AIzaSyAs1[...]" -H "Content-Type: application/json" --data '{"appId": "1:612345678909:ios:c212345678909876", "appInstanceId": "PROD"}'`

## рд╕рдВрджрд░реНрдн <a href="#references" id="references"></a>

* тАЛ[https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/](https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/)тАЛ
* тАЛ[https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1](https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1)тАЛ
