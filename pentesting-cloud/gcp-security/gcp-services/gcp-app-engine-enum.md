# GCP - App Engine Enum

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 Discord grubuna** [**katılın**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'ı takip edin.**
* **HackTricks'e PR göndererek hacking ipuçlarını paylaşın** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına.

</details>
{% endhint %}

## Temel Bilgiler <a href="#reviewing-app-engine-configurations" id="reviewing-app-engine-configurations"></a>

Google Cloud Platform'un (GCP) App Engine'i, **web uygulamalarının büyük ölçekte geliştirilmesi ve barındırılması için tasarlanmış güçlü, sunucusuz bir platformdur**. Bu platformun tasarımı, geliştirme sürecini kolaylaştırmaya ve uygulamaların yönetilebilirliğini artırmaya odaklanır. GCP'nin App Engine'inin temel özellikleri ve faydaları şunlardır:

1. **Sunucusuz Mimari**: App Engine, altyapıyı otomatik olarak yönetir, sunucu sağlama, yapılandırma ve ölçeklendirme dahil. Bu, geliştiricilerin donanım hakkında endişelenmeden kod yazmaya odaklanmalarını sağlar.
2. **Otomatik Ölçeklendirme**: App Engine, uygulamanızı aldığı trafik miktarına göre otomatik olarak ölçeklendirebilir. Artan trafiği karşılamak için ölçeklenir ve trafik azaldığında maliyet ve performansı optimize etmek için ölçek küçülür.
3. **Dil ve Çalışma Zamanı Desteği**: Java, Python, Node.js, Go, Ruby, PHP ve .NET gibi popüler programlama dillerini destekler. Uygulamalarınızı standart veya esnek bir ortamda çalıştırabilirsiniz. Standart ortam daha kısıtlayıcıdır ancak belirli diller için yüksek derecede optimize edilmiştir, esnek ortam ise daha fazla özelleştirme imkanı sunar.
4. **Entegre Hizmetler**: App Engine, Cloud SQL, Cloud Storage, Cloud Datastore ve daha fazlası gibi birçok diğer GCP hizmetiyle entegre olur. Bu entegrasyon, bulut tabanlı uygulamaların mimarisini basitleştirir.
5. **Versiyonlama ve Trafik Bölme**: Uygulamanızın birden fazla sürümünü kolayca dağıtabilir ve ardından A/B testi veya kademeli dağıtımlar için trafiği bunlar arasında bölebilirsiniz.
6. **Uygulama İçgörüleri**: App Engine, günlük kaydı, kullanıcı kimlik doğrulama ve uygulamaları izlemek ve yönetmek için bir dizi geliştirici aracı gibi yerleşik hizmetler sağlar.
7. **Güvenlik**: Uygulama versiyonlama, güvenli bağlantılar için SSL/TLS sertifikaları ve kimlik ve erişim yönetimi gibi yerleşik güvenlik özellikleri sunar.

### Güvenlik Duvarı

Uygulamaları çalıştıran örnekler için aşağıdaki seçeneklerle basit bir **güvenlik duvarı** yapılandırılabilir:

<figure><img src="../../../.gitbook/assets/image (246).png" alt=""><figcaption></figcaption></figure>

### SA

Bu Uygulamalar tarafından kullanılan varsayılan hizmet hesabı, proje üzerinde **Editor** rolüne sahip olan ve APP Engine örneği içinde **cloud-platform kapsamı (diğerlerinin yanı sıra) ile çalışan** **`<proj-name>@appspot.gserviceaccount.com`**'dur.

### Depolama

Kaynak kodu ve meta veriler, `<proj-id>.appspot.com`, `staging.<proj-id>.appspot.com` ve `<country>.<proj-id>.appspot.com` gibi adlara sahip **otomatik olarak kovalar içinde saklanır**.

Uygulamanın **her dosyası**, **içeriğin sha1'i ile dosya adı olarak saklanır**:

<figure><img src="../../../.gitbook/assets/image (82).png" alt=""><figcaption></figcaption></figure>

`staging.<proj-id>.appspot.com` içindeki **`ae`** klasöründe, **her sürüm için bir klasör** ve **uygulamanın bileşenlerini tanımlayan** **`manifest.json`** dosyası bulunur:

{% code overflow="wrap" %}
```json
{"requirements.txt":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/a270eedcbe2672c841251022b7105d340129d108","sha1Sum":"a270eedc_be2672c8_41251022_b7105d34_0129d108"},"main_test.py":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/0ca32fd70c953af94d02d8a36679153881943f32","sha1Sum":"0ca32fd7_0c953af9_4d02d8a ...
```
{% endcode %}

### Containers

Web uygulaması nihayetinde bir **konteyner içinde çalıştırılacak** ve konteyneri oluşturmak için **Code Build** kullanılacak.

### URLs & Regions

**Varsayılan** web sayfası **`<project-uniq-name>.appspot.com`** URL'sinde yayınlanacak, ancak eski sürümlerin URL'si biraz farklı olacak, örneğin **`https://20240117t001540-dot-<project-uniq-name>.uc.r.appspot.com`** (ilk zaman damgasına dikkat edin).

Sadece her bölgeye 1 app engine web uygulaması dağıtılabilir gibi görünebilir, ancak **`app.yml`** dosyasında **`service: <servicename>`** belirterek yeni bir servis (yeni bir web) oluşturmak mümkündür. Bu yeni web için URL formatı **`<servicename>-dot-<project-uniq-name>.appspot.com`** olacaktır.

### Enumeration

{% hint style="danger" %}
Her yeni kod yüklediğinizde, **yeni bir sürüm oluşturulur**. **Tüm sürümler saklanır** ve hatta onlara erişmek için bir **URL'leri vardır**. Bu nedenle, eski bir sürümün kodunu değiştirmek **harika bir kalıcılık tekniği** olabilir.
{% endhint %}

Cloud Functions'da olduğu gibi, **uygulamanın çalışma zamanında ortam değişkenleri aracılığıyla erişilen sırlara dayanma olasılığı vardır**. Bu değişkenler, aşağıdaki gibi erişilebilen bir **`app.yaml`** dosyasında saklanır:
```bash
# List the apps
gcloud app services list
gcloud app services describe <app-name>
# Access via browser to the specified app
gcloud app services browse <app-name>

# Get App versions
gcloud app versions list
# Get all the info of the app and version, included specific verion URL and the env
gcloud app versions describe -s <app-name> <version-id>

# Logs
gcloud app logs tail -s <app-name>

# Instances
## This is only valid if a flexible environment is used and not a standard one
gcloud app instances list
gcloud app instances describe -s <app-name> --version <version-id> <ID>
## Connect to the instance via ssh
gcloud app instances ssh --service <app-name> --version <version-id> <ID>

# Firewalls
gcloud app firewall-rules list
gcloud app firewall-rules describe <num_fw>

# Get domains
gcloud app domain-mappings list
gcloud app domain-mappings describe <name>

# SSl certificates
gcloud app ssl-certificates list
gcloud app ssl-certificates describe <name>
```
### Ayrıcalık Yükseltme

{% content-ref url="../gcp-privilege-escalation/gcp-appengine-privesc.md" %}
[gcp-appengine-privesc.md](../gcp-privilege-escalation/gcp-appengine-privesc.md)
{% endcontent-ref %}

### Kimlik Doğrulaması Olmayan Enum

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md" %}
[gcp-app-engine-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md)
{% endcontent-ref %}

### Sömürü Sonrası

{% content-ref url="../gcp-post-exploitation/gcp-app-engine-post-exploitation.md" %}
[gcp-app-engine-post-exploitation.md](../gcp-post-exploitation/gcp-app-engine-post-exploitation.md)
{% endcontent-ref %}

### Kalıcılık

{% content-ref url="../gcp-persistence/gcp-app-engine-persistence.md" %}
[gcp-app-engine-persistence.md](../gcp-persistence/gcp-app-engine-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 Discord grubuna** [**katılın**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) **bizi takip edin.**
* **HackTricks** ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına PR göndererek hacking ipuçlarını paylaşın.

</details>
{% endhint %}
