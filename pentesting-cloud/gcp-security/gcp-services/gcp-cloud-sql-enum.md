# GCP - Cloud SQL Enum

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Expert de l'√©quipe rouge HackTricks AWS)</strong></a><strong>!</strong></summary>

Autres fa√ßons de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop) !
* Obtenez le [**swag officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection exclusive de [**NFT**](https://opensea.io/collection/the-peass-family)
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR √†** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
*
*
* d√©p√¥ts GitHub.

</details>

## Informations de base

Google Cloud SQL est un service g√©r√© qui **simplifie la configuration, la maintenance et l'administration de bases de donn√©es relationnelles** telles que MySQL, PostgreSQL et SQL Server sur la plateforme Google Cloud, √©liminant la n√©cessit√© de g√©rer des t√¢ches telles que la provision de mat√©riel, la configuration de la base de donn√©es, le patching et les sauvegardes.

Les principales caract√©ristiques de Google Cloud SQL comprennent :

1. **Enti√®rement g√©r√©** : Google Cloud SQL est un service enti√®rement g√©r√©, ce qui signifie que Google g√®re les t√¢ches de maintenance de la base de donn√©es telles que le patching, les mises √† jour, les sauvegardes et la configuration.
2. **Scalabilit√©** : Il offre la possibilit√© de mettre √† l'√©chelle la capacit√© de stockage de votre base de donn√©es et les ressources de calcul, souvent sans temps d'arr√™t.
3. **Haute disponibilit√©** : Offre des configurations de haute disponibilit√©, garantissant que vos services de base de donn√©es sont fiables et peuvent r√©sister aux pannes de zone ou d'instance.
4. **S√©curit√©** : Fournit des fonctionnalit√©s de s√©curit√© robustes telles que le chiffrement des donn√©es, les contr√¥les d'identit√© et d'acc√®s (IAM) et l'isolation r√©seau en utilisant des adresses IP priv√©es et des VPC.
5. **Sauvegardes et r√©cup√©ration** : Prend en charge les sauvegardes automatiques et la r√©cup√©ration √† un instant donn√©, vous aidant √† prot√©ger et √† restaurer vos donn√©es.
6. **Int√©gration** : S'int√®gre parfaitement avec d'autres services Google Cloud, offrant une solution compl√®te pour la construction, le d√©ploiement et la gestion d'applications.
7. **Performance** : Offre des m√©triques de performance et des diagnostics pour surveiller, d√©panner et am√©liorer les performances de la base de donn√©es.

### Mot de passe

Dans la console Web Cloud SQL permet √† l'utilisateur de **d√©finir** le **mot de passe** de la base de donn√©es, il existe √©galement une fonction de g√©n√©ration, mais surtout, **MySQL** permet de **laisser un mot de passe vide et tous permettent de d√©finir comme mot de passe simplement le caract√®re "a"** :

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

Il est √©galement possible de configurer une politique de mot de passe exigeant **une longueur**, **une complexit√©**, **la d√©sactivation de la r√©utilisation** et **la d√©sactivation du nom d'utilisateur dans le mot de passe**. Tous sont d√©sactiv√©s par d√©faut.

**SQL Server** peut √™tre configur√© avec **l'authentification Active Directory**.

### Disponibilit√© de la zone

La base de donn√©es peut √™tre **disponible dans 1 zone ou dans plusieurs**, il est bien s√ªr recommand√© d'avoir des bases de donn√©es importantes dans plusieurs zones.

### Chiffrement

Par d√©faut, une cl√© de chiffrement g√©r√©e par Google est utilis√©e, mais il est √©galement **possible de s√©lectionner une cl√© de chiffrement g√©r√©e par le client (CMEK)**.

### Connexions

* **IP priv√©e** : Indiquez le r√©seau VPC et la base de donn√©es obtiendra une IP priv√©e √† l'int√©rieur du r√©seau
* **IP publique** : La base de donn√©es obtiendra une IP publique, mais par d√©faut, personne ne pourra se connecter
* **R√©seaux autoris√©s** : Indiquez les **plages d'adresses IP publiques qui doivent √™tre autoris√©es** √† se connecter √† la base de donn√©es
* **Chemin priv√©** : Si la base de donn√©es est connect√©e √† un VPC, il est possible d'activer cette option et de donner **acc√®s √† d'autres services GCP comme BigQuery**

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Protection des donn√©es

* **Sauvegardes quotidiennes** : Effectuez des sauvegardes automatiques quotidiennes et indiquez le nombre de sauvegardes que vous souhaitez conserver.
* **R√©cup√©ration √† un instant donn√©** : Vous permet de r√©cup√©rer des donn√©es √† partir d'un moment sp√©cifique, jusqu'√† une fraction de seconde.
* **Protection contre la suppression** : Si activ√©e, la base de donn√©es ne pourra pas √™tre supprim√©e tant que cette fonctionnalit√© est activ√©e

### √ânum√©ration
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### √ânum√©ration non authentifi√©e

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post-exploitation

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Persistance

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Apprenez et pratiquez le piratage AWS :<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Apprenez et pratiquez le piratage GCP : <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop)!
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>
{% endhint %}
