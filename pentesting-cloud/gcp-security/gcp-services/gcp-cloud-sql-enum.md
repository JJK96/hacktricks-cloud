# GCP - Cloud SQL Enum

{% hint style="success" %}
Leer & oefen AWS Hack:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Controleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

## Basiese Inligting

Google Cloud SQL is 'n bestuurde diens wat **die opstel, instandhouding en administrasie van verhoudingsdatabasisse** soos MySQL, PostgreSQL en SQL Server op Google Cloud Platform vereenvoudig, deur die behoefte om take soos hardewarevoorsiening, databasisopstelling, patching en rugsteun te hanteer, te verwyder.

Kernkenmerke van Google Cloud SQL sluit in:

1. **Ten volle Bestuur**: Google Cloud SQL is 'n ten volle bestuurde diens, wat beteken dat Google databasisinstandhoudingstake soos patching, opdaterings, rugsteune en konfigurasie hanteer.
2. **Skaalbaarheid**: Dit bied die vermo√´ om jou databasis se stoorvermo√´ en rekenaarbronne te vergroot, dikwels sonder afbreektyd.
3. **Ho√´ Beskikbaarheid**: Bied ho√´ beskikbaarheidskonfigurasies, wat verseker dat jou databasisdienste betroubaar is en zone- of instansie-foute kan weerstaan.
4. **Sekuriteit**: Bied robuuste sekuriteitskenmerke soos dataversleuteling, Identiteit en Toegangsbestuur (IAM)-beheer en netwerkisolering deur privaat IP's en VPC te gebruik.
5. **Rugsteune en Herstel**: Ondersteun outomatiese rugsteune en punt-in-tyd-herstel, wat jou help om jou data te beskerm en te herstel.
6. **Integrasie**: Integreer naadloos met ander Google Cloud-diensse, wat 'n omvattende oplossing bied vir die bou, implementering en bestuur van toepassings.
7. **Prestasie**: Bied prestasiemetriek en diagnostiek om databasisprestasie te monitor, foutopsporing te doen en te verbeter.

### Wagwoord

In die webkonsol laat Cloud SQL die gebruiker toe om die **wagwoord** van die databasis **in te stel**, daar is ook 'n genereerfunksie, maar nog belangriker, **MySQL** laat toe om **'n le√´ wagwoord te laat** en almal laat toe om net die karakter "a" as wagwoord in te stel:

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

Dit is ook moontlik om 'n wagwoordbeleid te konfigureer wat **lengte**, **kompleksiteit**, **hergebruik uitskakel** en **gebruikersnaam in wagwoord uitskakel** vereis. Almal is standaard gedeaktiveer.

**SQL Server** kan gekonfigureer word met **Aktiewe Gids-verifikasie**.

### Sone Beskikbaarheid

Die databasis kan **beskikbaar wees in 1 sone of in meervoudige**, dit is natuurlik aanbeveelbaar om belangrike databasisse in meervoudige sones te h√™.

### Versleuteling

Standaard word 'n deur Google bestuurde versleutelingssleutel gebruik, maar dit is ook **moontlik om 'n Kli√´nt-besuurde versleutelingssleutel (CMEK)** te kies.

### Verbindings

* **Privaat IP**: Dui die VPC-netwerk aan en die databasis sal 'n privaat IP binne die netwerk kry
* **Openbare IP**: Die databasis sal 'n openbare IP kry, maar standaard sal niemand in staat wees om te koppel nie
* **Gemagtigde netwerke**: Dui openbare **IP-reeks aan wat toegelaat moet word** om met die databasis te verbind
* **Privaat Pad**: As die DB in 'n VPC gekoppel is, is dit moontlik om hierdie opsie te aktiveer en **ander GCP-diensse soos BigQuery toegang daartoe te gee**

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Data Beskerming

* **Daaglikse rugsteune**: Voer outomatiese daaglikse rugsteune uit en dui die aantal rugsteune aan wat jy wil handhaaf.
* **Punt-in-tyd-herstel**: Laat jou toe om data vanaf 'n spesifieke tydstip te herstel, tot op 'n fraksie van 'n sekonde.
* **Verwyderingsbeskerming**: Indien geaktiveer, kan die DB nie verwyder word nie totdat hierdie funksie gedeaktiveer is nie

### Enumerasie
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Ongeverifieerde Enum

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Na-Exploitasi

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Volharding

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Leer & oefen AWS Hack: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Controleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
