# GCP - Cloud SQL Enum

{% hint style="success" %}
AWS 해킹 학습 및 실습:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP 해킹 학습 및 실습: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks 지원</summary>

* [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* 💬 [**디스코드 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 가입하거나 **트위터** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**를 팔로우하세요**.
* **HackTricks** 및 **HackTricks Cloud** 깃허브 저장소에 PR을 제출하여 해킹 요령을 공유하세요.

</details>
{% endhint %}

## 기본 정보

Google Cloud SQL은 MySQL, PostgreSQL 및 SQL Server와 같은 관계형 데이터베이스를 Google Cloud Platform에서 설정, 유지 관리 및 관리하는 것을 간소화하는 관리형 서비스입니다. 하드웨어 프로비저닝, 데이터베이스 설정, 패치 및 백업과 같은 작업을 처리할 필요가 없어집니다.

Google Cloud SQL의 주요 기능은 다음과 같습니다:

1. **완전 관리형**: Google Cloud SQL은 Google이 패치, 업데이트, 백업 및 구성과 같은 데이터베이스 유지 관리 작업을 처리하는 완전 관리형 서비스입니다.
2. **확장성**: 데이터베이스의 저장 용량 및 컴퓨팅 리소스를 확장할 수 있으며 종종 다운타임 없이 가능합니다.
3. **고가용성**: 가용성 구성을 제공하여 데이터베이스 서비스가 신뢰성 있고 존재하는 존 또는 인스턴스의 장애를 견딜 수 있도록 합니다.
4. **보안**: 데이터 암호화, Identity and Access Management (IAM) 제어 및 사설 IP 및 VPC를 사용한 네트워크 격리와 같은 견고한 보안 기능을 제공합니다.
5. **백업 및 복구**: 자동 백업 및 시점 복구를 지원하여 데이터를 안전하게 보호하고 복원할 수 있도록 합니다.
6. **통합**: 다른 Google Cloud 서비스와 원활하게 통합되어 애플리케이션을 구축, 배포 및 관리하는 포괄적인 솔루션을 제공합니다.
7. **성능**: 데이터베이스 성능을 모니터링, 문제 해결 및 개선하기 위한 성능 메트릭 및 진단을 제공합니다.

### 비밀번호

웹 콘솔에서 Cloud SQL은 데이터베이스의 **비밀번호를 설정**할 수 있으며, 생성 기능도 있지만, **MySQL**에서는 **빈 비밀번호를 남길 수 있고 모든 비밀번호를 "a" 문자로 설정할 수 있습니다**:

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

**길이**, **복잡성**, **재사용 비활성화** 및 **비밀번호에 사용자 이름 비활성화**를 요구하는 비밀번호 정책을 구성할 수도 있습니다. 기본적으로 모두 비활성화됩니다.

**SQL Server**는 **Active Directory 인증**으로 구성할 수 있습니다.

### 존 가용성

데이터베이스는 1개 존 또는 여러 존에서 사용할 수 있으며, 중요한 데이터베이스는 여러 존에 있어야 합니다.

### 암호화

기본적으로 Google 관리형 암호화 키가 사용되지만, **고객 관리형 암호화 키 (CMEK)**를 선택할 수도 있습니다.

### 연결

* **사설 IP**: VPC 네트워크를 지정하고 데이터베이스는 네트워크 내부에 사설 IP를 받게 됩니다.
* **공용 IP**: 데이터베이스는 공용 IP를 받지만 기본적으로 아무도 연결할 수 없습니다.
* **인가된 네트워크**: 데이터베이스에 연결할 수 있는 공용 **IP 범위를 지정**합니다.
* **사설 경로**: DB가 특정 VPC에 연결된 경우 이 옵션을 활성화하고 **BigQuery와 같은 다른 GCP 서비스에 액세스할 수 있습니다**

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### 데이터 보호

* **매일 백업**: 자동 매일 백업을 수행하고 유지할 백업 수를 지정합니다.
* **시간별 복구**: 특정 시점부터 데이터를 복구할 수 있도록 초 단위로 지정합니다.
* **삭제 보호**: 활성화된 경우 이 기능이 비활성화될 때까지 DB를 삭제할 수 없습니다.

### 열거
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### 인증되지 않은 열거

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### 포스트 익스플로잇레이션

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### 지속성

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS 해킹 학습 및 실습:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP 해킹 학습 및 실습: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks 지원</summary>

* [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* 💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **트위터** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**를 팔로우**하세요.
* 해킹 트릭을 공유하려면 **HackTricks** 및 **HackTricks Cloud** 깃허브 저장소로 PR을 제출하세요.

</details>
{% endhint %}
