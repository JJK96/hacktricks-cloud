# GCP - Enumerazione di Cloud SQL

{% hint style="success" %}
Impara e pratica l'Hacking su AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Impara e pratica l'Hacking su GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Sostieni HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos di Github.

</details>
{% endhint %}

## Informazioni di Base

Google Cloud SQL √® un servizio gestito che **semplifica l'impostazione, la manutenzione e l'amministrazione di database relazionali** come MySQL, PostgreSQL e SQL Server su Google Cloud Platform, eliminando la necessit√† di gestire compiti come il provisioning dell'hardware, l'installazione del database, il patching e i backup.

Le principali caratteristiche di Google Cloud SQL includono:

1. **Totalmente Gestito**: Google Cloud SQL √® un servizio completamente gestito, il che significa che Google si occupa di compiti di manutenzione del database come il patching, gli aggiornamenti, i backup e la configurazione.
2. **Scalabilit√†**: Fornisce la possibilit√† di scalare la capacit√† di archiviazione del database e le risorse di calcolo, spesso senza tempi di inattivit√†.
3. **Alta Affidabilit√†**: Offre configurazioni ad alta disponibilit√†, garantendo che i servizi del database siano affidabili e possano resistere a guasti di zona o di istanza.
4. **Sicurezza**: Fornisce robuste funzionalit√† di sicurezza come la crittografia dei dati, i controlli di Identit√† e Accesso (IAM) e l'isolamento di rete utilizzando IP privati e VPC.
5. **Backup e Ripristino**: Supporta i backup automatici e il ripristino a un determinato momento, aiutandoti a proteggere e ripristinare i tuoi dati.
6. **Integrazione**: Si integra perfettamente con altri servizi di Google Cloud, fornendo una soluzione completa per la costruzione, il rilascio e la gestione delle applicazioni.
7. **Prestazioni**: Offre metriche delle prestazioni e diagnostica per monitorare, risolvere i problemi e migliorare le prestazioni del database.

### Password

Nella console web di Cloud SQL permette all'utente di **impostare** la **password** del database, c'√® anche una funzione di generazione, ma soprattutto, **MySQL** permette di **lasciare una password vuota e tutte permettono di impostare come password solo il carattere "a":**

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

√à anche possibile configurare una politica delle password che richiede **lunghezza**, **complessit√†**, **disabilitazione del riutilizzo** e **disabilitazione del nome utente nella password**. Tutti sono disabilitati per impostazione predefinita.

**SQL Server** pu√≤ essere configurato con **Autenticazione tramite Active Directory**.

### Disponibilit√† della Zona

Il database pu√≤ essere **disponibile in 1 zona o in pi√π**, naturalmente, √® consigliabile avere database importanti in pi√π zone.

### Crittografia

Per impostazione predefinita viene utilizzata una chiave di crittografia gestita da Google, ma √® anche **possibile selezionare una chiave di crittografia gestita dal cliente (CMEK)**.

### Connessioni

* **IP Privato**: Indica la rete VPC e il database otterr√† un IP privato all'interno della rete
* **IP Pubblico**: Il database otterr√† un IP pubblico, ma per impostazione predefinita nessuno potr√† connettersi
* **Reti Autorizzate**: Indica gli **intervalli di IP pubblici** che devono essere autorizzati a connettersi al database
* **Percorso Privato**: Se il DB √® connesso in qualche VPC, √® possibile abilitare questa opzione e dare **ad altri servizi GCP come BigQuery l'accesso su di esso**

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Protezione dei Dati

* **Backup giornalieri**: Esegui backup automatici giornalieri e indica il numero di backup che desideri mantenere.
* **Ripristino a un determinato momento**: Consente di recuperare i dati da un momento specifico, fino a una frazione di secondo.
* **Protezione dalla Cancellazione**: Se abilitata, il DB non potr√† essere eliminato fino a quando questa funzionalit√† non viene disabilitata

### Enumerazione
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Enumerazione non autenticata

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post Esploitation

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Persistenza

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Impara e pratica l'hacking su AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Impara e pratica l'hacking su GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supporta HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
