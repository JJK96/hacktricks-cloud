# GCP - Taarifa Msingi

<details>

<summary><strong>Jifunze AWS hacking kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya HackTricks AWS)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA USAJILI**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## **Mfumo wa rasilimali**

Google Cloud hutumia [Mfumo wa rasilimali](https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy) ambao ni sawa, kwa dhana, na ule wa mfumo wa faili wa jadi. Hii hutoa mtiririko wa mzazi/mtoto wa mantiki na pointi maalum za kiambatisho kwa sera na idhini.

Kwa kiwango kikubwa, inaonekana kama hivi:
```
Organization
--> Folders
--> Projects
--> Resources
```
**Mashine ya Virtual (inayoitwa Kielelezo cha Kuhesabu) ni rasilimali. Rasilimali iko katika mradi, labda pamoja na Kielelezo cha Kuhesabu kingine, vikapu vya kuhifadhi, n.k.**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption><p><a href="https://cloud.google.com/static/resource-manager/img/cloud-hierarchy.svg">https://cloud.google.com/static/resource-manager/img/cloud-hierarchy.svg</a></p></figcaption></figure>

## **Uhamiaji wa Miradi**

Inawezekana **kuhamisha mradi bila shirika lolote** kwenda kwa shirika lenye ruhusa `roles/resourcemanager.projectCreator` na `roles/resourcemanager.projectMover`. Ikiwa mradi uko ndani ya shirika lingine, ni lazima kuwasiliana na msaada wa GCP ili **kuwatoa nje ya shirika kwanza**. Kwa maelezo zaidi angalia [**hapa**](https://medium.com/google-cloud/migrating-a-project-from-one-organization-to-another-gcp-4b37a86dd9e6).

## **Sera za Shirika**

Ruhusu kudhibiti kwa pamoja rasilimali za wingu la shirika lako:

* Kudhibiti kwa pamoja ili **kusanidi vizuizi** juu ya jinsi rasilimali za shirika lako zinaweza kutumika.
* Taja na anzisha **mipaka** kwa timu zako za maendeleo kubaki ndani ya mipaka ya kufuata sheria.
* Saidia wamiliki wa miradi na timu zao kuhamia haraka bila wasiwasi wa kuvunja sheria za kufuata.

Sera hizi zinaweza kuundwa ili **kuathiri shirika lote, folda, au miradi**. Wazao wa kichwa cha ieraki ya rasilimali iliyolengwa **wanarithi sera ya shirika**.

Ili **kutaja** sera ya shirika, **unachagua** [**kizuizi**](https://cloud.google.com/resource-manager/docs/organization-policy/overview#constraints), ambacho ni aina fulani ya kizuizi dhidi ya huduma ya Google Cloud au kikundi cha huduma za Google Cloud. **Unasanidi kizuizi hicho na vizuizi unavyotaka**.

<figure><img src="../../../.gitbook/assets/image (217).png" alt=""><figcaption><p><a href="https://cloud.google.com/resource-manager/img/org-policy-concepts.svg">https://cloud.google.com/resource-manager/img/org-policy-concepts.svg</a></p></figcaption></figure>

#### Matumizi ya Kawaida <a href="#common_use_cases" id="common_use_cases"></a>

* Punguza ushirikiano wa rasilimali kulingana na kikoa.
* Punguza matumizi ya akaunti za huduma za Kitambulisho na Usimamizi wa Upatikanaji.
* Zuia eneo la kimwili la rasilimali zinazoundwa mpya.
* Lemaza uundaji wa akaunti za huduma.

<figure><img src="../../../.gitbook/assets/image (172).png" alt=""><figcaption></figcaption></figure>

Kuna vizuizi vingi zaidi vinavyokupa udhibiti wa kina wa rasilimali za shirika lako. Kwa **maelezo zaidi, angalia** [**orodha ya vizuizi vyote vya Huduma ya Sera ya Shirika**](https://cloud.google.com/resource-manager/docs/organization-policy/org-policy-constraints)**.**

### **Sera za Shirika za Kimsingi**

<details>

<summary>Hizi ni sera ambazo Google itaongeza kwa chaguo-msingi wakati wa kuweka shirika lako la GCP:</summary>

**Sera za Usimamizi wa Upatikanaji**

* **Mawasiliano yaliyozuiwa na kikoa:** Inazuia kuongeza watumiaji kwa Mawasiliano ya Msingi nje ya vikoa vilivyowekwa. Hii inapunguza Mawasiliano ya Msingi kuruhusu utambulisho wa watumiaji walioandaliwa katika vikoa vyako vilivyochaguliwa kupokea arifa za jukwaa.
* **Kugawana iliyozuiwa na kikoa:** Inazuia kuongeza watumiaji kwa sera za IAM nje ya vikoa vilivyowekwa. Hii inapunguza sera za IAM kuruhusu utambulisho wa watumiaji walioandaliwa katika vikoa vyako vilivyochaguliwa kupata rasilimali ndani ya shirika hili.
* **Kuzuia upatikanaji wa umma:** Inazuia vikapu vya Uhifadhi wa Wingu kutolewa kwa umma. Hii inahakikisha kuwa mwandishi wa programu hawezi kusanidi vikapu vya Uhifadhi wa Wingu kuwa na upatikanaji wa mtandao usiothibitishwa.
* **Upatikanaji wa kiwango cha kikapu sawa:** Inazuia orodha za kudhibiti upatikanaji wa kiwango cha vitu (ACLs) katika vikapu vya Uhifadhi wa Wingu. Hii inasimamia upatikanaji wako kwa kutumia sera za IAM kwa usawa kote kwa vitu vyote katika vikapu vya Uhifadhi wa Wingu.
* **Hitaji la kuingia kwa OS:** Vifaa vya Virtual vilivyoundwa katika miradi mipya vitakuwa na Kuingia kwa OS imewezeshwa. Hii inakuruhusu kusimamia upatikanaji wa SSH kwa mifano yako kwa kutumia IAM bila haja ya kuunda na kusimamia funguo za SSH za kibinafsi.

**Sera za usalama zaidi kwa akaunti za huduma**

* **Lemaza ruzuku za IAM za moja kwa moja**: Inazuia akaunti za huduma za App Engine na Compute Engine za msingi kutolewa moja kwa moja jukumu la IAM la Mhariri kwenye mradi wakati wa uundaji. Hii inahakikisha akaunti za huduma hazipati majukumu ya IAM yenye ruhusa kupita kiasi mara tu zinapoanzishwa.
* **Lemaza uundaji wa funguo za akaunti ya huduma**: Inazuia uundaji wa funguo za umma za akaunti za huduma. Hii husaidia kupunguza hatari ya kufunua siri za kudumu.
* **Lemaza kupakia funguo za akaunti ya huduma**: Inazuia kupakia funguo za umma za akaunti za huduma. Hii husaidia kupunguza hatari ya vifaa vya funguo vilivyovuja au kutumiwa tena.

**Sera za usanidi wa mtandao wa VPC salama**

* **Taja IPs za nje zinazoruhusiwa kwa mifano ya VM**: Inazuia uundaji wa mifano ya Kuhesabu na anwani ya IP ya umma, ambayo inaweza kuwafunua kwa trafiki ya mtandao.

<!---->

* **Lemaza uingizaji wa virtualization iliyonjeshwa**: Inazuia uundaji wa VM zilizojeshwa kwenye Kuhesabu Kuhesabu VM. Hii inapunguza hatari ya usalama ya kuwa na VM zilizojeshwa ambazo hazifuatiliwi.

<!---->

* **Lemaza bandari ya serial ya VM**: Inazuia upatikanaji wa bandari ya serial kwa VM za Kuhesabu Kuhesabu. Hii inazuia kuingia kwenye bandari ya seva kwa kutumia API ya Kuhesabu Kuhesabu.

<!---->

* **Zuia mitandao iliyoruhusiwa kwenye mifano ya Cloud SQL**: Inazuia safu za mitandao ya umma au isiyo ya ndani kutoka kufikia hifadhidata zako za Cloud SQL.

<!---->

* **Zuia Upelekaji wa Itifaki Kulingana na Aina ya Anwani ya IP**: Inazuia upelekaji wa itifaki wa VM kwa anwani za IP za nje.

<!---->

* **Zuia upatikanaji wa IP ya umma kwenye mifano ya Cloud SQL**: Inazuia uundaji wa mifano ya Cloud SQL na anwani ya IP ya umma, ambayo inaweza kuwafunua kwa trafiki ya mtandao.

<!---->

* **Zuia kuondoa lieni ya mradi wa VPC uliogawanyika**: Inazuia kufutwa kwa bahati ya miradi ya mwenyeji wa VPC iliyoshirikiwa.

<!---->

* **Weka mipangilio ya DNS ya ndani kwa miradi mipya kuwa Zonal DNS Pekee**: Inazuia matumizi ya mipangilio ya DNS ya zamani ambayo ina upatikanaji mdogo wa huduma.

<!---->

* **Ruka uundaji wa mtandao wa msingi**: Inazuia uundaji wa moja kwa moja wa mtandao wa VPC wa msingi na rasilimali zinazohusiana. Hii inakwepa sheria za firewall za msingi zilizopita kiasi.

<!---->

* **Lemaza Matumizi ya IPv6 ya Nje ya VPC**: Inazuia uundaji wa mitandao ya IPv6 ya nje, ambayo inaweza kuwafunua kwa upatikanaji wa mtandao usiothibitishwa.

</details>

## **Vyeo vya IAM**

Hivi ni kama sera za IAM katika AWS kwa sababu **kila jukumu lina seti ya ruhusa.**

Walakini, tofauti na AWS, hakuna **repo iliyosanidiwa** ya vyeo. Badala yake, **rasilimali hutoa vyeo vya upatikanaji X kwa mabwana Y**, na njia pekee ya kugundua ni nani anaye upatikanaji wa rasilimali ni kutumia **njia ya `get-iam-policy` juu ya rasilimali hiyo**.\
Hii inaweza kuwa tatizo kwa sababu hii inamaanisha kuwa njia pekee ya kugundua **ruhusa zipi mabwana ana ni kuuliza kila rasilimali ni nani anayetoa ruhusa**, na mtumiaji anaweza kutokuwa na ruhusa ya kupata ruhusa kutoka kwa rasilimali zote.

Kuna **aina tatu** za vyeo katika IAM:

* **Vyeo vya Msingi/Primitiv**, ambavyo ni pamoja na vyeo vya **Mmiliki**, **Mhariri**, na **Mwangaliaji** ambavyo vilikuwepo kabla ya kuanzishwa kwa IAM.
* **Vyeo vilivyowekwa mapema**, ambavyo hutoa upatikanaji wa kina kwa huduma maalum na kusimamiwa na Google Cloud. Kuna vyeo vingi vilivyowekwa mapema, unaweza **kuona vyote pamoja na ruhusa wanayo** [**hapa**](https://cloud.google.com/iam/docs/understanding-roles#predefined\_roles).
* **Vyeo vya desturi**, ambavyo hutoa upatikanaji wa kina kulingana na orodha iliyotajwa na mtumiaji wa ruhusa.

Kuna maelfu ya ruhusa katika GCP. Ili kuthibitisha ikiwa jukumu lina ruhusa unaweza [**tafuta ruhusa hapa**](https://cloud.google.com/iam/docs/permissions-reference) na uone ni vyeo vipi vina hiyo.

Unaweza pia [**tafuta hapa vyeo vilivyowekwa mapema**](https://cloud.google.com/iam/docs/understanding-roles#product\_specific\_documentation) **inayotolewa na kila bidhaa.** Kumbuka kwamba baadhi ya **vyeo** haviwezi kuambatishwa kwa watumiaji na **tu kwa SAs kwa sababu baadhi ya ruhusa** wanazo.\
Zaidi ya hayo, kumbuka kwamba **ruhusa** itaanza tu **kufanya kazi** ikiwa zitakuwa **zimeambatishwa kwa huduma inayofaa.**

Au angalia ikiwa **jukumu la desturi linaweza kutumia** [**ruhusa maalum hapa**](https://cloud.google.com/iam/docs/custom-roles-permissions-support)**.**

{% content-ref url="../gcp-services/gcp-iam-and-org-policies-enum.md" %}
[gcp-iam-and-org-policies-enum.md](../gcp-services/gcp-iam-and-org-policies-enum.md)
{% endcontent-ref %}
## Watumiaji <a href="#default-credentials" id="default-credentials"></a>

Katika **konsoli ya GCP** hakuna usimamizi wa **Watumiaji au Vikundi**, hilo hufanywa katika **Google Workspace**. Hata hivyo, unaweza kusawazisha mtoa huduma tofauti wa utambulisho katika Google Workspace.

Unaweza kupata watumiaji na vikundi vya Workspaces katika [**https://admin.google.com**](https://admin.google.com/).

**MFA** inaweza **kulazimishwa** kwa watumiaji wa Workspaces, hata hivyo, **mshambuliaji** anaweza kutumia token kupata ufikivu wa GCP **kupitia cli ambayo haitalindwa na MFA** (itailindwa na MFA tu wakati mtumiaji anapojiunga nayo: `gcloud auth login`).

## Vikundi

Wakati shirika linapoanzishwa, vikundi kadhaa vinapendekezwa **viundwe**. Ukisimamia chochote kati yao unaweza kuwa umekiuka sehemu au sehemu muhimu ya shirika:

<table data-header-hidden><thead><tr><th width="299.3076923076923"></th><th></th></tr></thead><tbody><tr><td><strong>Kikundi</strong></td><td><strong>Kazi</strong></td></tr><tr><td><strong><code>gcp-organization-admins</code></strong><br><em>(kikundi au akaunti binafsi inayohitajika kwa orodha ya ukaguzi)</em></td><td>Kusimamia rasilimali yoyote inayomilikiwa na shirika. Toa jukumu hili kwa uangalifu; waadmink wa org wana ufikivu wa rasilimali zako zote za Google Cloud. Vinginevyo, kwa sababu hii ni jukumu lenye mamlaka makubwa, fikiria kutumia akaunti binafsi badala ya kuunda kikundi.</td></tr><tr><td><strong><code>gcp-network-admins</code></strong><br><em>(inahitajika kwa orodha ya ukaguzi)</em></td><td>Kuunda mitandao, subneti, sheria za firewall, na vifaa vya mtandao kama Cloud Router, Cloud VPN, na cloud load balancers.</td></tr><tr><td><strong><code>gcp-billing-admins</code></strong><br><em>(inahitajika kwa orodha ya ukaguzi)</em></td><td>Kuanzisha akaunti za malipo na kufuatilia matumizi yake.</td></tr><tr><td><strong><code>gcp-developers</code></strong><br><em>(inahitajika kwa orodha ya ukaguzi)</em></td><td>Kubuni, kuandika, na kujaribu programu.</td></tr><tr><td><strong><code>gcp-security-admins</code></strong><br></td><td>Kuanzisha na kusimamia sera za usalama kwa shirika nzima, ikiwa ni pamoja na usimamizi wa ufikivu na <a href="https://cloud.google.com/resource-manager/docs/organization-policy/org-policy-constraints">sera za kizuizi za shirika</a>. Angalia <a href="https://cloud.google.com/architecture/security-foundations/authentication-authorization#users_and_groups">mwongozo wa msingi wa usalama wa Google Cloud</a> kwa maelezo zaidi kuhusu kupanga miundombinu yako ya usalama wa Google Cloud.</td></tr><tr><td><strong><code>gcp-devops</code></strong></td><td>Kuunda au kusimamia mifumo ya mwisho hadi mwisho inayosaidia uingizaji wa mara kwa mara na utoaji, ufuatiliaji, na utoaji wa mfumo.</td></tr><tr><td><strong><code>gcp-logging-admins</code></strong></td><td></td></tr><tr><td><strong><code>gcp-logging-viewers</code></strong></td><td></td></tr><tr><td><strong><code>gcp-monitor-admins</code></strong></td><td></td></tr><tr><td><strong><code>gcp-billing-viewer</code></strong><br><em>(haipo tena kwa chaguo-msingi)</em></td><td>Kufuatilia matumizi kwenye miradi. Wanachama wa kawaida ni sehemu ya timu ya fedha.</td></tr><tr><td><strong><code>gcp-platform-viewer</code></strong><br><em>(haipo tena kwa chaguo-msingi)</em></td><td>Kupitia taarifa za rasilimali katika shirika la Google Cloud.</td></tr><tr><td><strong><code>gcp-security-reviewer</code></strong><br><em>(haipo tena kwa chaguo-msingi)</em></td><td>Kupitia usalama wa wingu.</td></tr><tr><td><strong><code>gcp-network-viewer</code></strong><br><em>(haipo tena kwa chaguo-msingi)</em></td><td>Kupitia mipangilio ya mtandao.</td></tr><tr><td><strong><code>grp-gcp-audit-viewer</code></strong><br><em>(haipo tena kwa chaguo-msingi)</em></td><td>Kuona kumbukumbu za ukaguzi.</td></tr><tr><td><strong><code>gcp-scc-admin</code></strong><br><em>(haipo tena kwa chaguo-msingi)</em></td><td>Kusimamia Kituo cha Amri cha Usalama.</td></tr><tr><td><strong><code>gcp-secrets-admin</code></strong><br><em>(haipo tena kwa chaguo-msingi)</em></td><td>Kusimamia siri katika Meneja wa Siri.</td></tr></tbody></table>

## **Sera ya Nenosiri ya Chaguo-msingi**

* Tumia nywila imara
* Kati ya herufi 8 na 100
* Usitumie tena
* Bila muda wa kumalizika
* Ikiwa watu wanatumia Workspace kupitia mtoa huduma wa tatu, mahitaji haya hayatumiki.

<figure><img src="../../../.gitbook/assets/image (20).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../.gitbook/assets/image (22).png" alt=""><figcaption></figcaption></figure>

## **Akaunti za Huduma**

Hizi ni mawakala ambao **rasilimali** zinaweza **kuwa nazo** **zimeambatanishwa** na kupata ufikivu wa kuingiliana kwa urahisi na GCP. Kwa mfano, ni rahisi kupata **token ya uthibitishaji** wa Akaunti ya Huduma **iliyounganishwa na VM** katika metadata.\
Inawezekana kukutana na **mizozo** fulani unapotumia **IAM na mipangilio ya ufikivu**. Kwa mfano, akaunti yako ya huduma inaweza kuwa na jukumu la IAM la `compute.instanceAdmin` lakini kifaa ulichovunja kimelemazwa na kizuizi cha wigo cha `https://www.googleapis.com/auth/compute.readonly`. Hii itazuia kufanya mabadiliko yoyote kwa kutumia token ya OAuth ambayo imepewa moja kwa moja kwa kifaa chako.

Ni sawa na **vivutio vya IAM kutoka AWS**. Lakini tofauti na AWS, **akaunti yoyote** ya huduma inaweza **kuambatanishwa na huduma yoyote** (haina haja ya kuruhusu kupitia sera).

Baadhi ya akaunti za huduma utakazopata kimsingi **zinaundwa moja kwa moja na GCP** unapoanza kutumia huduma, kama:
```
PROJECT_NUMBER-compute@developer.gserviceaccount.com
PROJECT_ID@appspot.gserviceaccount.com
```
Walakini, pia niwezekana kuunda na kuambatanisha kwa **akaunti za huduma za desturi**, ambazo zitaonekana kama hii:
```
SERVICE_ACCOUNT_NAME@PROJECT_NAME.iam.gserviceaccount.com
```
### **Vipimo vya Upatikanaji**

Vipimo vya upatikanaji vinahusishwa na **vitambulisho vya OAuth vilivyozalishwa** ili kupata upande wa API za GCP. Vinaweza **kizuia ruhusa** za kitambulisho cha OAuth.\
Hii inamaanisha kwamba ikiwa kitambulisho kinamiliki rasilimali lakini hakina uwezo wa kupata rasilimali hiyo kwenye kipimo cha kitambulisho, kitambulisho hicho **hakiwezi kutumika kwa (ku)ab** kutumia ruhusa hizo.

Google kimsingi [inapendekeza](https://cloud.google.com/compute/docs/access/service-accounts#service\_account\_permissions) kwamba **vipimo vya upatikanaji visitumike na kutegemea kabisa IAM**. Jukwaa la usimamizi wa wavuti linathibitisha hili, lakini vipimo vya upatikanaji vinaweza bado kutumika kwenye mifano kwa kutumia akaunti za huduma za desturi kwa njia ya programu.

Unaweza kuona ni **vipimo** vipi **vilivyotengwa** kwa **kuuliza:**

{% code overflow="wrap" %}
```bash
curl 'https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=<access_token>'

{
"issued_to": "223044615559.apps.googleusercontent.com",
"audience": "223044615559.apps.googleusercontent.com",
"user_id": "139746512919298469201",
"scope": "openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/cloud-platform https://www.googleapis.com/auth/appengine.admin https://www.googleapis.com/auth/sqlservice.login https://www.googleapis.com/auth/compute https://www.googleapis.com/auth/accounts.reauth",
"expires_in": 2253,
"email": "username@testing.com",
"verified_email": true,
"access_type": "offline"
}
```
{% endcode %}

**Scope** za awali ni zile zinazozalishwa kwa **default** kutumia **`gcloud`** kupata data. Hii ni kwa sababu unapotumia **`gcloud`** kwanza unajenga **OAuth token**, na kisha kutumia kuwasiliana na endpoints.

Scope muhimu zaidi kati ya hizo ni **`cloud-platform`**, ambayo kimsingi inamaanisha kwamba ni **rahisi kupata huduma yoyote kwenye GCP**.

Unaweza **kupata orodha ya** [**scope zote zinazowezekana hapa**](https://developers.google.com/identity/protocols/googlescopes)**.**

Ikiwa una **vyeti vya kivinjari vya gcloud**, ni rahisi **kupata token na scopes nyingine,** kwa kufanya kitu kama:
```bash
# Maybe you can get a user token with other scopes changing the scopes array from ~/.config/gcloud/credentials.db

# Set new scopes for SDKs credentials
gcloud auth application-default login --scopes=https://www.googleapis.com/auth/userinfo.email,https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/sqlservice.login,https://www.googleapis.com/auth/appengine.admin,https://www.googleapis.com/auth/compute,https://www.googleapis.com/auth/accounts.reauth,https://www.googleapis.com/auth/admin.directory.user,https://www.googleapis.com/auth/admin.directory.group,https://www.googleapis.com/auth/admin.directory.domain,https://www.googleapis.com/auth/admin.directory.user

# Print new token
gcloud auth application-default print-access-token

# To use this token with some API you might need to use curl to indicate the project header with --header "X-Goog-User-Project: <project-name>"
```
{% endcode %}

## **Sera za IAM za Terraform, Vifungo na Wanachama**

Kama ilivyoelezwa na terraform katika [https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google\_project\_iam](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google\_project\_iam) kutumia terraform na GCP kuna njia tofauti za kumpa mamlaka mkuu upatikanaji juu ya rasilimali:

* **Wanachama**: Unaweka **mamlaka kama wanachama wa majukumu** **bila vikwazo** juu ya jukumu au mamlaka. Unaweza kuweka mtumiaji kama mwanachama wa jukumu kisha weka kikundi kama mwanachama wa jukumu hilo hilo na pia weka mamlaka hizo (mtumiaji na kikundi) kama wanachama wa majukumu mengine.
* **Vifungo**: **Mamlaka kadhaa zinaweza kufungwa kwa jukumu**. **Mamlaka hizo zinaweza bado kufungwa au kuwa wanachama wa majukumu mengine**. Hata hivyo, ikiwa mamlaka ambayo hayajafungwa kwa jukumu yamewekwa kama **mwanachama wa jukumu lililofungwa**, wakati **vifungo vinapotumiwa tena, uanachama utaondolewa**.
* **Sera**: Sera ni **ya msingi**, inaonyesha majukumu na mamlaka kisha, **mamlaka hayo haviwezi kuwa na majukumu zaidi na majukumu hayo hayawezi kuwa na mamlaka zaidi** isipokuwa sera hiyo imebadilishwa (hata katika sera nyingine, vifungo au wanachama). Kwa hivyo, wakati jukumu au mamlaka yanapowekwa katika sera, **mamlaka yake yote yanapunguzwa na sera hiyo**. Kwa dhahiri, hii inaweza kukiukwa ikiwa mamlaka anapewa chaguo la kubadilisha sera au ruhusa ya kufikia mamlaka (kama kuunda mamlaka mpya na kumfunga jukumu jipya).

## Marejeo

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)
* [https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy](https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy)

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
