# GCP - Μόνιμη Αποθήκευση Αποθετηρίου Τεχνολογικών Αντικειμένων

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 στην [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τεχνικές χάκινγκ υποβάλλοντας PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Αποθετήριο Τεχνολογικών Αντικειμένων

Για περισσότερες πληροφορίες σχετικά με το Αποθετήριο Τεχνολογικών Αντικειμένων, ελέγξτε:

{% content-ref url="../gcp-services/gcp-artifact-registry-enum.md" %}
[gcp-artifact-registry-enum.md](../gcp-services/gcp-artifact-registry-enum.md)
{% endcontent-ref %}

### Σύγχυση Εξαρτήσεων

* Τι συμβαίνει αν **αναμειγνύονται ένα απομακρυσμένο και ένα τυπικό** αποθετήριο σε ένα εικονικό και ένα πακέτο υπάρχει σε και τα δύο;
* Χρησιμοποιείται αυτό με τη **υψηλότερη προτεραιότητα που έχει οριστεί στο εικονικό αποθετήριο**
* Αν η **προτεραιότητα είναι η ίδια**:
* Αν η **έκδοση** είναι η **ίδια**, χρησιμοποιείται το **όνομα πολιτικής που είναι πρώτο αλφαβητικά** στο εικονικό αποθετήριο
* Διαφορετικά, χρησιμοποιείται η **υψηλότερη έκδοση**

{% hint style="danger" %}
Επομένως, είναι δυνατόν να **καταχραστείτε μια υψηλότερη έκδοση (σύγχυση εξάρτησης)** σε ένα δημόσιο αποθετήριο πακέτων εάν το απομακρυσμένο αποθετήριο έχει υψηλότερη ή ίδια προτεραιότητα
{% endhint %}

Αυτή η τεχνική μπορεί να είναι χρήσιμη για **μόνιμη αποθήκευση** και **μη εξουσιοδοτημένη πρόσβαση** καθώς για να την καταχραστείτε απαιτείται απλώς να **γνωρίζετε το όνομα μιας βιβλιοθήκης** που αποθηκεύεται στο Αποθετήριο Τεχνολογικών Αντικειμένων και **να δημιουργήσετε την ίδια βιβλιοθήκη στο δημόσιο αποθετήριο (π.χ. PyPi για python για παράδειγμα)** με μια υψηλότερη έκδοση.

Για τη μόνιμη αποθήκευση ακολουθήστε τα παρακάτω βήματα:

* **Απαιτήσεις**: Ένα **εικονικό αποθετήριο** πρέπει να **υπάρχει** και να χρησιμοποιείται, ένα **εσωτερικό πακέτο** με ένα **όνομα** που δεν υπάρχει στο **δημόσιο αποθετήριο** πρέπει να χρησιμοποιηθεί.
* Δημιουργήστε ένα απομακρυσμένο αποθετήριο αν δεν υπάρχει
* Προσθέστε το απομακρυσμένο αποθετήριο στο εικονικό αποθετήριο
* Επεξεργαστείτε τις πολιτικές του εικονικού αποθετηρίου για να δώσετε υψηλότερη προτεραιότητα (ή ίδια) στο απομακρυσμένο αποθετήριο.\
Εκτελέστε κάτι παρόμοιο με:
* [gcloud artifacts repositories update --upstream-policy-file ...](https://cloud.google.com/sdk/gcloud/reference/artifacts/repositories/update#--upstream-policy-file)
* Κατεβάστε το νόμιμο πακέτο, προσθέστε το κακόβουλο κώδικα σας και καταχωρίστε το στο δημόσιο αποθετήριο με την ίδια έκδοση. Κάθε φορά που ένας προγραμματιστής το εγκαθιστά, θα εγκαθιστά το δικό σας!

Για περισσότερες πληροφορίες σχετικά με τη σύγχυση εξάρτησης, ελέγξτε:

{% embed url="https://book.hacktricks.xyz/pentesting-web/dependency-confusion" %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 στην [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τεχνικές χάκινγκ υποβάλλοντας PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
