# GWS - Volharding

{% hint style="success" %}
Leer en oefen AWS-hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer en oefen GCP-hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Controleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

{% hint style="danger" %}
Alle aksies wat in hierdie afdeling genoem word en instellings verander, sal 'n **sekuriteitswaarskuwing na die e-pos stuur en selfs 'n drukkennisgewing na enige gesinkroniseerde mobiele toestel** met die rekening genereer.
{% endhint %}

## Volharding in Gmail

* Jy kan **filters skep om** sekuriteitskennisgewings van Google te **versteek**
* `from: (no-reply@accounts.google.com) "Security Alert"`
* Dit sal voorkom dat sekuriteits-e-posse die e-pos bereik (maar sal nie voorkom dat drukkennisgewings na die mobiele toestel gestuur word nie)

<details>

<summary>Stappe om 'n gmail-filter te skep</summary>

(Instruksies van [**hier**](https://support.google.com/mail/answer/6579))

1. Maak [Gmail](https://mail.google.com/) oop.
2. Klik in die soekblokkie bo-aan op Wys soekopsies ![photos tune](https://lh3.googleusercontent.com/cD6YR\_YvqXqNKxrWn2NAWkV6tjJtg8vfvqijKT1\_9zVCrl2sAx9jROKhLqiHo2ZDYTE=w36) .
3. Voer jou soekkriteria in. As jy wil nagaan of jou soektog korrek gewerk het, sien watter e-posse verskyn deur op **Soek** te klik.&#x20;
4. Onder aan die soekvenster, klik op **Skep filter**.
5. Kies wat jy wil h√™ die filter moet doen.
6. Klik op **Skep filter**.

Kontroleer jou huidige filter (om hulle te verwyder) by [https://mail.google.com/mail/u/0/#settings/filters](https://mail.google.com/mail/u/0/#settings/filters)

</details>

<figure><img src="../../.gitbook/assets/image (331).png" alt=""><figcaption></figcaption></figure>

* Skep **deurverwysingsadres om sensitiewe inligting** (of alles) deur te stuur - Jy benodig handmatige toegang.
* Skep 'n deurverwysingsadres in [https://mail.google.com/mail/u/2/#settings/fwdandpop](https://mail.google.com/mail/u/2/#settings/fwdandpop)
* Die ontvangsadresse moet dit bevestig
* Stel dan in om al die e-posse deur te stuur terwyl 'n kopie behou word (onthou om op stoor veranderinge te klik):

<figure><img src="../../.gitbook/assets/image (332).png" alt=""><figcaption></figcaption></figure>

Dit is ook moontlik om filters te skep en slegs spesifieke e-posse na die ander e-posadres deur te stuur.

## Toepassingswagwoorde

As jy daarin geslaag het om **'n Google-gebruikersessie te kompromiteer** en die gebruiker het **2FA**, kan jy **'n [toepassingswagwoord](https://support.google.com/accounts/answer/185833?hl=en) genereer** (volg die skakel om die stappe te sien). Let daarop dat **Toepassingswagwoorde nie meer deur Google aanbeveel word nie en herroep** word wanneer die gebruiker **sy Google-rekeningwagwoord verander.**

**Selfs as jy 'n oop sessie het, sal jy die wagwoord van die gebruiker moet weet om 'n toepassingswagwoord te skep.**

{% hint style="info" %}
Toepassingswagwoorde kan **slegs gebruik word met rekeninge waar 2-stap-verifikasie** aangeskakel is.
{% endhint %}

## Verander 2-FA en soortgelyke

Dit is ook moontlik om **2-FA af te skakel of 'n nuwe toestel** (of telefoonnommer) in te skryf op hierdie bladsy [**https://myaccount.google.com/security**](https://myaccount.google.com/security)**.**\
**Dit is ook moontlik om wagwoorde te genereer (voeg jou eie toestel by), verander die wagwoord, voeg mobiele nommers by vir verifikasie van telefone en herstel, verander die herstel-e-pos en verander die sekuriteitsvrae).**

{% hint style="danger" %}
Om te **verhoed dat sekuriteitsdrukkennisgewings** die gebruiker se foon bereik, kan jy sy slimfoon **uitteken** (alhoewel dit vreemd sou wees) omdat jy hom nie weer hier kan inteken nie.

Dit is ook moontlik om **die toestel op te spoor.**
{% endhint %}

**Selfs as jy 'n oop sessie het, sal jy die wagwoord van die gebruiker moet weet om hierdie instellings te verander.**

## Volharding via OAuth-toepassings

As jy **die rekening van 'n gebruiker gekompromiteer het,** kan jy net **aanvaar** om alle moontlike toestemmings aan 'n **OAuth-toepassing** te verleen. Die enigste probleem is dat Workspace kan ingestel word om **onopgesmukte eksterne en/of interne OAuth-toepassings te verbied.**\
Dit is redelik algemeen vir Workspace-organisasies om nie standaard eksterne OAuth-toepassings te vertrou nie, maar interne wel, dus as jy **genoeg toestemmings het om 'n nuwe OAuth-toepassing binne die organisasie te genereer** en eksterne toepassings is verbied, genereer dit en **gebruik daardie nuwe interne OAuth-toepassing om volharding te handhaaf**.

Kyk na die volgende bladsy vir meer inligting oor OAuth-toepassings:

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

## Volharding via delegasie

Jy kan net die rekening **delegeer na 'n ander rekening** wat deur die aanvaller beheer word (indien jy toegelaat word om dit te doen). In Workspace **Organisasies** moet hierdie opsie **geaktiveer** wees. Dit kan vir almal gedeaktiveer word, geaktiveer word vir sekere gebruikers/groepe of vir almal (gewoonlik is dit slegs geaktiveer vir sekere gebruikers/groepe of heeltemal gedeaktiveer).

<details>

<summary>As jy 'n Workspace-admin is, kyk hier om die funksie te aktiveer</summary>

(Inligting [gekopieer van die dokumente](https://support.google.com/a/answer/7223765))

As 'n administrateur vir jou organisasie (byvoorbeeld jou werk of skool), beheer jy of gebruikers toegang tot hul Gmail-rekening kan delegeer. Jy kan almal die opsie gee om hul rekening te delegeer. Of, laat net mense in sekere departemente delegeering opstel. Byvoorbeeld, jy kan:

* Voeg 'n administratiewe assistent as 'n afgevaardigde by jou Gmail-rekening sodat hulle e-pos kan lees en stuur namens jou.&#x20;
* Voeg 'n groep, soos jou verkope-afdeling, in Groepe as 'n afgevaardigde by om almal toegang tot een Gmail-rekening te gee.

Gebruikers kan slegs toegang tot 'n ander gebruiker in dieselfde organisasie delegeer, ongeag hul domein of hul organisatoriese eenheid.

### Delegasie-limiete & -beperkings&#x20;

* **Laat gebruikers toe om hul posbus-toegang aan 'n Google-groep te verleen**-opsie: Om hierdie opsie te gebruik, moet dit geaktiveer word vir die OU van die afgevaardigde rekening en vir elke groepslid se OU. Groepslidmate wat aan 'n OU behoort waarsonder hierdie opsie geaktiveer is, kan nie toegang tot die afgevaardigde rekening verkry nie.
* Met tipiese gebruik kan 40 afgevaardigde gebruikers terselfdertyd toegang tot 'n Gmail-rekening h√™. Bogenoemde gemiddelde gebruik deur een of meer afgevaardigdes kan hierdie getal verminder.&#x20;
* Geoutomatiseerde prosesse wat gereeld toegang tot Gmail verkry, kan ook die aantal afgevaardigdes wat terselfdertyd toegang tot 'n rekening kan h√™, verminder. Hierdie prosesse sluit API's of blaaieruitbreidings in wat gereeld toegang tot Gmail verkry.
* 'n Enkele Gmail-rekening ondersteun tot 1,000 unieke afgevaardigdes. 'n Groep in Groepe tel as een afgevaardigde na die limiet.
* Delegasie verhoog nie die limiete vir 'n Gmail-rekening nie. Gmail-rekeninge met afgevaardigde gebruikers het die standaard Gmail-rekeninglimiete en -beleide. Vir besonderhede, besoek [Gmail-limiete en -beleide](https://support.google.com/a/topic/28609).
### Stap 1: Skakel Gmail-delegasie aan vir jou gebruikers&#x20;

**Voordat jy begin:** Om die instelling toe te pas vir sekere gebruikers, plaas hul rekeninge in 'n [organisasie-eenheid](https://support.google.com/a/topic/1227584).

1.  [Teken aan](https://admin.google.com/) by jou [Google Admin-konsole](https://support.google.com/a/answer/182076).

Teken aan met 'n _administrateurrekening_, nie jou huidige rekening CarlosPolop@gmail.com
2. In die Admin-konsole, gaan na die Menu ![](https://storage.googleapis.com/support-kms-prod/JxKYG9DqcsormHflJJ8Z8bHuyVI5YheC0lAp)![en dan](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)![](https://storage.googleapis.com/support-kms-prod/ocGtUSENh4QebLpvZcmLcNRZyaTBcolMRSyl) **Apps**![en dan](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Google Workspace**![en dan](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Gmail**![en dan](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Gebruikersinstellings**.
3. Om die instelling op almal toe te pas, los die boonste organisasie-eenheid geselekteer. Anders, kies 'n kinder [organisasie-eenheid](https://support.google.com/a/topic/1227584).
4. Klik op **Posdelegasie**.
5. Merk die **Laat gebruikers toe om toegang tot hul posbus aan ander gebruikers in die domein te delegeer** blokkie aan.
6. (Opsioneel) Om gebruikers toe te laat om te spesifiseer watter afsenderinligting ingesluit is in gedelegeerde boodskappe wat van hul rekening gestuur word, merk die **Laat gebruikers toe om hierdie instelling aan te pas** blokkie aan.
7. Kies 'n opsie vir die verstek afsenderinligting wat ingesluit is in boodskappe gestuur deur gedelegeerdes:&#x20;
* **Wys die rekening eienaar en die gedelegeerde wat die e-pos gestuur het**‚ÄîBoodskappe sluit die e-posadresse van die Gmail-rekening eienaar en die gedelegeerde in.
* **Wys net die rekening eienaar**‚ÄîBoodskappe sluit slegs die e-posadres van die Gmail-rekening eienaar in. Die gedelegeerde se e-posadres word nie ingesluit nie.
8. (Opsioneel) Om gebruikers toe te laat om 'n groep in Groepe as 'n gedelegeerde by te voeg, merk die **Laat gebruikers toe om hul posbus-toegang aan 'n Google-groep te verleen** blokkie aan.
9. Klik op **Stoor**. As jy 'n kinder organisasie-eenheid gekonfigureer het, kan jy dalk die ouer organisasie-eenheid se instellings **Oorerf** of **Oorskry**.
10. (Opsioneel) Om Gmail-delegasie aan te skakel vir ander organisasie-eenhede, herhaal stappe 3‚Äì9.

Veranderinge kan tot 24 uur neem om in werking te tree, maar gebeurlik vinniger. [Leer meer](https://support.google.com/a/answer/7514107)

### Stap 2: Laat gebruikers gedelegeerdes vir hul rekeninge instel

Nadat jy delegasie aanskakel, gaan jou gebruikers na hul Gmail-instellings om gedelegeerdes toe te ken. Gedelegeerdes kan dan boodskappe lees, stuur, en ontvang namens die gebruiker. &#x20;

Vir meer inligting, verwys gebruikers na [Delegeer en saamwerk aan e-pos](https://support.google.com/a/users/answer/138350).

</details>
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) Github-opslagplaats. 

</details>
{% endhint %}
