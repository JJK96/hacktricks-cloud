# GWS - Kalıcılık

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarını paylaşarak PR'lar gönderin** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına.

</details>
{% endhint %}

{% hint style="danger" %}
Bu bölümde belirtilen tüm ayarları değiştiren eylemler, **güvenlik uyarısı oluşturacak ve hesapla senkronize olan herhangi bir mobil cihaza itme bildirimi gönderecektir.**
{% endhint %}

## Gmail'de Kalıcılık

* Google'dan gelen güvenlik bildirimlerini gizlemek için **filtreler oluşturabilirsiniz**
* `from: (no-reply@accounts.google.com) "Security Alert"`
* Bu, güvenlik e-postalarının e-postaya ulaşmasını engelleyecektir (ancak mobil cihaza itme bildirimlerini engellemez)

<details>

<summary>Bir gmail filtresi oluşturma adımları</summary>

([**Buradan**](https://support.google.com/mail/answer/6579) talimatlar)

1. [Gmail'i](https://mail.google.com/) açın.
2. Üstteki arama kutusunda, Arama seçeneklerini göster'i tıklayın ![photos tune](https://lh3.googleusercontent.com/cD6YR\_YvqXqNKxrWn2NAWkV6tjJtg8vfvqijKT1\_9zVCrl2sAx9jROKhLqiHo2ZDYTE=w36) .
3. Arama kriterlerinizi girin. Aramanızın doğru çalışıp çalışmadığını kontrol etmek istiyorsanız, **Aramayı** tıklayarak hangi e-postaların geldiğini görün.&#x20;
4. Arama penceresinin altında, **Filtre oluştur**'u tıklayın.
5. Filtrenin ne yapmasını istediğinizi seçin.
6. **Filtre oluştur**'u tıklayın.

Mevcut filtrelerinizi kontrol etmek için [https://mail.google.com/mail/u/0/#settings/filters](https://mail.google.com/mail/u/0/#settings/filters) adresine bakın

</details>

<figure><img src="../../.gitbook/assets/image (331).png" alt=""><figcaption></figcaption></figure>

* **Hassas bilgileri iletmek için yönlendirme adresi oluşturun** (veya her şeyi) - Manuel erişime ihtiyacınız olacak.
* [https://mail.google.com/mail/u/2/#settings/fwdandpop](https://mail.google.com/mail/u/2/#settings/fwdandpop) adresinde yönlendirme adresi oluşturun
* Alıcı adres bunu onaylamalıdır
* Ardından, tüm e-postaları yönlendirmek üzere ayarlayın ve bir kopyasını saklayın (değişiklikleri kaydetmeyi unutmayın):

<figure><img src="../../.gitbook/assets/image (332).png" alt=""><figcaption></figcaption></figure>

Ayrıca, filtreler oluşturarak ve yalnızca belirli e-postaları diğer e-posta adresine yönlendirerek mümkündür.

## Uygulama Şifreleri

Eğer bir **google kullanıcı oturumunu ele geçirmeyi başardıysanız** ve kullanıcının **2FA**'sı varsa, bir [**uygulama şifresi oluşturabilirsiniz**](https://support.google.com/accounts/answer/185833?hl=en) (adımları görmek için bağlantıya bakın). **App şifreleri artık Google tarafından önerilmiyor ve kullanıcı **Google Hesabı şifresini değiştirdiğinde iptal ediliyor.**

**Açık bir oturumunuz olsa bile bir uygulama şifresi oluşturabilmek için kullanıcının şifresini bilmelisiniz.**

{% hint style="info" %}
Uygulama şifreleri yalnızca **2 Adımlı Doğrulama**'ya sahip hesaplarla kullanılabilir.
{% endhint %}

## 2-FA ve benzerlerini Değiştirme

Ayrıca **2-FA'yı kapatmak veya yeni bir cihaza** (veya telefon numarasına) kaydolmak mümkündür bu sayfada [**https://myaccount.google.com/security**](https://myaccount.google.com/security)**.**\
**Kendi cihazınızı eklemek, şifreyi değiştirmek, doğrulama telefonları ve kurtarma için mobil numaralar eklemek, kurtarma e-postasını değiştirmek ve güvenlik sorularını değiştirmek de mümkündür.**

{% hint style="danger" %}
Kullanıcının telefonuna **güvenlik itme bildirimlerinin ulaşmasını engellemek** için onun akıllı telefonundan çıkış yapabilirsiniz (ancak bu garip olurdu) çünkü buradan tekrar oturum açamazsınız.

Ayrıca **cihazı bulmak mümkündür.**
{% endhint %}

**Açık bir oturumunuz olsa bile bu ayarları değiştirebilmek için kullanıcının şifresini bilmelisiniz.**

## OAuth Uygulamaları Aracılığıyla Kalıcılık

Eğer bir **kullanıcının hesabını ele geçirdiyseniz,** tüm olası izinleri bir **OAuth Uygulamasına** vermek yeterlidir. Tek sorun, Workspace'in **incelememiş harici ve/veya dahili OAuth uygulamalarını yasaklayabilecek şekilde yapılandırılmış olmasıdır.**\
Workspace Organizasyonlarının genellikle harici OAuth uygulamalarına varsayılan olarak güvenmemesi ancak dahili olanlara güvenmesi oldukça yaygındır, bu nedenle **yeterli izinlere sahipseniz yeni bir OAuth uygulaması oluşturabilir ve kalıcılığı sürdürmek için bu yeni dahili OAuth uygulamasını kullanabilirsiniz.**

OAuth Uygulamaları hakkında daha fazla bilgi için aşağıdaki sayfaya bakın:

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

## Delegasyon Aracılığıyla Kalıcılık

Sadece **hesabı bir saldırgan tarafından kontrol edilen farklı bir hesaba devredebilirsiniz** (bunu yapmaya izin veriliyorsa). Workspace **Organizasyonlarında** bu seçenek **etkinleştirilmelidir.** Herkes için devre dışı bırakılabilir, belirli kullanıcılar/gruplar için etkinleştirilebilir veya herkes için (genellikle yalnızca belirli kullanıcılar/gruplar için etkinleştirilir veya tamamen devre dışı bırakılır).

<details>

<summary>Eğer bir Workspace yöneticisiyseniz, bu özelliği etkinleştirmek için buraya bakın</summary>

(Bilgi [belgelerden kopyalandı](https://support.google.com/a/answer/7223765))

Örneğin, organizasyonunuzun (örneğin, işiniz veya okulunuz) yöneticisi olarak, kullanıcıların Gmail hesaplarına erişimi devretmelerine izin verip vermediğinizi kontrol edersiniz. Herkesin hesabını devretme seçeneğine sahip olmasına izin verebilirsiniz. Veya, sadece belirli departmanlardaki insanların devre ayarlamasına izin verebilirsiniz. Örneğin:

* Yönetici asistanınızı Gmail hesabınızda bir delege olarak ekleyerek sizin adınıza e-posta okumasına ve göndermesine izin verebilirsiniz.&#x20;
* Herkese bir Gmail hesabına erişim vermek için Gruplar'da bir delege olarak bir grup ekleyebilirsiniz.

Kullanıcılar, alanlarına veya grup üyelerinin alanlarına bu seçeneğin etkinleştirilmesi gereken OU için ve her grup üyesinin OU'su için bu seçeneğin etkinleştirilmesi gereken OU için bu seçeneği kullanabilirler.

### Delegasyon sınırları ve kısıtlamaları&#x20;

* **Kullanıcıların posta kutularını bir Google grubuna erişim sağlamalarına izin ver** seçeneği: Bu seçeneği kullanabilmek için, devredilen hesabın OU'su ve her grup üyesinin OU'su için etkinleştirilmiş olmalıdır. Bu seçeneği etkinleştirilmemiş bir OU'ya ait grup üyeleri devredilen hesaba erişemez.
* Tipik kullanımda, 40 devredilen kullanıcı aynı anda bir Gmail hesabına erişebilir. Bir veya daha fazla delege tarafından ortalamanın üzerinde kullanım, bu sayıyı azaltabilir.&#x20;
* Sık sık Gmail'e erişen otomatik süreçler, aynı anda bir hesaba erişebilecek delege sayısını azaltabilir. Bu süreçler, Gmail'e sık sık erişen API'lar veya tarayıcı uzantılarını içerir.
* Tek bir Gmail hesabı, 1.000 benzersiz delegeyi destekler. Gruplar içindeki bir grup, sınır için bir delege olarak sayılır.
* Delegasyon, bir Gmail hesabının sınırlarını artırmaz. Delegeli kullanıcıları olan Gmail hesapları, standart Gmail hesabı sınırlarına ve politikalarına sahiptir. Ayrıntılar için [Gmail sınırları ve politikaları](https://support.google.com/a/topic/28609) sayfasını ziyaret edin.
### Adım 1: Kullanıcılarınız için Gmail vekillik özelliğini açın&#x20;

**Başlamadan önce:** Belirli kullanıcılar için ayarı uygulamak için, hesaplarınızı bir [kurumsal birime](https://support.google.com/a/topic/1227584) yerleştirin.

1. [Oturum açın](https://admin.google.com/) ve [Google Yönetici konsoluna](https://support.google.com/a/answer/182076) gidin.

Yönetici hesabı kullanarak oturum açın, mevcut hesabınız CarlosPolop@gmail.com değil.
2. Yönetici konsolunda, Menü'ye gidin ![](https://storage.googleapis.com/support-kms-prod/JxKYG9DqcsormHflJJ8Z8bHuyVI5YheC0lAp)![ve ardından](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)![](https://storage.googleapis.com/support-kms-prod/ocGtUSENh4QebLpvZcmLcNRZyaTBcolMRSyl) **Uygulamalar**![ve ardından](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Google Workspace**![ve ardından](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Gmail**![ve ardından](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Kullanıcı ayarları**.
3. Ayarı herkese uygulamak için en üst kurumsal birimi seçili bırakın. Aksi takdirde, bir alt [kurumsal birim](https://support.google.com/a/topic/1227584) seçin.
4. **Posta vekilliği**'ni tıklayın.
5. **Kullanıcıların etki alanlarına posta kutularına erişim yetkisi vermesine izin ver** kutusunu işaretleyin.
6. (İsteğe bağlı) Kullanıcıların hesaplarından gönderilen vekil mesajlarda hangi gönderen bilgisinin dahil edileceğini belirlemesine izin vermek için **Bu ayarı özelleştirmelerine izin ver** kutusunu işaretleyin.
7. Delegeler tarafından gönderilen iletilerde varsayılan gönderen bilgileri için bir seçenek seçin:&#x20;
* **Hesap sahibini ve e-posta gönderen delegesi** göster - İletiler, Gmail hesap sahibinin ve delegenin e-posta adreslerini içerir.
* **Yalnızca hesap sahibini göster** - İletiler yalnızca Gmail hesap sahibinin e-posta adresini içerir. Delege e-posta adresi dahil edilmez.
8. (İsteğe bağlı) Kullanıcıların bir Grup'u bir Delege olarak eklemesine izin vermek için **Kullanıcıların posta kutularına erişimini bir Google grubuna vermesine izin ver** kutusunu işaretleyin.
9. **Kaydet**'i tıklayın. Bir alt kurumsal birim yapılandırdıysanız, bir üst kurumsal birimin ayarlarını **Devral** veya **Geçersiz Kıl** yapabilirsiniz.
10. (İsteğe bağlı) Diğer kurumsal birimler için Gmail vekilliğini açmak için adımları 3-9 tekrarlayın.

Değişiklikler en fazla 24 saat alabilir ancak genellikle daha hızlı gerçekleşir. [Daha fazla bilgi edinin](https://support.google.com/a/answer/7514107)

### Adım 2: Kullanıcıların hesapları için vekilleri ayarlamalarını sağlayın

Vekillik özelliğini açtıktan sonra, kullanıcılarınız Gmail ayarlarına giderek vekiller atayabilir. Vekiller daha sonra kullanıcı adına mesajları okuyabilir, gönderebilir ve alabilir. &#x20;

Detaylar için kullanıcıları [E-posta üzerinde vekillik ve işbirliği](https://support.google.com/a/users/answer/138350) sayfasına yönlendirin.

</details>
* **Hacker hilelerini göndererek PR'ler oluşturarak** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ve** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github depolarına paylaşın.**
