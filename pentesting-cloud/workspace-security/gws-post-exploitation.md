# GWS - ポストエクスプロイテーション

{% hint style="success" %}
AWSハッキングの学習と練習:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPハッキングの学習と練習: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポート</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェック！
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォロー**してください。
* **HackTricks**と**HackTricks Cloud**のgithubリポジトリにPRを提出して**ハッキングテクニックを共有**してください。

</details>
{% endhint %}

## Google Groups Privesc

デフォルトでは、ワークスペース内の**グループ**は組織のメンバーによって**自由にアクセス**できます。\
ワークスペースはまた、グループに（GCP権限を含む）**権限を付与**することも可能です。したがって、グループに参加でき、追加の権限がある場合、攻撃者は特権を昇格させるためにその経路を**悪用**する可能性があります。

組織内の誰でも参加できるグループに参加するには、コンソールへのアクセスが必要です。[**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)でグループ情報を確認できます。

### グループメール情報へのアクセス

Googleユーザーセッションを**侵害**できた場合、[**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)から、ユーザーがメンバーであるメールグループに送信されたメールの履歴を確認し、**資格情報**や他の**機密データ**を見つけることができるかもしれません。

## GCP <--> GWS ピボット

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## Takeout - アカウントに関するGoogleのすべての情報をダウンロード

被害者のGoogleアカウント内で**セッション**を持っている場合、[**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)からそのアカウントに関するGoogleが保存しているすべての情報をダウンロードできます。

## Vault - ユーザーのすべてのWorkspaceデータをダウンロード

組織が**Google Vaultを有効にしている**場合、[**https://vault.google.com**](https://vault.google.com/u/1/)にアクセスして**情報をすべてダウンロード**できるかもしれません。

## 連絡先のダウンロード

[**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es\&tab=mC)からユーザーの**連絡先**をすべてダウンロードできます。

## Cloudsearch

[**https://cloudsearch.google.com/**](https://cloudsearch.google.com)では、ユーザーがアクセスできるすべてのWorkspaceコンテンツ（メール、ドライブ、サイトなど）を**検索**できます。**迅速に機密情報を見つける**のに最適です。

## Google Chat

[**https://mail.google.com/chat**](https://mail.google.com/chat)では、Google **Chat**にアクセスでき、会話の中に機密情報が含まれているかもしれません（あれば）。

## Google Drive Mining

ドキュメントを**共有**する際に、個々の**人**がアクセスできるように**指定**したり、**リンクを生成**して**会社全体**（または特定の**グループ**）と**共有**したりできます。

ドキュメントを共有する際に、詳細設定でこのファイルを検索できるようにもできます（**デフォルトでは**無効）。ただし、ユーザーがドキュメントを表示すると、それを検索できるようになります。

簡単のため、ほとんどの人はドキュメントにアクセスできる人々を一人ずつ追加する代わりに、リンクを生成して共有するでしょう。

すべてのドキュメントを見つけるための提案された方法：

* 内部チャット、フォーラムで検索...
* 既知のドキュメントを**スパイダー**して他のドキュメントへの**参照**を検索します。これは、[**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)を使用したApp Script内で行うことができます。

## **メモを取る**

[**https://keep.google.com/**](https://keep.google.com)では、ユーザーのメモにアクセスでき、ここに**機密情報**が保存されている可能性があります。

### App Scriptsの変更

[**https://script.google.com/**](https://script.google.com/)では、ユーザーのAPPスクリプトを見つけることができます。

## **ワークスペースの管理**

[**https://admin.google.com**/](https://admin.google.com)では、十分な権限があれば、組織全体のワークスペース設定を変更できるかもしれません。

また、[**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)でユーザーのすべての請求書を検索することでメールを見つけることもできます。

## 参考文献

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch and Beau Bullock - OK Google, How do I Red Team GSuite?

{% hint style="success" %}
AWSハッキングの学習と練習:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPハッキングの学習と練習: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポート</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェック！
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォロー**してください。
* **HackTricks**と**HackTricks Cloud**のgithubリポジトリにPRを提出して**ハッキングテクニックを共有**してください。

</details>
{% endhint %}
