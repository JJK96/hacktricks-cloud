# GWS - 포스트 익스플로잇레이션

{% hint style="success" %}
AWS 해킹 학습 및 실습:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP 해킹 학습 및 실습: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks 지원</summary>

* [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* 💬 [**디스코드 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **가입**하거나 **트위터** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**를 팔로우**하세요.
* **HackTricks** 및 **HackTricks Cloud** 깃허브 저장소에 PR을 제출하여 해킹 요령을 공유하세요.

</details>
{% endhint %}

## Google 그룹 권한 상승

기본적으로 워크스페이스에서 **그룹**은 조직의 **모든 구성원이 자유롭게 액세스**할 수 있습니다.\
워크스페이스는 또한 그룹에 **권한을 부여**할 수 있도록 허용하므로, 그룹에 가입할 수 있고 추가 권한이 있는 경우, 공격자는 권한 상승 경로를 **악용**할 수 있습니다.

조직 내에서 누구나 가입할 수 있는 그룹을 가입하려면 콘솔에 액세스해야 할 수 있습니다. [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)에서 그룹 정보를 확인할 수 있습니다.

### 그룹 메일 정보 액세스

Google 사용자 세션을 **침해**했다면, [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)에서 사용자가 소속된 메일 그룹에 보낸 메일의 이력을 볼 수 있으며, **자격 증명**이나 **기타 민감한 데이터**를 찾을 수 있습니다.

## GCP <--> GWS 피벗팅

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## Takeout - 계정에 대한 Google이 알고 있는 모든 것 다운로드

피해자의 Google 계정 내부 세션을 보유하고 있다면 [**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)에서 해당 계정에 대해 Google이 저장한 모든 것을 다운로드할 수 있습니다.

## Vault - 사용자의 모든 Workspace 데이터 다운로드

조직이 **Google Vault를 활성화**한 경우, [**https://vault.google.com**](https://vault.google.com/u/1/)에 액세스하여 모든 **정보를 다운로드**할 수 있습니다.

## 연락처 다운로드

[**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es\&tab=mC)에서 사용자의 **모든 연락처**를 다운로드할 수 있습니다.

## Cloudsearch

[**https://cloudsearch.google.com/**](https://cloudsearch.google.com)에서 사용자가 액세스할 수 있는 모든 Workspace 콘텐츠(이메일, 드라이브, 사이트 등)를 **빠르게 검색**할 수 있습니다. 민감한 정보를 **빠르게 찾는 데 이상적**입니다.

## Google Chat

[**https://mail.google.com/chat**](https://mail.google.com/chat)에서 Google **Chat**에 액세스할 수 있으며, 대화에서 민감한 정보를 찾을 수 있습니다.

## Google 드라이브 탐색

문서를 **공유**할 때 **개별적으로 액세스할 수 있는 사람**을 **지정**하거나 **링크를 생성**하여 **회사 전체**(또는 특정 **그룹**)와 **공유**할 수 있습니다.

문서를 공유할 때, 고급 설정에서 이 파일을 검색할 수 있는 권한도 부여할 수 있습니다(기본적으로 이 기능은 **비활성화**됨). 그러나 사용자가 문서를 보면 검색할 수 있게 됩니다.

대부분의 사람들은 문서에 접근할 수 있는 사람을 개별적으로 추가하는 대신 링크를 생성하고 공유할 것입니다.

모든 문서를 찾는 몇 가지 제안된 방법:

* 내부 채팅, 포럼에서 검색...
* 다른 문서에 대한 참조를 검색하여 알려진 문서를 **스파이더링**합니다. 이 작업은 [**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)를 사용하여 App Script 내에서 수행할 수 있습니다.

## **노트 유지**

[**https://keep.google.com/**](https://keep.google.com)에서 사용자의 노트에 액세스할 수 있으며, 여기에 **민감한 정보**가 저장될 수 있습니다.

### 앱 스크립트 수정

[**https://script.google.com/**](https://script.google.com/)에서 사용자의 앱 스크립트를 찾을 수 있습니다.

## **워크스페이스 관리**

[**https://admin.google.com**/](https://admin.google.com)에서 충분한 권한이 있다면 전체 조직의 워크스페이스 설정을 수정할 수 있습니다.

또한 [**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)에서 모든 사용자의 청구서를 검색하여 이메일을 찾을 수도 있습니다.

## 참고 자료

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch and Beau Bullock - OK Google, How do I Red Team GSuite?

{% hint style="success" %}
AWS 해킹 학습 및 실습:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP 해킹 학습 및 실습: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks 지원</summary>

* [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* 💬 [**디스코드 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **가입**하거나 **트위터** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**를 팔로우**하세요.
* **HackTricks** 및 **HackTricks Cloud** 깃허브 저장소에 PR을 제출하여 해킹 요령을 공유하세요.

</details>
{% endhint %}
