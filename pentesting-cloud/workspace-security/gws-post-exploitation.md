# GWS - Post Exploitation

{% hint style="success" %}
Dowiedz się i ćwicz Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Dowiedz się i ćwicz Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* Sprawdź [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Dziel się trikami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriów na githubie.

</details>
{% endhint %}

## Google Groups Privesc

Domyślnie w workspace **grupa** może być **swobodnie dostępna** dla każdego członka organizacji.\
Workspace pozwala również **przyznawać uprawnienia grupom** (nawet uprawnienia GCP), więc jeśli grupy mogą być dołączane i mają dodatkowe uprawnienia, atakujący może **wykorzystać tę ścieżkę do eskalacji uprawnień**.

Potencjalnie potrzebujesz dostępu do konsoli, aby dołączyć do grup, które mogą być dołączane przez każdego w organizacji. Sprawdź informacje o grupach na [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups).

### Dostęp do informacji mailowych grup

Jeśli udało ci się **skompromitować sesję użytkownika Google**, z [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups) możesz zobaczyć historię maili wysłanych do grup mailowych, których użytkownik jest członkiem, i możesz znaleźć **dane uwierzytelniające** lub inne **wrażliwe dane**.

## GCP <--> GWS Pivoting

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## Takeout - Pobierz wszystko, co Google wie o koncie

Jeśli masz **sesję wewnątrz konta ofiary Google**, możesz pobrać wszystko, co Google wie o tym koncie z [**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)

## Vault - Pobierz wszystkie dane użytkowników Workspace

Jeśli organizacja ma włączone **Google Vault**, możesz mieć dostęp do [**https://vault.google.com**](https://vault.google.com/u/1/) i **pobrać** wszystkie **informacje**.

## Pobierz kontakty

Z [**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es\&tab=mC) możesz pobrać wszystkie **kontakty** użytkownika.

## Cloudsearch

Na [**https://cloudsearch.google.com/**](https://cloudsearch.google.com) możesz przeszukiwać **wszystkie treści Workspace** (e-maile, dysk, strony...), do których użytkownik ma dostęp. Idealne do **szybkiego znalezienia wrażliwych informacji**.

## Google Chat

Na [**https://mail.google.com/chat**](https://mail.google.com/chat) możesz uzyskać dostęp do Google **Chat**, gdzie możesz znaleźć wrażliwe informacje w rozmowach (jeśli takie istnieją).

## Google Drive Mining

Podczas **udostępniania** dokumentu możesz **określić**, które **osoby** mogą uzyskać do niego dostęp jedna po drugiej, **udostępnić** go całej **firmie** (**lub** niektórym **grupom**) poprzez **wygenerowanie linku**.

Podczas udostępniania dokumentu w ustawieniach zaawansowanych możesz również **pozwolić ludziom na wyszukiwanie** tego pliku (domyślnie jest to **wyłączone**). Jednak ważne jest zauważenie, że po wyświetleniu dokumentu przez użytkowników, staje się on dla nich wyszukiwalny.

Dla uproszczenia większość osób wygeneruje i udostępni link zamiast dodawać osoby, które mogą uzyskać dostęp do dokumentu jedna po drugiej.

Kilka proponowanych sposobów na znalezienie wszystkich dokumentów:

* Szukaj w wewnętrznych czatach, forach...
* **Przeszukaj** znane **dokumenty** w poszukiwaniu **odwołań** do innych dokumentów. Możesz to zrobić za pomocą skryptu aplikacji z [**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)

## **Zachowuj notatki**

Na [**https://keep.google.com/**](https://keep.google.com) możesz uzyskać dostęp do notatek użytkownika, gdzie mogą być zapisane **wrażliwe** **informacje**.

### Modyfikuj skrypty aplikacji

Na [**https://script.google.com/**](https://script.google.com/) znajdziesz skrypty aplikacji użytkownika.

## **Administruj Workspace**

Na [**https://admin.google.com**/](https://admin.google.com), możesz modyfikować ustawienia Workspace całej organizacji, jeśli masz wystarczające uprawnienia.

Możesz również znaleźć e-maile, przeszukując wszystkie faktury użytkownika w [**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)

## Referencje

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch and Beau Bullock - OK Google, How do I Red Team GSuite?

{% hint style="success" %}
Dowiedz się i ćwicz Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Dowiedz się i ćwicz Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* Sprawdź [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Dziel się trikami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriów na githubie.

</details>
{% endhint %}
