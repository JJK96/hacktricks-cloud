# GWS - Post Explotación

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Entrenamiento HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Entrenamiento HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ayuda a HackTricks</summary>

* Revisa los [**planes de suscripción**](https://github.com/sponsors/carlospolop)!
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **síguenos** en **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Google Groups Escalada de Privilegios

Por defecto en workspace un **grupo** puede ser **accedido libremente** por cualquier miembro de la organización.\
Workspace también permite **conceder permisos a grupos** (incluso permisos de GCP), por lo que si los grupos pueden unirse y tienen permisos adicionales, un atacante puede **abusar de ese camino para escalar privilegios**.

Potencialmente necesitas acceso a la consola para unirte a grupos que permiten ser unidos por cualquier persona en la organización. Revisa la información de los grupos en [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups).

### Acceder a la información de Correos de Grupos

Si lograste **comprometer una sesión de usuario de Google**, desde [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups) puedes ver el historial de correos enviados a los grupos de correo de los que el usuario es miembro, y podrías encontrar **credenciales** u otra **información sensible**.

## GCP <--> GWS Pivotaje

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## Takeout - Descarga Todo lo que Google Sabe sobre una cuenta

Si tienes una **sesión dentro de la cuenta de Google de la víctima** puedes descargar todo lo que Google guarda sobre esa cuenta desde [**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)

## Vault - Descarga todos los datos de Workspace de los usuarios

Si una organización tiene **Google Vault habilitado**, podrías acceder a [**https://vault.google.com**](https://vault.google.com/u/1/) y **descargar** toda la **información**.

## Descarga de Contactos

Desde [**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es\&tab=mC) puedes descargar todos los **contactos** del usuario.

## Cloudsearch

En [**https://cloudsearch.google.com/**](https://cloudsearch.google.com) puedes buscar **a través de todo el contenido de Workspace** (correo, drive, sitios...) al que un usuario tiene acceso. Ideal para **encontrar rápidamente información sensible**.

## Google Chat

En [**https://mail.google.com/chat**](https://mail.google.com/chat) puedes acceder a un Chat de Google, y podrías encontrar información sensible en las conversaciones (si las hay).

## Minería de Google Drive

Cuando **compartes** un documento puedes **especificar** las **personas** que pueden acceder a él una por una, **compartirlo** con toda tu **empresa** (**o** con algunos **grupos** específicos) generando un enlace.

Al compartir un documento, en la configuración avanzada también puedes **permitir que las personas busquen** este archivo (por **defecto** esto está **desactivado**). Sin embargo, es importante tener en cuenta que una vez que los usuarios ven un documento, pueden buscarlo.

Por simplicidad, la mayoría de las personas generarán y compartirán un enlace en lugar de agregar a las personas que pueden acceder al documento una por una.

Algunas formas propuestas de encontrar todos los documentos:

* Buscar en chats internos, foros...
* **Rastrear** documentos conocidos buscando **referencias** a otros documentos. Puedes hacer esto dentro de un App Script con [**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)

## **Tomar Notas**

En [**https://keep.google.com/**](https://keep.google.com) puedes acceder a las notas del usuario, **información sensible** podría estar guardada aquí.

### Modificar Scripts de Aplicaciones

En [**https://script.google.com/**](https://script.google.com/) puedes encontrar los Scripts de Aplicaciones del usuario.

## **Administrar Workspace**

En [**https://admin.google.com**/](https://admin.google.com), podrías modificar la configuración de Workspace de toda la organización si tienes suficientes permisos.

También puedes encontrar correos electrónicos buscando en todas las facturas de los usuarios en [**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)

## Referencias

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch y Beau Bullock - OK Google, ¿Cómo hago Red Team en GSuite?

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Entrenamiento HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Entrenamiento HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ayuda a HackTricks</summary>

* Revisa los [**planes de suscripción**](https://github.com/sponsors/carlospolop)!
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **síguenos** en **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
