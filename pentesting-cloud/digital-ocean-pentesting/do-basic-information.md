# DO - 기본 정보

{% hint style="success" %}
AWS 해킹 학습 및 실습:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP 해킹 학습 및 실습: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks 지원</summary>

* [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* 💬 [**디스코드 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **트위터** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**를 팔로우**하세요.
* [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) 깃허브 저장소에 PR을 제출하여 해킹 요령을 공유하세요.

</details>
{% endhint %}

## 기본 정보

DigitalOcean은 **가상 사설 서버(VPS) 및 응용 프로그램을 구축, 배포 및 관리하기 위한 다양한 서비스를 제공하는 클라우드 컴퓨팅 플랫폼**입니다. **DigitalOcean의 서비스는 간단하고 사용하기 쉽도록 설계**되어 있어 **개발자 및 소기업 사이에서 인기**가 있습니다.

DigitalOcean의 주요 기능은 다음과 같습니다:

* **가상 사설 서버(VPS)**: DigitalOcean은 웹사이트 및 응용 프로그램을 호스팅하는 데 사용할 수 있는 VPS를 제공합니다. 이러한 VPS는 간편성과 사용 편의성으로 알려져 있으며 다양한 사전 구축 "드롭렛" 또는 사용자 정의 구성을 사용하여 빠르고 쉽게 배포할 수 있습니다.
* **저장**: DigitalOcean은 객체 저장, 블록 저장, 관리형 데이터베이스를 포함한 다양한 저장소 옵션을 제공하여 웹사이트 및 응용 프로그램의 데이터를 저장하고 관리할 수 있습니다.
* **개발 및 배포 도구**: DigitalOcean은 API 및 사전 구축된 드롭렛을 포함한 응용 프로그램을 빌드, 배포 및 관리하는 데 사용할 수 있는 다양한 도구를 제공합니다.
* **보안**: DigitalOcean은 보안에 강조를 두며 사용자가 데이터와 응용 프로그램을 안전하게 유지할 수 있도록 도와주는 다양한 도구와 기능을 제공합니다. 이는 암호화, 백업 및 기타 보안 조치를 포함합니다.

전반적으로 DigitalOcean은 사용자가 클라우드에서 응용 프로그램을 구축, 배포 및 관리하는 데 필요한 도구와 자원을 제공하는 클라우드 컴퓨팅 플랫폼입니다. 해당 서비스는 간단하고 사용하기 쉽도록 설계되어 있어 개발자 및 소기업 사이에서 인기가 있습니다.

### AWS와의 주요 차이점

DigitalOcean과 AWS 간의 주요 차이점 중 하나는 **제공하는 서비스 범위**입니다. **DigitalOcean은 간단하고 사용하기 쉬운** VPS, 저장소, 개발 및 배포 도구에 중점을 두고 있습니다. **AWS**는 반면 **VPS, 저장소, 데이터베이스, 기계 학습, 분석** 및 기타 다양한 서비스를 포함한 **훨씬 더 다양한 서비스를 제공**합니다. 이는 AWS가 복잡한 기업급 응용 프로그램에 더 적합하고, DigitalOcean이 소기업 및 개발자에게 더 적합하다는 것을 의미합니다.

두 플랫폼 간의 또 다른 주요 차이점은 **가격 구조**입니다. **DigitalOcean의 가격 정책은 일반적으로 더 직관적이고 이해하기 쉽습니다**. 사용된 드롭렛 및 기타 자원의 수에 기반한 다양한 가격 요금제가 있습니다. 반면 AWS는 자원의 유형 및 양을 포함한 다양한 요소에 기반한 더 복잡한 가격 구조를 가지고 있습니다. 이는 AWS를 사용할 때 비용을 예측하기가 더 어렵게 만들 수 있습니다.

## 계층 구조

### 사용자

사용자는 기대하는 대로 사용자입니다. **팀을 생성**하고 **다른 팀의 구성원이 될 수 있습니다.**

### 팀

팀은 **사용자들의 그룹**입니다. 사용자가 팀을 생성하면 해당 팀에서 **소유자 역할**을 가지며 초기에 **결제 정보를 설정**합니다. 그런 다음 다른 사용자를 팀에 **초대**할 수 있습니다.

팀 내부에는 여러 **프로젝트**가 있을 수 있습니다. 프로젝트는 **함께 실행되는 서비스 집합**입니다. 이는 prod, staging, dev와 같이 **다른 인프라 단계를 분리하는 데 사용**될 수 있습니다.

### 프로젝트

설명한 대로, 프로젝트는 **그 안에서 함께 실행되는 모든 서비스(드롭렛, 스페이스, 데이터베이스, 쿠버네티스...)**를 위한 컨테이너에 불과합니다.\
Digital Ocean 프로젝트는 IAM이 없는 GCP 프로젝트와 매우 유사합니다.

## 권한

### 팀

기본적으로 팀의 모든 구성원은 **팀 내에서 생성된 모든 프로젝트의 DO 자원에 액세스할 수 있습니다(다양한 권한으로).**

### 역할

각 **팀 내 사용자**는 다음 세 가지 **역할** 중 하나를 가질 수 있습니다:

| 역할       | 공유 자원       | 결제 정보       | 팀 설정       |
| ---------- | ---------------- | ---------------- | ------------- |
| **소유자**  | 전체 액세스      | 전체 액세스      | 전체 액세스   |
| **결제자** | 액세스 없음      | 전체 액세스      | 액세스 없음   |
| **구성원** | 전체 액세스      | 액세스 없음      | 액세스 없음   |

**소유자** 및 **구성원은 사용자 목록**을 확인하고 **역할을 확인**할 수 있습니다(결제자는 불가능).

## 액세스

### 사용자 이름 + 비밀번호 (MFA)

대부분의 플랫폼과 마찬가지로 GUI에 액세스하려면 클라우드 **자원에 액세스**하기 위해 **유효한 사용자 이름과 비밀번호 세트**를 사용할 수 있습니다. 로그인하면 [https://cloud.digitalocean.com/account/profile](https://cloud.digitalocean.com/account/profile)에서 **소속된 모든 팀을 볼 수** 있습니다.\
그리고 [https://cloud.digitalocean.com/account/activity](https://cloud.digitalocean.com/account/activity)에서 모든 활동을 볼 수 있습니다.

**MFA**는 사용자에게 **활성화**될 수 있으며 팀의 모든 사용자에게 **강제 적용**될 수 있습니다.

### API 키

API를 사용하려면 사용자가 **API 키를 생성**할 수 있습니다. 이는 항상 읽기 권한을 가지지만 **쓰기 권한은 선택 사항**입니다.\
API 키는 다음과 같이 보입니다:
```
dop_v1_1946a92309d6240274519275875bb3cb03c1695f60d47eaa1532916502361836
```
CLI 도구는 [**doctl**](https://github.com/digitalocean/doctl#installing-doctl)입니다. 토큰이 필요하므로 다음을 사용하여 초기화하십시오:
```bash
doctl auth init # Asks for the token
doctl auth init --context my-context # Login with a different token
doctl auth list # List accounts
```
기본적으로이 토큰은 Mac의 `/Users/<username>/Library/Application Support/doctl/config.yaml`에 평문으로 작성됩니다.

### 스페이스 액세스 키

이것들은 **Spaces에 액세스**할 수있는 키입니다 (AWS의 S3 또는 GCP의 저장소와 유사).

**이름**, **키 ID** 및 **비밀**로 구성됩니다. 예시는 다음과 같습니다:
```
Name: key-example
Keyid: DO00ZW4FABSGZHAABGFX
Secret: 2JJ0CcQZ56qeFzAJ5GFUeeR4Dckarsh6EQSLm87MKlM
```
### OAuth 어플리케이션

OAuth 어플리케이션은 **Digital Ocean 상에서 액세스 권한을 부여**받을 수 있습니다.

[https://cloud.digitalocean.com/account/api/applications](https://cloud.digitalocean.com/account/api/applications)에서 **OAuth 어플리케이션을 생성**하고 [https://cloud.digitalocean.com/account/api/access](https://cloud.digitalocean.com/account/api/access)에서 **허용된 OAuth 어플리케이션을 확인**할 수 있습니다.

### SSH 키

[https://cloud.digitalocean.com/account/security](https://cloud.digitalocean.com/account/security)의 **콘솔**에서 **SSH 키를 Digital Ocean 팀에 추가**할 수 있습니다.

이렇게 하면 **새로운 드롭렛을 생성할 때 SSH 키가 설정**되어 있고 **비밀번호 없이 SSH로 로그인**할 수 있게 됩니다 ([보안상의 이유로 새로 업로드된 SSH 키는 이미 존재하는 드롭렛에 설정되지 않음](https://docs.digitalocean.com/products/droplets/how-to/add-ssh-keys/to-existing-droplet/)).

### 함수 인증 토큰

**REST API를 통해 함수를 트리거하는 방법**은 항상 활성화되어 있으며, CLI가 사용하는 방법으로 **인증 토큰을 함께 요청**하여 요청을 트리거하는 것입니다.
```bash
curl -X POST "https://faas-lon1-129376a7.doserverless.co/api/v1/namespaces/fn-c100c012-65bf-4040-1230-2183764b7c23/actions/functionname?blocking=true&result=true" \
-H "Content-Type: application/json" \
-H "Authorization: Basic MGU0NTczZGQtNjNiYS00MjZlLWI2YjctODk0N2MyYTA2NGQ4OkhwVEllQ2t4djNZN2x6YjJiRmFGc1FERXBySVlWa1lEbUxtRE1aRTludXA1UUNlU2VpV0ZGNjNqWnVhYVdrTFg="
```
## 로그

### 사용자 로그

**사용자의 로그**는 [**https://cloud.digitalocean.com/account/activity**](https://cloud.digitalocean.com/account/activity)에서 찾을 수 있습니다.

### 팀 로그

**팀의 로그**는 [**https://cloud.digitalocean.com/account/security**](https://cloud.digitalocean.com/account/security)에서 찾을 수 있습니다.

## 참고 자료

* [https://docs.digitalocean.com/products/teams/how-to/manage-membership/](https://docs.digitalocean.com/products/teams/how-to/manage-membership/)
