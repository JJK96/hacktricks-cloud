# DO - Funksies

{% hint style="success" %}
Leer & oefen AWS Hack: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

## Basiese Inligting

DigitalOcean Funksies, ook bekend as "DO Funksies," is 'n bedienerlose rekenplatform wat jou toelaat om **kode uit te voer sonder om oor die onderliggende infrastruktuur bekommerd te wees**. Met DO Funksies kan jy jou kode skryf en implementeer as "funksies" wat **geaktiveer** kan word via **API**, **HTTP-versoeke** (indien geaktiveer) of **cron**. Hierdie funksies word uitgevoer in 'n ten volle bestuurde omgewing, sodat jy nie hoef te bekommer oor skaalbaarheid, veiligheid, of instandhouding nie.

In DO, om 'n funksie te skep, moet jy eers 'n **naamruimte skep** wat die funksies sal **groepeer**.\
Binne die naamruimte kan jy dan 'n funksie skep.

### Aktiveerders

Die manier **om 'n funksie via REST API te aktiveer** (altyd geaktiveer, dit is die metode wat die opdraggelys gebruik) is deur 'n versoek te aktiveer met 'n **verifikasietoken** soos:
```bash
curl -X POST "https://faas-lon1-129376a7.doserverless.co/api/v1/namespaces/fn-c100c012-65bf-4040-1230-2183764b7c23/actions/functionname?blocking=true&result=true" \
-H "Content-Type: application/json" \
-H "Authorization: Basic MGU0NTczZGQtNjNiYS00MjZlLWI2YjctODk0N2MyYTA2NGQ4OkhwVEllQ2t4djNZN2x6YjJiRmFGc1FERXBySVlWa1lEbUxtRE1aRTludXA1UUNlU2VpV0ZGNjNqWnVhYVdrTFg="
```
Om te sien hoe die **`doctl`** opdraggereelwerktuig hierdie token kry (sodat jy dit kan dupliseer), toon die **volgende opdrag die volledige netwerkspoor:**
```bash
doctl serverless connect --trace
```
**Wanneer die HTTP-trigger geaktiveer is**, kan 'n webfunksie geaktiveer word deur hierdie **HTTP-metodes GET, POST, PUT, PATCH, DELETE, HEAD en OPTIONS**.

{% hint style="danger" %}
In DO-funksies kan **omgewingsveranderlikes nie versleutel word** (op die tydstip van hierdie skrywe).\
Ek kon nie 'n manier vind om hulle van die CLI te lees nie, maar vanaf die konsole is dit reguit vorentoe.
{% endhint %}

**Funksie-URL's** lyk soos dit: `https://<random>.doserverless.co/api/v1/web/<namespace-id>/default/<function-name>`

### Enumerasie
```bash
# Namespace
doctl serverless namespaces list

# Functions (need to connect to a namespace)
doctl serverless connect
doctl serverless functions list
doctl serverless functions invoke <func-name>
doctl serverless functions get <func-name>

# Logs of executions
doctl serverless activations list
doctl serverless activations get <activation-id> # Get all the info about execution
doctl serverless activations logs <activation-id> # get only the logs of execution
doctl serverless activations result <activation-id> # get only the response result of execution

# I couldn't find any way to get the env variables form the CLI
```
{% hint style="danger" %}
Daar **is nie metadata-eindpunt** van die Funksies sandbox nie.&#x20;
{% endhint %}

{% hint style="success" %}
Leer & oefen AWS-hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP-hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
