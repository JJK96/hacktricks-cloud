# DO - Gotas

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya a HackTricks</summary>

* 춰Consulta los [**planes de suscripci칩n**](https://github.com/sponsors/carlospolop)!
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>
{% endhint %}

## Informaci칩n B치sica

En DigitalOcean, una "gota" es un **servidor privado virtual (VPS)** que se puede utilizar para alojar sitios web y aplicaciones. Una gota es un **paquete preconfigurado de recursos inform치ticos**, que incluye una cierta cantidad de CPU, memoria y almacenamiento, que se puede implementar de forma r치pida y sencilla en la infraestructura en la nube de DigitalOcean.

Puedes seleccionar desde **sistemas operativos comunes**, hasta **aplicaciones** que ya se est칠n ejecutando (como WordPress, cPanel, Laravel...), o incluso cargar y utilizar **tus propias im치genes**.

Las gotas admiten **scripts de datos de usuario**.

<details>

<summary>Diferencia entre una instant치nea y una copia de seguridad</summary>

En DigitalOcean, una instant치nea es una copia en un momento dado del disco de una Gota. Captura el estado del disco de la Gota en el momento en que se tom칩 la instant치nea, incluido el sistema operativo, las aplicaciones instaladas y todos los archivos y datos en el disco.

Las instant치neas se pueden utilizar para crear nuevas Gotas con la misma configuraci칩n que la Gota original, o para restaurar una Gota al estado en el que se encontraba cuando se tom칩 la instant치nea. Las instant치neas se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, y son incrementales, lo que significa que solo se almacenan los cambios desde la 칰ltima instant치nea. Esto los hace eficientes de usar y rentables de almacenar.

Por otro lado, una copia de seguridad es una copia completa de una Gota, que incluye el sistema operativo, las aplicaciones instaladas, archivos y datos, as칤 como la configuraci칩n y metadatos de la Gota. Las copias de seguridad se realizan t칤picamente en un horario regular, y capturan todo el estado de una Gota en un momento espec칤fico.

A diferencia de las instant치neas, las copias de seguridad se almacenan en un formato comprimido y encriptado, y se transfieren fuera de la infraestructura de DigitalOcean a una ubicaci칩n remota para su custodia. Esto hace que las copias de seguridad sean ideales para la recuperaci칩n ante desastres, ya que proporcionan una copia completa de una Gota que se puede restaurar en caso de p칠rdida de datos u otros eventos catastr칩ficos.

En resumen, las instant치neas son copias en un momento dado del disco de una Gota, mientras que las copias de seguridad son copias completas de una Gota, incluidos sus ajustes y metadatos. Las instant치neas se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, mientras que las copias de seguridad se transfieren fuera de la infraestructura de DigitalOcean a una ubicaci칩n remota. Tanto las instant치neas como las copias de seguridad se pueden utilizar para restaurar una Gota, pero las instant치neas son m치s eficientes de usar y almacenar, mientras que las copias de seguridad proporcionan una soluci칩n de copia de seguridad m치s completa para la recuperaci칩n ante desastres.

</details>

### Autenticaci칩n

Para la autenticaci칩n es posible **habilitar SSH** a trav칠s de nombre de usuario y **contrase침a** (contrase침a definida al crear la gota). O **seleccionar una o m치s de las claves SSH cargadas**.

### Cortafuegos

{% hint style="danger" %}
Por defecto, **las gotas se crean SIN UN CORTAFUEGOS** (no como en otras nubes como AWS o GCP). Por lo tanto, si deseas que DO proteja los puertos de la gota (VM), necesitas **crearlo y adjuntarlo**.
{% endhint %}

M치s informaci칩n en:

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### Enumeraci칩n
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Los Droplets tienen puntos finales de metadatos**, pero en DO **no hay IAM** o cosas como roles de AWS o cuentas de servicio de GCP.
{% endhint %}

### RCE

Con acceso a la consola es posible **obtener una shell dentro del droplet** accediendo a la URL: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Tambi칠n es posible lanzar una **consola de recuperaci칩n** para ejecutar comandos dentro del host accediendo a una consola de recuperaci칩n en **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`**(pero en este caso necesitar치s conocer la contrase침a de root).

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya a HackTricks</summary>

* Revisa los [**planes de suscripci칩n**](https://github.com/sponsors/carlospolop)!
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
