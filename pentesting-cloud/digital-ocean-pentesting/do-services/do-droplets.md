# DO - 드롭렛

{% hint style="success" %}
AWS 해킹 학습 및 실습:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP 해킹 학습 및 실습: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks 지원</summary>

* [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* 💬 [**디스코드 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **가입**하거나 **트위터** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**를 팔로우**하세요.
* [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) 깃헙 저장소에 PR을 제출하여 해킹 요령을 공유하세요.

</details>
{% endhint %}

## 기본 정보

DigitalOcean에서 "드롭렛"은 웹사이트 및 애플리케이션을 호스팅하는 데 사용할 수 있는 **가상 사설 서버 (VPS)**입니다. 드롭렛은 DigitalOcean의 클라우드 인프라에서 빠르고 쉽게 배포할 수 있는 **미리 구성된 컴퓨팅 리소스 패키지**로, 특정 양의 CPU, 메모리 및 저장 공간을 포함합니다.

**일반 OS**부터 이미 실행 중인 **애플리케이션** (예: WordPress, cPanel, Laravel...)까지 선택할 수 있으며 **자체 이미지를 업로드하고 사용**할 수도 있습니다.

드롭렛은 **사용자 데이터 스크립트**를 지원합니다.

<details>

<summary>스냅샷과 백업의 차이</summary>

DigitalOcean에서 스냅샷은 드롭렛 디스크의 특정 시점 복사본입니다. 스냅샷은 스냅샷이 촬영된 시점의 드롭렛 디스크 상태를 캡처하며, 운영 체제, 설치된 애플리케이션 및 디스크의 모든 파일 및 데이터를 포함합니다.

스냅샷은 원본 드롭렛과 동일한 구성으로 새로운 드롭렛을 만드는 데 사용하거나 스냅샷이 촬영된 시점의 드롭렛 상태로 복원하는 데 사용할 수 있습니다. 스냅샷은 DigitalOcean의 객체 저장소 서비스에 저장되며, 마지막 스냅샷 이후의 변경 사항만 저장되므로 효율적으로 사용하고 비용 효율적으로 저장할 수 있습니다.

한편 백업은 운영 체제, 설치된 애플리케이션, 파일 및 데이터뿐만 아니라 드롭렛의 설정 및 메타데이터를 포함한 드롭렛의 완전한 복사본입니다. 백업은 일정한 주기로 수행되며 특정 시점에서 드롭렛의 전체 상태를 캡처합니다.

스냅샷과 달리 백업은 압축 및 암호화된 형식으로 저장되며 DigitalOcean의 인프라에서 원격 위치로 전송됩니다. 이로써 백업은 재해 복구에 이상적이며 데이터 손실 또는 기타 재앙 발생 시 복원할 수 있는 드롭렛의 완전한 복사본을 제공합니다.

요약하면, 스냅샷은 드롭렛 디스크의 특정 시점 복사본이며, 백업은 설정 및 메타데이터를 포함한 드롭렛의 완전한 복사본입니다. 스냅샷은 DigitalOcean의 객체 저장소 서비스에 저장되고, 백업은 DigitalOcean의 인프라에서 원격 위치로 전송됩니다. 스냅샷과 백업 모두 드롭렛을 복원하는 데 사용할 수 있지만, 스냅샷은 더 효율적으로 사용하고 저장되며, 백업은 재해 복구를 위한 더 포괄적인 백업 솔루션을 제공합니다.

</details>

### 인증

인증을 위해 **사용자 이름과 비밀번호**를 통해 SSH를 활성화할 수 있습니다 (드롭렛 생성 시 정의된 비밀번호). 또는 **업로드된 하나 이상의 SSH 키를 선택**할 수 있습니다.

### 방화벽

{% hint style="danger" %}
기본적으로 **드롭렛은 방화벽이 없이 생성됩니다** (AWS 또는 GCP와 같은 다른 클라우드와는 다릅니다). 따라서 드롭렛(VM)의 포트를 보호하려면 **방화벽을 생성하고 연결해야 합니다**.
{% endhint %}

자세한 정보는:

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### 열거
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Droplets에는 메타데이터 엔드포인트가 있지만**, DO에는 **AWS의 IAM이나 GCP의 서비스 계정과 같은 역할이 없습니다**.
{% endhint %}

### RCE

콘솔에 액세스하면 **드롭렛 내부에 쉘을 얻을 수 있습니다**. URL에 액세스하여 **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

또한 **복구 콘솔을 실행하여** 호스트 내에서 명령을 실행할 수 있습니다. 복구 콘솔에 액세스하여 **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`** (이 경우 루트 암호를 알아야 합니다).

{% hint style="success" %}
AWS 해킹 학습 및 실습:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP 해킹 학습 및 실습: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks 지원하기</summary>

* [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* 💬 [**디스코드 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 **참여**하거나 **트위터** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**를 팔로우**하세요.
* [**HackTricks**](https://github.com/carlospolop/hacktricks) 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) 깃헙 레포지토리에 PR을 제출하여 해킹 트릭을 공유하세요.

</details>
{% endhint %}
