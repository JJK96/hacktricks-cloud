# DO - ドロップレット

{% hint style="success" %}
AWSハッキングの学習と練習:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPハッキングの学習と練習: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksのサポート</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォロー**してください。
* ハッキングトリックを共有するために、[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>
{% endhint %}

## 基本情報

DigitalOceanでは、「ドロップレット」はウェブサイトやアプリケーションをホストするために使用できる**仮想プライベートサーバー（VPS）**です。 ドロップレットは、DigitalOceanのクラウドインフラストラクチャ上で迅速かつ簡単に展開できる**事前構成済みのコンピューティングリソースパッケージ**であり、一定量のCPU、メモリ、およびストレージを含んでいます。

**一般的なOS**、すでに実行中の**アプリケーション**（WordPress、cPanel、Laravelなど）、または**独自のイメージ**をアップロードして使用することができます。

ドロップレットは**ユーザーデータスクリプト**をサポートしています。

<details>

<summary>スナップショットとバックアップの違い</summary>

DigitalOceanでは、スナップショットはドロップレットのディスクの特定時点のコピーです。 スナップショットは、取得時点でのドロップレットのディスクの状態をキャプチャし、オペレーティングシステム、インストールされたアプリケーション、およびディスク上のすべてのファイルとデータを含みます。

スナップショットは、元のドロップレットと同じ構成で新しいドロップレットを作成したり、スナップショットを取得した時点の状態にドロップレットを復元したりするために使用できます。 スナップショットはDigitalOceanのオブジェクトストレージサービスに保存され、前回のスナップショット以降の変更のみが保存されるインクリメンタルな形式です。 これにより、効率的に使用し、費用対効果の高いストレージが可能となります。

一方、バックアップは、オペレーティングシステム、インストールされたアプリケーション、ファイル、データ、およびドロップレットの設定とメタデータを含むドロップレットの完全なコピーです。 バックアップは通常定期的に実行され、特定の時点でのドロップレットの完全な状態をキャプチャします。

スナップショットとは異なり、バックアップは圧縮された暗号化形式で保存され、DigitalOceanのインフラストラクチャからリモートの場所に転送されます。 これにより、バックアップは災害復旧に理想的であり、データ損失やその他の災害が発生した場合に復元できるドロップレットの完全なコピーを提供します。

要するに、スナップショットはドロップレットのディスクの特定時点のコピーであり、バックアップは設定とメタデータを含むドロップレットの完全なコピーです。 スナップショットはDigitalOceanのオブジェクトストレージサービスに保存され、バックアップはDigitalOceanのインフラストラクチャからリモートの場所に転送されます。 スナップショットとバックアップの両方を使用してドロップレットを復元できますが、スナップショットはより効率的に使用および保存されますが、バックアップは災害復旧のためのより包括的なバックアップソリューションを提供します。

</details>

### 認証

認証には、ユーザー名と**パスワード**を介してSSHを有効にすることが可能です（ドロップレットの作成時に定義されたパスワード）。または、アップロードされたSSHキーの**1つ以上を選択**することもできます。

### ファイアウォール

{% hint style="danger" %}
デフォルトでは、**ドロップレットはファイアウォールなしで作成されます**（AWSやGCPなどの他のクラウドとは異なり）。したがって、ドロップレット（VM）のポートを保護するためには、**作成してアタッチする必要があります**。
{% endhint %}

詳細は以下を参照:

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### 列挙
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**ドロップレットにはメタデータエンドポイントがあります**が、DOには**IAMやAWSのロール、GCPのサービスアカウントなどはありません**。
{% endhint %}

### RCE

コンソールにアクセスすると、**ドロップレット内でシェルを取得**することが可能です。URLにアクセスしてください: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

また、**リカバリーコンソール**を起動してホスト内でコマンドを実行することも可能です。リカバリーコンソールにアクセスしてください: **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`**（ただし、この場合はrootパスワードを知っている必要があります）。

{% hint style="success" %}
AWSハッキングの学習と実践:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPハッキングの学習と実践: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksのサポート</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェック！
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォロー**してください。
* **HackTricks**と**HackTricks Cloud**のGitHubリポジトリにPRを提出して、ハッキングトリックを共有してください。

</details>
{% endhint %}
