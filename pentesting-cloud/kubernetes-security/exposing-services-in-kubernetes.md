# –í–∏–∫—Ä–∏—Ç—Ç—è —Å–µ—Ä–≤—ñ—Å—ñ–≤ –≤ Kubernetes

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –•–∞–∫—ñ–Ω–≥ AWS: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–®–∫–æ–ª–∞ –•–∞–∫—ñ–Ω–≥—É HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –•–∞–∫—ñ–Ω–≥ GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–®–∫–æ–ª–∞ –•–∞–∫—ñ–Ω–≥—É HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}

–Ü—Å–Ω—É—é—Ç—å **—Ä—ñ–∑–Ω—ñ —Å–ø–æ—Å–æ–±–∏ –≤–∏–∫—Ä–∏—Ç—Ç—è —Å–µ—Ä–≤—ñ—Å—ñ–≤** –≤ Kubernetes, —â–æ–± **–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ** —Ç–∞ **–∑–æ–≤–Ω—ñ—à–Ω—ñ** —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø—É –º–æ–≥–ª–∏ –¥–æ –Ω–∏—Ö –∑–≤–µ—Ä—Ç–∞—Ç–∏—Å—è. –¶—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Kubernetes —î –¥–æ—Å–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–æ—é, –æ—Å–∫—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ –Ω–∞–¥–∞—Ç–∏ –¥–æ—Å—Ç—É–ø **–∑–ª–æ–≤–º–∏—Å–Ω–∏–∫–∞–º –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤, –¥–æ —è–∫–∏—Ö –≤–æ–Ω–∏ –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø**.

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–ª—ñ—á–µ–Ω–Ω—è

–ü–µ—Ä–µ–¥ —Ç–∏–º —è–∫ –ø–æ—á–∞—Ç–∏ –ø–µ—Ä–µ–ª—ñ–∫–∞—Ç–∏ —Å–ø–æ—Å–æ–±–∏, —è–∫—ñ –ø—Ä–æ–ø–æ–Ω—É—î K8s –¥–ª—è –≤–∏–∫—Ä–∏—Ç—Ç—è —Å–µ—Ä–≤—ñ—Å—ñ–≤ –¥–ª—è –≥—Ä–æ–º–∞–¥—Å—å–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É, –∑–Ω–∞–π—Ç–µ, —â–æ —è–∫—â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–ª—ñ—á–∏—Ç–∏ –ø—Ä–æ—Å—Ç–æ—Ä–∏ —ñ–º–µ–Ω, —Å–µ—Ä–≤—ñ—Å–∏ —Ç–∞ –≤—Ö–æ–¥–∏, –≤–∏ –∑–º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –≤—Å–µ, —â–æ –≤–∏–∫—Ä–∏—Ç–æ –¥–ª—è –≥—Ä–æ–º–∞–¥—Å—å–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é:
```bash
kubectl get namespace -o custom-columns='NAME:.metadata.name' | grep -v NAME | while IFS='' read -r ns; do
echo "Namespace: $ns"
kubectl get service -n "$ns"
kubectl get ingress -n "$ns"
echo "=============================================="
echo ""
echo ""
done | grep -v "ClusterIP"
# Remove the last '| grep -v "ClusterIP"' to see also type ClusterIP
```
### ClusterIP

**ClusterIP** - —Ü–µ **—Å–ª—É–∂–±–∞** Kubernetes –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –í–æ–Ω–∞ –Ω–∞–¥–∞—î –≤–∞–º **—Å–ª—É–∂–±—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ** –≤–∞—à–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞, –¥–æ —è–∫–æ—ó –º–æ–∂—É—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø —ñ–Ω—à—ñ –¥–æ–¥–∞—Ç–∫–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≤–∞—à–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞. **–ó–æ–≤–Ω—ñ—à–Ω—ñ–π –¥–æ—Å—Ç—É–ø –≤—ñ–¥—Å—É—Ç–Ω—ñ–π**.

–û–¥–Ω–∞–∫ –¥–æ –Ω–µ—ó –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø—Ä–æ–∫—Å—ñ Kubernetes:
```bash
kubectl proxy --port=8080
```
–ó–∞—Ä–∞–∑ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ API Kubernetes, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ü—ñ—î—ó —Å—Ö–µ–º–∏:

`http://localhost:8080/api/v1/proxy/namespaces/<NAMESPACE>/services/<SERVICE-NAME>:<PORT-NAME>/`

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π URL:

`http://localhost:8080/api/v1/proxy/namespaces/default/services/my-internal-service:http/`

–¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É:
```yaml
apiVersion: v1
kind: Service
metadata:
name: my-internal-service
spec:
selector:
app: my-app
type: ClusterIP
ports:
- name: http
port: 80
targetPort: 80
protocol: TCP
```
_–¶–µ–π –º–µ—Ç–æ–¥ –≤–∏–º–∞–≥–∞—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è `kubectl` —è–∫ **–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**._

–ü–µ—Ä–µ–ª—ñ–∫ —É—Å—ñ—Ö ClusterIPs:

{% code overflow="wrap" %}
```bash
kubectl get services --all-namespaces -o=custom-columns='NAMESPACE:.metadata.namespace,NAME:.metadata.name,TYPE:.spec.type,CLUSTER-IP:.spec.clusterIP,PORT(S):.spec.ports[*].port,TARGETPORT(S):.spec.ports[*].targetPort,SELECTOR:.spec.selector' | grep ClusterIP
```
{% endcode %}

### NodePort

–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **NodePort**, –≤–∫–∞–∑–∞–Ω–∏–π –ø–æ—Ä—Ç —Å—Ç–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏–º –Ω–∞ –≤—Å—ñ—Ö –≤—É–∑–ª–∞—Ö (—â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ –º–∞—à–∏–Ω–∏). **–¢—Ä–∞—Ñ—ñ–∫**, —Å–ø—Ä—è–º–æ–≤–∞–Ω–∏–π –Ω–∞ —Ü–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø–æ—Ä—Ç, —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–æ **–º–∞—Ä—à—Ä—É—Ç–∏–∑—É—î—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤—ñ—Å—É**. –ó–∞–∑–≤–∏—á–∞–π —Ü–µ–π –º–µ—Ç–æ–¥ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –π–æ–≥–æ –Ω–µ–¥–æ–ª—ñ–∫–∏.

–ü–µ—Ä–µ–ª—ñ–∫ —É—Å—ñ—Ö NodePorts:

{% code overflow="wrap" %}
```bash
kubectl get services --all-namespaces -o=custom-columns='NAMESPACE:.metadata.namespace,NAME:.metadata.name,TYPE:.spec.type,CLUSTER-IP:.spec.clusterIP,PORT(S):.spec.ports[*].port,NODEPORT(S):.spec.ports[*].nodePort,TARGETPORT(S):.spec.ports[*].targetPort,SELECTOR:.spec.selector' | grep NodePort
```
{% endcode %}

–ü—Ä–∏–∫–ª–∞–¥ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó NodePort:
```yaml
apiVersion: v1
kind: Service
metadata:
name: my-nodeport-service
spec:
selector:
app: my-app
type: NodePort
ports:
- name: http
port: 80
targetPort: 80
nodePort: 30036
protocol: TCP
```
–Ø–∫—â–æ –≤–∏ **–Ω–µ –≤–∫–∞–∑—É—î—Ç–µ** **nodePort** –≤ yaml (—Ü–µ –ø–æ—Ä—Ç, —è–∫–∏–π –±—É–¥–µ –≤—ñ–¥–∫—Ä–∏—Ç–æ), –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –ø–æ—Ä—Ç —É **–¥—ñ–∞–ø–∞–∑–æ–Ω—ñ –≤—ñ–¥ 30000 –¥–æ 32767**.

### LoadBalancer <a href="#id-0d96" id="id-0d96"></a>

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –¥–æ—Å—Ç—É–ø –¥–æ –°–µ—Ä–≤—ñ—Å—É **–∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫–∞ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ö–º–∞—Ä–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞**. –ù–∞ GKE —Ü–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å [–ú–µ—Ä–µ–∂–µ–≤–∏–π –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è](https://cloud.google.com/compute/docs/load-balancing/network/), —è–∫–∏–π –Ω–∞–¥–∞—Å—Ç—å –≤–∞–º –æ–¥–Ω—É IP-–∞–¥—Ä–µ—Å—É, —è–∫–∞ –±—É–¥–µ –ø–µ—Ä–µ—Å–∏–ª–∞—Ç–∏ –≤–µ—Å—å —Ç—Ä–∞—Ñ—ñ–∫ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤—ñ—Å. –£ AWS —Ü–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ë–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.

–í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–ª–∞—Ç–∏—Ç–∏ –∑–∞ –∫–æ–∂–µ–Ω –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞ –∫–æ–∂–µ–Ω –≤–∏–∫—Ä–∏—Ç–∏–π —Å–µ—Ä–≤—ñ—Å, —â–æ –º–æ–∂–µ –±—É—Ç–∏ –¥–æ—Ä–æ–≥–∏–º.

–ü–µ—Ä–µ–ª—ñ–∫ —É—Å—ñ—Ö –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫—ñ–≤ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:

{% code overflow="wrap" %}
```bash
kubectl get services --all-namespaces -o=custom-columns='NAMESPACE:.metadata.namespace,NAME:.metadata.name,TYPE:.spec.type,CLUSTER-IP:.spec.clusterIP,EXTERNAL-IP:.status.loadBalancer.ingress[*],PORT(S):.spec.ports[*].port,NODEPORT(S):.spec.ports[*].nodePort,TARGETPORT(S):.spec.ports[*].targetPort,SELECTOR:.spec.selector' | grep LoadBalancer
```
{% endcode %}

### –ó–æ–≤–Ω—ñ—à–Ω—ñ IP-–∞–¥—Ä–µ—Å–∏ <a href="#external-ips" id="external-ips"></a>

{% hint style="success" %}
–ó–æ–≤–Ω—ñ—à–Ω—ñ IP-–∞–¥—Ä–µ—Å–∏ –≤–∏–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —Å–ª—É–∂–±–∞–º–∏ —Ç–∏–ø—É Load Balancers —ñ, —è–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è, –∫–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ö–º–∞—Ä–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞.

–©–æ–± —ó—Ö –∑–Ω–∞–π—Ç–∏, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ —É –ø–æ–ª—ñ `EXTERNAL-IP`.
{% endhint %}

–¢—Ä–∞—Ñ—ñ–∫, —è–∫–∏–π –≤—Ö–æ–¥–∏—Ç—å —É –∫–ª–∞—Å—Ç–µ—Ä –∑ **–∑–æ–≤–Ω—ñ—à–Ω—ñ–º IP-–∞–¥—Ä–µ—Å–æ—é** (—è–∫ **IP-–∞–¥—Ä–µ—Å–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**), –Ω–∞ –ø–æ—Ä—Ç —Å–ª—É–∂–±–∏ –±—É–¥–µ **–º–∞—Ä—à—Ä—É—Ç–∏–∑–æ–≤–∞–Ω–∏–π –¥–æ –æ–¥–Ω–æ–≥–æ –∑ –∫—ñ–Ω—Ü–µ–≤–∏—Ö —Ç–æ—á–æ–∫ —Å–ª—É–∂–±–∏**. `externalIPs` –Ω–µ –∫–µ—Ä—É—é—Ç—å—Å—è Kubernetes —ñ —î –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—é –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞.

–£ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Å–ª—É–∂–±–∏ –º–æ–∂–Ω–∞ –≤–∫–∞–∑–∞—Ç–∏ `externalIPs` —Ä–∞–∑–æ–º –∑ –±—É–¥—å-—è–∫–∏–º–∏ `ServiceTypes`. –£ –Ω–∞–≤–µ–¥–µ–Ω–æ–º—É –Ω–∏–∂—á–µ –ø—Ä–∏–∫–ª–∞–¥—ñ "`my-service`" –º–æ–∂–µ –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–π –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ –∑–∞ "`80.11.12.10:80`" (`externalIP:port`)
```yaml
apiVersion: v1
kind: Service
metadata:
name: my-service
spec:
selector:
app: MyApp
ports:
- name: http
protocol: TCP
port: 80
targetPort: 9376
externalIPs:
- 80.11.12.10
```
### ExternalName

[**–ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó:**](https://kubernetes.io/docs/concepts/services-networking/service/#externalname) –°–µ—Ä–≤—ñ—Å–∏ —Ç–∏–ø—É ExternalName **–≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å –°–µ—Ä–≤—ñ—Å –Ω–∞ DNS-—ñ–º'—è**, –∞ –Ω–µ –Ω–∞ —Ç–∏–ø–æ–≤–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä, —Ç–∞–∫–∏–π —è–∫ `my-service` –∞–±–æ `cassandra`. –í–∏ –≤–∫–∞–∑—É—î—Ç–µ —Ü—ñ –°–µ—Ä–≤—ñ—Å–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `spec.externalName`.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Ü–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –°–µ—Ä–≤—ñ—Å—É –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –°–µ—Ä–≤—ñ—Å `my-service` –≤ –ø—Ä–æ—Å—Ç–æ—Ä—ñ —ñ–º–µ–Ω `prod` –Ω–∞ `my.database.example.com`:
```yaml
apiVersion: v1
kind: Service
metadata:
name: my-service
namespace: prod
spec:
type: ExternalName
externalName: my.database.example.com
```
–ü—ñ–¥ —á–∞—Å –ø–æ—à—É–∫—É —Ö–æ—Å—Ç–∞ `my-service.prod.svc.cluster.local` —Å–µ—Ä–≤—ñ—Å DNS –∫–ª–∞—Å—Ç–µ—Ä–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –∑–∞–ø–∏—Å `CNAME` –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º `my.database.example.com`. –î–æ—Å—Ç—É–ø –¥–æ `my-service` –ø—Ä–∞—Ü—é—î —Ç–∞–∫ —Å–∞–º–æ, —è–∫ —ñ –¥–æ —ñ–Ω—à–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤, –∞–ª–µ –∑ –≤–∞–∂–ª–∏–≤–æ—é –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—é, —â–æ **–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ DNS**, –∞ –Ω–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å—ñ –∞–±–æ –ø–µ—Ä–µ—Å–∏–ª–∞–Ω–Ω—è.

–ü–µ—Ä–µ–ª—ñ–∫ —É—Å—ñ—Ö ExternalNames:

{% code overflow="wrap" %}
```bash
kubectl get services --all-namespaces | grep ExternalName
```
{% endcode %}

### Ingress

–ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ —É—Å—ñ—Ö –≤–∏—â–µ–∑–∞–∑–Ω–∞—á–µ–Ω–∏—Ö –ø—Ä–∏–∫–ª–∞–¥—ñ–≤, **Ingress –ù–ï —î —Ç–∏–ø–æ–º —Å–µ—Ä–≤—ñ—Å—É**. –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –≤—ñ–Ω –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è **–ø–µ—Ä–µ–¥ –∫—ñ–ª—å–∫–æ–º–∞ —Å–µ—Ä–≤—ñ—Å–∞–º–∏ —ñ –¥—ñ—î —è–∫ "—Ä–æ–∑—É–º–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä"** –∞–±–æ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥—É –≤ –≤–∞—à –∫–ª–∞—Å—Ç–µ—Ä.

–í–∏ –º–æ–∂–µ—Ç–µ —Ä–æ–±–∏—Ç–∏ –±–∞–≥–∞—Ç–æ —Ä—ñ–∑–Ω–∏—Ö —Ä–µ—á–µ–π –∑ Ingress, —ñ —ñ—Å–Ω—É—é—Ç—å **–±–∞–≥–∞—Ç–æ —Ç–∏–ø—ñ–≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ Ingress, —è–∫—ñ –º–∞—é—Ç—å —Ä—ñ–∑–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ**.

–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä Ingress –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º GKE –∑–∞–ø—É—Å—Ç–∏—Ç—å [HTTP(S) –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è](https://cloud.google.com/compute/docs/load-balancing/http/) –¥–ª—è –≤–∞—Å. –¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å –≤–∞–º —Ä–æ–±–∏—Ç–∏ —è–∫ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—é –Ω–∞ –æ—Å–Ω–æ–≤—ñ —à–ª—è—Ö—É, —Ç–∞–∫ —ñ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—ñ–¥–¥–æ–º–µ–Ω—É –¥–æ –±–µ–∫–µ–Ω–¥ —Å–µ—Ä–≤—ñ—Å—ñ–≤. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç–∏ –≤—Å–µ –Ω–∞ foo.yourdomain.com –¥–æ —Å–µ—Ä–≤—ñ—Å—É foo, –∞ –≤—Å–µ –ø—ñ–¥ —à–ª—è—Ö–æ–º yourdomain.com/bar/ –¥–æ —Å–µ—Ä–≤—ñ—Å—É bar.

YAML –¥–ª—è –æ–±'—î–∫—Ç–∞ Ingress –Ω–∞ GKE –∑ [L7 HTTP –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫–æ–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è](https://cloud.google.com/compute/docs/load-balancing/http/) –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:
```yaml
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
name: my-ingress
spec:
backend:
serviceName: other
servicePort: 8080
rules:
- host: foo.mydomain.com
http:
paths:
- backend:
serviceName: foo
servicePort: 8080
- host: mydomain.com
http:
paths:
- path: /bar/*
backend:
serviceName: bar
servicePort: 8080
```
–ü–µ—Ä–µ–ª—ñ–∫ —É—Å—ñ—Ö –≤—Ö–æ–¥—ñ–≤:

{% code overflow="wrap" %}
```bash
kubectl get ingresses --all-namespaces -o=custom-columns='NAMESPACE:.metadata.namespace,NAME:.metadata.name,RULES:spec.rules[*],STATUS:status'
```
{% endcode %}

–•–æ—á–∞ –≤ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –∫—Ä–∞—â–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∫–æ–∂–Ω–æ–≥–æ –ø–æ –æ–¥–Ω–æ–º—É, —â–æ–± –∫—Ä–∞—â–µ —ó—ó –ø—Ä–æ—á–∏—Ç–∞—Ç–∏:
```bash
kubectl get ingresses --all-namespaces -o=yaml
```
### –ü–æ—Å–∏–ª–∞–Ω–Ω—è

* [https://medium.com/google-cloud/kubernetes-nodeport-vs-loadbalancer-vs-ingress-when-should-i-use-what-922f010849e0](https://medium.com/google-cloud/kubernetes-nodeport-vs-loadbalancer-vs-ingress-when-should-i-use-what-922f010849e0)
* [https://kubernetes.io/docs/concepts/services-networking/service/](https://kubernetes.io/docs/concepts/services-networking/service/)

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ GitHub.

</details>
{% endhint %}
