# –ö–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–æ–ª–µ–π –≤ Kubernetes (RBAC)

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º AWS: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–®–∫–æ–ª–∞ –≤–∑–ª–æ–º—É HackTricks –¥–ª—è –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ —á–µ—Ä–≤–æ–Ω–∏—Ö –∫–æ–º–∞–Ω–¥ AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–®–∫–æ–ª–∞ –≤–∑–ª–æ–º—É HackTricks –¥–ª—è –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ —á–µ—Ä–≤–æ–Ω–∏—Ö –∫–æ–º–∞–Ω–¥ GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}

## –ö–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–æ–ª–µ–π (RBAC)

–£ Kubernetes —î **–º–æ–¥—É–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∑ —ñ–º'—è–º Role-Based Access Control** ([**RBAC**](https://kubernetes.io/docs/reference/access-authn-authz/rbac/)), —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –¥–æ–∑–≤–æ–ª–∏ –Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–ª—è API-—Å–µ—Ä–≤–µ—Ä–∞.

–ú–æ–¥–µ–ª—å –¥–æ–∑–≤–æ–ª—ñ–≤ RBAC —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ **—Ç—Ä—å–æ—Ö –æ–∫—Ä–µ–º–∏—Ö —á–∞—Å—Ç–∏–Ω**:

1. **–†–æ–ª—å\ClusterRole ¬≠‚Äì** –§–∞–∫—Ç–∏—á–Ω–∏–π –¥–æ–∑–≤—ñ–ª. –í—ñ–Ω –º—ñ—Å—Ç–∏—Ç—å _**–ø—Ä–∞–≤–∏–ª–∞**_, —è–∫—ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å –Ω–∞–±—ñ—Ä –¥–æ–∑–≤–æ–ª—ñ–≤. –ö–æ–∂–Ω–µ –ø—Ä–∞–≤–∏–ª–æ –º—ñ—Å—Ç–∏—Ç—å [—Ä–µ—Å—É—Ä—Å–∏](https://kubernetes.io/docs/reference/kubectl/overview/#resource-types) —Ç–∞ [–¥—ñ—ó](https://kubernetes.io/docs/reference/access-authn-authz/authorization/#determine-the-request-verb). –î—ñ—è - —Ü–µ –¥—ñ—è, —è–∫–∞ –±—É–¥–µ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–∞ –¥–æ —Ä–µ—Å—É—Ä—Å—É.
2. **–°—É–±'—î–∫—Ç (–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á, –ì—Ä—É–ø–∞ –∞–±–æ –û–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å —Å–ª—É–∂–±–∏) ‚Äì** –û–±'—î–∫—Ç, —è–∫–∏–π –æ—Ç—Ä–∏–º–∞—î –¥–æ–∑–≤–æ–ª–∏.
3. **RoleBinding\ClusterRoleBinding ‚Äì** –ó–≤'—è–∑–æ–∫ –º—ñ–∂ –†–æ–ª–ª—é\ClusterRole —Ç–∞ —Å—É–±'—î–∫—Ç–æ–º.

![](https://www.cyberark.com/wp-content/uploads/2018/12/rolebiding\_serviceaccount\_and\_role-1024x551.png)

–í—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å –º—ñ–∂ "**–†–æ–ª—è–º–∏**" —Ç–∞ "**ClusterRoles**" –ø–æ–ª—è–≥–∞—î –ª–∏—à–µ –≤ —Ç–æ–º—É, –¥–µ –±—É–¥–µ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–∞ —Ä–æ–ª—å - "**–†–æ–ª—å**" –Ω–∞–¥–∞—Å—Ç—å –¥–æ—Å—Ç—É–ø –ª–∏—à–µ –¥–æ **–æ–¥–Ω–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ** **–ø–µ–≤–Ω–æ–≥–æ** **–ø—Ä–æ—Å—Ç–æ—Ä—É —ñ–º–µ–Ω**, —Ç–æ–¥—ñ —è–∫ "**ClusterRole**" –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π —É **–≤—Å—ñ—Ö –ø—Ä–æ—Å—Ç–æ—Ä–∞—Ö —ñ–º–µ–Ω** –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ. –ë—ñ–ª—å—à–µ —Ç–æ–≥–æ, **ClusterRoles** —Ç–∞–∫–æ–∂ –º–æ–∂—É—Ç—å –Ω–∞–¥–∞–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ:

* —Ä–µ—Å—É—Ä—Å—ñ–≤ –∑ **–æ–±–ª–∞—Å—Ç—é –∫–ª–∞—Å—Ç–µ—Ä–∞** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤—É–∑–ª–∏).
* **–Ω–µ-—Ä–µ—Å—É—Ä—Å–Ω–∏—Ö** –∫—ñ–Ω—Ü–µ–≤–∏—Ö —Ç–æ—á–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, /healthz).
* —Ä–µ—Å—É—Ä—Å—ñ–≤ –∑ –æ–±–ª–∞—Å—Ç—é —ñ–º–µ–Ω (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ü–æ–¥–∏), **—É –≤—Å—ñ—Ö –ø—Ä–æ—Å—Ç–æ—Ä–∞—Ö —ñ–º–µ–Ω**.

–ü–æ—á–∏–Ω–∞—é—á–∏ –∑ **Kubernetes** 1.6, –ø–æ–ª—ñ—Ç–∏–∫–∏ **RBAC** –≤–∫–ª—é—á–µ–Ω—ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –ê–ª–µ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–Ω—è RBAC –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —â–æ—Å—å –Ω–∞ –∑—Ä–∞–∑–æ–∫:
```
kube-apiserver --authorization-mode=Example,RBAC --other-options --more-options
```
## –®–∞–±–ª–æ–Ω–∏

–£ —à–∞–±–ª–æ–Ω—ñ **–†–æ–ª—ñ** –∞–±–æ **–ö–ª–∞—Å—Ç–µ—Ä–Ω–æ—ó –†–æ–ª—ñ** –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ **—ñ–º'—è —Ä–æ–ª—ñ**, **–ø—Ä–æ—Å—Ç—ñ—Ä —ñ–º–µ–Ω** (—É —Ä–æ–ª—è—Ö), –∞ –ø–æ—Ç—ñ–º **apiGroups**, **—Ä–µ—Å—É—Ä—Å–∏** —Ç–∞ **–¥—ñ—ó** —Ä–æ–ª—ñ:

* **apiGroups** - —Ü–µ –º–∞—Å–∏–≤, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å —Ä—ñ–∑–Ω—ñ **–ø—Ä–æ—Å—Ç–æ—Ä–∏ —ñ–º–µ–Ω API**, –¥–æ —è–∫–∏—Ö –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è —Ü–µ –ø—Ä–∞–≤–∏–ª–æ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è Pod –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î apiVersion: v1. _–í—ñ–Ω –º–æ–∂–µ –º–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è, —Ç–∞–∫—ñ —è–∫ rbac.authorization.k8s.io –∞–±–æ \[\*]_.
* **—Ä–µ—Å—É—Ä—Å–∏** - —Ü–µ –º–∞—Å–∏–≤, —è–∫–∏–π –≤–∏–∑–Ω–∞—á–∞—î **—è–∫—ñ —Ä–µ—Å—É—Ä—Å–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è —Ü–µ –ø—Ä–∞–≤–∏–ª–æ**. –í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –≤—Å—ñ —Ä–µ—Å—É—Ä—Å–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é: `kubectl api-resources --namespaced=true`
* **–¥—ñ—ó** - —Ü–µ –º–∞—Å–∏–≤, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å **–¥–æ–∑–≤–æ–ª–µ–Ω—ñ –¥—ñ—ó**. –î—ñ—è –≤ Kubernetes –≤–∏–∑–Ω–∞—á–∞—î **—Ç–∏–ø –¥—ñ—ó**, —è–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –¥–æ —Ä–µ—Å—É—Ä—Å—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥—ñ—è —Å–ø–∏—Å–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–æ—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ–π, —Ç–æ–¥—ñ —è–∫ "get" –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–æ—Ç–∏ –æ–¥–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É.

### –î—ñ—ó –ü—Ä–∞–≤–∏–ª

(_–¶—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –±—É–ª–æ –≤–∑—è—Ç–æ –∑_ [_**–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó**_](https://kubernetes.io/docs/reference/access-authn-authz/authorization/#determine-the-request-verb))

| HTTP –¥—ñ—è | –∑–∞–ø–∏—Ç –¥—ñ—ó                                                                                                                                                  |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| POST      | —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è                                                                                                                                                        |
| GET, HEAD | –æ—Ç—Ä–∏–º–∞—Ç–∏ (–¥–ª—è –æ–∫—Ä–µ–º–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤), —Å–ø–∏—Å–æ–∫ (–¥–ª—è –∫–æ–ª–µ–∫—Ü—ñ–π, –≤–∫–ª—é—á–∞—é—á–∏ –ø–æ–≤–Ω–∏–π –≤–º—ñ—Å—Ç –æ–±'—î–∫—Ç–∞), —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è (–¥–ª—è —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è –æ–∫—Ä–µ–º–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É –∞–±–æ –∫–æ–ª–µ–∫—Ü—ñ—ó —Ä–µ—Å—É—Ä—Å—ñ–≤) |
| PUT       | –æ–Ω–æ–≤–ª–µ–Ω–Ω—è                                                                                                                                                        |
| PATCH     | –ø–∞—Ç—á                                                                                                                                                         |
| DELETE    | –≤–∏–¥–∞–ª–µ–Ω–Ω—è (–¥–ª—è –æ–∫—Ä–µ–º–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤), –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ—ó (–¥–ª—è –∫–æ–ª–µ–∫—Ü—ñ–π)                                                                                         |

–Ü–Ω–æ–¥—ñ Kubernetes –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é –¥–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –¥–æ–∑–≤–æ–ª—ñ–≤, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –¥—ñ—ó. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

* [–ü–æ–ª—ñ—Ç–∏–∫–∞ –ë–µ–∑–ø–µ–∫–∏ –ü–æ–¥—ñ–≤](https://kubernetes.io/docs/concepts/policy/pod-security-policy/)
* –¥—ñ—è `use` –Ω–∞ —Ä–µ—Å—É—Ä—Å–∏ `podsecuritypolicies` –≤ –≥—Ä—É–ø—ñ API `policy`.
* [RBAC](https://kubernetes.io/docs/reference/access-authn-authz/rbac/#privilege-escalation-prevention-and-bootstrapping)
* –¥—ñ—ó `bind` —Ç–∞ `escalate` –Ω–∞ —Ä–µ—Å—É—Ä—Å–∏ `roles` —Ç–∞ `clusterroles` –≤ –≥—Ä—É–ø—ñ API `rbac.authorization.k8s.io`.
* [–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è](https://kubernetes.io/docs/reference/access-authn-authz/authentication/)
* –¥—ñ—è `impersonate` –Ω–∞ `–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤`, `–≥—Ä—É–ø–∏` —Ç–∞ `serviceaccounts` –≤ –≥—Ä—É–ø—ñ API `core`, —Ç–∞ `userextras` –≤ –≥—Ä—É–ø—ñ API `authentication.k8s.io`.

{% hint style="warning" %}
–í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ **–≤—Å—ñ –¥—ñ—ó, —è–∫—ñ –ø—ñ–¥—Ç—Ä–∏–º—É—î –∫–æ–∂–µ–Ω —Ä–µ—Å—É—Ä—Å**, –≤–∏–∫–æ–Ω–∞–≤—à–∏ `kubectl api-resources --sort-by name -o wide`
{% endhint %}

### –ü—Ä–∏–∫–ª–∞–¥–∏

{% code title="–†–æ–ª—å" %}
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
namespace: defaultGreen
name: pod-and-pod-logs-reader
rules:
- apiGroups: [""]
resources: ["pods", "pods/log"]
verbs: ["get", "list", "watch"]
```
{% endcode %}

{% code title="ClusterRole" %}
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
# "namespace" omitted since ClusterRoles are not namespaced
name: secret-reader
rules:
- apiGroups: [""]
resources: ["secrets"]
verbs: ["get", "watch", "list"]
```
{% endcode %}

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **ClusterRole**, —â–æ–± –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –ø–µ–≤–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏:
```
kubectl get pods --all-namespaces
```
### **RoleBinding —Ç–∞ ClusterRoleBinding**

**[–ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó:](https://kubernetes.io/docs/reference/access-authn-authz/rbac/#rolebinding-and-clusterrolebinding)** **RoleBinding** –Ω–∞–¥–∞—î –¥–æ–∑–≤–æ–ª–∏, –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –≤ —Ä–æ–ª—ñ, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –∞–±–æ –≥—Ä—É–ø—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –í—ñ–Ω –º—ñ—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—É–±'—î–∫—Ç—ñ–≤ (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –≥—Ä—É–ø –∞–±–æ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ —Å–ª—É–∂–±–∏) —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–æ–ª—å, —è–∫–∞ –Ω–∞–¥–∞—î—Ç—å—Å—è. **RoleBinding** –Ω–∞–¥–∞—î –¥–æ–∑–≤–æ–ª–∏ –≤ –º–µ–∂–∞—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ **–ø—Ä–æ—Å—Ç–æ—Ä—É —ñ–º–µ–Ω**, —Ç–æ–¥—ñ —è–∫ **ClusterRoleBinding** –Ω–∞–¥–∞—î –¥–æ—Å—Ç—É–ø **–Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–ª–∞—Å—Ç–µ—Ä–∞**.

{% code title="" %}
```yaml
piVersion: rbac.authorization.k8s.io/v1
# This role binding allows "jane" to read pods in the "default" namespace.
# You need to already have a Role named "pod-reader" in that namespace.
kind: RoleBinding
metadata:
name: read-pods
namespace: default
subjects:
# You can specify more than one "subject"
- kind: User
name: jane # "name" is case sensitive
apiGroup: rbac.authorization.k8s.io
roleRef:
# "roleRef" specifies the binding to a Role / ClusterRole
kind: Role #this must be Role or ClusterRole
name: pod-reader # this must match the name of the Role or ClusterRole you wish to bind to
apiGroup: rbac.authorization.k8s.io
```
{% endcode %}

{% code title="ClusterRoleBinding" %}
```yaml
apiVersion: rbac.authorization.k8s.io/v1
# This cluster role binding allows anyone in the "manager" group to read secrets in any namespace.
kind: ClusterRoleBinding
metadata:
name: read-secrets-global
subjects:
- kind: Group
name: manager # Name is case sensitive
apiGroup: rbac.authorization.k8s.io
roleRef:
kind: ClusterRole
name: secret-reader
apiGroup: rbac.authorization.k8s.io
```
{% endcode %}

**–î–æ–∑–≤–æ–ª–∏ —î –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏**, —Ç–æ–º—É —è–∫—â–æ —É –≤–∞—Å —î clusterRole –∑ "list" —Ç–∞ "delete" —Å–µ–∫—Ä–µ—Ç–∞–º–∏, –≤–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –π–æ–≥–æ –∑ Role –∑ "get". –¢–æ–º—É –±—É–¥—å—Ç–µ —É–≤–∞–∂–Ω—ñ —Ç–∞ –∑–∞–≤–∂–¥–∏ —Ç–µ—Å—Ç—É–π—Ç–µ —Å–≤–æ—ó —Ä–æ–ª—ñ —Ç–∞ –¥–æ–∑–≤–æ–ª–∏ —Ç–∞ **–≤–∫–∞–∑—É–π—Ç–µ, —â–æ –î–û–ó–í–û–õ–ï–ù–û, –æ—Å–∫—ñ–ª—å–∫–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤—Å–µ –©–û–î–û–ó–í–û–õ–ï–ù–û.**

## **–ü–µ—Ä–µ–ª—ñ–∫ RBAC**
```bash
# Get current privileges
kubectl auth can-i --list
# use `--as=system:serviceaccount:<namespace>:<sa_name>` to impersonate a service account

# List Cluster Roles
kubectl get clusterroles
kubectl describe clusterroles

# List Cluster Roles Bindings
kubectl get clusterrolebindings
kubectl describe clusterrolebindings

# List Roles
kubectl get roles
kubectl describe roles

# List Roles Bindings
kubectl get rolebindings
kubectl describe rolebindings
```
### –ó–ª–æ–≤–∂–∏–≤–∞–Ω–Ω—è —Ä–æ–ª—è–º–∏/ClusterRoles –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–®–∫–æ–ª–∞ —Ö–∞–∫—ñ–Ω–≥—É HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–®–∫–æ–ª–∞ —Ö–∞–∫—ñ–Ω–≥—É HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥-–ø—Ä–∏–π–æ–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ GitHub.

</details>
{% endhint %}
