# Εscalation Ονομάτων Χώρου στο Kubernetes

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τεχνικές χάκινγκ υποβάλλοντας PRs** στα αποθετήρια του [**HackTricks**](https://github.com/carlospolop/hacktricks) και του [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

Στο Kubernetes είναι αρκετά συνηθισμένο **να καταφέρετε να μπείτε σε έναν χώρο ονομάτων** (κλέβοντας κάποια διαπιστευτήρια χρήστη ή με την εκμετάλλευση ενός pod). Ωστόσο, συνήθως θα σας ενδιαφέρει **να αναβαθμίσετε σε έναν διαφορετικό χώρο ονομάτων καθώς εκεί μπορεί να βρείτε πιο ενδιαφέρουσες πληροφορίες**.

Εδώ είναι μερικές τεχνικές που μπορείτε να δοκιμάσετε για να δραπετεύσετε σε έναν διαφορετικό χώρο ονομάτων:

### Κατάχρηση των προνομίων του K8s

Φυσικά, αν ο λογαριασμός που έχετε κλέψει έχει ευαίσθητα προνόμια στον χώρο ονομάτων που θέλετε να αναβαθμίσετε, μπορείτε να καταχραστείτε ενέργειες όπως **δημιουργία pods** με λογαριασμούς υπηρεσίας στο NS, **εκτέλεση** κέλυφους σε ένα ήδη υπάρχον pod μέσα στο ns, ή ανάγνωση των **μυστικών** των tokens των λογαριασμών υπηρεσίας.

Για περισσότερες πληροφορίες σχετικά με τα προνόμια που μπορείτε να καταχραστείτε, διαβάστε:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Δραπέτευση στον κόμβο

Αν μπορείτε να δραπετεύσετε στον κόμβο είτε επειδή έχετε εκμεταλλευτεί ένα pod και μπορείτε να δραπετεύσετε είτε επειδή μπορείτε να δημιουργήσετε ένα προνομιούχο pod και να δραπετεύσετε, μπορείτε να κάνετε διάφορα πράγματα για να κλέψετε άλλα tokens SAs:

* Ελέγξτε για **tokens SAs που έχουν τοποθετηθεί σε άλλα docker containers** που τρέχουν στον κόμβο
* Ελέγξτε για νέα **αρχεία kubeconfig στον κόμβο με επιπλέον δικαιώματα** που δίνονται στον κόμβο
* Αν είναι ενεργοποιημένο (ή ενεργοποιήστε το μόνοι σας) δοκιμάστε να **δημιουργήσετε αντιγράφα των pods άλλων χώρων ονομάτων** καθώς ενδέχεται να έχετε πρόσβαση στους λογαριασμούς προεπιλεγμένων τοκεν σε αυτούς τους χώρους ονομάτων (δεν έχω δοκιμάσει αυτό ακόμα)

Όλες αυτές οι τεχνικές εξηγούνται στο:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε τεχνικές χάκινγκ υποβάλλοντας PRs** στα αποθετήρια του [**HackTricks**](https://github.com/carlospolop/hacktricks) και του [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
