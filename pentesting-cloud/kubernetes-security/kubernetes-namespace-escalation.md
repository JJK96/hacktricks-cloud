# Escalation del Namespace di Kubernetes

{% hint style="success" %}
Impara e pratica l'hacking su AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Impara e pratica l'hacking su GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Sostieni HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) nei repository di Github.

</details>
{% endhint %}

In Kubernetes √® abbastanza comune che in qualche modo **tu riesca ad entrare in un namespace** (rubando alcune credenziali utente o compromettendo un pod). Tuttavia, di solito sarai interessato a **scalare verso un namespace diverso poich√© l√¨ potrebbero essere presenti cose pi√π interessanti**.

Ecco alcune tecniche che puoi provare per sfuggire a un diverso namespace:

### Abuso dei privilegi di K8s

Ovviamente, se l'account che hai rubato ha privilegi sensibili sul namespace a cui vuoi scalare, puoi abusare di azioni come **creare pod** con account di servizio nel NS, **eseguire** una shell in un pod gi√† esistente all'interno del ns, o leggere i **token** SA segreti.

Per ulteriori informazioni sui privilegi che puoi abusare, leggi:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Fuga verso il nodo

Se riesci a fuggire verso il nodo sia perch√© hai compromesso un pod e puoi fuggire o perch√© puoi creare un pod privilegiato e fuggire, potresti fare diverse cose per rubare altri token SA:

* Controlla i **token SA montati in altri container Docker** in esecuzione nel nodo
* Controlla i nuovi **file kubeconfig nel nodo con permessi extra** dati al nodo
* Se abilitato (o abilitalo tu stesso) prova a **creare pod specchiati di altri namespace** poich√© potresti ottenere accesso agli account token predefiniti di quei namespace (non l'ho ancora testato)

Tutte queste tecniche sono spiegate in:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

{% hint style="success" %}
Impara e pratica l'hacking su AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Impara e pratica l'hacking su GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Sostieni HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) nei repository di Github.

</details>
{% endhint %}
