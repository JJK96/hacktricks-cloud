# Kubernetes Naamruimte Escalation

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Controleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

In Kubernetes is dit redelik algemeen dat jy op een of ander manier **binne 'n naamruimte beland** (deur 'n paar gebruikersgelde te steel of deur 'n pod te kompromiteer). Gewoonlik sal jy egter belangstel om **na 'n ander naamruimte te eskaleer aangesien meer interessante dinge daar gevind kan word**.

Hier is 'n paar tegnieke wat jy kan probeer om te ontsnap na 'n ander naamruimte:

### Misbruik K8s voorregte

Vanzelfsprekend, as die rekening wat jy gesteel het sensitiewe voorregte oor die naamruimte het waarheen jy wil eskaleer, kan jy aksies misbruik soos **die skep van pods** met diensrekeninge in die NS, **uitvoering** van 'n skaal in 'n reeds bestaande pod binne die ns, of lees die **geheime** SA-tokens.

Vir meer inligting oor watter voorregte jy kan misbruik, lees:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Ontsnap na die node

As jy kan ontsnap na die node, of omdat jy 'n pod gekompromiteer het en kan ontsnap, of omdat jy 'n bevoorregte pod kan skep en ontsnap, kan jy verskeie dinge doen om ander SA-tokens te steel:

* Kontroleer vir **SA-tokens wat in ander dockerhouers** wat op die node hardloop, gemonteer is
* Kontroleer vir nuwe **kubeconfig-l√™ers op die node met ekstra toestemmings** wat aan die node gegee is
* As dit geaktiveer is (of aktiveer dit self) probeer om **gespie√´lde pods van ander naamruimtes te skep** aangesien jy toegang tot daardie naamruimtes se verstektokenrekeninge kan kry (Ek het dit nog nie getoets nie)

Al hierdie tegnieke word verduidelik in:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Controleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
