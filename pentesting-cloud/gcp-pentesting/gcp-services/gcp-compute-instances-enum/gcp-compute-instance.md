# GCP - Υπολογιστικές Εγκαταστάσεις

{% hint style="success" %}
Μάθε & εξάσκησε το Hacking στο AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθε & εξάσκησε το GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστήριξε το HackTricks</summary>

* Έλεγξε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Συμμετέχετε** 💬 στην [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκερ υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>
{% endhint %}

## Βασικές Πληροφορίες

Οι Υπολογιστικές Εγκαταστάσεις του Google Cloud είναι **προσαρμόσιμες εικονικές μηχανές στην υποδομή νέφους της Google**, προσφέροντας κλιμακούμενη και κατά απαίτηση ισχύ υπολογισμού για μια μεγάλη ποικιλία εφαρμογών. Παρέχουν χαρακτηριστικά όπως παγκόσμια ανάπτυξη, μόνιμη αποθήκευση, ευέλικτες επιλογές λειτουργικού συστήματος και ισχυρές ενσωματώσεις δικτύωσης και ασφάλειας, καθιστώντας τις μια ευέλικτη επιλογή για τη φιλοξενία ιστοσελίδων, την επεξεργασία δεδομένων και την αποτελεσματική εκτέλεση εφαρμογών στο νέφος.

### Εμπιστευτική VM

Οι Εμπιστευτικές VM χρησιμοποιούν **χαρακτηριστικά ασφαλείας βασισμένα σε υλικό** που προσφέρονται από την τελευταία γενιά επεξεργαστών AMD EPYC, τα οποία περιλαμβάνουν κρυπτογράφηση μνήμης και ασφαλή κρυπτογραφημένη εικονικοποίηση. Αυτά τα χαρακτηριστικά επιτρέπουν στη VM να προστατεύει τα δεδομένα που επεξεργάζεται και αποθηκεύει μέσα σε αυτήν ακόμη και από το λειτουργικό σύστημα του οικοδεσπότη και τον υπερεξομοιωτή.

Για να εκτελέσετε μια Εμπιστευτική VM, μπορεί να χρειαστεί να **αλλάξετε** πράγματα όπως το **είδος** της **μηχανής**, το **διασύνδεσμο δικτύου**, την **εικόνα δίσκου εκκίνησης**.

### Δίσκος & Κρυπτογράφηση Δίσκου

Είναι δυνατόν να **επιλέξετε το δίσκο** που θα χρησιμοποιηθεί ή να **δημιουργήσετε έναν νέο**. Αν επιλέξετε έναν νέο, μπορείτε:

* Να επιλέξετε το **μέγεθος** του δίσκου
* Να επιλέξετε το **ΛΣ**
* Να υποδείξετε αν θέλετε να **διαγραφεί ο δίσκος όταν διαγραφεί η εγκατάσταση**
* **Κρυπτογράφηση**: Από **προεπιλογή** θα χρησιμοποιηθεί ένα **διαχειριζόμενο κλειδί της Google**, αλλά μπορείτε επίσης να **επιλέξετε ένα κλειδί από το KMS** ή να υποδείξετε **raw κλειδί για χρήση**.

### Αναπτύξτε Εφαρμογή

Είναι δυνατόν να αναπτύξετε ένα **container** μέσα στην εικονική μηχανή.\
Είναι δυνατόν να διαμορφώσετε τη **εικόνα** που θα χρησιμοποιηθεί, να ορίσετε τη **εντολή** που θα εκτελεστεί μέσα, **ορίσετε ορίσματα**, να προσαρτήσετε ένα **όγκο**, και **μεταβλητές περιβάλλοντος** (ευαίσθητες πληροφορίες;) και να διαμορφώσετε αρκετές επιλογές για αυτό το container όπως εκτέλεση ως **προνομιούχος**, stdin και pseudo TTY.

### Λογαριασμός Υπηρεσίας

Από προεπιλογή, θα χρησιμοποιηθεί ο **προεπιλεγμένος λογαριασμός υπηρεσίας Compute Engine**. Το email αυτού του ΛΥ είναι όπως: `<proj-num>-compute@developer.gserviceaccount.com`\
Αυτός ο λογαριασμός υπηρεσίας έχει **ρόλο Επεξεργαστή πάνω σε ολόκληρο το έργο (υψηλά προνόμια).**

Και οι **προεπιλεγμένες εμβέλειες πρόσβασης** είναι οι ακόλουθες:

* **https://www.googleapis.com/auth/devstorage.read\_only** -- Ανάγνωση πρόσβασης σε κάδους :)
* https://www.googleapis.com/auth/logging.write
* https://www.googleapis.com/auth/monitoring.write
* https://www.googleapis.com/auth/servicecontrol
* https://www.googleapis.com/auth/service.management.readonly
* https://www.googleapis.com/auth/trace.append

Ωστόσο, είναι δυνατόν να **του δοθεί `cloud-platform` με ένα κλικ** ή να καθοριστούν **προσαρμοσμένες**.

<figure><img src="../../../../.gitbook/assets/image (138).png" alt=""><figcaption></figcaption></figure>

### Τοίχος Πυρασφάλειας

Είναι δυνατόν να επιτραπεί η κίνηση HTTP και HTTPS.

<figure><img src="../../../../.gitbook/assets/image (137).png" alt=""><figcaption></figcaption></figure>

### Δικτύωση

* **Προώθηση IP**: Είναι δυνατόν να **ενεργοποιήσετε την προώθηση IP** από τη δημιουργία της εγκατάστασης.
* **Όνομα κεντρικού υπολογιστή**: Είναι δυνατόν να δώσετε στην εγκατάσταση ένα μόνιμο όνομα κεντρικού υπολογιστή.
* **Διεπαφή**: Είναι δυνατόν να προσθέσετε μια διεπαφή δικτύου

### Επιπλέον Ασφάλεια

Αυτές οι επιλογές θα **αυξήσουν την ασφάλεια** της VM και συνιστώνται:

* **Ασφαλής εκκίνηση:** Η ασφαλής εκκίνηση βοηθά στην προστασία των προσθέτων VM σας ενάντια σε κακόβουλο λογισμικό σε επίπεδο εκκίνησης και πυρήνα.
* **Ενεργοποίηση vTPM:** Το Virtual Trusted Platform Module (vTPM) επικυρώνει την προ-εκκίνηση και την ακεραιότητα εκκίνησης του guest VM σας και προσφέρει παραγωγή κλειδιών και προστασία.
* **Επιτήρηση ακεραιότητας:** Η παρακολούθηση ακεραιότητας σάς επιτρέπει να παρακολουθείτε και να επαληθεύετε την ακεραιότητα εκκίνησης του χρόνου εκτέλεσης των ασπίδων VM σας χρησιμοποιώντας αναφορές Stackdriver. Απαιτείται η ενεργοποίηση του vTPM.

### Πρόσβαση VM

Ο κοινός τρόπος ενεργοποίησης της πρόσβασης στη VM είναι με το **επιτρέποντας συγκεκριμένα δημόσια κλειδιά SSH** να έχουν πρόσβαση στη VM.\
Ωστόσο, είναι επίσης δυνατόν να **ενεργοποιηθεί η πρόσβαση στη VM μέσω της υπηρεσίας `os-config` χρησιμοποιώντας το IAM**. Επιπλέον, είναι δυνατόν να ενεργοποιηθεί η 2FA για πρόσβαση στη VM χρησιμοποιώντας αυτήν την υπηρεσία.\
Όταν αυτή η **υπηρεσία** είναι **ενεργοποιημένη**, η πρόσβαση μέσω **κλειδιών SSH απενεργοποιείται.**

<figure><img src="../../../../.gitbook/assets/image
```bash
# view project metadata
curl "http://metadata.google.internal/computeMetadata/v1/project/attributes/?recursive=true&alt=text" \
-H "Metadata-Flavor: Google"

# view instance metadata
curl "http://metadata.google.internal/computeMetadata/v1/instance/attributes/?recursive=true&alt=text" \
-H "Metadata-Flavor: Google"
```
Επιπλέον, το **auth token για το συνδεδεμένο λογαριασμό υπηρεσίας** και **γενικές πληροφορίες** σχετικά με την εικόνα, το δίκτυο και το έργο θα είναι διαθέσιμα από το **σημείο ανακατασκευής μεταδεδομένων**. Για περισσότερες πληροφορίες ελέγξτε:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#6440" %}

### Κρυπτογράφηση

Ένας κλειδί κρυπτογράφησης που διαχειρίζεται από τη Google χρησιμοποιείται από προεπιλογή, αλλά μπορεί να διαμορφωθεί ένα Κλειδί Κρυπτογράφησης που Διαχειρίζεται ο Πελάτης (CMEK). Μπορείτε επίσης να διαμορφώσετε τι να γίνει όταν το χρησιμοποιούμενο CMEK ανακληθεί: Καμία ενέργεια ή απενεργοποίηση της Εικονικής Μηχανής.

<figure><img src="../../../../.gitbook/assets/image (140).png" alt=""><figcaption></figcaption></figure>

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 στην [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Κοινοποιήστε κόλπα χάκερ με την υποβολή PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
{% endhint %}
