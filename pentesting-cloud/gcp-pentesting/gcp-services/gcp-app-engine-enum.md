# GCP - App Engine Enum

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* Hacking püf noktalarını paylaşarak PR'ler göndererek **HackTricks** ve **HackTricks Cloud** github depolarına katkıda bulunun.

</details>
{% endhint %}

## Temel Bilgiler <a href="#reviewing-app-engine-configurations" id="reviewing-app-engine-configurations"></a>


Google Cloud Platform'ın (GCP) App Engine'i, **geniş çapta web uygulamalarının geliştirilmesi ve barındırılması için tasarlanmış güçlü, sunucusuz bir platformdur**. Bu platformun tasarımı, geliştirme sürecini basitleştirmeye ve uygulamaların yönetilebilirliğini artırmaya odaklanmıştır. GCP'nin App Engine'inin temel özellikleri ve faydaları şunlardır:

1. **Sunucusuz Mimarisi**: App Engine altyapıyı otomatik olarak yönetir, sunucu sağlama, yapılandırma ve ölçeklendirmeyi içerir. Bu, geliştiricilerin altta yatan donanımla ilgilenmeden kod yazmaya odaklanmasını sağlar.
2. **Otomatik Ölçeklendirme**: App Engine, uygulamanızın aldığı trafiğe yanıt olarak otomatik olarak ölçeklendirilebilir. Trafik arttığında ölçeklenir ve trafiğin azaldığında ölçeklenir, maliyeti ve performansı optimize etmeye yardımcı olur.
3. **Dil ve Çalışma Zamanı Desteği**: Java, Python, Node.js, Go, Ruby, PHP ve .NET gibi popüler programlama dillerini destekler. Uygulamalarınızı standart veya esnek bir ortamda çalıştırabilirsiniz. Standart ortam, belirli diller için daha kısıtlayıcıdır ancak esnek ortam daha fazla özelleştirmeye izin verir.
4. **Entegre Hizmetler**: App Engine, Cloud SQL, Cloud Storage, Cloud Datastore ve daha birçok GCP hizmetiyle entegre olur. Bu entegrasyon, bulut tabanlı uygulamaların mimarisini basitleştirir.
5. **Sürümleme ve Trafik Bölme**: Uygulamanızın birden fazla sürümünü kolayca dağıtabilir ve ardından bunlar arasında trafiği A/B testi veya aşamalı dağıtımlar için bölebilirsiniz.
6. **Uygulama İzleme**: App Engine, günlükleme, kullanıcı kimlik doğrulama ve uygulamaları izlemek ve yönetmek için bir dizi geliştirici aracı gibi yerleşik hizmetler sağlar.
7. **Güvenlik**: Uygulama sürümleme, güvenli bağlantılar için SSL/TLS sertifikaları ve kimlik ve erişim yönetimi gibi yerleşik güvenlik özellikleri sunar.

### Güvenlik Duvarı

Uygulamaları çalıştıran örnekler için basit bir **güvenlik duvarı** şu seçeneklerle yapılandırılabilir:

<figure><img src="../../../.gitbook/assets/image (3) (1) (2).png" alt=""><figcaption></figcaption></figure>

### SA

Bu Uygulamalar tarafından kullanılan varsayılan hizmet hesabı **`<proj-adı>@appspot.gserviceaccount.com`**'dur ve projeye ve APP Engine örneklerinde çalışan SAs içinde **bulut-platform kapsamıyla (diğerleri arasında) çalışır.**

### Depolama

Kaynak kodu ve meta veriler **otomatik olarak kovalarda depolanır** ve `<proj-id>.appspot.com` ve `staging.<proj-id>.appspot.com` ve `<ülke>.<proj-id>.appspot.com` gibi isimlerle adlandırılır.

**Uygulamanın her dosyası**, içeriğin sha1'i ile dosya adı olarak depolanır:

<figure><img src="../../../.gitbook/assets/image (4) (6).png" alt=""><figcaption></figcaption></figure>

`staging.<proj-id>.appspot.com` içindeki **`ae`** klasöründe, **her sürüm için bir klasör** bulunur ve uygulamanın **kaynak kodu** dosyaları ve uygulamanın bileşenlerini **tanımlayan `manifest.json`** dosyası bulunur:

{% code overflow="wrap" %}
```json
{"requirements.txt":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/a270eedcbe2672c841251022b7105d340129d108","sha1Sum":"a270eedc_be2672c8_41251022_b7105d34_0129d108"},"main_test.py":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/0ca32fd70c953af94d02d8a36679153881943f32","sha1Sum":"0ca32fd7_0c953af9_4d02d8a ...
```
{% endcode %}

### Konteynerler

Web uygulaması nihayetinde bir **konteyner içinde yürütülecek** ve **Code Build** konteyneri oluşturmak için kullanılacak.

### URL'ler ve Bölgeler

**Varsayılan** web sayfası URL **`<proje-benzersiz-adı>.appspot.com`** adresinde sunulacaktır, eski sürümlerin URL'si ise biraz farklı olacaktır, örneğin **`https://20240117t001540-dot-<proje-benzersiz-adı>.uc.r.appspot.com`** (başlangıç zaman damgasına dikkat edin).

Yalnızca bir app engine web uygulamasının bölge başına dağıtılabilir gibi görünse de, **`app.yml`** içinde **`service: <servisadı>`** belirterek yeni bir hizmet (yeni bir web) oluşturmak mümkündür. Bu yeni web için URL formatı **`<servisadı>-dot-<proje-benzersiz-adı>.appspot.com`** olacaktır.

### Numaralandırma

{% hint style="danger" %}
Her yeni kod yüklendiğinde, App'e **yeni bir sürüm oluşturulur**. **Tüm sürümler saklanır** ve hatta bunlara erişmek için bir **URL'leri vardır**. Bu nedenle, eski bir sürümün kodunu değiştirmek büyük bir **kalıcılık tekniği** olabilir.
{% endhint %}

Cloud Functions ile olduğu gibi, **uygulamanın çalışma zamanında erişilen sırlara güvenmesi olasılığı vardır**. Bu değişkenler, bir **`app.yaml`** dosyasında saklanır ve aşağıdaki gibi erişilebilir:
```bash
# List the apps
gcloud app services list
gcloud app services describe <app-name>
# Access via browser to the specified app
gcloud app services browse <app-name>

# Get App versions
gcloud app versions list
# Get all the info of the app and version, included specific verion URL and the env
gcloud app versions describe -s <app-name> <version-id>

# Logs
gcloud app logs tail -s <app-name>

# Instances
## This is only valid if a flexible environment is used and not a standard one
gcloud app instances list
gcloud app instances describe -s <app-name> --version <version-id> <ID>
## Connect to the instance via ssh
gcloud app instances ssh --service <app-name> --version <version-id> <ID>

# Firewalls
gcloud app firewall-rules list
gcloud app firewall-rules describe <num_fw>

# Get domains
gcloud app domain-mappings list
gcloud app domain-mappings describe <name>

# SSl certificates
gcloud app ssl-certificates list
gcloud app ssl-certificates describe <name>
```
### Yetki Yükseltme

{% content-ref url="../gcp-privilege-escalation/gcp-appengine-privesc.md" %}
[gcp-appengine-privesc.md](../gcp-privilege-escalation/gcp-appengine-privesc.md)
{% endcontent-ref %}

### Kimlik Doğrulamasız Sıralama

{% content-ref url="../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md" %}
[gcp-app-engine-unauthenticated-enum.md](../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md)
{% endcontent-ref %}

### Saldırı Sonrası İşlemler

{% content-ref url="../../gcp-security/gcp-post-exploitation/gcp-app-engine-post-exploitation.md" %}
[gcp-app-engine-post-exploitation.md](../../gcp-security/gcp-post-exploitation/gcp-app-engine-post-exploitation.md)
{% endcontent-ref %}

### Kalıcılık

{% content-ref url="../../gcp-security/gcp-persistence/gcp-app-engine-persistence.md" %}
[gcp-app-engine-persistence.md](../../gcp-security/gcp-persistence/gcp-app-engine-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitimi AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitimi GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* Hacking püf noktalarını paylaşarak PR'ler göndererek **HackTricks** ve **HackTricks Cloud** github depolarına katkıda bulunun.

</details>
{% endhint %}
