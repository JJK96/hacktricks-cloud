# GCP - App Engine Enum

{% hint style="success" %}
Jifunze na zoezi la Kuvamia AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoezi la Kuvamia GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa michango**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za kuvamia kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Taarifa Msingi <a href="#reviewing-app-engine-configurations" id="reviewing-app-engine-configurations"></a>


Google Cloud Platform's (GCP) App Engine ni **jukwaa imara, lisilo na seva lililobinafsishwa kwa maendeleo na mwenyeji wa maombi ya wavuti kwa kiwango kikubwa**. Ubunifu wa jukwaa hili unazingatia kusonga mbele mchakato wa maendeleo na kuboresha usimamizi wa maombi. Sifa muhimu na faida za GCP's App Engine ni pamoja na:

1. **Miundo ya Seva Lisilo na Seva**: App Engine inashughulikia moja kwa moja miundombinu, ikiwa ni pamoja na utoaji wa seva, usanidi, na upanuzi. Hii inaruhusu waendelezaji kuzingatia kuandika nambari bila kuhangaika kuhusu vifaa vya msingi.
2. **Upanuzi wa Kiotomatiki**: App Engine inaweza kiotomatiki kupanua maombi yako kulingana na kiasi cha trafiki inayopokea. Inapanuka kushughulikia ongezeko la trafiki na kupunguza wakati trafiki inapungua, ikisaidia kuoptimumisha gharama na utendaji.
3. **Msaada wa Lugha na Mazingira ya Uendeshaji**: Inasaidia lugha maarufu za programu kama vile Java, Python, Node.js, Go, Ruby, PHP, na .NET. Unaweza kukimbia maombi yako katika mazingira ya kawaida au mazingira ya kubadilika. Mazingira ya kawaida ni ya kikandamizi lakini yameboreshwa sana kwa lugha maalum, wakati mazingira ya kubadilika inaruhusu ubinafsishaji zaidi.
4. **Huduma Zilizounganishwa**: App Engine inaunganisha na huduma nyingine nyingi za GCP, kama Cloud SQL, Cloud Storage, Cloud Datastore, na zingine. Uunganisho huu unapunguza miundo ya maombi ya msingi wa wingu.
5. **Utoaji wa Matoleo na Kugawanya Trafiki**: Unaweza kwa urahisi kupeleka matoleo mengi ya maombi yako na kisha kugawa trafiki kati yao kwa ajili ya majaribio ya A/B au kuzindua taratibu.
6. **Ujuzi wa Maombi**: App Engine hutoa huduma zilizojengwa kama vile kuingiza kumbukumbu, uthibitishaji wa mtumiaji, na seti ya zana za waendelezaji kwa ajili ya kufuatilia na kusimamia maombi.
7. **Usalama**: Inatoa vipengele vya usalama vilivyojengwa kama vile toleo la maombi, vyeti vya SSL/TLS kwa mawasiliano salama, na utambulisho na usimamizi wa ufikiaji.

### Firewall

**Firewall** rahisi inaweza kusanidiwa kwa mifano inayotumia Maombi na chaguzi zifuatazo:

<figure><img src="../../../.gitbook/assets/image (3) (1) (2).png" alt=""><figcaption></figcaption></figure>

### SA

Akaunti ya huduma ya msingi inayotumiwa na Maombi haya ni **`<proj-jina>@appspot.gserviceaccount.com`** ambayo ina jukumu la **Mhariri** juu ya mradi na SAs ndani ya kifaa cha APP Engine **hufanya kazi na wigo wa jukwaa la wingu (miongoni mwa mengine).**

### Uhifadhi

Nambari ya chanzo na metadata **huhifadhiwa moja kwa moja kwenye vikapu** vyenye majina kama `<proj-id>.appspot.com` na `staging.<proj-id>.appspot.com` na `<nchi>.<proj-id>.appspot.com`&#x20;

**Kila faili** ya Maombi huhifadhiwa na **sha1 ya yaliyomo kama jina la faili**:

<figure><img src="../../../.gitbook/assets/image (4) (6).png" alt=""><figcaption></figcaption></figure>

Ndani ya **`ae`** folda kutoka `staging.<proj-id>.appspot.com`, **folda moja kwa kila toleo ipo** na faili za **nambari ya chanzo** na faili ya **`manifest.json`** ambayo **inaelezea vipengele** vya Maombi:
```json
{"requirements.txt":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/a270eedcbe2672c841251022b7105d340129d108","sha1Sum":"a270eedc_be2672c8_41251022_b7105d34_0129d108"},"main_test.py":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/0ca32fd70c953af94d02d8a36679153881943f32","sha1Sum":"0ca32fd7_0c953af9_4d02d8a ...
```
{% endcode %}

### Vyombo vya Kuhifadhi

Programu ya wavuti mwishowe itatekelezwa ndani ya chombo na **Code Build** hutumiwa kujenga chombo hicho.

### URL & Mikoa

Ukurasa wa wavuti wa **kawaida** utafunuliwa kwenye URL **`<jina-la-uniq-la-mradi>.appspot.com`** ingawa URL za toleo la zamani zitakuwa tofauti kidogo, kama **`https://20240117t001540-dot-<jina-la-uniq-la-mradi>.uc.r.appspot.com`** (zingatia muda wa awali).

Inaweza kuonekana kana kwamba ni iwezekanavyo tu kupeleka maombi 1 ya injini ya programu ya wavuti kwa kila eneo, lakini ni iwezekanavyo kuonyesha **`huduma: <jina-la-huduma>`** katika **`app.yml`** na kuunda huduma mpya (wavuti mpya). Muundo wa URL kwa wavuti hii mpya utakuwa **`<jina-la-huduma>-dot-<jina-la-uniq-la-mradi>.appspot.com`**.

### Uorodheshaji

{% hint style="danger" %}
Kila wakati unapopakia nambari mpya kwenye Programu, **toleo jipya hujengwa**. **Toleo zote huhifadhiwa** na hata zina **URL ya kufikia**. Kwa hivyo, kubadilisha nambari ya toleo la zamani inaweza kuwa **njia nzuri ya kudumu**.
{% endhint %}

Kama ilivyo na Cloud Functions, **kuna nafasi kwamba programu itategemea siri ambazo hupatikana wakati wa muda wa kukimbia kupitia mazingira ya mazingira**. Hizi mazingira huhifadhiwa katika faili ya **`app.yaml`** ambayo inaweza kupatikana kama ifuatavyo:
```bash
# List the apps
gcloud app services list
gcloud app services describe <app-name>
# Access via browser to the specified app
gcloud app services browse <app-name>

# Get App versions
gcloud app versions list
# Get all the info of the app and version, included specific verion URL and the env
gcloud app versions describe -s <app-name> <version-id>

# Logs
gcloud app logs tail -s <app-name>

# Instances
## This is only valid if a flexible environment is used and not a standard one
gcloud app instances list
gcloud app instances describe -s <app-name> --version <version-id> <ID>
## Connect to the instance via ssh
gcloud app instances ssh --service <app-name> --version <version-id> <ID>

# Firewalls
gcloud app firewall-rules list
gcloud app firewall-rules describe <num_fw>

# Get domains
gcloud app domain-mappings list
gcloud app domain-mappings describe <name>

# SSl certificates
gcloud app ssl-certificates list
gcloud app ssl-certificates describe <name>
```
### Kupanda Kwa Hadhi

{% content-ref url="../gcp-privilege-escalation/gcp-appengine-privesc.md" %}
[gcp-appengine-privesc.md](../gcp-privilege-escalation/gcp-appengine-privesc.md)
{% endcontent-ref %}

### Uchunguzi Usiothibitishwa

{% content-ref url="../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md" %}
[gcp-app-engine-unauthenticated-enum.md](../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md)
{% endcontent-ref %}

### Baada ya Kudukuliwa

{% content-ref url="../../gcp-security/gcp-post-exploitation/gcp-app-engine-post-exploitation.md" %}
[gcp-app-engine-post-exploitation.md](../../gcp-security/gcp-post-exploitation/gcp-app-engine-post-exploitation.md)
{% endcontent-ref %}

### Uthabiti

{% content-ref url="../../gcp-security/gcp-persistence/gcp-app-engine-persistence.md" %}
[gcp-app-engine-persistence.md](../../gcp-security/gcp-persistence/gcp-app-engine-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Jifunze & zoezi la Udukuzi wa AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks AWS Timu Nyekundu Mtaalam (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze & zoezi la Udukuzi wa GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks GCP Timu Nyekundu Mtaalam (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa michango**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}
