# GCP - AppEngine Privesc

{% hint style="success" %}
Jifunze na zoezi la AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoezi la GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## App Engine

Kwa habari zaidi kuhusu App Engine angalia:

{% content-ref url="../gcp-services/gcp-app-engine-enum.md" %}
[gcp-app-engine-enum.md](../gcp-services/gcp-app-engine-enum.md)
{% endcontent-ref %}

### `appengine.applications.get`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.operations.list`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.create`, `appengine.versions.get`, `appengine.versions.list`, `cloudbuild.builds.get`,`iam.serviceAccounts.actAs`, `resourcemanager.projects.get`, `storage.objects.create`, `storage.objects.list`

Hizo ni ruhusa zinazohitajika **kuweka programu kwa kutumia `gcloud` cli**. Labda zile za **`get`** na **`list`** zinaweza **kuepukwa**.

Unaweza kupata mifano ya nambari ya Python katika [https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine](https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine)

Kwa chaguo-msingi, jina la huduma ya Programu litakuwa **`default`**, na inaweza kuwepo tu 1 kifaa na jina sawa.\
Ili kubadilisha hilo na kuunda Programu ya pili, katika **`app.yaml`**, badilisha thamani ya funguo ya msingi kuwa kitu kama **`service: my-second-app`**
```bash
cd python-docs-samples/appengine/flexible/hello_world
gcloud app deploy #Upload and start application inside the folder
```
Toa angalau dakika 10-15, ikiwa haitafanya kazi piga simu **weka mara nyingine** na subiri dakika chache.

{% hint style="info" %}
Ni **inawezekana kuashiria Akaunti ya Huduma ya kutumia** lakini kwa chaguo-msingi, SA ya msingi ya App Engine hutumika.
{% endhint %}

URL ya maombi ni kama `https://<proj-jina>.oa.r.appspot.com/` au `https://<jina_la_huduma>-dot-<proj-jina>.oa.r.appspot.com`

### `appengine.instances.enableDebug`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.get`, `appengine.versions.list`, `compute.projects.get`

Kwa idhini hizi, ni **inawezekana kuingia kupitia ssh katika mifano ya App Engine** ya aina **inayoweza kubadilika** (sio ya kawaida). Baadhi ya idhini za **`list`** na **`get`** **zinaweza kutokuwa muhimu sana**.
```bash
gcloud app instances ssh --service <app-name> --version <version-id> <ID>
```
### `appengine.applications.update`, `appengine.operations.get`

Nadhani hii inabadilisha SA ya nyuma ambayo Google itatumia kuanzisha maombi, kwa hivyo siamini unaweza kutumia hii kudhuru kwa kuiba akaunti ya huduma.
```bash
gcloud app update --service-account=<sa_email>
```
{% endcode %}

### `appengine.versions.getFileContents`, `appengine.versions.update`

Si hakika jinsi ya kutumia ruhusa hizi au kama zinafaa (kumbuka kwamba unapobadilisha nambari toleo jipya hujengwa kwa hivyo siwezi kujua ikiwa unaweza tu kusasisha nambari au jukumu la IAM la moja kwa moja, lakini nadhani unapaswa kuweza, labda kwa kubadilisha nambari ndani ya ndoo??).

### Upatikanaji wa Kuandika juu ya ndoo

Hata ukiwa na upatikanaji wa kuandika juu ya ndoo ambapo nambari ya chanzo inapatikana **HAIKUWEZEKANA kutekeleza nambari ya kupindukia kwa kubadilisha nambari ya chanzo na `manifest.json`**.\
Labda ikiwa unafuatilia ndoo na kugundua wakati ambapo toleo jipya linajengwa na nambari ya chanzo na maelezo yanapakiwa, inaweza kuwa inawezekana kuzibadilisha ili toleo jipya litumie zile zilizo na mlango wa nyuma??

Inaonekana pia tabaka za kontena zimehifadhiwa kwenye ndoo, labda kuzibadilisha?

{% hint style="success" %}
Jifunze & zoezi la Udukuzi wa AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks AWS Timu Nyekundu Mtaalam (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze & zoezi la Udukuzi wa GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks GCP Timu Nyekundu Mtaalam (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
