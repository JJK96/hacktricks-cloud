# GCP - AppEngine Privesc

{% hint style="success" %}
Leer & oefen AWS Hack:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

## App Engine

Vir meer inligting oor App Engine, kyk:

{% content-ref url="../gcp-services/gcp-app-engine-enum.md" %}
[gcp-app-engine-enum.md](../gcp-services/gcp-app-engine-enum.md)
{% endcontent-ref %}

### `appengine.applications.get`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.operations.list`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.create`, `appengine.versions.get`, `appengine.versions.list`, `cloudbuild.builds.get`,`iam.serviceAccounts.actAs`, `resourcemanager.projects.get`, `storage.objects.create`, `storage.objects.list`

Dit is die nodige toestemmings om **'n App te ontplooi met die `gcloud`-opdraglyn**. Dalk kan die **`get`** en **`list`** een vermy word.

Jy kan Python-kodevoorbeelde vind by [https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine](https://github.com/GoogleCloudPlatform/python-docs-samples/tree/main/appengine)

Standaard gaan die naam van die App-diens **`default`** wees, en daar kan slegs 1 instansie met dieselfde naam wees.\
Om dit te verander en 'n tweede App te skep, verander die waarde van die hoof sleutel na iets soos **`service: my-second-app`**
```bash
cd python-docs-samples/appengine/flexible/hello_world
gcloud app deploy #Upload and start application inside the folder
```
Gee dit minstens 10-15 minute, as dit nie werk nie, roep **implementeer nog 'n paar keer** en wag 'n paar minute.

{% hint style="info" %}
Dit is **moontlik om die Diensrekening aan te dui** om te gebruik, maar standaard word die App Engine standaard DR gebruik.
{% endhint %}

Die URL van die aansoek is iets soos `https://<proj-naam>.oa.r.appspot.com/` of `https://<diensnaam>-dot-<proj-naam>.oa.r.appspot.com`

### `appengine.instances.enableDebug`, `appengine.instances.get`, `appengine.instances.list`, `appengine.operations.get`, `appengine.services.get`, `appengine.services.list`, `appengine.versions.get`, `appengine.versions.list`, `compute.projects.get`

Met hierdie regte is dit moontlik om **in te teken via ssh in App Engine-instanies** van die tipe **buigsame** (nie standaard nie). Sommige van die **`lys`** en **`kry`** regte **mag nie regtig nodig wees nie**.
```bash
gcloud app instances ssh --service <app-name> --version <version-id> <ID>
```
### `appengine.applications.update`, `appengine.operations.get`

Ek dink dit verander net die agtergrond SA wat Google sal gebruik om die aansoeke op te stel, so ek dink nie jy kan dit misbruik om die diensrekening te steel.

{% code overflow="wrap" %}
```bash
gcloud app update --service-account=<sa_email>
```
### `appengine.versions.getFileContents`, `appengine.versions.update`

Nie seker hoe om hierdie regte te gebruik of as hulle nuttig is (let op dat wanneer jy die kode verander 'n nuwe weergawe geskep word, so ek weet nie of jy net die kode kan opdateer of die IAM rol van een kan verander nie, maar ek dink jy behoort te kan, dalk die kode binne die emmer verander??).

### Skryftoegang oor die emmers

Selfs met skryftoegang oor die emmers waar die bronkode gele√´ is **WAS DIT NIE moontlik om willekeurige kode uit te voer deur die bronkode en die `manifest.json` te wysig nie**.\
Miskien as jy die emmer monitor en die oomblik waar 'n nuwe weergawe geskep word en die bronkode en manifest opgelaai word, opspoor, kan dit moontlik wees om hulle te verander sodat die nuwe weergawe die agterdeur-eksemplare gebruik??

Dit lyk ook of houerlae in die emmer gestoor word, dalk om daardie te verander?

{% hint style="success" %}
Leer & oefen AWS Hack: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel haktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
