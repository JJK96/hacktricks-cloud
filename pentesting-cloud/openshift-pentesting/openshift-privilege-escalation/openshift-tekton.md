---
beskrywing: >-
Hierdie bladsy toon 'n scenario vir voorreg-escalasie as tekton in die groep
geïnstalleer is en as jy 'n naamspasie kan skep (soms is redigeerregte genoeg)
---

# OpenShift - Tekton

**Die oorspronklike skrywer van hierdie bladsy is** [**Haroun**](www.linkedin.com/in/haroun-al-mounayar-571830211)

### Wat is tekton

Volgens die dokument: _Tekton is 'n kragtige en aanpasbare oopbronraamwerk vir die skep van CI/CD-stelsels, wat ontwikkelaars in staat stel om oor wolkverskaffers en plaaslike stelsels te bou, toets en implementeer._ Beide Jenkins en Tekton kan gebruik word om aansoeke te toets, bou en implementeer, maar Tekton is Cloud Native.&#x20;

Met Tekton word alles verteenwoordig deur YAML-lêers. Ontwikkelaars kan Aangepaste Hulpbronne (CR) van die tipe `Pipelines` skep en meervoudige `Tasks` daarin spesifiseer wat hulle wil hardloop. Om 'n Pyplynhulpbronne van die tipe `PipelineRun` te hardloop, moet geskep word.

Wanneer tekton geïnstalleer is, word 'n diensrekening (sa) genaamd pyplyn in elke naamspasie geskep. Wanneer 'n Pyplyn hardloop, sal 'n peul met hierdie sa genaamd `pyplyn` geskep word om die take wat in die YAML-lêer omskryf is, uit te voer.

{% embed url="https://tekton.dev/docs/getting-started/pipelines/" %}
Tekton Dokumentasie oor Pyplyne
{% endembed %}

### Die Pyplyn-diensrekening se vermoëns

Standaard kan die pyplyn-diensrekening die `pipelines-scc`-vermoë gebruik. Dit is te danke aan die globale verstekkonfigurasie van tekton. Eintlik is die globale konfigurasie van tekton ook 'n YAML in 'n openshift-voorwerp genaamd `TektonConfig` wat gesien kan word as jy sekere leserrolle in die groep het.
```yaml
apiVersion: operator.tekton.dev/v1alpha1
kind: TektonConfig
metadata:
name: config
spec:
...
...
platforms:
openshift:
scc:
default: "pipelines-scc"
```
In enige namespace, as jy die pyplyn-diensrekeningtoken kan kry, sal jy in staat wees om `pipelines-scc` te gebruik.

### Die Misconfig

Die probleem is dat die verstek scc wat die pyplyn sa kan gebruik, deur die gebruiker beheerbaar is. Dit kan gedoen word deur 'n etiket in die namespace-definisie te gebruik. Byvoorbeeld, as ek 'n namespace kan skep met die volgende yaml-definisie:
```yaml
apiVersion: v1
kind: Namespace
metadata:
name: test-namespace
annotations:
operator.tekton.dev/scc: privileged
```
Die tekton-operator sal aan die pyplyn-diensrekening in `toets-naamruimte` die vermoë gee om die scc bevoorreg te gebruik. Dit sal die koppeling van die node moontlik maak.

### Die regstelling

Tekton dokumente oor hoe om die oorskrywing van scc te beperk deur 'n etiket by die `TektonConfig`-voorwerp by te voeg.

{% embed url="https://tekton.dev/docs/operator/sccconfig/" %}
Tekton-dokument oor scc
{% endembed %}

Hierdie etiket word `max-toegelaat` genoem.
```yaml
apiVersion: operator.tekton.dev/v1alpha1
kind: TektonConfig
metadata:
name: config
spec:
...
...
platforms:
openshift:
scc:
default: "restricted-v2"
maxAllowed: "privileged"
```

