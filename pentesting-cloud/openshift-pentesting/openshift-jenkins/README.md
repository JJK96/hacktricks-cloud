# OpenShift - Jenkins

**Ο αρχικός συγγραφέας αυτής της σελίδας είναι** [**Fares**](https://www.linkedin.com/in/fares-siala/)

Αυτή η σελίδα δίνει ορισμένες οδηγίες για το πώς μπορείτε να επιτεθείτε σε ένα παράδειγμα Jenkins που τρέχει σε ένα Openshift (ή Kubernetes) cluster

## Αποποίηση ευθυνών

Ένα παράδειγμα Jenkins μπορεί να εγκατασταθεί τόσο σε ένα Openshift όσο και σε ένα Kubernetes cluster. Ανάλογα με το πλαίσιό σας, μπορεί να χρειαστεί να προσαρμόσετε οποιοδήποτε παρουσιαζόμενο φορτίο, yaml ή τεχνική. Για περισσότερες πληροφορίες σχετικά με την επίθεση στο Jenkins μπορείτε να ϭρείτε στη [σελίδα αυτή](../../../pentesting-ci-cd/jenkins-security/)

## Προϋποθέσεις

1α. Πρόσβαση χρήστη σε ένα παράδειγμα Jenkins Ή 1β. Πρόσβαση χρήστη με δικαίωμα εγγραφής σε ένα αποθετήριο SCM όπου μια αυτοματοποιημένη διαδικασία κατασκευής ενεργοποιείται μετά από μια προώθηση/συγχώνευση

## Πώς λειτουργεί

Βασικά, σχεδόν τα πάντα πίσω από τις σκηνές λειτουργούν με τον ίδιο τρόπο με ένα κανονικό παράδειγμα Jenkins που τρέχει σε ένα VM. Η κύρια διαφορά είναι η συνολική αρχιτεκτονική και πώς διαχειρίζονται οι κατασκευές μέσα σε ένα openshift (ή kubernetes) cluster.

### Κατασκευές

Όταν ενεργοποιείται μια κατασκευή, διαχειρίζεται/οργανώνεται πρώτα από τον κύριο κόμβο Jenkins και στη συνέχεια ανατίθεται σε έναν πράκτορα/δούλο/εργαζόμενο. Σε αυτό το πλαίσιο, ο κύριος κόμβος είναι απλώς ένα κανονικό pod που τρέχει σε ένα namespace (το οποίο ενδέχεται να είναι διαφορετικό από αυτό όπου τρέχουν οι εργαζόμενοι). Το ίδιο ισχύει για τους εργαζόμενους/δούλους, ωστόσο καταστρέφονται μόλις ολοκληρωθεί η κατασκευή, ενώ ο κύριος κόμβος παραμένει πάντα ενεργός. Η κατασκευή σας τρέχει συνήθως μέσα σε ένα pod, χρησιμοποιώντας ένα προεπιλεγμένο πρότυπο pod που έχει καθοριστεί από τους διαχειριστές του Jenkins.

### Ενεργοποίηση μιας κατασκευής

Έχετε πολλούς τρόπους για να ενεργοποιήσετε μια κατασκευή, όπως:

1. Έχετε πρόσβαση στο UI του Jenkins

Ένας πολύ εύκολος και βολικός τρόπος είναι να χρησιμοποιήσετε τη λειτουργία Επανάληψης μιας υπάρχουσας κατασκευής. Σας επιτρέπει να επαναλάβετε μια προηγουμένως εκτελεσμένη κατασκευή ενώ σας επιτρέπει να ενημερώσετε το σενάριο groovy. Αυτό απαιτεί προνόμια σε ένα φάκελο Jenkins και έναν προκαθορισμένο pipeline. Αν χρειάζεστε να είστε αόρατοι, μπορείτε να διαγράψετε τις ενεργοποιημένες κατασκευές σας αν έχετε αρκετά δικαιώματα.

2. Έχετε δικαίωμα εγγραφής στο SCM και οι αυτοματοποιημένες κατασκευές είναι διαμορφωμένες μέσω webhook

Μπορείτε απλώς να επεξεργαστείτε ένα σενάριο κατασκευής (όπως Jenkinsfile), να κάνετε commit και push (ενδεχομένως να δημιουργήσετε ένα PR αν οι κατασκευές ενεργοποιούνται μόνο στις συγχωνεύσεις PR). Να θυμάστε ότι αυτή η διαδρομή είναι πολύ θορυβώδης και χρειάζεται υψηλά προνόμια για να καθαρίσετε τα ίχνη σας.

## Αντικατάσταση YAML παρακάμψης Jenkins Build Pod

{% content-ref url="openshift-jenkins-build-overrides.md" %}
[openshift-jenkins-build-overrides.md](openshift-jenkins-build-overrides.md)
{% endcontent-ref %}
