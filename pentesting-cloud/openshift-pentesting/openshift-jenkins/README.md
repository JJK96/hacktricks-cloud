# Jenkins in Openshift

**Bu sayfanın orijinal yazarı** [**Fares**](https://www.linkedin.com/in/fares-siala/)

Bu sayfa, bir Jenkins örneğine saldırabileceğiniz bazı ipuçlarını sunar, Openshift (veya Kubernetes) kümesinde çalışan.

## Feragatname

Bir Jenkins örneği hem Openshift'te hem de Kubernetes kümesinde dağıtılabilir. Bağlamınıza bağlı olarak, gösterilen herhangi bir yükü, yaml veya tekniği uyarlamak gerekebilir. Jenkins'i hedef alan daha fazla bilgi için [bu sayfaya](../../../pentesting-ci-cd/jenkins-security/README.md) bakabilirsiniz.

## Ön koşullar

1a. Bir Jenkins örneğinde kullanıcı erişimi
VEYA
1b. Bir SCM deposuna yazma izni olan bir kullanıcı, itme/birleştirme işleminden sonra tetiklenen otomatik bir derleme

## Nasıl Çalışır

Temelde, sahnelerin arkasındaki hemen hemen her şey, bir VM'de çalışan düzenli bir Jenkins örneğiyle aynı şekilde çalışır.
Ana fark, genel mimari ve derlemelerin bir Openshift (veya Kubernetes) kümesi içinde nasıl yönetildiğidir.

### Derlemeler

Bir derleme tetiklendiğinde, önce jenkins ana düğümü tarafından yönetilir/orkestrasyonu yapılır, ardından bir ajan/esir/işçiye devredilir. Bu bağlamda, ana düğüm sadece bir ad alanında çalışan düzenli bir kapsül (işçilerin çalıştığı yerden farklı olabilir) olarak işlev görür. Aynısı işçiler/esirler için de geçerlidir, ancak derleme bittiğinde yok edilirlerken ana düğüm her zaman çalışır kalır.
Derlemeniz genellikle, jenkins yöneticileri tarafından tanımlanan varsayılan bir kapsül şablonu kullanılarak bir kapsül içinde çalıştırılır.

### Bir derlemeyi Tetikleme

Bir derlemeyi tetiklemek için çeşitli ana yol vardır, örneğin:

1. Jenkins'e UI erişiminiz var

Var olan bir derlemenin Yeniden Oynat işlevini kullanmak çok kolay ve uygun bir yoldur. Daha önce yürütülen bir derlemeyi yeniden oynatmanıza izin verirken groovy betiğini güncelleme olanağı sağlar. Bu, bir jenkins klasöründe ayrıcalıklara ihtiyaç duyar ve önceden tanımlanmış bir boru hattı gerektirir.
Eğer gizli olmanız gerekiyorsa, yeterli izniniz varsa tetiklenen derlemelerinizi silebilirsiniz.

2. SCM'ye yazma erişiminiz var ve otomatik derlemeler web kancası aracılığıyla yapılandırılmış

Sadece bir derleme betiğini (örneğin Jenkinsfile) düzenleyebilir, taahhüt edebilir ve itebilirsiniz (gerektiğinde bir PR oluşturabilirsiniz eğer derlemeler yalnızca PR birleştirmelerinde tetikleniyorsa). Bu yolun çok gürültülü olduğunu ve izlerinizi temizlemek için yüksek ayrıcalıklara ihtiyaç duyduğunu unutmayın.
