# OpenShift - Jenkins

**Bu sayfanın orijinal yazarı** [**Fares**](https://www.linkedin.com/in/fares-siala/)

Bu sayfa, bir Jenkins örneğine saldırabileceğiniz bazı ipuçlarını sunar, bu Jenkins örneği bir Openshift (veya Kubernetes) kümesinde çalışıyor.

## Feragatname

Bir Jenkins örneği hem Openshift hem de Kubernetes kümesine dağıtılabilir. Bağlamınıza bağlı olarak, gösterilen herhangi bir yük, yaml veya teknikleri uyarlamak gerekebilir. Jenkins'e saldırmak hakkında daha fazla bilgi için [bu sayfaya](../../../pentesting-ci-cd/jenkins-security/) bakabilirsiniz.

## Önkoşullar

1a. Bir Jenkins örneğinde kullanıcı erişimi VEYA 1b. Bir SCM deposuna yazma izni olan kullanıcı erişimi, itme/birleştirme sonrası otomatik bir derleme tetiklendiğinde

## Nasıl Çalışır

Temelde, arka planda neredeyse her şey, bir VM'de çalışan düzenli bir Jenkins örneğiyle aynı şekilde çalışır. Ana fark, genel mimari ve derlemelerin bir Openshift (veya Kubernetes) kümesi içinde nasıl yönetildiğidir.

### Derlemeler

Bir derleme tetiklendiğinde, önce Jenkins ana düğümü tarafından yönetilir/orkestrasyonu yapılır, ardından bir ajan/esir/çalışan birime devredilir. Bu bağlamda, ana düğüm sadece bir ad alanında çalışan düzenli bir kapsül (çalışanların çalıştığı yerden farklı olabilir) olarak çalışır. Aynı şey çalışanlar/esirler için de geçerlidir, ancak derleme bittiğinde yok edilirlerken ana düğüm her zaman çalışır durumda kalır. Derlemeniz genellikle, Jenkins yöneticileri tarafından tanımlanan varsayılan bir kapsül şablonu kullanılarak bir kapsül içinde çalıştırılır.

### Bir derlemeyi tetikleme

Bir derlemeyi tetiklemek için çeşitli ana yol vardır, bunlar şunlardır:

1. Jenkins'e UI erişiminiz var

Var olan bir derlemenin Yeniden Oynat işlevini kullanmak çok kolay ve uygun bir yoldur. Daha önce yürütülen bir derlemeyi yeniden oynatmanıza izin verirken groovy betiğini güncelleme olanağı sağlar. Bu, bir Jenkins klasöründe ayrıcalıklara ve önceden tanımlanmış bir boruya sahip olmayı gerektirir. Gizli olmanız gerekiyorsa, yeterli izniniz varsa tetiklenen derlemelerinizi silebilirsiniz.

2. SCM'ye yazma erişiminiz var ve otomatik derlemeler web kancası aracılığıyla yapılandırılmış

Bir derleme betiğini (örneğin Jenkinsfile) düzenleyebilir, taahhüt edebilir ve itebilirsiniz (gerektiğinde bir PR oluşturabilirsiniz eğer derlemeler yalnızca PR birleştirmelerinde tetikleniyorsa). Bu yolun çok gürültülü olduğunu ve izlerinizi temizlemek için yüksek ayrıcalıklara ihtiyaç duyduğunu unutmayın.

## Jenkins Derleme Kapsülü YAML geçersiz kılma

{% content-ref url="openshift-jenkins-build-overrides.md" %}
[openshift-jenkins-build-overrides.md](openshift-jenkins-build-overrides.md)
{% endcontent-ref %}
