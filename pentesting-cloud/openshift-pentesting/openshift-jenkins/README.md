# Jenkins in Openshift

**Bu sayfanın orijinal yazarı** [**Fares**](https://www.linkedin.com/in/fares-siala/)

Bu sayfa, bir Jenkins örneğine saldırabileceğiniz bazı ipuçlarını sunar, Openshift (veya Kubernetes) kümesinde çalışan.

## Feragatname

Bir Jenkins örneği hem Openshift hem de Kubernetes kümesine dağıtılabilir. Bağlamınıza bağlı olarak, gösterilen herhangi bir yük, yaml veya teknikleri uyarlamak gerekebilir. Jenkins'i hedef alan daha fazla bilgi için [bu sayfaya](../../../pentesting-ci-cd/jenkins-security/README.md) bakabilirsiniz.

## Önkoşullar

1a. Bir Jenkins örneğinde kullanıcı erişimi
VEYA
1b. Bir SCM deposuna yazma izni olan bir kullanıcı, itme/birleştirme sonrası tetiklenen otomatik bir derleme bulunan bir SCM deposuna yazma izni olan bir kullanıcı

## Nasıl Çalışır

Temelde, sahnelerin arkasındaki hemen hemen her şey, bir VM'de çalışan düzenli bir Jenkins örneğiyle aynı şekilde çalışır.
Ana fark, genel mimari ve derlemelerin bir Openshift (veya Kubernetes) kümesi içinde nasıl yönetildiğidir.

### Derlemeler

Bir derleme tetiklendiğinde, önce jenkins ana düğümü tarafından yönetilir/orkestrasyonu yapılır, ardından bir ajan/esir/çalışan birime devredilir. Bu bağlamda, ana düğüm sadece bir ad alanında çalışan düzenli bir kapsül (çalışanların çalıştığı yerden farklı olabilir) olarak çalışır. Aynısı çalışanlar/esirler için de geçerlidir, ancak derleme bittiğinde yok edilirlerken ana düğüm her zaman çalışır kalır.
Derlemeniz genellikle, jenkins yöneticileri tarafından tanımlanan varsayılan bir kapsül şablonu kullanılarak bir kapsül içinde çalıştırılır.

### Bir derlemeyi Tetikleme

Bir derlemeyi tetiklemek için çeşitli ana yol vardır, örneğin:

1. Jenkins'e UI erişiminiz var

Var olan bir derlemenin Yeniden Oynat işlevselliğini kullanmak çok kolay ve uygun bir yoldur. Daha önce yürütülen bir derlemeyi yeniden oynatmanıza izin verirken groovy betiğini güncelleme olanağı sağlar. Bu, bir jenkins klasöründe ayrıcalıklara ve önceden tanımlanmış bir boruya sahip olmayı gerektirir.
Eğer gizli olmanız gerekiyorsa, yeterli izniniz varsa tetiklenen derlemelerinizi silebilirsiniz.

2. SCM'ye yazma erişiminiz var ve otomatik derlemeler web kancası aracılığıyla yapılandırılmış

Sadece bir derleme betiğini (örneğin Jenkinsfile) düzenleyebilir, taahhüt edebilir ve itebilirsiniz (gerektiğinde bir PR oluşturabilirsiniz eğer derlemeler yalnızca PR birleştirmelerinde tetikleniyorsa). Bu yolun çok gürültülü olduğunu ve izlerinizi temizlemek için yüksek ayrıcalıklara ihtiyaç duyduğunu unutmayın.

## Jenkins Derleme Kapsülü YAML Geçersiz Kılma

{% content-ref url="openshift-jenkins-build-overrides.md" %}
[openshift-jenkins-build-overrides.md](openshift-jenkins-build-overrides.md)
{% endcontent-ref %}
