# Az AD Connect - Utambulisho wa Haidro

{% hint style="success" %}
Jifunze & zoezi Udukuzi wa AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks AWS Timu Nyekundu Mtaalam (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze & zoezi Udukuzi wa GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks GCP Timu Nyekundu Mtaalam (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa michango**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Taarifa Msingi

Ushirikiano kati ya **Active Directory ya On-premises (AD)** na **Azure AD** unarahisishwa na **Azure AD Connect**, ukitumia njia mbalimbali zinazounga mkono **Single Sign-on (SSO)**. Kila njia, ingawa ni muhimu, inaweza kuwa na mapungufu ya usalama yanayoweza kutumika kudukua mazingira ya wingu au ya on-premises:

* **Pass-Through Authentication (PTA)**:
- Uwezekano wa kudukua wakala kwenye AD ya on-prem, kuruhusu uthibitishaji wa nywila za watumiaji kwa ajili ya mawasiliano ya Azure (on-prem hadi Wingu).
- Uwezekano wa kusajili wakala mpya kwa ajili ya kuthibitisha uthibitishaji mahali mpya (Wingu hadi on-prem).

{% content-ref url="pta-pass-through-authentication.md" %}
[pta-pass-through-authentication.md](pta-pass-through-authentication.md)
{% endcontent-ref %}

* **Password Hash Sync (PHS)**:
- Uwezekano wa kutoa nywila za maandishi wazi za watumiaji wenye mamlaka kutoka kwenye AD, ikiwa ni pamoja na vyeti vya mtumiaji wa AzureAD aliye na mamlaka ya juu, yanayojengwa kiotomatiki.

{% content-ref url="phs-password-hash-sync.md" %}
[phs-password-hash-sync.md](phs-password-hash-sync.md)
{% endcontent-ref %}

* **Federation**:
- Wizi wa ufunguo binafsi unaotumiwa kwa ajili ya kusaini SAML, kuruhusu udanganyifu wa utambulisho wa on-prem na wa wingu.

{% content-ref url="federation.md" %}
[federation.md](federation.md)
{% endcontent-ref %}

* **Seamless SSO:**
- Wizi wa nywila ya mtumiaji wa `AZUREADSSOACC`, inayotumiwa kusaini tiketi za fedha za Kerberos, kuruhusu udanganyifu wa mtumiaji yeyote wa wingu.

{% content-ref url="seamless-sso.md" %}
[seamless-sso.md](seamless-sso.md)
{% endcontent-ref %}

* **Cloud Kerberos Trust**:
- Uwezekano wa kujipandisha kutoka kwa Msimamizi Mkuu hadi kwa Msimamizi wa Domain wa on-prem kwa kubadilisha majina ya watumiaji na SIDs wa AzureAD na kuomba TGT kutoka AzureAD.

{% content-ref url="az-cloud-kerberos-trust.md" %}
[az-cloud-kerberos-trust.md](az-cloud-kerberos-trust.md)
{% endcontent-ref %}

* **Programu za Chaguo-msingi**:
- Kudukua akaunti ya Msimamizi wa Programu au Akaunti ya Ulandanishi ya on-premise kunaruhusu mabadiliko ya mipangilio ya saraka, uanachama wa vikundi, akaunti za watumiaji, tovuti za SharePoint, na faili za OneDrive.

{% content-ref url="az-default-applications.md" %}
[az-default-applications.md](az-default-applications.md)
{% endcontent-ref %}

Kwa kila njia ya ushirikiano, usawazishaji wa watumiaji unafanywa, na akaunti ya `MSOL_<kitambulisho cha usakinishaji>` inaundwa kwenye AD ya on-prem. Kwa umuhimu, njia zote za **PHS** na **PTA** zinarahisisha **Seamless SSO**, kuruhusu kuingia kiotomatiki kwa kompyuta za Azure AD zilizounganishwa kwenye kikoa cha on-prem.

Ili kuthibitisha usakinishaji wa **Azure AD Connect**, amri ifuatayo ya PowerShell, ikichangia moduli ya **AzureADConnectHealthSync** (iliyosakinishwa kwa chaguo-msingi na Azure AD Connect), inaweza kutumika:
```powershell
Get-ADSyncConnector
```
{% hint style="success" %}
Jifunze na zoea AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoea GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa michango**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
