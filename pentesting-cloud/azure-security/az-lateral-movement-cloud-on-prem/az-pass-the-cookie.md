# Az - Pita Keki

{% hint style="success" %}
Jifunze na zoezi la Keki za AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks AWS Timu Nyekundu Mtaalam (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoezi la Keki za GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks GCP Timu Nyekundu Mtaalam (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa michango**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Kwa Nini Keki?

**Keki za kivinjari** ni mbinu nzuri ya **kupita kithibitisho na MFA**. Kwa sababu mtumiaji tayari amethibitishwa kwenye programu, kikao cha **keki** kinaweza kutumika tu kwa **kufikia data** kama mtumiaji huyo, bila haja ya kuthibitisha tena.

Unaweza kuona wapi **keki za kivinjari zilipo** katika:

{% embed url="https://book.hacktricks.xyz/generic-methodologies-and-resources/basic-forensic-methodology/specific-software-file-type-tricks/browser-artifacts?q=browse#google-chrome" %}

## Shambulio

Sehemu ngumu ni kwamba **keki hizo zimefichwa** kwa **mtumiaji** kupitia Microsoft Data Protection API (**DPAPI**). Hii imefichwa kwa kutumia [funguo za kryptographia zilizounganishwa na mtumiaji](https://book.hacktricks.xyz/windows-hardening/windows-local-privilege-escalation/dpapi-extracting-passwords) ambao keki hizo zinamiliki. Unaweza kupata habari zaidi kuhusu hii katika:

{% embed url="https://book.hacktricks.xyz/windows-hardening/windows-local-privilege-escalation/dpapi-extracting-passwords" %}

Nikiwa na Mimikatz mkononi, naweza **kuchimbua keki za mtumiaji** hata ingawa zimefichwa kwa kutumia amri hii:
```bash
mimikatz.exe privilege::debug log "dpapi::chrome /in:%localappdata%\google\chrome\USERDA~1\default\cookies /unprotect" exit
```
Kwa Azure, tunajali vidakuzi vya uthibitishaji ikiwa ni pamoja na **`ESTSAUTH`**, **`ESTSAUTHPERSISTENT`**, na **`ESTSAUTHLIGHT`**. Hivyo viko hapo kwa sababu mtumiaji amekuwa akifanya shughuli kwenye Azure hivi karibuni.

Nenda tu kwenye login.microsoftonline.com na ongeza kuki **`ESTSAUTHPERSISTENT`** (iliyoundwa na chaguo la "Baki Umeingia" au **`ESTSAUTH`**. Na utathibitishwa.

## Marejeo

* [https://stealthbits.com/blog/bypassing-mfa-with-pass-the-cookie/](https://stealthbits.com/blog/bypassing-mfa-with-pass-the-cookie/)
