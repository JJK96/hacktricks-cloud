# Az - Çerez Geçişi

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarını paylaşarak PR'ler göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>
{% endhint %}

## Neden Çerezler?

Tarayıcı **çerezleri**, kimlik doğrulamayı ve çoklu faktör kimlik doğrulamayı (**MFA**) **atlamak** için harika bir mekanizmadır. Kullanıcı uygulamada zaten kimlik doğruladığı için oturum **çerezi**, tekrar kimlik doğrulamaya gerek olmadan sadece o kullanıcı olarak **veriye erişmek** için kullanılabilir.

**Tarayıcı çerezlerinin nerede bulunduğunu** görebilirsiniz:

{% embed url="https://book.hacktricks.xyz/generic-methodologies-and-resources/basic-forensic-methodology/specific-software-file-type-tricks/browser-artifacts?q=browse#google-chrome" %}

## Saldırı

Zorlayıcı kısım, bu **çerezlerin**, Microsoft Veri Koruma API'si (**DPAPI**) aracılığıyla **kullanıcı** için **şifrelenmiş** olmasıdır. Bu, çerezlerin ait olduğu kullanıcıya bağlı kriptografik [anahtarlarla şifrelenmiştir](https://book.hacktricks.xyz/windows-hardening/windows-local-privilege-escalation/dpapi-extracting-passwords). Bu konu hakkında daha fazla bilgiyi aşağıdaki linkte bulabilirsiniz:

{% embed url="https://book.hacktricks.xyz/windows-hardening/windows-local-privilege-escalation/dpapi-extracting-passwords" %}

Mimikatz ile elde ettiğimde, bu komutla **bir kullanıcının çerezlerini çıkarabiliyorum** bile şifrelenmiş olsalar da:
```bash
mimikatz.exe privilege::debug log "dpapi::chrome /in:%localappdata%\google\chrome\USERDA~1\default\cookies /unprotect" exit
```
Azure için, kullanıcının son zamanlarda Azure üzerinde aktif olduğu için **`ESTSAUTH`**, **`ESTSAUTHPERSISTENT`** ve **`ESTSAUTHLIGHT`** gibi kimlik doğrulama çerezlerine dikkat ediyoruz.

Sadece login.microsoftonline.com adresine gidin ve **`ESTSAUTHPERSISTENT`** (Stay Signed In seçeneği tarafından oluşturulan) veya **`ESTSAUTH`** çerezini ekleyin. Ve kimlik doğrulaması yapılacaksınız.

## Referanslar

* [https://stealthbits.com/blog/bypassing-mfa-with-pass-the-cookie/](https://stealthbits.com/blog/bypassing-mfa-with-pass-the-cookie/)
