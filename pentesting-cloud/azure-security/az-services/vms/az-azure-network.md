# Az - Azure Network

{% hint style="success" %}
AWS Hacking рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХреЛ рд╕рдорд░реНрдерди рджреЗрдВ</summary>

* [**subscription plans**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рд╣рдореЗрдВ **Twitter** ЁЯРж рдкрд░ **рдлреЙрд▓реЛ рдХрд░реЗрдВ** [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>
{% endhint %}

## Basic Information

Azure рдХреЗ рднреАрддрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЗрд╕рдХреЗ рдХреНрд▓рд╛рдЙрдб рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХрд╛ рдПрдХ рдЕрднрд┐рдиреНрди рд╣рд┐рд╕реНрд╕рд╛ рд╣реИрдВ, рдЬреЛ рд╡рд┐рднрд┐рдиреНрди Azure рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдмреАрдЪ **рдХрдиреЗрдХреНрд╢рди рдФрд░ рд╕рдВрдЪрд╛рд░** рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддреЗ рд╣реИрдВред Azure рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЛ рдЕрддреНрдпрдзрд┐рдХ рд╕реНрдХреЗрд▓реЗрдмрд▓, рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рдЕрдиреБрдХреВрд▓рди рдпреЛрдЧреНрдп рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

рдЗрд╕рдХреЗ рдореВрд▓ рдореЗрдВ, Azure рдПрдХ **рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNet)** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ Azure рдХреНрд▓рд╛рдЙрдб рдХреЗ рднреАрддрд░ **рдЕрд▓рдЧ-рдерд▓рдЧ рдиреЗрдЯрд╡рд░реНрдХ** рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдЗрди VNets рдХреЗ рднреАрддрд░, рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ, рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдЬреИрд╕реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рд╣реЛрд╕реНрдЯ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред Azure рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреНрд▓рд╛рдЙрдб рдХреЗ рднреАрддрд░ (Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмреАрдЪ) рд╕рдВрдЪрд╛рд░ рдФрд░ рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рджреЛрдиреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИред

**рд╕реБрд░рдХреНрд╖рд╛** Azure рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХрд╛ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкрд╣рд▓реВ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдбреЗрдЯрд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛, рдПрдХреНрд╕реЗрд╕ рдкреНрд░рдмрдВрдзрди рдФрд░ рдЕрдиреБрдкрд╛рд▓рди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдХрд░рдг рдФрд░ рд╕реЗрд╡рд╛рдПрдВ рдЙрдкрд▓рдмреНрдз рд╣реИрдВред рдЗрди рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдпреЛрдВ рдореЗрдВ **рдлрд╛рдпрд░рд╡реЙрд▓**, **рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣**, рдФрд░ **рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди** рдХреНрд╖рдорддрд╛рдПрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдФрд░ рдПрдХреНрд╕реЗрд╕ рдкрд░ рдЙрдЪреНрдЪ рд╕реНрддрд░ рдХрд╛ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВред

рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, Azure рдХреА рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдПрдВ рд▓рдЪреАрд▓рд╛рдкрди рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХреА рдЧрдИ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдкрдиреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдФрд░ рд╡рд░реНрдХрд▓реЛрдб рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд╛рддрд╛рд╡рд░рдг рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрдмрдХрд┐ рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдкрд░ рдЬреЛрд░ рдмрдирд╛рдП рд░рдЦрддреЗ рд╣реИрдВред

## Virtual Network (VNET) & Subnets

Azure рдореЗрдВ рдПрдХ VNet рдореВрд▓ рд░реВрдк рд╕реЗ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдЖрдкрдХреЗ рдЕрдкрдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рд╣реИред рдпрд╣ рдЖрдкрдХреЗ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд Azure рдХреНрд▓рд╛рдЙрдб рдХрд╛ рдПрдХ **рддрд╛рд░реНрдХрд┐рдХ рдЕрд▓рдЧрд╛рд╡** рд╣реИред рдПрдХ VNet рдЖрдкрдХреЛ Azure рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдиреЗрдЯрд╡рд░реНрдХ (VPNs) рдХреЛ рдкреНрд░рд╛рд╡рдзрд╛рди рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди (VMs), рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрд╡рд╛рдУрдВ рдЬреИрд╕реЗ **рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдХреА рдореЗрдЬрдмрд╛рдиреА рдФрд░ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

VNets рдЖрдкрдХреЛ **рдЕрдкрдиреЗ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░ рдкреВрд░реНрдг рдирд┐рдпрдВрддреНрд░рдг** рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ **IP рдкрддрд╛** рд░реЗрдВрдЬ, рд╕рдмрдиреЗрдЯ рдирд┐рд░реНрдорд╛рдг, рд░реВрдЯ рдЯреЗрдмрд▓ рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЧреЗрдЯрд╡реЗ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

рдПрдХ **рд╕рдмрдиреЗрдЯ** рдЖрдкрдХреЗ VNet рдореЗрдВ **IP рдкрддреЛрдВ рдХреА рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛** рд╣реИред рдЖрдк рд╕рдВрдЧрдарди рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ VNet рдХреЛ рдХрдИ рд╕рдмрдиреЗрдЯ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдПрдХ VNet рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рд╕рдмрдиреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдЕрд▓рдЧ рдФрд░ рд╕рдореВрд╣рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рдмрдиреЗрдЯ рдЖрдкрдХреЛ **рдЕрдкрдиреЗ VNet рдХреЛ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рдЙрдк-рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЬреЛ IP рдкрддреЛрдВ рдХреА рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕рдВрд╕рд╛рдзрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

### **Example**

* рдорд╛рди рд▓реАрдЬрд┐рдП рдЖрдкрдХреЗ рдкрд╛рд╕ `MyVNet` рдирд╛рдордХ рдПрдХ VNet рд╣реИ рдЬрд┐рд╕рдХрд╛ IP рдкрддрд╛ рд░реЗрдВрдЬ `10.0.0.0/16` рд╣реИред рдЖрдк рдЗрд╕ VNet рдХреЗ рднреАрддрд░ рдПрдХ рд╕рдмрдиреЗрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдорд╛рди рд▓реАрдЬрд┐рдП `Subnet-1`, рдЬрд┐рд╕рдХрд╛ IP рдкрддрд╛ рд░реЗрдВрдЬ `10.0.0.0/24` рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ рд╡реЗрдм рд╕рд░реНрд╡рд░реЛрдВ рдХреА рдореЗрдЬрдмрд╛рдиреА рдХреЗ рд▓рд┐рдП рд╣реИред рдПрдХ рдФрд░ рд╕рдмрдиреЗрдЯ, `Subnet-2` рдЬрд┐рд╕рдХрд╛ рд░реЗрдВрдЬ `10.0.1.0/24` рд╣реИ, рдЖрдкрдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрд╣ рд╡рд┐рднрд╛рдЬрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдХреБрд╢рд▓ рдкреНрд░рдмрдВрдзрди рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдирд┐рдпрдВрддреНрд░рдг рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

### Enumeration

Azure рдЦрд╛рддреЗ рдореЗрдВ рд╕рднреА VNets рдФрд░ рд╕рдмрдиреЗрдЯ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк Azure Command-Line Interface (CLI) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣рд╛рдБ рдЪрд░рдг рджрд┐рдП рдЧрдП рд╣реИрдВ:

{% code overflow="wrap" %}
```bash
# List VNets
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List subnets of a VNet
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, addressPrefix:addressPrefix}" -o table
```
{% endcode %}

## Network Security Groups (NSG)

Azure рдореЗрдВ, рдПрдХ **Network Security Group (NSG)** рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░реНрдп Azure Virtual Network (VNet) рдХреЗ рднреАрддрд░ Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдФрд░ рдЙрдирд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдирд╛ рд╣реИред рдЗрд╕рдореЗрдВ **security rules** рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЗ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред

NSG рдХреЗ рдореБрдЦреНрдп рдкрд╣рд▓реВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

* **Traffic Control**: рдкреНрд░рддреНрдпреЗрдХ NSG рдореЗрдВ рдирд┐рдпрдо рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдЗрдирдмрд╛рдЙрдВрдб рдФрд░ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдпрд╛ рдЕрд╡рд░реБрджреНрдз рдХрд░рдиреЗ рдореЗрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реЛрддреЗ рд╣реИрдВред
* **Rule Components**: NSG рдХреЗ рднреАрддрд░ рдХреЗ рдирд┐рдпрдо рдЕрддреНрдпрдзрд┐рдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реЛрддреЗ рд╣реИрдВ, рдЬреЛ рд╕реНрд░реЛрдд/рдЧрдВрддрд╡реНрдп IP рдкрддрд╛, рдкреЛрд░реНрдЯ, рдФрд░ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдЬреИрд╕реЗ рдорд╛рдирджрдВрдбреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рддреЗ рд╣реИрдВред рдпрд╣ рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЗ рд╕реВрдХреНрд╖реНрдо рдкреНрд░рдмрдВрдзрди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред
* **Security Enhancement**: рдХреЗрд╡рд▓ рдЕрдзрд┐рдХреГрдд рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЖрдкрдХреЗ Azure рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдиреЗ рдпрд╛ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдХрд░, NSGs рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рд╕реНрдерд┐рддрд┐ рдХреЛ рдордЬрдмреВрдд рдХрд░рдиреЗ рдореЗрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рддреЗ рд╣реИрдВред

### **Example**

* рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ NSG рд╣реИ рдЬрд┐рд╕рдХрд╛ рдирд╛рдо `MyNSG` рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ VNet рдХреЗ рднреАрддрд░ рдПрдХ рд╕рдмрдиреЗрдЯ рдпрд╛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдкрд░ рд▓рд╛рдЧреВ рд╣реИред рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд┐рдпрдо рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ:
* рдПрдХ рдЗрдирдмрд╛рдЙрдВрдб рдирд┐рдпрдо рдЬреЛ рдХрд┐рд╕реА рднреА рд╕реНрд░реЛрдд рд╕реЗ рдЖрдкрдХреЗ рд╡реЗрдм рд╕рд░реНрд╡рд░реЛрдВ рддрдХ HTTP рдЯреНрд░реИрдлрд╝рд┐рдХ (рдкреЛрд░реНрдЯ 80) рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред
* рдПрдХ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдирд┐рдпрдо рдЬреЛ рдХреЗрд╡рд▓ SQL рдЯреНрд░реИрдлрд╝рд┐рдХ (рдкреЛрд░реНрдЯ 1433) рдХреЛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЧрдВрддрд╡реНрдп IP рдкрддрд╛ рд░реЗрдВрдЬ рддрдХ рдЬрд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

### Enumeration

{% code overflow="wrap" %}
```bash
# List NSGs
az network nsg list --query "[].{name:name, location:location}" -o table

# Get NSG rules
az network nsg rule list --nsg-name <NSGName> --resource-group <ResourceGroupName> --query "[].{name:name, priority:priority, direction:direction, access:access, protocol:protocol, sourceAddressPrefix:sourceAddressPrefix, destinationAddressPrefix:destinationAddressPrefix, sourcePortRange:sourcePortRange, destinationPortRange:destinationPortRange}" -o table
```
{% endcode %}

## Azure Firewall

Azure Firewall рдПрдХ рдкреНрд░рдмрдВрдзрд┐рдд, рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд **рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ Azure Virtual Network рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХрд░рддреА рд╣реИ**ред рдпрд╣ рдПрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрдЯреЗрдЯрдлреБрд▓ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕реЗрд╡рд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рдФрд░ рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╣реИрдВред

Azure Firewall **NSGs** рдХреА рддреБрд▓рдирд╛ рдореЗрдВ **рдЕрдзрд┐рдХ рдЙрдиреНрдирдд** рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ **рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ**, рдиреЗрдЯрд╡рд░реНрдХ-рд╕реНрддрд░реАрдп рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдЦрддрд░реЗ рдХреА рдЦреБрдлрд┐рдпрд╛-рдЖрдзрд╛рд░рд┐рдд рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдФрд░ рд▓реЙрдЧрд┐рдВрдЧ рдФрд░ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рдХреЗ рд▓рд┐рдП Azure Monitor рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рд╢рд╛рдорд┐рд▓ рд╣реИред\
рдпрд╣ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб, рдЗрдирдмрд╛рдЙрдВрдб, рд╕реНрдкреЛрдХ-рдЯреВ-рд╕реНрдкреЛрдХ, VPN, рдФрд░ ExpressRoute рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИред **рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдо FQDN (Fully Qualified Domain Name), IP рдкрддреЗ, рдФрд░ рдкреЛрд░реНрдЯреНрд╕ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрдирд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ**ред

### Azure Firewall рдФрд░ NSGs рдХреЗ рдмреАрдЪ рдЕрдВрддрд░

1. **рд╕реНрдХреЛрдк:**
* **NSG:** рд╕рдмрдиреЗрдЯ рдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╕реНрддрд░ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ (NIC), VMs, рдпрд╛ рд╕рдмрдиреЗрдЯ рд╕реЗ рдЗрдирдмрд╛рдЙрдВрдб рдФрд░ рдЖрдЙрдЯрдмрд╛рдЙрдВрдб рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдмреБрдирд┐рдпрд╛рджреА рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред
* **Azure Firewall:** VNet рд╕реНрддрд░ рдкрд░ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рд╡реНрдпрд╛рдкрдХ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЖрдкрдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдФрд░ VNet рдореЗрдВ рдЖрдиреЗ рдФрд░ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
2. **рдХреНрд╖рдорддрд╛рдПрдВ:**
* **NSG:** IP рдкрддрд╛, рдкреЛрд░реНрдЯ, рдФрд░ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмреБрдирд┐рдпрд╛рджреА рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп рдирд┐рд░реАрдХреНрд╖рдг рдпрд╛ рдЦрддрд░реЗ рдХреА рдЦреБрдлрд┐рдпрд╛ рдЬреИрд╕реА рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред
* **Azure Firewall:** рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп (рд▓реЗрдпрд░ 7) рдЯреНрд░реИрдлрд╝рд┐рдХ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдЦрддрд░реЗ рдХреА рдЦреБрдлрд┐рдпрд╛-рдЖрдзрд╛рд░рд┐рдд рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ, рдФрд░ рдЕрдзрд┐рдХ рдЬреИрд╕реА рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдХрдИ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ IP рдкрддреЛрдВ рдХрд╛ рднреА рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред
3. **рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:**
* **NSG:** рдмреБрдирд┐рдпрд╛рджреА рдиреЗрдЯрд╡рд░реНрдХ рд╕реНрддрд░ рдЯреНрд░реИрдлрд╝рд┐рдХ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЖрджрд░реНрд╢ред
* **Azure Firewall:** рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ рдЬрд╣рд╛рдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рд╕реНрддрд░реАрдп рдирд┐рдпрдВрддреНрд░рдг, рд▓реЙрдЧрд┐рдВрдЧ, рдФрд░ рдЦрддрд░реЗ рдХреА рдЦреБрдлрд┐рдпрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред
4. **рдкреНрд░рдмрдВрдзрди рдФрд░ рдирд┐рдЧрд░рд╛рдиреА:**
* **NSG:** рдмреБрдирд┐рдпрд╛рджреА рд▓реЙрдЧрд┐рдВрдЧ рдФрд░ Azure Monitor рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред
* **Azure Firewall:** Azure Monitor рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдиреНрдирдд рд▓реЙрдЧрд┐рдВрдЧ рдФрд░ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рдХреНрд╖рдорддрд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдкреНрд░рдХреГрддрд┐ рдФрд░ рдкреИрдЯрд░реНрди рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред

### Enumeration

{% code overflow="wrap" %}
```bash
# List Azure Firewalls
az network firewall list --query "[].{name:name, location:location, subnet:subnet, publicIp:publicIp}" -o table

# Get network rules of a firewall
az network firewall network-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get application rules of a firewall
az network firewall application-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get nat rules of a firewall
az network firewall nat-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table
```
{% endcode %}

## Network Virtual Appliance (NVA)

Azure рдореЗрдВ рдПрдХ Network Virtual Appliance (**NVA**) рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд╛рдпрдВрд╕ рд╣реИ рдЬреЛ **рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИ**ред NVAs рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдорддреМрд░ рдкрд░ рдЙрди рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ **Azure рдореЗрдВ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИрдВ** рдпрд╛ рдЬрдм рдЕрдзрд┐рдХ рдЕрдиреБрдХреВрд▓рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдпреЗ рдореВрд▓ рд░реВрдк рд╕реЗ **VMs рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдиреЗрдЯрд╡рд░реНрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдпрд╛ рд╕реЗрд╡рд╛рдПрдВ рдЪрд▓рд╛рддреЗ рд╣реИрдВ**, рдЬреИрд╕реЗ рдХрд┐ рдлрд╛рдпрд░рд╡реЙрд▓, WAN рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░, рдпрд╛ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ред

NVAs рдХрд╛ рдЙрдкрдпреЛрдЧ рдЬрдЯрд┐рд▓ рд░реВрдЯрд┐рдВрдЧ, **рд╕реБрд░рдХреНрд╖рд╛**, рдФрд░ **рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдкреНрд░рдмрдВрдзрди** рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрдиреНрд╣реЗрдВ Azure **Marketplace** рд╕реЗ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рдХрдИ рддреГрддреАрдп-рдкрдХреНрд╖ рд╡рд┐рдХреНрд░реЗрддрд╛ рдЕрдкрдиреЗ рдПрдкреНрд▓рд╛рдпрдВрд╕реЗрд╕ рдХреЛ Azure рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдПрдХреАрдХреГрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдкреЗрд╢рдХрд╢ рдХрд░рддреЗ рд╣реИрдВред

### **рдЙрджрд╛рд╣рд░рдг**

* рдПрдХ рд╕рдВрдЧрдарди Azure рдореЗрдВ рдПрдХ NVA рддреИрдирд╛рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдПрдХ **рдХрд╕реНрдЯрдо рдлрд╛рдпрд░рд╡реЙрд▓ рд╕рдорд╛рдзрд╛рди** рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред рдпрд╣ NVA рдПрдХ **рддреГрддреАрдп-рдкрдХреНрд╖ рдлрд╛рдпрд░рд╡реЙрд▓ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░** рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рдЙрдиреНрдирдд рд╕реБрд╡рд┐рдзрд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рдШреБрд╕рдкреИрда рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛, рдкреИрдХреЗрдЯ рдирд┐рд░реАрдХреНрд╖рдг, рдпрд╛ VPN рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреАред NVA рдХреЛ рдЙрд╕ рдкрд░ рдЧреБрдЬрд░рдиреЗ рд╡рд╛рд▓реЗ рдЯреНрд░реИрдлрд┐рдХ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рд╕рдВрдЧрдарди рдХреА рдиреАрддрд┐рдпреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЙрдиреНрдирдд рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдп рд▓рд╛рдЧреВ рд╣реИрдВред

### **Enumeration**

{% code overflow="wrap" %}
```bash
# Usually NVAs are named or tagged in a way to distinguish them from other VMs
az vm list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# For a specific VM identified as an NVA, list its network interfaces
az vm nic list --vm-name <VMName> --resource-group <ResourceGroupName> --query "[].{id:id}" -o table
```
{% endcode %}

## Azure Route Tables & User Defined Routes (UDR)

**Azure Route Tables** Microsoft Azure рдХреЗ рднреАрддрд░ рдПрдХ рдлреАрдЪрд░ рд╣реИрдВ рдЬреЛ Azure Virtual Networks (VNets) рдХреЗ рднреАрддрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рд░реВрдЯрд┐рдВрдЧ рдХреЗ рдирд┐рдпрдВрддреНрд░рдг рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред рдореВрд▓ рд░реВрдк рд╕реЗ, рд╡реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ **рдкреИрдХреЗрдЯреНрд╕** рдХреЛ **рд╕рдмрдиреЗрдЯреНрд╕** рдХреЗ рдмреАрдЪ, VNets рдХреЗ рдмреАрдЪ, рдпрд╛ рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХреНрд╕ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ **рдлреЙрд░рд╡рд░реНрдб** рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдкреНрд░рддреНрдпреЗрдХ рд░реВрдЯ рдЯреЗрдмрд▓ рдореЗрдВ рдирд┐рдпрдореЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рд░реВрдЯреНрд╕ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдкреИрдХреЗрдЯреНрд╕ рдХреЛ рдЙрдирдХреЗ рдбреЗрд╕реНрдЯрд┐рдиреЗрд╢рди IP рдПрдбреНрд░реЗрд╕ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреИрд╕реЗ рд░реВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред

**User Defined Routes (UDR)** Azure рдореЗрдВ **рдХрд╕реНрдЯрдо рд░реВрдЯреНрд╕ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк Azure Route Tables рдХреЗ рднреАрддрд░ рдмрдирд╛рддреЗ рд╣реИрдВ** рддрд╛рдХрд┐ Azure Virtual Networks (VNets) рдХреЗ рднреАрддрд░ рдФрд░ рдмреАрдЪ рдореЗрдВ, рдФрд░ рдмрд╛рд╣рд░реА рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдХреЗ **рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред UDRs рдЖрдкрдХреЛ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдЖрдкрдХреА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рдиреЗ рдХреА рд▓рдЪреАрд▓рд╛рдкрди рджреЗрддреЗ рд╣реИрдВ, Azure рдХреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдЯрд┐рдВрдЧ рдирд┐рд░реНрдгрдпреЛрдВ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рддреЗ рд╣реБрдПред

рдпреЗ рд░реВрдЯреНрд╕ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрди рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ рдЖрдкрдХреЛ **рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд╛рдпрдВрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд░реВрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ**, рд╕реБрд░рдХреНрд╖рд╛ рдпрд╛ рдиреАрддрд┐ рдЕрдиреБрдкрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдорд╛рд░реНрдЧ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реЛрддрд╛ рд╣реИ, рдпрд╛ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдиреЗрдЯрд╡рд░реНрдХреНрд╕ рдХреЗ рд╕рд╛рде рдПрдХреАрдХреГрдд рдХрд░рдирд╛ рд╣реЛрддрд╛ рд╣реИред

### **рдЙрджрд╛рд╣рд░рдг**

* рдорд╛рди рд▓реАрдЬрд┐рдП рдЖрдкрдиреЗ рдПрдХ Network Virtual Appliance (NVA) рдХреЛ рдПрдХ VNet рдХреЗ рднреАрддрд░ рд╕рдмрдиреЗрдЯреНрд╕ рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд┐рдХ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдирд╛рдд рдХрд┐рдпрд╛ рд╣реИред рдЖрдк рдПрдХ UDR рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдПрдХ рд╕рдмрдиреЗрдЯ рд╕реЗ рджреВрд╕рд░реЗ рд╕рдмрдиреЗрдЯ рддрдХ рд╕рднреА рдЯреНрд░реИрдлрд┐рдХ рдХреЛ NVA рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рдиреЗ рдХрд╛ рдирд┐рд░реНрджреЗрд╢ рджреЗрддрд╛ рд╣реИред рдпрд╣ UDR рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ NVA рд╕реБрд░рдХреНрд╖рд╛ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЯреНрд░реИрдлрд┐рдХ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рддрд╛ рд╣реИ рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рд╡рд╣ рдЕрдкрдиреЗ рдЧрдВрддрд╡реНрдп рддрдХ рдкрд╣реБрдВрдЪреЗред

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List Route Tables
az network route-table list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List UDRs for a table
az network route-table route list --route-table-name <RouteTableName> --resource-group <ResourceGroupName> --query "[].{name:name, addressPrefix:addressPrefix, nextHopType:nextHopType, nextHopIpAddress:nextHopIpAddress}" -o table
```
{% endcode %}

## Azure Private Link

Azure Private Link рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ Azure рдореЗрдВ **Azure рд╕реЗрд╡рд╛рдУрдВ рддрдХ рдирд┐рдЬреА рдкрд╣реБрдВрдЪ рд╕рдХреНрд╖рдо рдХрд░рддреА рд╣реИ** рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдХреЗ рдХрд┐ **рдЖрдкрдХреЗ Azure рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ (VNet) рдФрд░ рд╕реЗрд╡рд╛ рдХреЗ рдмреАрдЪ рдХрд╛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ Microsoft рдХреЗ Azure рдмреИрдХрдмреЛрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рдпрд╛рддреНрд░рд╛ рдХрд░рддрд╛ рд╣реИ**ред рдпрд╣ рдкреНрд░рднрд╛рд╡реА рд░реВрдк рд╕реЗ рд╕реЗрд╡рд╛ рдХреЛ рдЖрдкрдХреЗ VNet рдореЗрдВ рд▓рд╛рддрд╛ рд╣реИред рдпрд╣ рд╕реЗрдЯрдЕрдк рдбреЗрдЯрд╛ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЙрдЬрд╛рдЧрд░ рди рдХрд░рдХреЗ рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИред

Private Link рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рднрд┐рдиреНрди Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ Azure Storage, Azure SQL Database, рдФрд░ Private Link рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рд╛рдЭрд╛ рдХреА рдЧрдИ рдХрд╕реНрдЯрдо рд╕реЗрд╡рд╛рдПрдВред рдпрд╣ рдЖрдкрдХреА рдЕрдкрдиреА VNet рдпрд╛ рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд╡рд┐рднрд┐рдиреНрди Azure рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд╕реЗ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

{% hint style="danger" %}
NSGs рдирд┐рдЬреА рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХрд╛ рд╕реНрдкрд╖реНрдЯ рдЕрд░реНрде рд╣реИ рдХрд┐ Private Link рдпреБрдХреНрдд рд╕рдмрдиреЗрдЯ рдХреЗ рд╕рд╛рде NSG рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдХреЛрдИ рдкреНрд░рднрд╛рд╡ рдирд╣реАрдВ рдкрдбрд╝реЗрдЧрд╛ред
{% endhint %}

### **рдЙрджрд╛рд╣рд░рдг**

* рдПрдХ рдкрд░рд┐рджреГрд╢реНрдп рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ рдЬрд╣рд╛рдВ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ **Azure SQL Database рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рдЕрдкрдиреЗ VNet рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ**ред рд╕рд╛рдорд╛рдиреНрдпрддрдГ, рдЗрд╕рдореЗрдВ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЛ рдкрд╛рд░ рдХрд░рдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред Private Link рдХреЗ рд╕рд╛рде, рдЖрдк рдЕрдкрдиреЗ VNet рдореЗрдВ рдПрдХ **рдирд┐рдЬреА рдПрдВрдбрдкреЙрдЗрдВрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреЛ рд╕реАрдзреЗ Azure SQL Database рд╕реЗрд╡рд╛ рд╕реЗ рдЬреБрдбрд╝рддрд╛ рд╣реИред рдпрд╣ рдПрдВрдбрдкреЙрдЗрдВрдЯ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдРрд╕рд╛ рдмрдирд╛рддрд╛ рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рдпрд╣ рдЖрдкрдХреЗ рдЕрдкрдиреЗ VNet рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛ, рдПрдХ рдирд┐рдЬреА IP рдкрддреЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реБрд▓рдн рд╣реЛ, рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рдирд┐рдЬреА рдкрд╣реБрдВрдЪ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИред

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List Private Link Services
z network private-link-service list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List Private Endpoints
az network private-endpoint list --query "[].{name:name, location:location, resourceGroup:resourceGroup, privateLinkServiceConnections:privateLinkServiceConnections}" -o table
```
{% endcode %}

## Azure Service Endpoints

Azure Service Endpoints рдЖрдкрдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдиреЗрдЯрд╡рд░реНрдХ рдкреНрд░рд╛рдЗрд╡реЗрдЯ рдПрдбреНрд░реЗрд╕ рд╕реНрдкреЗрд╕ рдФрд░ рдЖрдкрдХреЗ VNet рдХреА рдкрд╣рдЪрд╛рди рдХреЛ Azure рд╕реЗрд╡рд╛рдУрдВ рддрдХ рдПрдХ рдбрд╛рдпрд░реЗрдХреНрдЯ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдврд╝рд╛рддреЗ рд╣реИрдВред рд╕реЗрд╡рд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдХреЗ, **рдЖрдкрдХреЗ VNet рдореЗрдВ рд╕рдВрд╕рд╛рдзрди рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ Azure рд╕реЗрд╡рд╛рдУрдВ рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ**, рдЬреИрд╕реЗ Azure Storage рдФрд░ Azure SQL Database, Azure рдХреЗ рдмреИрдХрдмреЛрди рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ **VNet рд╕реЗ Azure рд╕реЗрд╡рд╛ рддрдХ рдХрд╛ рдЯреНрд░реИрдлрд┐рдХ Azure рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рднреАрддрд░ рд╣реА рд░рд╣рддрд╛ рд╣реИ**, рдЬрд┐рд╕рд╕реЗ рдПрдХ рдЕрдзрд┐рдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдорд╛рд░реНрдЧ рдкреНрд░рджрд╛рди рд╣реЛрддрд╛ рд╣реИред

### **рдЙрджрд╛рд╣рд░рдг**

* рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ **Azure Storage** рдЦрд╛рддрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рд╕реБрд▓рдн рд╣реИред **рдЕрдкрдиреЗ VNet рдХреЗ рднреАрддрд░ Azure Storage рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реЗрд╡рд╛ рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╕рдХреНрд╖рдо рдХрд░рдХреЗ**, рдЖрдк рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХреЗрд╡рд▓ рдЖрдкрдХреЗ VNet рд╕реЗ рдЯреНрд░реИрдлрд┐рдХ рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИред рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддрд╛ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рддрдм рдХреЗрд╡рд▓ рдЖрдкрдХреЗ VNet рд╕реЗ рдЯреНрд░реИрдлрд┐рдХ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List Virtual Networks with Service Endpoints
az network vnet list --query "[].{name:name, location:location, serviceEndpoints:serviceEndpoints}" -o table

# List Subnets with Service Endpoints
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, serviceEndpoints:serviceEndpoints}" -o table
```
{% endcode %}

### Service Endpoints рдФрд░ Private Links рдХреЗ рдмреАрдЪ рдЕрдВрддрд░

Microsoft [**docs**](https://learn.microsoft.com/en-us/azure/virtual-network/vnet-integration-for-azure-services#compare-private-endpoints-and-service-endpoints) рдореЗрдВ Private Links рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рддрд╛ рд╣реИ:\\

<figure><img src="../../../../.gitbook/assets/image (25).png" alt=""><figcaption></figcaption></figure>

**Service Endpoints:**

* рдЖрдкрдХреЗ VNet рд╕реЗ Azure рд╕реЗрд╡рд╛ рддрдХ рдХрд╛ рдЯреНрд░реИрдлрд┐рдХ Microsoft Azure рдмреИрдХрдмреЛрди рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдпрд╛рддреНрд░рд╛ рдХрд░рддрд╛ рд╣реИ, рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИред
* Endpoint Azure рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реАрдзрд╛ рдХрдиреЗрдХреНрд╢рди рд╣реИ рдФрд░ VNet рдХреЗ рднреАрддрд░ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдирд┐рдЬреА IP рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред
* рд╕реЗрд╡рд╛ рд╕реНрд╡рдпрдВ рдЖрдкрдХреЗ VNet рдХреЗ рдмрд╛рд╣рд░ рд╕реЗ рдЕрдкрдиреЗ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ Endpoint рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реБрд▓рдн рд╣реИ рдЬрдм рддрдХ рдХрд┐ рдЖрдк рд╕реЗрд╡рд╛ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдРрд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдирд╣реАрдВ рдХрд░рддреЗред
* рдпрд╣ рд╕рдмрдиреЗрдЯ рдФрд░ Azure рд╕реЗрд╡рд╛ рдХреЗ рдмреАрдЪ рдПрдХ-рд╕реЗ-рдПрдХ рд╕рдВрдмрдВрдз рд╣реИред
* Private Links рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХрдо рдорд╣рдВрдЧрд╛ред

**Private Links:**

* Private Link рдЖрдкрдХреЗ VNet рдореЗрдВ рдПрдХ рдирд┐рдЬреА Endpoint рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдореИрдк рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ VNet рдХреЗ рднреАрддрд░ рдПрдХ рдирд┐рдЬреА IP рдкрддреЗ рдХреЗ рд╕рд╛рде рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИред
* Azure рд╕реЗрд╡рд╛ рдЗрд╕ рдирд┐рдЬреА IP рдкрддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХреНрд╕реЗрд╕ рдХреА рдЬрд╛рддреА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдпрд╣ рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдкреНрд░рддреАрдд рд╣реЛрддреА рд╣реИред
* Private Link рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬреБрдбрд╝реА рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдХреЗрд╡рд▓ рдЖрдкрдХреЗ VNet рдпрд╛ рдЬреБрдбрд╝реЗ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ; рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ рд╣реИред
* рдпрд╣ Azure рд╕реЗрд╡рд╛рдУрдВ рдпрд╛ Azure рдореЗрдВ рд╣реЛрд╕реНрдЯ рдХреА рдЧрдИ рдЖрдкрдХреА рдЕрдкрдиреА рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рджреВрд╕рд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдЭрд╛ рдХреА рдЧрдИ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрдиреЗрдХреНрд╢рди рд╕рдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИред
* рдпрд╣ рдЖрдкрдХреЗ VNet рдореЗрдВ рдПрдХ рдирд┐рдЬреА Endpoint рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рдПрдХреНрд╕реЗрд╕ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рд╕реЗрд╡рд╛ Endpoints рдХреЗ рд╕рд╛рде рд╕рдмрдиреЗрдЯ рд╕реНрддрд░ рдкрд░ рд╡реНрдпрд╛рдкрдХ рдПрдХреНрд╕реЗрд╕ рдирд┐рдпрдВрддреНрд░рдг рдХреЗ рд╡рд┐рдкрд░реАрддред

рд╕рд╛рд░рд╛рдВрд╢ рдореЗрдВ, рдЬрдмрдХрд┐ Service Endpoints рдФрд░ Private Links рджреЛрдиреЛрдВ Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╕реБрд░рдХреНрд╖рд┐рдд рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, **Private Links рдЙрдЪреНрдЪ рд╕реНрддрд░ рдХрд╛ рдЕрд▓рдЧрд╛рд╡ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдХреЗ рдХрд┐ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдирд┐рдЬреА рддреМрд░ рдкрд░ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдмрд┐рдирд╛ рдЙрдиреНрд╣реЗрдВ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЗ рд▓рд┐рдП рдЙрдЬрд╛рдЧрд░ рдХрд┐рдП**ред рджреВрд╕рд░реА рдУрд░, Service Endpoints рд╕рд╛рдорд╛рдиреНрдп рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯ рдЕрдк рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ рдЬрд╣рд╛рдВ VNet рдореЗрдВ рдирд┐рдЬреА IP рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдмрд┐рдирд╛ Azure рд╕реЗрд╡рд╛рдУрдВ рддрдХ рд╕рд░рд▓, рд╕реБрд░рдХреНрд╖рд┐рдд рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред

## Azure Front Door (AFD) & AFD WAF

**Azure Front Door** рдЖрдкрдХреЗ рд╡реИрд╢реНрд╡рд┐рдХ рд╡реЗрдм рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреА **рддреЗрдЬреА рд╕реЗ рдбрд┐рд▓реАрд╡рд░реА** рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдХреЗрд▓реЗрдмрд▓ рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рд╣реИред рдпрд╣ **рд╡рд┐рднрд┐рдиреНрди рд╕реЗрд╡рд╛рдУрдВ** рдЬреИрд╕реЗ рд╡реИрд╢реНрд╡рд┐рдХ **рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ, рд╕рд╛рдЗрдЯ рдПрдХреНрд╕реЗрд▓реЗрд░реЗрд╢рди, SSL рдСрдлрд▓реЛрдбрд┐рдВрдЧ, рдФрд░ Web Application Firewall (WAF)** рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдПрдХрд▓ рд╕реЗрд╡рд╛ рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИред Azure Front Door рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ **рдирд┐рдХрдЯрддрдо рдПрдЬ рд▓реЛрдХреЗрд╢рди** рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмреБрджреНрдзрд┐рдорд╛рди рд░реВрдЯрд┐рдВрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЗрд╖реНрдЯрддрдо рдкреНрд░рджрд░реНрд╢рди рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддреА рд╣реИред рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рдпрд╣ URL-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧ, рдорд▓реНрдЯреАрдкрд▓-рд╕рд╛рдЗрдЯ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ, рд╕рддреНрд░ рд╕рдВрдмрджреНрдзрддрд╛, рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЗрдпрд░ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

**Azure Front Door WAF** рд╡реЗрдм рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рд╡реЗрдм-рдЖрдзрд╛рд░рд┐рдд рд╣рдорд▓реЛрдВ рд╕реЗ **рд╕рдВрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ** рдмрд┐рдирд╛ рдмреИрдХ-рдПрдВрдб рдХреЛрдб рдореЗрдВ рд╕рдВрд╢реЛрдзрди рдХрд┐рдПред рдЗрд╕рдореЗрдВ рдХрд╕реНрдЯрдо рдирд┐рдпрдо рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдирд┐рдпрдо рд╕реЗрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рдЬреЛ SQL рдЗрдВрдЬреЗрдХреНрд╢рди, рдХреНрд░реЙрд╕-рд╕рд╛рдЗрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯрд┐рдВрдЧ, рдФрд░ рдЕрдиреНрдп рд╕рд╛рдорд╛рдиреНрдп рд╣рдорд▓реЛрдВ рдЬреИрд╕реЗ рдЦрддрд░реЛрдВ рд╕реЗ рдмрдЪрд╛рддреЗ рд╣реИрдВред

### **рдЙрджрд╛рд╣рд░рдг**

* рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдк рд╕реЗ рд╡рд┐рддрд░рд┐рдд рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╣реИ рдЬрд┐рд╕рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреБрдирд┐рдпрд╛ рднрд░ рдореЗрдВ рд╣реИрдВред рдЖрдк Azure Front Door рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдирд┐рдХрдЯрддрдо рдХреНрд╖реЗрддреНрд░реАрдп рдбреЗрдЯрд╛ рдХреЗрдВрджреНрд░ рдореЗрдВ рд░реВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рдЬреЛ рдЖрдкрдХреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХреА рдореЗрдЬрдмрд╛рдиреА рдХрд░ рд░рд╣рд╛ рд╣реИ, рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЛ рдХрдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрднрд╡ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ **WAF рдХреНрд╖рдорддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╡реЗрдм рд╣рдорд▓реЛрдВ рд╕реЗ рдЗрд╕рдХреА рд░рдХреНрд╖рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ**ред рдпрджрд┐ рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдХреНрд╖реЗрддреНрд░ рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдХрд╛ рдЕрдиреБрднрд╡ рдХрд░рддрд╛ рд╣реИ, рддреЛ Azure Front Door рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЕрдЧрд▓реЗ рд╕рд░реНрд╡реЛрддреНрддрдо рд╕реНрдерд╛рди рдкрд░ рдкреБрдирдГ рд░реВрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛрддреА рд╣реИред

### Enumeration

{% code overflow="wrap" %}
```bash
# List Azure Front Door Instances
az network front-door list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List Front Door WAF Policies
az network front-door waf-policy list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table
```
{% endcode %}

## Azure Application Gateway рдФрд░ Azure Application Gateway WAF

Azure Application Gateway рдПрдХ **рд╡реЗрдм рдЯреНрд░реИрдлрд┐рдХ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░** рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ **рд╡реЗрдм** рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИред рдпрд╣ **рд▓реЗрдпрд░ 7 рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ, SSL рдЯрд░реНрдорд┐рдиреЗрд╢рди, рдФрд░ рд╡реЗрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдлрд╛рдпрд░рд╡реЙрд▓ (WAF) рдХреНрд╖рдорддрд╛рдПрдВ** Application Delivery Controller (ADC) рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрд╡рд╛ рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдкреНрд░рдореБрдЦ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ URL-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧ, рдХреБрдХреА-рдЖрдзрд╛рд░рд┐рдд рд╕рддреНрд░ рд╕рдВрдмрджреНрдзрддрд╛, рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рд╕реЙрдХреЗрдЯ рд▓реЗрдпрд░ (SSL) рдСрдлрд▓реЛрдбрд┐рдВрдЧ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ рдЙрди рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЬрдЯрд┐рд▓ рд▓реЛрдб-рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдЯрд┐рдВрдЧ рдФрд░ рдкрде-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧред

### рдЙрджрд╛рд╣рд░рдг

* рдПрдХ рдкрд░рд┐рджреГрд╢реНрдп рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ рдЬрд╣рд╛рдВ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рдИ-рдХреЙрдорд░реНрд╕ рд╡реЗрдмрд╕рд╛рдЗрдЯ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрдИ рдЙрдкрдбреЛрдореЗрди рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЗ рдФрд░ рднреБрдЧрддрд╛рди рдкреНрд░рд╕рдВрд╕реНрдХрд░рдгред Azure Application Gateway **URL рдкрде рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдЙрдЪрд┐рдд рд╡реЗрдм рд╕рд░реНрд╡рд░реЛрдВ рдкрд░ рд░реВрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `example.com/accounts` рдкрд░ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЗ рд╕реЗрд╡рд╛ рдкрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ `example.com/pay` рдкрд░ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рднреБрдЧрддрд╛рди рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рд╕реЗрд╡рд╛ рдкрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
рдФрд░ **WAF рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреА рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреЛ рд╣рдорд▓реЛрдВ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦреЗрдВред**

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List the Web Application Firewall configurations for your Application Gateways
az network application-gateway waf-config list --gateway-name <AppGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, firewallMode:firewallMode, ruleSetType:ruleSetType, ruleSetVersion:ruleSetVersion}" -o table
```
{% endcode %}

## Azure Hub, Spoke & VNet Peering

**VNet Peering** Azure рдореЗрдВ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдлреАрдЪрд░ рд╣реИ рдЬреЛ **рд╡рд┐рднрд┐рдиреНрди Virtual Networks (VNets) рдХреЛ рд╕реАрдзреЗ рдФрд░ рд╕рд╣рдЬрддрд╛ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ**ред VNet peering рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рдПрдХ VNet рдореЗрдВ рд╕рдВрд╕рд╛рдзрди рджреВрд╕рд░реЗ VNet рдореЗрдВ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд╕рд╛рде рдирд┐рдЬреА IP рдкрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрдЪрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, **рдЬреИрд╕реЗ рдХрд┐ рд╡реЗ рдПрдХ рд╣реА рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╣реЛрдВ**ред\
**VNet Peering рдХреЛ рдСрди-рдкреНрд░реЗрдо рдиреЗрдЯрд╡рд░реНрдХреНрд╕ рдХреЗ рд╕рд╛рде рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ** рд╕рд╛рдЗрдЯ-рдЯреВ-рд╕рд╛рдЗрдЯ VPN рдпрд╛ Azure ExpressRoute рд╕реЗрдЯрдЕрдк рдХрд░рдХреЗред

**Azure Hub and Spoke** Azure рдореЗрдВ рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдЯреЛрдкреЛрд▓реЙрдЬреА рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред **"рд╣рдм" рдПрдХ рдХреЗрдВрджреНрд░реАрдп рдмрд┐рдВрджреБ рд╣реИ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди "рд╕реНрдкреЛрдХреНрд╕" рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдФрд░ рд░реВрдЯ рдХрд░рддрд╛ рд╣реИ**ред рд╣рдм рдореЗрдВ рдЖрдорддреМрд░ рдкрд░ рд╕рд╛рдЭрд╛ рд╕реЗрд╡рд╛рдПрдВ рд╣реЛрддреА рд╣реИрдВ рдЬреИрд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд╛рдпрдВрд╕реЗрд╕ (NVAs), Azure VPN Gateway, Azure Firewall, рдпрд╛ Azure Bastionред **"рд╕реНрдкреЛрдХреНрд╕" рд╡реЗ VNets рд╣реИрдВ рдЬреЛ рд╡рд░реНрдХрд▓реЛрдбреНрд╕ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ VNet peering рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рдм рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрддреЗ рд╣реИрдВ**, рдЬрд┐рд╕рд╕реЗ рд╡реЗ рд╣рдм рдХреЗ рднреАрддрд░ рд╕рд╛рдЭрд╛ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рд▓рд╛рдн рдЙрдард╛ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдореЙрдбрд▓ рд╕рд╛рдл рдиреЗрдЯрд╡рд░реНрдХ рд▓реЗрдЖрдЙрдЯ рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрддрд╛ рд╣реИ, рд╡рд┐рднрд┐рдиреНрди VNets рдореЗрдВ рдХрдИ рд╡рд░реНрдХрд▓реЛрдбреНрд╕ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕рд╛рдорд╛рдиреНрдп рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдХреЗрдВрджреНрд░реАрдХреГрдд рдХрд░рдХреЗ рдЬрдЯрд┐рд▓рддрд╛ рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред

{% hint style="danger" %}
**VNET pairing Azure рдореЗрдВ non-transitive рд╣реИ**, рдЬрд┐рд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЕрдЧрд░ spoke 1 spoke 2 рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ рдФрд░ spoke 2 spoke 3 рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реИ рддреЛ spoke 1 рд╕реАрдзреЗ spoke 3 рд╕реЗ рдмрд╛рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред
{% endhint %}

### Examples

* рдПрдХ рдХрдВрдкрдиреА рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдЬрд┐рд╕рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд┐рднрд╛рдЧ рдЬреИрд╕реЗ Sales, HR, рдФрд░ Development рд╣реИрдВ, **рдкреНрд░рддреНрдпреЗрдХ рдХрд╛ рдЕрдкрдирд╛ VNet (рд╕реНрдкреЛрдХреНрд╕)**ред рдЗрди VNets рдХреЛ **рд╕рд╛рдЭрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ** рдЬреИрд╕реЗ рдХрд┐ рдПрдХ рдХреЗрдВрджреНрд░реАрдп рдбреЗрдЯрд╛рдмреЗрд╕, рдПрдХ рдлрд╝рд╛рдпрд░рд╡реЙрд▓, рдФрд░ рдПрдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдЧреЗрдЯрд╡реЗ, рдЬреЛ рд╕рднреА **рдПрдХ рдЕрдиреНрдп VNet (рд╣рдм) рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИрдВ**ред Hub and Spoke рдореЙрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рднрд╛рдЧ **рд╕рд╛рдЭрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╕реЗ рд╣рдм VNet рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдмрд┐рдирд╛ рдЙрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЙрдЬрд╛рдЧрд░ рдХрд┐рдП** рдпрд╛ рдХрдИ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдЬрдЯрд┐рд▓ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рдП рдмрд┐рдирд╛ред

### Enumeration

{% code overflow="wrap" %}
```bash
# List all VNets in your subscription
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List VNet peering connections for a given VNet
az network vnet peering list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, peeringState:peeringState, remoteVnetId:remoteVnetId}" -o table

# List Shared Resources (e.g., Azure Firewall) in the Hub
az network firewall list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table
```
{% endcode %}

## Site-to-Site VPN

Azure рдореЗрдВ рдПрдХ Site-to-Site VPN рдЖрдкрдХреЛ **рдЕрдкрдиреЗ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдЕрдкрдиреЗ Azure Virtual Network (VNet) рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ Azure рдХреЗ рднреАрддрд░ рд╕рдВрд╕рд╛рдзрди рдЬреИрд╕реЗ VMs рдЖрдкрдХреЗ рд▓реЛрдХрд▓ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╣реЛрдиреЗ рдЬреИрд╕рд╛ рдкреНрд░рддреАрдд рд╣реЛрддреЗ рд╣реИрдВред рдпрд╣ рдХрдиреЗрдХреНрд╢рди рдПрдХ **VPN рдЧреЗрдЯрд╡реЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рджреЛрдиреЛрдВ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рддрд╛ рд╣реИ**ред

### **рдЙрджрд╛рд╣рд░рдг**

* рдиреНрдпреВрдпреЙрд░реНрдХ рдореЗрдВ рд╕реНрдерд┐рдд рдЕрдкрдиреЗ рдореБрдЦреНрдп рдХрд╛рд░реНрдпрд╛рд▓рдп рдХреЗ рд╕рд╛рде рдПрдХ рд╡реНрдпрд╡рд╕рд╛рдп рдХрд╛ рдПрдХ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рд╣реИ рдЬрд┐рд╕реЗ рдЕрдкрдиреЗ Azure рдореЗрдВ VNet рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬреЛ рдЗрд╕рдХреЗ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреНрдб рд╡рд░реНрдХрд▓реЛрдбреНрд╕ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИред рдПрдХ **Site-to-Site VPN рд╕реЗрдЯрдЕрдк рдХрд░рдХреЗ, рдХрдВрдкрдиреА рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рд╕рд░реНрд╡рд░ рдФрд░ Azure VMs рдХреЗ рдмреАрдЪ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░ рд╕рдХрддреА рд╣реИ**, рдЬрд┐рд╕рд╕реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рджреЛрдиреЛрдВ рд╡рд╛рддрд╛рд╡рд░рдгреЛрдВ рдореЗрдВ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рд╡реЗ рдПрдХ рд╣реА рд▓реЛрдХрд▓ рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рд╣реЛрдВред

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List VPN Gateways
az network vnet-gateway list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List VPN Connections
az network vpn-connection list --gateway-name <VpnGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, connectionType:connectionType, connectionStatus:connectionStatus}" -o table
```
{% endcode %}

## Azure ExpressRoute

Azure ExpressRoute рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдЗрдВрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдФрд░ Azure рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░реНрд╕ рдХреЗ рдмреАрдЪ рдПрдХ **рдирд┐рдЬреА, рд╕рдорд░реНрдкрд┐рдд, рдЙрдЪреНрдЪ-рдЧрддрд┐ рдХрдиреЗрдХреНрд╢рди** рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред рдпрд╣ рдХрдиреЗрдХреНрд╢рди рдПрдХ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рдЗрдВрдЯрд░рдиреЗрдЯ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛, рддреЗрдЬ рдЧрддрд┐, рдХрдо рд╡рд┐рд▓рдВрдмрддрд╛, рдФрд░ рдЙрдЪреНрдЪ рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

### **рдЙрджрд╛рд╣рд░рдг**

* рдПрдХ рдмрд╣реБрд░рд╛рд╖реНрдЯреНрд░реАрдп рдирд┐рдЧрдо рдХреЛ рдЕрдкрдиреЗ Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП **рд╕реБрд╕рдВрдЧрдд рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдХрдиреЗрдХреНрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдбреЗрдЯрд╛ рдХреА рдЙрдЪреНрдЪ рдорд╛рддреНрд░рд╛** рдФрд░ рдЙрдЪреНрдЪ рдереНрд░реВрдкреБрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдХрдВрдкрдиреА Azure ExpressRoute рдХрд╛ рдЪрдпрди рдХрд░рддреА рд╣реИ рддрд╛рдХрд┐ рдЕрдкрдиреЗ рдСрди-рдкреНрд░рд┐рдорд╛рдЗрд╕реЗрд╕ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдХреЛ рд╕реАрдзреЗ Azure рд╕реЗ рдЬреЛрдбрд╝ рд╕рдХреЗ, рдЬрд┐рд╕рд╕реЗ рдмрдбрд╝реЗ рдкреИрдорд╛рдиреЗ рдкрд░ рдбреЗрдЯрд╛ рдЯреНрд░рд╛рдВрд╕рдлрд░, рдЬреИрд╕реЗ рджреИрдирд┐рдХ рдмреИрдХрдЕрдк рдФрд░ рд░рд┐рдпрд▓-рдЯрд╛рдЗрдо рдбреЗрдЯрд╛ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕, рдХреЛ рдмрдврд╝реА рд╣реБрдИ рдЧреЛрдкрдиреАрдпрддрд╛ рдФрд░ рдЧрддрд┐ рдХреЗ рд╕рд╛рде рд╕реБрдЧрдо рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред

### **рдЧрдгрдирд╛**

{% code overflow="wrap" %}
```bash
# List ExpressRoute Circuits
az network express-route list --query "[].{name:name, location:location, resourceGroup:resourceGroup, serviceProviderName:serviceProviderName, peeringLocation:peeringLocation}" -o table
```
{% endcode %}

{% hint style="success" %}
AWS Hacking рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХреЛ рд╕рдорд░реНрдерди рджреЗрдВ</summary>

* [**subscription plans**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рд╣рдореЗрдВ **Twitter** ЁЯРж рдкрд░ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>
{% endhint %}
