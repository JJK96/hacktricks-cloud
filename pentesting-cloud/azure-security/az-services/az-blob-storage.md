# Az - рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ

<details>

<summary><strong>рдЬрд╛рдиреЗрдВ AWS рд╣реИрдХрд┐рдВрдЧ рдХреЛ рд╢реВрдиреНрдп рд╕реЗ рд╣реАрд░реЛ рддрдХ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> рдХреЗ рд╕рд╛рде!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдЕрдЧрд░ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА **рдХрдВрдкрдиреА HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд рд╣реЛ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕ рджреЗрдЦреЗрдВ**](https://github.com/sponsors/carlospolop)!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS рдФрд░ HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рджреНрд╡рд╛рд░рд╛ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

[рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╕реЗ:](https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blobs-overview) Azure Blob рд╕реНрдЯреЛрд░реЗрдЬ рдорд╛рдЗрдХреНрд░реЛрд╕реЙрдлреНрдЯ рдХрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ **рд╕реНрдЯреЛрд░реЗрдЬ рд╕рдорд╛рдзрд╛рди рдмрд╛рджрд▓ рдХреЗ рд▓рд┐рдП** рд╣реИред рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рдЕрдиреБрд░реВрдкрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рднрд╛рд░реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдЕрд╕рдВрд░рдЪрд┐рдд рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред рдЕрд╕рдВрд░рдЪрд┐рдд рдбреЗрдЯрд╛ рд╡рд╣ рдбреЗрдЯрд╛ рд╣реИ рдЬреЛ рдХрд┐рд╕реА рд╡рд┐рд╢реЗрд╖ рдбреЗрдЯрд╛ рдореЙрдбрд▓ рдпрд╛ рдкрд░рд┐рднрд╛рд╖рд╛ рдХрд╛ рдкрд╛рд▓рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдкрд╛рда рдпрд╛ рдмрд╛рдЗрдирд░реА рдбреЗрдЯрд╛ред

рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ рддреАрди рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:

* **рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ** (рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рдо)
* рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдореЗрдВ рдПрдХ **рдХрдВрдЯреЗрдирд░** (рдлрд╝реЛрд▓реНрдбрд░)
* рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдПрдХ **рдмреНрд▓реЙрдм**

<figure><img src="../../../.gitbook/assets/image (114).png" alt=""><figcaption></figcaption></figure>

### рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╕реНрдЯреЛрд░реЗрдЬ

| **рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ**                 | <p><code>https://&#x3C;storage-account>.blob.core.windows.net</code><br><br><code>https://&#x3C;stg-acc>.blob.core.windows.net/&#x3C;container-name>?restype=container&#x26;comp=list</code></p> |
| -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **рдПрдЬрд╝реНрдпреВрд░ рдбреЗрдЯрд╛ рд▓реЗрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдЬреЗрди2** | `https://<storage-account>.dfs.core.windows.net`                                                                                                                                                 |
| **рдПрдЬрд╝реНрдпреВрд░ рдлрд╝рд╛рдЗрд▓реНрд╕**                  | `https://<storage-account>.file.core.windows.net`                                                                                                                                                |
| **рдХрддрд╛рд░ рд╕реНрдЯреЛрд░реЗрдЬ**                | `https://<storage-account>.queue.core.windows.net`                                                                                                                                               |
| **рдЯреЗрдмрд▓ рд╕реНрдЯреЛрд░реЗрдЬ**                | `https://<storage-account>.table.core.windows.net`                                                                                                                                               |

### рд╕реНрдЯреЛрд░реЗрдЬ рддрдХ рдкрд╣реБрдВрдЪрдирд╛ <a href="#about-blob-storage" id="about-blob-storage"></a>

* **RBAC рднреВрдорд┐рдХрд╛рдПрдБ** рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ Azure AD рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
* **рдПрдХреНрд╕реЗрд╕ рдХреА** **рдХреБрдВрдЬрд┐рдпрд╛рдБ**: рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдХреА рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред рдпрд╣ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рд▓рд┐рдП **рдкреВрд░реНрдг рдПрдХреНрд╕реЗрд╕** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред
* **рд╕рд╛рдЭрд╛ рдПрдХреНрд╕реЗрд╕ рд╕рд┐рдЧреНрдиреЗрдЪрд░** (SAS): **рд╕рдордп** **рд╕реАрдорд┐рдд** рдФрд░ рд╡рд┐рд╢реЗрд╖ рдЕрдиреБрдорддрд┐рдпрд╛рдБред
* рдЖрдк рдПрдХ SAS URL рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдПрдХ **рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА** рдХреЗ рд╕рд╛рде (рдкрд╣рдЪрд╛рдирдирд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ)ред
* рдХреНрдпреЛрдВрдХрд┐ SAS рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА рд╕реЗ рдЙрддреНрдкрдиреНрди рд╣реЛрддрд╛ рд╣реИ, рдЕрдЧрд░ рдпрд╣ рдирд╡реАрдиреАрдХреГрдд рд╣реЛрддрд╛ рд╣реИ рддреЛ SAS рдХрд╛рдо рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИред

### рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкреНрд░рдХрдЯрди

рдпрджрд┐ "рдмреНрд▓реЙрдм рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкрд╣реБрдВрдЪ" рд╕рдХреНрд╖рдо рд╣реИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдХреНрд╖рдо), рддреЛ рд╕рдВрднрд╡ рд╣реИ:

* **рдмреНрд▓реЙрдмреНрд╕ рдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкрд╣реБрдВрдЪ** рджреЗрдирд╛ (рдЖрдкрдХреЛ рдирд╛рдо рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП)ред
* **рдХрдВрдЯреЗрдирд░ рдмреНрд▓реЙрдмреНрд╕ рдХреА рд╕реВрдЪреА** рдФрд░ рдЙрдиреНрд╣реЗрдВ **рдкрдврд╝рдирд╛**ред

### рд╕реНрдЯреЛрд░реЗрдЬ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ

рдпрджрд┐ рдЖрдкрдХреЛ рдХрд┐рд╕реА **рд╕реНрдЯреЛрд░реЗрдЬ** рдХрд╛ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рддреЛ рдЖрдк [**Microsoft Azure Storage Explorer**](https://azure.microsoft.com/es-es/products/storage/storage-explorer/) рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

## SAS URLs

[рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╕реЗ:](https://learn.microsoft.com/en-us/azure/storage/common/storage-sas-overview) рдПрдХ рд╕рд╛рдЭрд╛ рдПрдХреНрд╕реЗрд╕ рд╕рд┐рдЧреНрдиреЗрдЪрд░ (SAS) рдЖрдкрдХреЗ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдореЗрдВ рд╕рдВрд╕рд╛рдзрд┐рдд рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдПрдХ SAS рдХреЗ рд╕рд╛рде, рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рдЧреНрд░рд╛рдиреБрд▓рд░ рдирд┐рдпрдВрддреНрд░рдг рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдХреИрд╕реЗ рдЖрдкрдХреЗ рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:

* рдЧреНрд░рд╛рд╣рдХ рдХрд┐рди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИред
* рдЙрдирдХреЗ рдкрд╛рд╕ рдЙрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕реА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВред
* SAS рдХрд┐рддрдирд╛ рд╕рдордп рддрдХ рд╡реИрдз рд╣реИред

рдПрдХ SAS URL рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: **`https://<container_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`**

рдбреЗрдЯрд╛ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП [**Storage Explorer**](https://azure.microsoft.com/en-us/features/storage-explorer/) рдпрд╛ рдкрд╛рдпрдерди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:

{% code overflow="wrap" %}
```python
#pip3 install azure-storage-blob
from azure.storage.blob import BlobServiceClient

# List containers
conn_str="<SAS URL>"
svc = BlobServiceClient.from_connection_string(conn_str=conn_str)
for c in svc.list_containers():
print(c['name'])

# List blobs inside the containers
container = svc.get_container_client(container=c['name'])

for b in container.list_blobs():
print(b['name'])


# Download all the blobs
blob_name = b['name'].split("/")[::-1][0]
blob = svc.get_blob_client(container=c['name'],blob=b['name'])
with open(blob_name,"wb") as f:
f.write(blob.download_blob().readall())
```
{% endcode %}

### рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд╡реЗрд╖рдг SAS <a href="#user-delegation-sas" id="user-delegation-sas"></a>

рдЖрдк **рдПрдХ рд╕рд╛рдЭрд╛ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ (SAS)** рдЯреЛрдХрди рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдХрдВрдЯреЗрдирд░, рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛, рдпрд╛ рдмреНрд▓реЙрдм рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдпрд╛ рддреЛ рдЖрдЬрд╝рд░ рдПрдХреНрдЯрд┐рд╡ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА (рдЖрдЬрд╝рд░ рдПрдбреА) **рдорд╛рдиреНрдпрддрд╛рдПрдБ рдпрд╛ рдПрдХ рдЦрд╛рддрд╛ рдХреБрдВрдЬреА** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд╡реЗрд╖рдг SAS рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд╡реЗрд╖рдг рдХреБрдВрдЬреА** рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬрд┐рд╕реЗ рдЖрдк рдлрд┐рд░ SAS рдХреЛ рд╕рд╛рдЗрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред

**рдЖрдЬрд╝рд░ рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ** рдФрд░ **рдЖрдЬрд╝рд░ рдбреЗрдЯрд╛ рд▓реЗрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдЬреЗрди2** рдореЗрдВ рджреЛрдиреЛрдВ рдореЗрдВ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд╡реЗрд╖рдг рд╕рд╛рдЭрд╛ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ (SAS)** рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ **рд╕реНрдЯреЛрд░реНрдб рдПрдХреНрд╕реЗрд╕ рдиреАрддрд┐рдпрд╛рдБ** рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд╡реЗрд╖рдг SAS рдХреЗ рд╕рд╛рде рд╕рдВрдЧрдд рдирд╣реАрдВ рд╣реИрдВред

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд╡реЗрд╖рдг SAS **рдЖрдЬрд╝рд░ рдПрдбреА рдорд╛рдиреНрдпрддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИ рдмрдЬрд╛рдп рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддрд╛ рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЗ**ред рдпрд╣ рдХреНрд▓рд╛рдЗрдВрдЯ/рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╕реНрдЯреЛрд░реЗрдЬ рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рд╕реНрдЯреЛрд░/рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░реЛрдХрддрд╛ рд╣реИред

### рд╕реЗрд╡рд╛ SAS

рдПрдХ рд╕реЗрд╡рд╛ SAS **рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддрд╛ рдХреБрдВрдЬреА** рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИред рдПрдХ рд╕реЗрд╡рд╛ SAS **рдХреЗрд╡рд▓ рдПрдХ** рдЖрдЬрд╝рд░ рд╕реНрдЯреЛрд░реЗрдЬ рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рдЕрдзрд┐рдХрд╛рд░ рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ: рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ, рдХрддрд╛рд░ рд╕реНрдЯреЛрд░реЗрдЬ, рддрд╛рд▓рд┐рдХрд╛ рд╕реНрдЯреЛрд░реЗрдЬ, рдпрд╛ рдЖрдЬрд╝рд░ рдлрд╝рд╛рдЗрд▓реНрд╕ред рд╕реЗрд╡рд╛ рд╕реНрддрд░ рдХреЗ SAS рдХреЗ рд▓рд┐рдП URI рдореЗрдВ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП SAS рдЕрдзрд┐рдХрд╛рд░ рджреЗрдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрд╕рд╛рдзрди рдХреЗ URI рдХреЗ рдмрд╛рдж SAS рдЯреЛрдХрди рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИред

рдПрдХ **рдХрдВрдЯреЗрдирд░** рдпрд╛ **рдмреНрд▓реЙрдм** рдХреЗ рд▓рд┐рдП SAS рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЬрд╝рд░ рдПрдХреНрдЯрд┐рд╡ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА (рдЖрдЬрд╝рд░ рдПрдбреА) рдорд╛рдиреНрдпрддрд╛рдПрдБ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд╡реЗрд╖рдг SAS** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

### рдЦрд╛рддрд╛ SAS

рдПрдХ рдЦрд╛рддрд╛ SAS рдХрд┐рд╕реА рдПрдХ **рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддрд╛ рдХреБрдВрдЬреА** (рджреЛ рд╣реЛрддреА рд╣реИрдВ) рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИред рдПрдХ рдЦрд╛рддрд╛ SAS рд╕реНрдЯреЛрд░реЗрдЬ рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдпрд╛ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдЕрдзрд┐рдХрд╛рд░ рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рд╕реЗрд╡рд╛ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд╡реЗрд╖рдг SAS рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╕рднреА рдХрд╛рд░реНрд░рд╡рд╛рдИрдпрд╛рдБ рдПрдХ рдЦрд╛рддрд╛ SAS рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рднреА рдЙрдкрд▓рдмреНрдз рд╣реИрдВред

[рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╕реЗ:](https://learn.microsoft.com/en-us/rest/api/storageservices/create-account-sas) рдПрдХ рдЦрд╛рддрд╛ SAS рдмрдирд╛рдХрд░, рдЖрдк:

* рд╕реЗрд╡рд╛ рд╕реНрддрд░реАрдп рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рдкрд╣реБрдВрдЪ рдЕрдзрд┐рдХрд╛рд░ рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ рдЬреЛ рдПрдХ рд╕реЗрд╡рд╛-рд╡рд┐рд╢рд┐рд╖реНрдЯ SAS рдХреЗ рд╕рд╛рде рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИрдВ, рдЬреИрд╕реЗ `Get/Set Service Properties` рдФрд░ `Get Service Stats` рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпрд╛рдБред
* рдПрдХ рд╕рдордп рдореЗрдВ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╕реЗрд╡рд╛ рдореЗрдВ рдкрд╣реБрдВрдЪ рдЕрдзрд┐рдХрд╛рд░ рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ рдЦрд╛рддрд╛ SAS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрдЬрд╝рд░ рдмреНрд▓реЙрдм рд╕реНрдЯреЛрд░реЗрдЬ рдФрд░ рдЖрдЬрд╝рд░ рдлрд╝рд╛рдЗрд▓реНрд╕ рдореЗрдВ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдкрд╣реБрдВрдЪ рдЕрдзрд┐рдХрд╛рд░ рджреЗ рд╕рдХрддреЗ рд╣реИрдВред
* рдХрдВрдЯреЗрдирд░, рдХрддрд╛рд░, рддрд╛рд▓рд┐рдХрд╛рдПрдБ, рдФрд░ рдлрд╝рд╛рдЗрд▓ рд╢реЗрдпрд░реНрд╕ рдХреЗ рд▓рд┐рдП рд▓рд┐рдЦрдиреЗ рдФрд░ рд╣рдЯрд╛рдиреЗ рдХреА рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рдЕрдзрд┐рдХрд╛рд░ рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЬреЛ рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ-рд╡рд┐рд╢рд┐рд╖реНрдЯ SAS рдХреЗ рд╕рд╛рде рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИрдВред
* рдПрдХ рдЖрдИрдкреА рдкрддрд╛ рдпрд╛ рдПрдХ рдЖрдИрдкреА рдкрддреЛрдВ рдХреА рд╢реНрд░реЗрдгреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ рдЬрд┐рдирд╕реЗ рдЕрдиреБрд░реЛрдз рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред
* рдЙрди рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдЪрдЯреАрдЯреАрдкреА рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ (рдпрд╛ рддреЛ HTTPS рдпрд╛ HTTP/HTTPS)ред

## рдЧрдгрдирд╛

{% tabs %}
{% tab title="рдПрдЬрд╝ рд╕реАрдПрд▓рдЖрдИ" %}
{% code overflow="wrap" %}
```bash
# Get storage accounts
az storage account list #Get the account name from here

# Get keys to authenticate
az storage account keys list --account-name <name>

# Get shares
az storage share list --account-name <name> --account-key <key>

# Get dirs/files inside the share
az storage file list --account-name <name> --share-name <share-name> --account-key <key>
## If type is "dir", you can continue enumerationg files inside of it
az storage file list --account-name <name> --share-name <prev_dir/share-name> --account-key <key>

# Download a complete share (with directories and files inside of them)
az storage file download-batch -d . --source <share-name> --account-name <name> --account-key <key>
```
{% endcode %}
{% endtab %}

{% tab title="Az PowerShell" %}
```powershell
# Get storage accounts
Get-AzStorageAccount | fl
# Get rules to access the storage account
Get-AzStorageAccount | select -ExpandProperty NetworkRuleSet
# Get IPs
(Get-AzStorageAccount | select -ExpandProperty NetworkRuleSet).IPRules
# Get containers of a storage account
Get-AzStorageContainer -Context (Get-AzStorageAccount -name <NAME> -ResourceGroupName <NAME>).context
# Get blobs inside container
Get-AzStorageBlob -Container epbackup-planetary -Context (Get-AzStorageAccount -name <name> -ResourceGroupName <name>).context
# Get a blob from a container
Get-AzStorageBlobContent -Container <NAME> -Context (Get-AzStorageAccount -name <NAME> -ResourceGroupName <NAME>).context -Blob <blob_name> -Destination .\Desktop\filename.txt
```
{% endcode %}
{% endtab %}
{% endtabs %}

## рд╕рдВрджрд░реНрдн

* [https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction](https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction)
* [https://learn.microsoft.com/en-us/azure/storage/common/storage-sas-overview](https://learn.microsoft.com/en-us/azure/storage/common/storage-sas-overview)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert) рдХреЗ рд╕рд╛рде рдЬреАрд░реЛ рд╕реЗ рд╣реАрд░реЛ рддрдХ AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рдЕрдиреНрдп рддрд░реАрдХреЗ:

* рдпрджрд┐ рдЖрдк рдЕрдкрдиреА **рдХрдВрдкрдиреА рдХрд╛ рд╡рд┐рдЬреНрдЮрд╛рдкрди HackTricks рдореЗрдВ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдпрд╛ **HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* [**рдЖрдзрд┐рдХрд╛рд░рд┐рдХ PEASS & HackTricks рд╕реНрд╡реИрдЧ**](https://peass.creator-spring.com) рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
* рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖ [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) рдЦреЛрдЬреЗрдВ
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, HackTricks** рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks) github repos рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗред

</details>
