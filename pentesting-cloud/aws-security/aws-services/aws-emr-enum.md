# AWS - EMR Enum

{% hint style="success" %}
Jifunze na kufanya mazoezi ya AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na kufanya mazoezi ya GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mipango ya usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwenye** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## EMR

Huduma ya Elastic MapReduce (EMR) ya AWS, kuanzia toleo la 4.8.0, ilianzisha kipengele cha **usanidi wa usalama** ambacho kinaimarisha ulinzi wa data kwa kuruhusu watumiaji kubainisha mipangilio ya usimbaji wa data iliyohifadhiwa na inayosafirishwa ndani ya makundi ya EMR, ambayo ni vikundi vinavyoweza kupanuka vya matukio ya EC2 yaliyoundwa kusindika mifumo mikubwa ya data kama Apache Hadoop na Spark.

Sifa kuu ni pamoja na:

* **Cluster Encryption Default**: Kwa chaguo-msingi, data iliyohifadhiwa ndani ya kundi haijasimbwa. Hata hivyo, kuwezesha usimbaji hutoa ufikiaji wa vipengele kadhaa:
* **Linux Unified Key Setup**: Husimba kiasi cha EBS cha kundi. Watumiaji wanaweza kuchagua Huduma ya Usimamizi wa Funguo ya AWS (KMS) au mtoa funguo maalum.
* **Open-Source HDFS Encryption**: Hutoa chaguzi mbili za usimbaji kwa Hadoop:
* Secure Hadoop RPC (Remote Procedure Call), imewekwa kwa faragha, ikitumia Simple Authentication Security Layer.
* HDFS Block transfer encryption, imewekwa kwa kweli, inatumia algorithimu ya AES-256.
* **Encryption in Transit**: Inalenga kulinda data wakati wa usafirishaji. Chaguzi ni pamoja na:
* **Open Source Transport Layer Security (TLS)**: Usimbaji unaweza kuwezeshwa kwa kuchagua mtoa cheti:
* **PEM**: Inahitaji kuunda na kufunga vyeti vya PEM kwa mkono kwenye faili la zip, linalorejelewa kutoka kwenye ndoo ya S3.
* **Custom**: Inahusisha kuongeza darasa maalum la Java kama mtoa cheti ambaye hutoa vifaa vya usimbaji.

Mara mtoa cheti wa TLS anapojumuishwa kwenye usanidi wa usalama, vipengele vifuatavyo vya usimbaji maalum wa programu vinaweza kuwezeshwa, kutegemea toleo la EMR:

* **Hadoop**:
* Inaweza kupunguza shuffle iliyosimbwa kwa kutumia TLS.
* Secure Hadoop RPC na Simple Authentication Security Layer na HDFS Block Transfer na AES-256 vinawezeshwa na usimbaji wa data iliyohifadhiwa.
* **Presto** (EMR toleo la 5.6.0+):
* Mawasiliano ya ndani kati ya nodi za Presto yanalindwa kwa kutumia SSL na TLS.
* **Tez Shuffle Handler**:
* Inatumia TLS kwa usimbaji.
* **Spark**:
* Inatumia TLS kwa itifaki ya Akka.
* Inatumia Simple Authentication Security Layer na 3DES kwa Huduma ya Uhamisho wa Block.
* Huduma ya shuffle ya nje inalindwa na Simple Authentication Security Layer.

Vipengele hivi kwa pamoja vinaimarisha hali ya usalama ya makundi ya EMR, hasa kuhusu ulinzi wa data wakati wa awamu za kuhifadhi na kusafirisha.

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## Marejeo

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
Jifunze & fanya mazoezi ya AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze & fanya mazoezi ya GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mipango ya usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **fuata** sisi kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwenye** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
