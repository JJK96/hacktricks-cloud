# AWS - EMR Enum

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'da takip edin.**
* **HackTricks'e PR göndererek hacking ipuçlarını paylaşın** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına.

</details>
{% endhint %}

## EMR

AWS'nin Elastic MapReduce (EMR) hizmeti, 4.8.0 sürümünden itibaren, EMR kümeleri içinde dinlenme ve aktarım halindeki veriler için şifreleme ayarlarını belirlemeye olanak tanıyan bir **güvenlik yapılandırması** özelliği sunarak veri korumasını artırdı. Bu kümeler, Apache Hadoop ve Spark gibi büyük veri çerçevelerini işlemek için tasarlanmış ölçeklenebilir EC2 instance gruplarıdır.

Anahtar özellikler şunlardır:

* **Küme Şifreleme Varsayılanı**: Varsayılan olarak, bir küme içindeki dinlenme halindeki veriler şifrelenmez. Ancak, şifreleme etkinleştirildiğinde birkaç özelliğe erişim sağlar:
* **Linux Unified Key Setup**: EBS küme hacimlerini şifreler. Kullanıcılar AWS Key Management Service (KMS) veya özel bir anahtar sağlayıcıyı tercih edebilir.
* **Açık Kaynak HDFS Şifreleme**: Hadoop için iki şifreleme seçeneği sunar:
* Simple Authentication Security Layer kullanarak gizlilik için ayarlanmış Secure Hadoop RPC (Remote Procedure Call).
* AES-256 algoritmasını kullanan HDFS Blok transfer şifrelemesi, true olarak ayarlanmıştır.
* **Aktarım Halinde Şifreleme**: Veri transferi sırasında güvenliği sağlamaya odaklanır. Seçenekler şunlardır:
* **Açık Kaynak Transport Layer Security (TLS)**: Şifreleme, bir sertifika sağlayıcı seçilerek etkinleştirilebilir:
* **PEM**: PEM sertifikalarının manuel olarak oluşturulmasını ve bir zip dosyasına paketlenmesini gerektirir, bir S3 bucket'ından referans alınır.
* **Özel**: Şifreleme artefaktlarını sağlayan özel bir Java sınıfı eklemeyi içerir.

Bir TLS sertifika sağlayıcısı güvenlik yapılandırmasına entegre edildiğinde, EMR sürümüne bağlı olarak aşağıdaki uygulamaya özgü şifreleme özellikleri etkinleştirilebilir:

* **Hadoop**:
* TLS kullanarak şifrelenmiş shuffle'ı azaltabilir.
* Simple Authentication Security Layer ve AES-256 ile HDFS Blok Transferi ile Secure Hadoop RPC, dinlenme halindeki şifreleme ile etkinleştirilir.
* **Presto** (EMR sürüm 5.6.0+):
* Presto düğümleri arasındaki iç iletişim SSL ve TLS kullanılarak güvence altına alınır.
* **Tez Shuffle Handler**:
* Şifreleme için TLS kullanır.
* **Spark**:
* Akka protokolü için TLS kullanır.
* Simple Authentication Security Layer ve 3DES kullanarak Blok Transfer Hizmeti.
* Dış shuffle hizmeti Simple Authentication Security Layer ile güvence altına alınır.

Bu özellikler, özellikle depolama ve iletim aşamalarında veri koruması açısından EMR kümelerinin güvenlik duruşunu topluca artırır.

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

## Referanslar

* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{% hint style="success" %}
AWS Hacking öğren & pratik yap:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğren & pratik yap: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekle</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol et!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katıl veya **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip et.**
* **HackTricks** ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına PR göndererek hacking ipuçlarını paylaş.

</details>
{% endhint %}
