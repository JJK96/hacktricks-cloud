# AWS - 証明書マネージャ（ACM）＆プライベート証明書機関（PCA）

{% hint style="success" %}
AWSハッキングの学習と練習：<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPハッキングの学習と練習：<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksのサポート</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェック！
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に**参加**または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォロー**してください。
* **HackTricks**と**HackTricks Cloud**のGitHubリポジトリにPRを提出することで、ハッキングトリックを共有してください。

</details>
{% endhint %}

## 基本情報

**AWS Certificate Manager（ACM）**は、AWSサービスおよび内部リソースの**SSL/TLS証明書のプロビジョニング、管理、展開を効率化**するサービスとして提供されています。ACMによって、購入、アップロード、証明書の更新などの手動プロセスが**排除**されます。これにより、ユーザーは**Elastic Load Balancers、Amazon CloudFrontディストリビューション、API Gateway上のAPI**など、さまざまなAWSリソースに証明書を効率的にリクエストおよび実装できます。

ACMの重要な機能の1つは、**証明書の自動更新**であり、管理オーバーヘッドを大幅に削減します。さらに、ACMは**内部利用のためのプライベート証明書の作成と中央集中管理**をサポートしています。ACMを介してElastic Load Balancing、Amazon CloudFront、Amazon API Gatewayなどの統合AWSサービス用のSSL/TLS証明書は追加費用なしで提供されますが、ユーザーはアプリケーションで利用されるAWSリソースに関連するコストと、統合されていないACMサービスで使用される各**プライベート証明書機関（CA）**およびプライベート証明書ごとの月額料金に責任があります。

**AWS Private Certificate Authority**は、**管理されたプライベートCAサービス**として提供され、プライベート証明書を含めた証明書管理を拡張し、組織内のリソースの認証に重要です。

## 列挙

### ACM
```bash
# List certificates
aws acm list-certificates

# Get certificate info
aws acm describe-certificate --certificate-arn <arn> # Check "InUseBy" to check which resources are using it

# Get certificate data
aws acm get-certificate --certificate-arn "arn:aws:acm:us-east-1:188868097724:certificate/865abced-82c9-43bf-b7d2-1f4948bf353d"

# Account configuration
aws acm get-account-configuration
```
### PCM

**AWS Certificate Manager (ACM) and Private Certificate Authority (PCA)**

**AWS Certificate Manager (ACM)**

AWS Certificate Manager (ACM) は、SSL/TLS 証明書を簡単に作成、管理、デプロイできるサービスです。ACM は、パブリック証明書とプライベート証明書の両方を提供しています。パブリック証明書は、AWS のサポートするサービスや外部のリソースに使用できます。プライベート証明書は、VPC 内のリソース間での通信を暗号化するために使用されます。

**Private Certificate Authority (PCA)**

AWS Private Certificate Authority (PCA) は、カスタムルート証明機関 (CA) を作成、運用できるフルマネージドサービスです。PCA を使用すると、独自のルート CA と中間 CA を作成し、それらを使用して SSL/TLS 証明書を発行できます。これにより、独自の PKI インフラストラクチャを構築し、セキュリティ要件を満たすことができます。
```bash
# List CAs
aws acm-pca list-certificate-authorities

# Get CA info
aws acm-pca describe-certificate-authority --certificate-authority-arn <arn>

# Get CA Permissions
aws acm-pca list-permissions --certificate-authority-arn <arn>

# Get CA certificate
aws acm-pca get-certificate-authority-certificate --certificate-authority-arn <arn>

# Certificate request
aws acm-pca get-certificate-authority-csr --certificate-authority-arn <arn>

# Get CA Policy (if any)
aws acm-pca get-policy --resource-arn <arn>
```
## Privesc

TODO

## Post Exploitation

TODO

{% hint style="success" %}
AWSハッキングの学習と練習:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCPハッキングの学習と練習: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksのサポート</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェック！
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**telegramグループ**](https://t.me/peass)に**参加**するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォロー**してください。
* ハッキングトリックを共有するために、[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>
{% endhint %}
