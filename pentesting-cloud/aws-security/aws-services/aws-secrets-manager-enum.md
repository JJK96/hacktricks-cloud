# AWS - Secrets Manager Enum

{% hint style="success" %}
Μάθετε και εξασκηθείτε στο AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε και εξασκηθείτε στο GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Γίνετε μέλος της** 💬 [**ομάδας Discord**](https://discord.gg/hRep4RUj7f) ή της [**ομάδας telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε hacking tricks υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο github.

</details>
{% endhint %}

## AWS Secrets Manager

Το AWS Secrets Manager έχει σχεδιαστεί για να **εξαλείψει τη χρήση hard-coded secrets σε εφαρμογές αντικαθιστώντας τα με μια κλήση API**. Αυτή η υπηρεσία λειτουργεί ως **κεντρικό αποθετήριο για όλα τα μυστικά σας**, διασφαλίζοντας ότι διαχειρίζονται ομοιόμορφα σε όλες τις εφαρμογές.

Ο διαχειριστής απλοποιεί τη **διαδικασία περιστροφής των μυστικών**, βελτιώνοντας σημαντικά την ασφάλεια των ευαίσθητων δεδομένων όπως τα διαπιστευτήρια βάσης δεδομένων. Επιπλέον, μυστικά όπως τα API keys μπορούν να περιστρέφονται αυτόματα με την ενσωμάτωση των lambda functions.

Η πρόσβαση στα μυστικά ελέγχεται αυστηρά μέσω λεπτομερών πολιτικών IAM που βασίζονται στην ταυτότητα και πολιτικών που βασίζονται στους πόρους.

Για να παραχωρήσετε πρόσβαση σε μυστικά σε έναν χρήστη από διαφορετικό λογαριασμό AWS, είναι απαραίτητο να:

1. Εξουσιοδοτήσετε τον χρήστη να έχει πρόσβαση στο μυστικό.
2. Παραχωρήσετε άδεια στον χρήστη να αποκρυπτογραφήσει το μυστικό χρησιμοποιώντας KMS.
3. Τροποποιήσετε την πολιτική του Key για να επιτρέψετε στον εξωτερικό χρήστη να το χρησιμοποιήσει.

**Το AWS Secrets Manager ενσωματώνεται με το AWS KMS για να κρυπτογραφήσει τα μυστικά σας μέσα στο AWS Secrets Manager.**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{% content-ref url="../aws-privilege-escalation/aws-secrets-manager-privesc.md" %}
[aws-secrets-manager-privesc.md](../aws-privilege-escalation/aws-secrets-manager-privesc.md)
{% endcontent-ref %}

### Post Exploitation

{% content-ref url="../aws-post-exploitation/aws-secrets-manager-post-exploitation.md" %}
[aws-secrets-manager-post-exploitation.md](../aws-post-exploitation/aws-secrets-manager-post-exploitation.md)
{% endcontent-ref %}

### Persistence

{% content-ref url="../aws-persistence/aws-secrets-manager-persistence.md" %}
[aws-secrets-manager-persistence.md](../aws-persistence/aws-secrets-manager-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Γίνετε μέλος της** 💬 [**ομάδας Discord**](https://discord.gg/hRep4RUj7f) ή της [**ομάδας telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε hacking tricks υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο github.

</details>
{% endhint %}
