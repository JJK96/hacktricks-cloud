# AWS - WAF Enum

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ AWS: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–®–∫–æ–ª–∞ —Ö–∞–∫—ñ–Ω–≥—É HackTricks –¥–ª—è –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ —á–µ—Ä–≤–æ–Ω–æ—ó –∫–æ–º–∞–Ω–¥–∏ AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥ GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–®–∫–æ–ª–∞ —Ö–∞–∫—ñ–Ω–≥—É HackTricks –¥–ª—è –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ —á–µ—Ä–≤–æ–Ω–æ—ó –∫–æ–º–∞–Ω–¥–∏ GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫—ñ–Ω–≥-–ø—Ä–∏–π–æ–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ GitHub.

</details>
{% endhint %}

# AWS WAF

AWS WAF - —Ü–µ **–±—Ä–∞–Ω–¥–º–∞—É–µ—Ä –≤–µ–±-–¥–æ–¥–∞—Ç–∫—ñ–≤**, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è **–∑–∞—Ö–∏—Å—Ç—É –≤–µ–±-–¥–æ–¥–∞—Ç–∫—ñ–≤ –∞–±–æ API** –≤—ñ–¥ —Ä—ñ–∑–Ω–∏—Ö –≤–µ–±-–µ–∫—Å–ø–ª–æ–π—Ç—ñ–≤, —è–∫—ñ –º–æ–∂—É—Ç—å –≤–ø–ª–∏–Ω—É—Ç–∏ –Ω–∞ —ó—Ö –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å, –±–µ–∑–ø–µ–∫—É –∞–±–æ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –≤—Ö—ñ–¥–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫, –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—á–∏ **–ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–ø–µ–∫–∏**, —è–∫—ñ –ø–æ–º'—è–∫—à—É—é—Ç—å —Ç–∏–ø–æ–≤—ñ –≤–µ–∫—Ç–æ—Ä–∏ –∞—Ç–∞–∫, —Ç–∞–∫—ñ —è–∫ SQL-—ñ–Ω'—î–∫—Ü—ñ—è –∞–±–æ –º—ñ–∂—Å–∞–π—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç—ñ–Ω–≥, –∞ —Ç–∞–∫–æ–∂ –≤–∏–∑–Ω–∞—á–∞—é—á–∏ –≤–ª–∞—Å–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó.

## –ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó

### –°–ø–∏—Å–æ–∫ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º (Web ACL)

–°–ø–∏—Å–æ–∫ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º (Web ACL) - —Ü–µ –Ω–∞–±—ñ—Ä –ø—Ä–∞–≤–∏–ª, —è–∫—ñ –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –¥–æ –≤–∞—à–∏—Ö –≤–µ–±-–¥–æ–¥–∞—Ç–∫—ñ–≤ –∞–±–æ API. –ö–æ–ª–∏ –≤–∏ –∞—Å–æ—Ü—ñ—é—î—Ç–µ Web ACL –∑ —Ä–µ—Å—É—Ä—Å–æ–º, AWS WAF –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≤—Ö—ñ–¥–Ω—ñ –∑–∞–ø–∏—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–∞–≤–∏–ª, –≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö —É Web ACL, —Ç–∞ –≤–∏–∫–æ–Ω—É—î –≤–∫–∞–∑–∞–Ω—ñ –¥—ñ—ó.

### –ì—Ä—É–ø–∞ –ø—Ä–∞–≤–∏–ª

–ì—Ä—É–ø–∞ –ø—Ä–∞–≤–∏–ª - —Ü–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏–π –Ω–∞–±—ñ—Ä –ø—Ä–∞–≤–∏–ª, —è–∫—ñ –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –¥–æ –∫—ñ–ª—å–∫–æ—Ö Web ACL. –ì—Ä—É–ø–∏ –ø—Ä–∞–≤–∏–ª –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ –Ω–∞–±–æ—Ä–∏ –ø—Ä–∞–≤–∏–ª –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –≤–µ–±-–¥–æ–¥–∞—Ç–∫—ñ–≤ –∞–±–æ API.

–ö–æ–∂–Ω–∞ –≥—Ä—É–ø–∞ –ø—Ä–∞–≤–∏–ª –º–∞—î —Å–≤—ñ–π –∞—Å–æ—Ü—ñ–π–æ–≤–∞–Ω–∏–π **–æ–±—Å—è–≥**, —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î —Ä–æ–∑—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ —Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∞—à–∏—Ö –ø—Ä–∞–≤–∏–ª, –≥—Ä—É–ø –ø—Ä–∞–≤–∏–ª —Ç–∞ Web ACL. –ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –π–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –π–æ–≥–æ –Ω–µ–º–æ–∂–ª–∏–≤–æ –∑–º—ñ–Ω–∏—Ç–∏.

### –ü—Ä–∞–≤–∏–ª–æ

–ü—Ä–∞–≤–∏–ª–æ –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞–±—ñ—Ä —É–º–æ–≤, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î AWS WAF –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤—Ö—ñ–¥–Ω–∏—Ö –≤–µ–±-–∑–∞–ø–∏—Ç—ñ–≤. –Ü—Å–Ω—É—é—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ç–∏–ø–∏ –ø—Ä–∞–≤–∏–ª:

1. **–ó–≤–∏—á–∞–π–Ω–µ –ø—Ä–∞–≤–∏–ª–æ**: –¶–µ–π —Ç–∏–ø –ø—Ä–∞–≤–∏–ª–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–∫–∞–∑–∞–Ω—ñ —É–º–æ–≤–∏ –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–æ–≥–æ, —á–∏ —Å–ª—ñ–¥ –¥–æ–∑–≤–æ–ª–∏—Ç–∏, –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –∞–±–æ –ø—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤–µ–±-–∑–∞–ø–∏—Ç–∏.
2. **–ü—Ä–∞–≤–∏–ª–æ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —à–≤–∏–¥–∫–æ—Å—Ç—ñ**: –ü—ñ–¥—Ä–∞—Ö–æ–≤—É—î –∑–∞–ø–∏—Ç–∏ –∑ –ø–µ–≤–Ω–æ—ó IP-–∞–¥—Ä–µ—Å–∏ –ø—Ä–æ—Ç—è–≥–æ–º –ø'—è—Ç–∏—Ö–≤–∏–ª–∏–Ω–Ω–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É. –¢—É—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å –ø–æ—Ä—ñ–≥, —ñ —è–∫—â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤ –≤—ñ–¥ IP –ø–µ—Ä–µ–≤–∏—â—É—î —Ü–µ–π –ª—ñ–º—ñ—Ç –ø—Ä–æ—Ç—è–≥–æ–º –ø'—è—Ç–∏ —Ö–≤–∏–ª–∏–Ω, –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–∞–ø–∏—Ç–∏ –≤—ñ–¥ —Ü—ñ—î—ó IP-–∞–¥—Ä–µ—Å–∏ –±–ª–æ–∫—É—é—Ç—å—Å—è, –ø–æ–∫–∏ —à–≤–∏–¥–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤ –Ω–µ –∑–Ω–∏–∑–∏—Ç—å—Å—è –Ω–∏–∂—á–µ –ø–æ—Ä–æ–≥—É. –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –ø–æ—Ä—ñ–≥ –¥–ª—è –ø—Ä–∞–≤–∏–ª –Ω–∞ –æ—Å–Ω–æ–≤—ñ —à–≤–∏–¥–∫–æ—Å—Ç—ñ - **2000 –∑–∞–ø–∏—Ç—ñ–≤**.

### –ö–µ—Ä–æ–≤–∞–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞

AWS WAF –ø—Ä–æ–ø–æ–Ω—É—î –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ, –∫–µ—Ä–æ–≤–∞–Ω—ñ –Ω–∞–±–æ—Ä–∏ –ø—Ä–∞–≤–∏–ª, —è–∫—ñ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è AWS —Ç–∞ –ø—Ä–æ–¥–∞–≤—Ü—è–º–∏ AWS Marketplace. –¶—ñ –Ω–∞–±–æ—Ä–∏ –ø—Ä–∞–≤–∏–ª –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∑–∞–≥—Ä–æ–∑ —ñ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π.

### –ù–∞–±—ñ—Ä IP-–∞–¥—Ä–µ—Å

–ù–∞–±—ñ—Ä IP-–∞–¥—Ä–µ—Å - —Ü–µ —Å–ø–∏—Å–æ–∫ IP-–∞–¥—Ä–µ—Å –∞–±–æ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ–≤ IP-–∞–¥—Ä–µ—Å, —è–∫—ñ –≤–∏ —Ö–æ—á–µ—Ç–µ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –∞–±–æ –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏. –ù–∞–±–æ—Ä–∏ IP —Å–ø—Ä–æ—â—É—é—Ç—å –ø—Ä–æ—Ü–µ—Å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ IP.

### –ù–∞–±—ñ—Ä —à–∞–±–ª–æ–Ω—ñ–≤ Regex

–ù–∞–±—ñ—Ä —à–∞–±–ª–æ–Ω—ñ–≤ Regex –º—ñ—Å—Ç–∏—Ç—å –æ–¥–∏–Ω –∞–±–æ –∫—ñ–ª—å–∫–∞ —Ä–µ–≥—É–ª—è—Ä–Ω–∏—Ö –≤–∏—Ä–∞–∑—ñ–≤ (regex), —è–∫—ñ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å —à–∞–±–ª–æ–Ω–∏ –¥–ª—è –ø–æ—à—É–∫—É –≤ –≤–µ–±-–∑–∞–ø–∏—Ç–∞—Ö. –¶–µ –∫–æ—Ä–∏—Å–Ω–æ –¥–ª—è –±—ñ–ª—å—à —Å–∫–ª–∞–¥–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ, —Ç–∞–∫–∏—Ö —è–∫ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç–µ–π —Å–∏–º–≤–æ–ª—ñ–≤.

### –¢–æ–∫–µ–Ω –±–ª–æ–∫—É–≤–∞–Ω–Ω—è

–¢–æ–∫–µ–Ω –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –æ–¥–Ω–æ—á–∞—Å–Ω–æ—Å—Ç—ñ –ø—Ä–∏ –≤–Ω–µ—Å–µ–Ω–Ω—ñ –∑–º—ñ–Ω –¥–æ —Ä–µ—Å—É—Ä—Å—ñ–≤ WAF. –í—ñ–Ω –∑–∞–±–µ–∑–ø–µ—á—É—î, —â–æ –∑–º—ñ–Ω–∏ –Ω–µ –±—É–¥—É—Ç—å –≤–∏–ø–∞–¥–∫–æ–≤–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ñ –∫—ñ–ª—å–∫–æ–º–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ –∞–±–æ –ø—Ä–æ—Ü–µ—Å–∞–º–∏, —è–∫—ñ –Ω–∞–º–∞–≥–∞—é—Ç—å—Å—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ —Ç–æ–π —Å–∞–º–∏–π —Ä–µ—Å—É—Ä—Å.

### –ö–ª—é—á—ñ API

–ö–ª—é—á—ñ API –≤ AWS WAF –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ –ø–µ–≤–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π API. –¶—ñ –∫–ª—é—á—ñ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ñ —Ç–∞ –∫–µ—Ä—É—é—Ç—å—Å—è –±–µ–∑–ø–µ—á–Ω–æ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –∑–º—ñ–Ω–∏ –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π WAF –º–æ–∂—É—Ç—å —Ä–æ–±–∏—Ç–∏ –ª–∏—à–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ.

- **–ü—Ä–∏–∫–ª–∞–¥**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è API CAPTCHA.

### –ü–æ–ª—ñ—Ç–∏–∫–∞ –¥–æ–∑–≤–æ–ª—ñ–≤

–ü–æ–ª—ñ—Ç–∏–∫–∞ –¥–æ–∑–≤–æ–ª—ñ–≤ - —Ü–µ –ø–æ–ª—ñ—Ç–∏–∫–∞ IAM, —è–∫–∞ –≤–∫–∞–∑—É—î, —Ö—Ç–æ –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥—ñ—ó –∑ —Ä–µ—Å—É—Ä—Å–∞–º–∏ AWS WAF. –í–∏–∑–Ω–∞—á–∞—é—á–∏ –¥–æ–∑–≤–æ–ª–∏, –≤–∏ –º–æ–∂–µ—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Ä–µ—Å—É—Ä—Å—ñ–≤ WAF —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏, —â–æ –ª–∏—à–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏, –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∞–±–æ –≤–∏–¥–∞–ª—è—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

### –û–±–ª–∞—Å—Ç—å –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è

–ü–∞—Ä–∞–º–µ—Ç—Ä –æ–±–ª–∞—Å—Ç—ñ –≤ AWS WAF –≤–∫–∞–∑—É—î, —á–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª–∞ WAF —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–æ —Ä–µ–≥—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫–∞ –∞–±–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—É Amazon CloudFront.

- **REGIONAL**: –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ —Ä–µ–≥—ñ–æ–Ω–∞–ª—å–Ω–∏—Ö —Å–ª—É–∂–±, —Ç–∞–∫–∏—Ö —è–∫ –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ (ALB), REST API Amazon API Gateway, GraphQL API AWS AppSync, –ø—É–ª –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ Amazon Cognito, —Å–ª—É–∂–±–∞ AWS App Runner —Ç–∞ –µ–∫–∑–µ–º–ø–ª—è—Ä AWS Verified Access. –í–∏ –≤–∫–∞–∑—É—î—Ç–µ —Ä–µ–≥—ñ–æ–Ω AWS, –¥–µ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è —Ü—ñ —Ä–µ—Å—É—Ä—Å–∏.
- **CLOUDFRONT**: –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—ñ–≤ Amazon CloudFront, —è–∫—ñ —î –≥–ª–æ–±–∞–ª—å–Ω–∏–º–∏. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó WAF –¥–ª—è CloudFront –∫–µ—Ä—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ä–µ–≥—ñ–æ–Ω `us-east-1`, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, –¥–µ –ø–æ–¥–∞—î—Ç—å—Å—è –≤–º—ñ—Å—Ç.

## –ö–ª—é—á–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### –ö—Ä–∏—Ç–µ—Ä—ñ—ó –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É (—É–º–æ–≤–∏)

**–£–º–æ–≤–∏** –≤–∫–∞–∑—É—é—Ç—å –µ–ª–µ–º–µ–Ω—Ç–∏ –≤—Ö—ñ–¥–Ω–∏—Ö HTTP/HTTPS-–∑–∞–ø–∏—Ç—ñ–≤, —è–∫—ñ –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç—å AWS WAF, –≤–∫–ª—é—á–∞—é—á–∏ XSS, –≥–µ–æ–≥—Ä–∞—Ñ—ñ—á–Ω–µ —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è (GEO), IP-–∞–¥—Ä–µ—Å–∏, –æ–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É, SQL-—ñ–Ω'—î–∫—Ü—ñ—é —Ç–∞ —à–∞–±–ª–æ–Ω–∏ (–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Ä—è–¥–∫—ñ–≤ —Ç–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ñ –≤–∏—Ä–∞–∑–∏). –í–∞–∂–ª–∏–≤–æ –∑–∞—É–≤–∞–∂–∏—Ç–∏, —â–æ **–∑–∞–ø–∏—Ç–∏, –æ–±–º–µ–∂–µ–Ω—ñ –Ω–∞ —Ä—ñ–≤–Ω—ñ CloudFront –∑–∞ –∫—Ä–∞—ó–Ω–æ—é, –Ω–µ –¥–æ—Å—è–≥–Ω—É—Ç—å WAF**.

–ö–æ–∂–µ–Ω –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å AWS –º–æ–∂–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏:

- **100 —É–º–æ–≤** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É (–∫—Ä—ñ–º Regex, –¥–µ –¥–æ–∑–≤–æ–ª–µ–Ω–æ –ª–∏—à–µ **10 —É–º–æ–≤**, –∞–ª–µ —Ü–µ–π –ª—ñ–º—ñ—Ç –º–æ–∂–Ω–∞ –∑–±—ñ–ª—å—à–∏—Ç–∏).
- **100 –ø—Ä–∞–≤–∏–ª** —Ç–∞ **50 Web ACL**.
- –ú–∞–∫—Å–∏–º—É–º **5 –ø—Ä–∞–≤–∏–ª –Ω–∞ –æ—Å–Ω–æ–≤—ñ —à–≤–∏–¥–∫–æ—Å—Ç—ñ**.
- –ü—Ä–æ–ø—É—Å–∫–Ω—É –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å **10 000 –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ —Å–µ–∫—É–Ω–¥—É**, –∫–æ–ª–∏ WAF —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑ –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫–æ–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤.

### –î—ñ—ó –ø—Ä–∞–≤–∏–ª

–î—ñ—ó –ø—Ä–∏–∑–Ω–∞—á–∞—é—Ç—å—Å—è –∫–æ–∂–Ω–æ–º—É –ø—Ä–∞–≤–∏–ª—É, –∑ –≤–∞—Ä—ñ–∞–Ω—Ç–∞–º–∏:

- **–î–æ–∑–≤–æ–ª–∏—Ç–∏**: –ó–∞–ø–∏—Ç –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–æ–≤—É—î—Ç—å—Å—è –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —Ä–æ–∑–ø–æ–¥—ñ–ª CloudFront –∞–±–æ –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤.
- **–ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏**: –ó–∞–ø–∏—Ç –Ω–µ–≥–∞–π–Ω–æ –ø—Ä–∏–ø–∏–Ω—è—î—Ç—å—Å—è.
- **–ü—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏**: –ü—ñ–¥—Ä–∞—Ö–æ–≤—É—î –∑–∞–ø–∏—Ç–∏, —è–∫—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å —É–º–æ–≤–∞–º –ø—Ä–∞–≤–∏–ª–∞. –¶–µ –∫–æ—Ä–∏—Å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª–∞, –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—é—á–∏ —Ç–æ—á–Ω—ñ—Å—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è–º –π–æ–≥–æ –Ω–∞ –î–æ–∑–≤–æ–ª–∏—Ç–∏ –∞–±–æ –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏.
- **CAPTCHA —Ç–∞ –≤–∏–∫–ª–∏–∫**: –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è, —â–æ –∑–∞–ø–∏—Ç –Ω–µ –Ω–∞–¥—ñ–π—à–æ–≤ –≤—ñ–¥ –±–æ—Ç–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é CAPTCHA-–≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫ —Ç–∞ —Ç–∏—Ö–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤.

–Ø–∫—â–æ –∑–∞–ø–∏—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∂–æ–¥–Ω–æ–º—É –ø—Ä–∞–≤–∏–ª—É –≤ –º–µ–∂–∞—Ö Web ACL, –≤—ñ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç—å **—Ç–∏–ø–æ–≤—É –¥—ñ—é** (–î–æ–∑–≤–æ–ª–∏—Ç–∏ –∞–±–æ –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏). –ü–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª, –≤–∏–∑–Ω–∞—á–µ–Ω–∏–π —É –º–µ–∂–∞—Ö Web ACL, —î –≤–∞–∂–ª–∏–≤–∏–º —ñ, —è–∫ –ø—Ä–∞–≤–∏–ª–æ, —Å–ª—ñ–¥—É—î —Ü—ñ–π –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ:

1. –î–æ–∑–≤–æ–ª–∏—Ç–∏ IP-–∞–¥—Ä–µ—Å–∏ –∑ –±—ñ–ª–æ–≥–æ —Å–ø–∏—Å–∫—É.
2. –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ IP-–∞–¥—Ä–µ—Å–∏ –∑ —á–æ—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É.
3. –ë–ª–æ–∫—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏, —è–∫—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –±—É–¥—å-—è–∫–∏–º —à–∫—ñ–¥–ª–∏–≤–∏–º –ø—ñ–¥–ø–∏—Å–∞–º.

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ CloudWatch

AWS WAF —ñ–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è –∑ CloudWatch –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É, –ø—Ä–æ–ø–æ–Ω—É—é—á–∏ –º–µ—Ç—Ä–∏–∫–∏, —Ç–∞–∫—ñ —è–∫ AllowedRequests, BlockedRequests, CountedRequests —Ç–∞ PassedRequests. –¶—ñ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª—è—é—Ç—å—Å—è –∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ø—Ä–æ—Ç—è–≥–æ–º –¥–≤–æ—Ö —Ç–∏–∂–Ω—ñ–≤.

## –ü–µ—Ä–µ–ª—ñ—á–µ–Ω–Ω—è

–î–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —Ä–æ–∑–ø–æ–¥—ñ–ª–∞–º–∏ CloudFront –≤–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ —Ä–µ–≥—ñ–æ–Ω US East (N. Virginia):

- CLI - –í–∫–∞–∂—ñ—Ç—å —Ä–µ–≥—ñ–æ–Ω US East –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –æ–±–ª–∞—Å—Ç—ñ CloudFront: `--scope CLOUDFRONT --region=us-east-1`.
- API —Ç–∞ SDK - –î–ª—è –≤—Å—ñ—Ö –≤–∏–∫–ª–∏–∫—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫—ñ–Ω—Ü–µ–≤—É —Ç–æ—á–∫—É —Ä–µ–≥—ñ–æ–Ω—É us-east-1.

–î–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —Ä–µ–≥—ñ–æ–Ω–∞–ª—å–Ω–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏ –≤–∞–º —Å–ª—ñ–¥ –≤–∫–∞–∑–∞—Ç–∏ —Ä–µ–≥—ñ–æ–Ω:

- –ü—Ä–∏–∫–ª–∞–¥ –∑ —Ä–µ–≥—ñ–æ–Ω–æ–º –Ñ–≤—Ä–æ–ø–∞ (–Ü—Å–ø–∞–Ω—ñ—è): `--scope REGIONAL --region=eu-south-2`
```bash
# Web ACLs #

## Retrieve a list of web access control lists (Web ACLs) available in your AWS account
aws wafv2 list-web-acls --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
## Retrieve details about the specified Web ACL
aws wafv2 get-web-acl --name <value> --id <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>

## Retrieve a list of resources associated with a specific web access control list (Web ACL)
aws wafv2 list-resources-for-web-acl --web-acl-arn <value> # Additional permissions needed depending on the protected resource type: cognito-idp:ListResourcesForWebACL, ec2:DescribeVerifiedAccessInstanceWebAclAssociations or apprunner:ListAssociatedServicesForWebAcl
## Retrieve the Web ACL associated with the specified AWS resource
aws wafv2 get-web-acl-for-resource --resource-arn <arn> # Additional permissions needed depending on the protected resource type: cognito-idp:GetWebACLForResource, ec2:GetVerifiedAccessInstanceWebAcl, wafv2:GetWebACL or apprunner:DescribeWebAclForService

# Rule groups #

## List of the rule groups available in your AWS account
aws wafv2 list-rule-groups --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
## Retrieve the details of a specific rule group
aws wafv2 get-rule-group [--name <value>] [--id <value>] [--arn <value>] [--scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>]
## Retrieve the IAM policy attached to the specified rule group
aws wafv2 get-permission-policy --resource-arn <rule-group-arn> # Just the owner of the Rule Group can do this operation

# Managed rule groups (by AWS or by a third-party) #

## List the managed rule groups that are available
aws wafv2 list-available-managed-rule-groups --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
## List the available versions of the specified managed rule group
aws wafv2 list-available-managed-rule-group-versions --vendor-name <value> --name <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
## Retrieve high-level information about a specific managed rule group
aws wafv2 describe-managed-rule-group --vendor-name <value> --name <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> [--version-name <value>]
## Retrieve high-level information about all managed rule groups
aws wafv2 describe-all-managed-products --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
## Retrieve high-level information about all managed rule groups from a specific vendor
aws wafv2 describe-managed-products-by-vendor --vendor-name <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>

# IP sets #

## List the IP sets that are available in your AWS account
aws wafv2 list-ip-sets --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
## Retrieve the specific IP set
aws wafv2 get-ip-set --name <value> --id <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
## Retrieve the keys that are currently being managed by a rate-based rule.
aws wafv2 get-rate-based-statement-managed-keys --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>\
--web-acl-name <value> --web-acl-id <value> --rule-name <value> [--rule-group-rule-name <value>]

# Regex pattern sets #

## List all the regex pattern sets that you manage
aws wafv2 list-regex-pattern-sets --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
## Retrieves the specified regex pattern sets
aws wafv2 get-regex-pattern-set --name <value> --id <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>

# API Keys #

## List API keys for the specified scope
aws wafv2 list-api-keys --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
## Retrieve decrypted API key
aws wafv2 get-decrypted-api-key --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> --api-key <value>

# Logs #

## List of logging configurations (storage location of the logs)
aws wafv2 list-logging-configurations --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> [--log-scope <value>]
## Retrieve the logging configuration settings associated with a specific web ACL
aws wafv2 get-logging-configuration --resource-arn <value> [--log-scope <CUSTOMER | SECURITY_LAKE>] [--log-type <value>]

# Miscelaneous #

## Retrieve a list of the tags associated to the specified resource
aws wafv2 list-tags-for-resource resource-arn <value>

## Retrieve a sample of web requests that match a specified rule within a WebACL during a specified time range
aws wafv2 get-sampled-requests --web-acl-arn <value> --rule-metric-name <value> --time-window <value> --max-items <1-500> --scope <value>

## Obtains the web ACL capacity unit (WCU) requirements for a specified scope and ruleset
aws wafv2 check-capacity --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> --rules <value>

## List of available releases for the AWS WAFv2 mobile SDK
aws wafv2 list-mobile-sdk-releases --platform <IOS | ANDROID>
## Retrieves information for the specified mobile SDK release
aws wafv2 get-mobile-sdk-release --platform <value> --release-version <value>

```
## –ü—ñ—Å–ª—è–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ–π–Ω–∏–π / –û–±—Ö—ñ–¥

{% hint style="success" %}
–ó —Ç–æ—á–∫–∏ –∑–æ—Ä—É –∞—Ç–∞–∫—É–≤–∞–ª—å–Ω–∏–∫–∞, —Ü—è —Å–ª—É–∂–±–∞ –º–æ–∂–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∞—Ç–∞–∫—É–≤–∞–ª—å–Ω–∏–∫—É –≤–∏—è–≤–∏—Ç–∏ –∑–∞—Ö–∏—Å—Ç WAF —Ç–∞ –º–µ—Ä–µ–∂–µ–≤—ñ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ, —è–∫—ñ –º–æ–∂—É—Ç—å –¥–æ–ø–æ–º–æ–≥—Ç–∏ –π–æ–º—É —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç—É–≤–∞—Ç–∏ —ñ–Ω—à—ñ –≤–µ–±-—Å–∞–π—Ç–∏.

–û–¥–Ω–∞–∫ –∞—Ç–∞–∫—É–≤–∞–ª—å–Ω–∏–∫ —Ç–∞–∫–æ–∂ –º–æ–∂–µ –±—É—Ç–∏ –∑–∞—Ü—ñ–∫–∞–≤–ª–µ–Ω–∏–π —É —Ä–æ–∑—Ä—É—à–µ–Ω–Ω—ñ —Ü—ñ—î—ó —Å–ª—É–∂–±–∏, —â–æ–± –≤–µ–±-—Å–∞–π—Ç–∏ –Ω–µ –±—É–ª–∏ –∑–∞—Ö–∏—â–µ–Ω—ñ WAF.
{% endhint %}

–£ –±–∞–≥–∞—Ç—å–æ—Ö –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±—É–¥–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –Ω–∞–¥–∞—Ç–∏ **—Ç–æ–∫–µ–Ω –±–ª–æ–∫—É–≤–∞–Ω–Ω—è**. –¶–µ–π —Ç–æ–∫–µ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –æ–¥–Ω–æ—á–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä–µ—Å—É—Ä—Å—ñ–≤, —â–æ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∑–º—ñ–Ω–∏ –Ω–µ –±—É–¥—É—Ç—å –≤–∏–ø–∞–¥–∫–æ–≤–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ñ –∫—ñ–ª—å–∫–æ–º–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ –∞–±–æ –ø—Ä–æ—Ü–µ—Å–∞–º–∏, —è–∫—ñ –Ω–∞–º–∞–≥–∞—é—Ç—å—Å—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ —Ç–æ–π —Å–∞–º–∏–π —Ä–µ—Å—É—Ä—Å. –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ü—å–æ–≥–æ —Ç–æ–∫–µ–Ω—É –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó **—Å–ø–∏—Å–∫—É** –∞–±–æ **–æ—Ç—Ä–∏–º–∞–Ω–Ω—è** –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É.

### **`wafv2:CreateRuleGroup`, `wafv2:UpdateRuleGroup`, `wafv2:DeleteRuleGroup`**

–ê—Ç–∞–∫—É–≤–∞–ª—å–Ω–∏–∫ –º–æ–∂–µ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç—É–≤–∞—Ç–∏ –±–µ–∑–ø–µ–∫—É –ø–æ—Ä—É—à–µ–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É, –≤–∏–∫–æ–Ω–∞–≤—à–∏ —Ç–∞–∫—ñ –¥—ñ—ó:

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä—É–ø –ø—Ä–∞–≤–∏–ª, —è–∫—ñ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –º–æ–∂—É—Ç—å –±–ª–æ–∫—É–≤–∞—Ç–∏ –ª–µ–≥—ñ—Ç–∏–º–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫ –∑ –ª–µ–≥—ñ—Ç–∏–º–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –≤—ñ–¥–º–æ–≤–∏ –≤ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—ñ.
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä—É–ø –ø—Ä–∞–≤–∏–ª, –∑–¥–∞—Ç–Ω–∏—Ö –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —ó—Ö –¥—ñ—ó, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑ **–ë–ª–æ–∫—É–≤–∞—Ç–∏** –Ω–∞ **–î–æ–∑–≤–æ–ª–∏—Ç–∏**.
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –≥—Ä—É–ø –ø—Ä–∞–≤–∏–ª, —è–∫—ñ –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ñ –∑–∞—Ö–æ–¥–∏ –±–µ–∑–ø–µ–∫–∏.
```bash
# Create Rule Group
aws wafv2 create-rule-group --name <value> --capacity <value> --visibility-config <value> \
--scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> [--rules <value>] [--description <value>]
# Update Rule Group
aws wafv2 update-rule-group --name <value> --id <value> --visibility-config <value> --lock-token <value>\
--scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> [--rules <value>] [--description <value>]
# Delete Rule Group
aws wafv2 delete-rule-group --name <value> --id <value> --lock-token <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
```
–ù–∞—Å—Ç—É–ø–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å –≥—Ä—É–ø—É –ø—Ä–∞–≤–∏–ª, —è–∫–∞ –±–ª–æ–∫—É–≤–∞—Ç–∏–º–µ –∑–∞–∫–æ–Ω–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫ –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å:
```bash
aws wafv2 create-rule-group --name BlockLegitimateIPsRuleGroup --capacity 1 --visibility-config SampledRequestsEnabled=false,CloudWatchMetricsEnabled=false,MetricName=BlockLegitimateIPsRuleGroup --scope CLOUDFRONT --region us-east-1 --rules file://rule.json
```
–§–∞–π–ª **rule.json** –≤–∏–≥–ª—è–¥–∞—Ç–∏–º–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:
```json
[
{
"Name":"BlockLegitimateIPsRule",
"Priority":0,
"Statement": {
"IPSetReferenceStatement": {
"ARN": "arn:aws:wafv2:us-east-1:123456789012:global/ipset/legitIPv4/1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f"
}
},
"Action":{
"Block":{}
},
"VisibilityConfig":{
"SampledRequestsEnabled":false,
"CloudWatchMetricsEnabled":false,
"MetricName":"BlockLegitimateIPsRule"
}
}
]
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –ù–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–∏–π –¥–æ—Å—Ç—É–ø, –ø–æ—Ä—É—à–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —Ç–∞ –º–æ–∂–ª–∏–≤—ñ –∞—Ç–∞–∫–∏ —Ç–∏–ø—É DoS.

### **`wafv2:CreateWebACL`, `wafv2:UpdateWebACL`, `wafv2:DeleteWebACL`**

–ó —Ü–∏–º–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–æ–∂–µ:

- –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –≤–µ–±-ACL, –≤–≤–æ–¥—è—á–∏ –ø—Ä–∞–≤–∏–ª–∞, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –∑–ª–æ–≤–º–∏—Å–Ω–æ–º—É —Ç—Ä–∞—Ñ—ñ–∫—É –ø—Ä–æ–π—Ç–∏ –∞–±–æ –±–ª–æ–∫—É—é—Ç—å –∑–∞–∫–æ–Ω–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫, –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–æ–±–ª—è—á–∏ WAF –Ω–µ–ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω–∏–º –∞–±–æ —Å–ø—Ä–∏—á–∏–Ω—è—é—á–∏ –≤—ñ–¥–º–æ–≤—É –≤ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—ñ.
- –û–Ω–æ–≤–∏—Ç–∏ —ñ—Å–Ω—É—é—á—ñ –≤–µ–±-ACL, –∑–º—ñ–Ω—é—é—á–∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –¥–æ–∑–≤–æ–ª—É –∞—Ç–∞–∫, —Ç–∞–∫–∏—Ö —è–∫ –≤–Ω–µ–¥—Ä–µ–Ω–Ω—è SQL-–∑–∞–ø–∏—Ç—ñ–≤ –∞–±–æ –º—ñ–∂—Å–∞–π—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç—ñ–Ω–≥, —è–∫—ñ —Ä–∞–Ω—ñ—à–µ –±—É–ª–∏ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ, –∞–±–æ –ø–µ—Ä–µ—à–∫–æ–¥–∂–∞—Ç–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É –ø–æ—Ç–æ–∫—É —Ç—Ä–∞—Ñ—ñ–∫—É, –±–ª–æ–∫—É—é—á–∏ –¥—ñ–π—Å–Ω—ñ –∑–∞–ø–∏—Ç–∏.
- –í–∏–¥–∞–ª–∏—Ç–∏ –≤–µ–±-ACL, –∑–∞–ª–∏—à–∞—é—á–∏ –∑–∞—Ö–∏—â–µ–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏ —Ü—ñ–ª–∫–æ–º –Ω–µ–∑–∞—Ö–∏—â–µ–Ω–∏–º–∏, –≤—ñ–¥–∫—Ä–∏–≤–∞—é—á–∏ —ó—Ö –¥–ª—è —à–∏—Ä–æ–∫–æ–≥–æ —Å–ø–µ–∫—Ç—Ä—É –≤–µ–±-–∞—Ç–∞–∫.

{% hint style="info" %}

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –≤–∫–∞–∑–∞–Ω–∏–π¬†**WebACL**, —è–∫—â–æ¬†**ManagedByFirewallManager**¬†–¥–æ—Ä—ñ–≤–Ω—é—î false.

{% endhint %}
```bash
# Create Web ACL
aws wafv2 create-web-acl --name <value> --default-action <value> --visibility-config <value> \
--scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> [--rules <value>] [--captcha-config <value>] [--description <value>]
# Update Web ACL
aws wafv2 update-web-acl --name <value> --id <value> --default-action <value> --visibility-config <value> --lock-token <value>\
--scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> [--rules <value>] [--captcha-config <value>] [--description <value>]
# Delete Web ACL
aws wafv2 delete-web-acl --name <value> --id <value> --lock-token <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
```
–ù–∞—Å—Ç—É–ø–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å, —è–∫ –æ–Ω–æ–≤–∏—Ç–∏ –≤–µ–±-ACL –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –ª–µ–≥—ñ—Ç–∏–º–Ω–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –Ω–∞–±–æ—Ä—É IP-–∞–¥—Ä–µ—Å. –Ø–∫—â–æ IP-–∞–¥—Ä–µ—Å–∞ –ø–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∂–æ–¥–Ω–æ–º—É –∑ —Ü–∏—Ö IP-–∞–¥—Ä–µ—Å, —Ç–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ç–∞–∫–æ–∂ –±—É–¥–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ, —â–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ DoS.

**–û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –≤–µ–±-ACL**:
```json
{
"WebACL": {
"Name": "AllowLegitimateIPsWebACL",
"Id": "1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f",
"ARN": "arn:aws:wafv2:us-east-1:123456789012:regional/webacl/AllowLegitimateIPsWebACL/1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f",
"DefaultAction": {
"Allow": {}
},
"Description": "",
"Rules": [
{
"Name": "AllowLegitimateIPsRule",
"Priority": 0,
"Statement": {
"IPSetReferenceStatement": {
"ARN": "arn:aws:wafv2:us-east-1:123456789012:regional/ipset/LegitimateIPv4/1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f"
}
},
"Action": {
"Allow": {}
},
"VisibilityConfig": {
"SampledRequestsEnabled": false,
"CloudWatchMetricsEnabled": false,
"MetricName": "AllowLegitimateIPsRule"
}
}
],
"VisibilityConfig": {
"SampledRequestsEnabled": false,
"CloudWatchMetricsEnabled": false,
"MetricName": "AllowLegitimateIPsWebACL"
},
"Capacity": 1,
"ManagedByFirewallManager": false,
"LabelNamespace": "awswaf:123456789012:webacl:AllowLegitimateIPsWebACL:"
},
"LockToken": "1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f"
}

```
–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–µ–±-ACL:
```json
aws wafv2 update-web-acl --name AllowLegitimateIPsWebACL --scope REGIONAL --id 1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f --lock-token 1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f --default-action Block={} --visibility-config SampledRequestsEnabled=false,CloudWatchMetricsEnabled=false,MetricName=AllowLegitimateIPsWebACL --rules file://rule.json --region us-east-1
```
–§–∞–π–ª **rule.json** –≤–∏–≥–ª—è–¥–∞—Ç–∏–º–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:
```json
[
{
"Name": "BlockLegitimateIPsRule",
"Priority": 0,
"Statement": {
"IPSetReferenceStatement": {
"ARN": "arn:aws:wafv2:us-east-1:123456789012:regional/ipset/LegitimateIPv4/1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f"
}
},
"Action": {
"Block": {}
},
"VisibilityConfig": {
"SampledRequestsEnabled": false,
"CloudWatchMetricsEnabled": false,
"MetricName": "BlockLegitimateIPRule"
}
}
]
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –ù–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–∏–π –¥–æ—Å—Ç—É–ø, –ø–æ—Ä—É—à–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö —Ç–∞ –º–æ–∂–ª–∏–≤—ñ –∞—Ç–∞–∫–∏ —Ç–∏–ø—É DoS.

### **`wafv2:AssociateWebACL`, `wafv2:DisassociateWebACL`**

–î–æ–∑–≤—ñ–ª **`wafv2:AssociateWebACL`** –¥–æ–∑–≤–æ–ª–∏–≤ –±–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫—É –∞—Å–æ—Ü—ñ—é–≤–∞—Ç–∏ –≤–µ–±-ACL (—Å–ø–∏—Å–∫–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º) –∑ —Ä–µ—Å—É—Ä—Å–∞–º–∏, –æ–±—Ö—ñ–¥ –∫–æ–Ω—Ç—Ä–æ–ª—ñ–≤ –±–µ–∑–ø–µ–∫–∏, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–æ–º—É —Ç—Ä–∞—Ñ—ñ–∫—É –¥–æ—Å—è–≥–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫—É, —â–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π, —Ç–∞–∫–∏—Ö —è–∫ –≤–Ω–µ–¥—Ä–µ–Ω–Ω—è SQL-–∫–æ–¥—É –∞–±–æ –º—ñ–∂—Å–∞–π—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç—ñ–Ω–≥ (XSS). –ù–∞—Ç–æ–º—ñ—Å—Ç—å, –∑ –¥–æ–∑–≤–æ–ª–æ–º **`wafv2:DisassociateWebACL`**, –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–æ–∂–µ —Ç–∏–º—á–∞—Å–æ–≤–æ –≤–∏–º–∫–Ω—É—Ç–∏ –∑–∞—Ö–∏—Å–Ω—ñ –∑–∞—Ö–æ–¥–∏, –≤–∏–∫—Ä–∏–≤–∞—é—á–∏ —Ä–µ—Å—É—Ä—Å–∏ —É—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—è–º –±–µ–∑ –≤–∏—è–≤–ª–µ–Ω–Ω—è.

–î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–æ–∑–≤–æ–ª–∏ –º–æ–∂—É—Ç—å –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ç–∏–ø—É –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É:

- **–ê—Å–æ—Ü—ñ—é–≤–∞—Ç–∏**
- apigateway:SetWebACL
- apprunner:AssociateWebAcl
- appsync:SetWebACL
- cognito-idp:AssociateWebACL
- ec2:AssociateVerifiedAccessInstanceWebAcl
- elasticloadbalancing:SetWebAcl
- **–í—ñ–¥—Å–æ—Ü—ñ—é–≤–∞—Ç–∏**
- apigateway:SetWebACL
- apprunner:DisassociateWebAcl
- appsync:SetWebACL
- cognito-idp:DisassociateWebACL
- ec2:DisassociateVerifiedAccessInstanceWebAcl
- elasticloadbalancing:SetWebAcl
```bash
# Associate
aws wafv2 associate-web-acl --web-acl-arn <value> --resource-arn <value>
# Disassociate
aws wafv2 disassociate-web-acl --resource-arn <value>
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –ü–æ—Ä—É—à–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤, –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Ä–∏–∑–∏–∫—É –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó —Ç–∞ –º–æ–∂–ª–∏–≤—ñ –ø–µ—Ä–µ–±–æ—ó –≤ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—ñ –≤ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö AWS, –∑–∞—Ö–∏—â–µ–Ω–∏—Ö AWS WAF.

### **`wafv2:CreateIPSet`, `wafv2:UpdateIPSet`, `wafv2:DeleteIPSet`**

–ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–æ–∂–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏, –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Ç–∞ –≤–∏–¥–∞–ª—è—Ç–∏ –Ω–∞–±–æ—Ä–∏ IP, –∫–µ—Ä–æ–≤–∞–Ω—ñ AWS WAF. –¶–µ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ, –æ—Å–∫—ñ–ª—å–∫–∏ –º–æ–∂–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ –Ω–∞–±–æ—Ä–∏ IP –¥–ª—è –¥–æ–ø—É—Å–∫—É –∑–ª–æ–≤–º–∏—Å–Ω–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É, –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –Ω–∞–±–æ—Ä–∏ IP –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∑–∞–∫–æ–Ω–Ω–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É, –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á—ñ –Ω–∞–±–æ—Ä–∏ IP –¥–ª—è –≤–∫–ª—é—á–µ–Ω–Ω—è –∑–ª–æ–≤–º–∏—Å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å, –≤–∏–¥–∞–ª—è—Ç–∏ –¥–æ–≤—ñ—Ä–µ–Ω—ñ IP-–∞–¥—Ä–µ—Å–∏ –∞–±–æ –≤–∏–¥–∞–ª—è—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ñ –Ω–∞–±–æ—Ä–∏ IP, —è–∫—ñ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤.
```bash
# Create IP set
aws wafv2 create-ip-set --name <value> --ip-address-version <IPV4 | IPV6> --addresses <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
# Update IP set
aws wafv2 update-ip-set --name <value> --id <value> --addresses <value> --lock-token <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
# Delete IP set
aws wafv2 delete-ip-set --name <value> --id <value> --lock-token <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
```
–ù–∞—Å—Ç—É–ø–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –ø–æ–∫–∞–∑—É—î, —è–∫ **–ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ —ñ—Å–Ω—É—é—á–∏–π –Ω–∞–±—ñ—Ä IP –Ω–∞ –±–∞–∂–∞–Ω–∏–π –Ω–∞–±—ñ—Ä IP**:
```bash
aws wafv2 update-ip-set --name LegitimateIPv4Set --id 1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f --addresses 99.99.99.99/32 --lock-token 1a2b3c4d-1a2b-1a2b-1a2b-1a2b3c4d5e6f --scope CLOUDFRONT --region us-east-1
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –ù–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–∏–π –¥–æ—Å—Ç—É–ø —Ç–∞ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –ª–µ–≥—ñ—Ç–∏–º–Ω–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É.

### **`wafv2:CreateRegexPatternSet`**, **`wafv2:UpdateRegexPatternSet`**, **`wafv2:DeleteRegexPatternSet`**

–ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑ —Ü–∏–º–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏ –∑–º–æ–∂–µ –º–∞–Ω—ñ–ø—É–ª—é–≤–∞—Ç–∏ –Ω–∞–±–æ—Ä–∞–º–∏ —à–∞–±–ª–æ–Ω—ñ–≤ —Ä–µ–≥—É–ª—è—Ä–Ω–∏—Ö –≤–∏—Ä–∞–∑—ñ–≤, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è AWS WAF –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –≤—Ö—ñ–¥–Ω–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —à–∞–±–ª–æ–Ω—ñ–≤.

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö —à–∞–±–ª–æ–Ω—ñ–≤ —Ä–µ–≥—É–ª—è—Ä–Ω–∏—Ö –≤–∏—Ä–∞–∑—ñ–≤ –¥–æ–ø–æ–º–æ–∂–µ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫—É –¥–æ–∑–≤–æ–ª–∏—Ç–∏ —à–∫—ñ–¥–ª–∏–≤–∏–π –≤–º—ñ—Å—Ç
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö —à–∞–±–ª–æ–Ω—ñ–≤ –¥–æ–∑–≤–æ–ª–∏—Ç—å –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫—É –æ–±—ñ–π—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–ø–µ–∫–∏
- –í–∏–¥–∞–ª–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—ñ–≤, —è–∫—ñ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∑–ª–æ–≤–º–∏—Å–Ω–∏—Ö –¥—ñ–π, –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ —Ç–æ–≥–æ, —â–æ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å —à–∫—ñ–¥–ª–∏–≤—ñ –¥–∞–Ω—ñ —Ç–∞ –æ–±—ñ–π–¥–µ –∑–∞—Ö–æ–¥–∏ –±–µ–∑–ø–µ–∫–∏.
```bash
# Create regex pattern set
aws wafv2 create-regex-pattern-set --name <value> --regular-expression-list <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> [--description <value>]
# Update regex pattern set
aws wafv2 update-regex-pattern-set --name <value> --id <value> --regular-expression-list <value> --lock-token <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
# Delete regex pattern set
aws wafv2 delete-regex-pattern-set --name <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1> --id <value> --lock-token <value>
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –û–±—Ö—ñ–¥ –∫–æ–Ω—Ç—Ä–æ–ª—ñ–≤ –±–µ–∑–ø–µ–∫–∏, –¥–æ–∑–≤—ñ–ª –Ω–∞ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è —à–∫—ñ–¥–ª–∏–≤–æ–≥–æ –≤–º—ñ—Å—Ç—É —Ç–∞ –º–æ–∂–ª–∏–≤–µ —Ä–æ–∑–∫—Ä–∏—Ç—Ç—è —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö –∞–±–æ –ø–µ—Ä–µ—à–∫–æ–¥–∂–∞–Ω–Ω—è –ø–æ—Å–ª—É–≥–∞–º —Ç–∞ —Ä–µ—Å—É—Ä—Å–∞–º, –∑–∞—Ö–∏—â–µ–Ω–∏–º AWS WAF.

### **(`wavf2:PutLoggingConfiguration` &** `iam:CreateServiceLinkedRole`), **`wafv2:DeleteLoggingConfiguration`**

–ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑ –¥–æ–∑–≤–æ–ª–æ–º **`wafv2:DeleteLoggingConfiguration`** –º–æ–∂–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –≤–µ–¥–µ–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—É –∑ –≤–∫–∞–∑–∞–Ω–æ–≥–æ –≤–µ–±-ACL. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ, –∑ –¥–æ–∑–≤–æ–ª–∞–º–∏ **`wavf2:PutLoggingConfiguration`** —Ç–∞ **`iam:CreateServiceLinkedRole`**, –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–æ–∂–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∞–±–æ –∑–∞–º—ñ–Ω–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –≤–µ–¥–µ–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—É (–ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è), —â–æ–± –∞–±–æ —É–Ω–∏–∫–Ω—É—Ç–∏ –≤–µ–¥–µ–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—É –≤–∑–∞–≥–∞–ª—ñ, –∞–±–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç–∏ –∂—É—Ä–Ω–∞–ª–∏ –Ω–∞ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω—ñ –º—ñ—Å—Ü—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è, —Ç–∞–∫—ñ —è–∫ –±–∞–∫–µ—Ç–∏ Amazon S3, –≥—Ä—É–ø–∞ –∂—É—Ä–Ω–∞–ª—ñ–≤ Amazon CloudWatch Logs –∞–±–æ –ø–æ—Ç—ñ–∫ Amazon Kinesis Data Firehose –ø—ñ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º.

–ü—ñ–¥ —á–∞—Å –ø—Ä–æ—Ü–µ—Å—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ª—É–∂–±–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–æ–∑–≤–æ–ª–∏ –¥–ª—è –∑–∞–ø–∏—Å—É –∂—É—Ä–Ω–∞–ª—ñ–≤ —É –≤–∫–∞–∑–∞–Ω–µ –º—ñ—Å—Ü–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–µ–¥–µ–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—É:

- **Amazon CloudWatch Logs:** AWS WAF —Å—Ç–≤–æ—Ä—é—î –ø–æ–ª—ñ—Ç–∏–∫—É —Ä–µ—Å—É—Ä—Å—É –Ω–∞ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ–π –≥—Ä—É–ø—ñ –∂—É—Ä–Ω–∞–ª—ñ–≤ CloudWatch Logs. –¶—è –ø–æ–ª—ñ—Ç–∏–∫–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î, —â–æ —É AWS WAF —î –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–æ–∑–≤–æ–ª–∏ –¥–ª—è –∑–∞–ø–∏—Å—É –∂—É—Ä–Ω–∞–ª—ñ–≤ —É –≥—Ä—É–ø—É –∂—É—Ä–Ω–∞–ª—ñ–≤.
- **Amazon S3 Bucket:** AWS WAF —Å—Ç–≤–æ—Ä—é—î –ø–æ–ª—ñ—Ç–∏–∫—É –±–∞–∫–µ—Ç–∞ –Ω–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–æ–º—É –±–∞–∫–µ—Ç—ñ S3. –¶—è –ø–æ–ª—ñ—Ç–∏–∫–∞ –Ω–∞–¥–∞—î AWS WAF –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–æ–∑–≤–æ–ª–∏ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—ñ–≤ —É –≤–∫–∞–∑–∞–Ω–∏–π –±–∞–∫–µ—Ç.
- **Amazon Kinesis Data Firehose:** AWS WAF —Å—Ç–≤–æ—Ä—é—î —Ä–æ–ª—å, —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—É –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ Kinesis Data Firehose. –¶—è —Ä–æ–ª—å –¥–æ–∑–≤–æ–ª—è—î AWS WAF –¥–æ—Å—Ç–∞–≤–ª—è—Ç–∏ –∂—É—Ä–Ω–∞–ª–∏ –¥–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É Firehose.

{% hint style="info" %}

–ú–æ–∂–ª–∏–≤–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –ª–∏—à–µ –æ–¥–Ω–µ –º—ñ—Å—Ü–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–µ–¥–µ–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—É –Ω–∞ –æ–¥–∏–Ω –≤–µ–±-ACL.

{% endhint %}
```bash
# Put logging configuration
aws wafv2 put-logging-configuration --logging-configuration <value>
# Delete logging configuration
aws wafv2 delete-logging-configuration --resource-arn <value> [--log-scope <CUSTOMER | SECURITY_LAKE>] [--log-type <value>]
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤:** –ü—Ä–∏—Ö–æ–≤–∞–Ω–Ω—è –≤–∏–¥–∏–º–æ—Å—Ç—ñ –ø–æ–¥—ñ–π –±–µ–∑–ø–µ–∫–∏, —É—Å–∫–ª–∞–¥–Ω–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É —Ä–µ–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞ —ñ–Ω—Ü–∏–¥–µ–Ω—Ç–∏ —Ç–∞ —Å–ø—Ä–∏—è–Ω–Ω—è —Ç–∞—î–º–Ω–∏–º –∑–ª–æ–≤–º–∏—Å–Ω–∏–º –¥—ñ—è–º –≤ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö, –∑–∞—Ö–∏—â–µ–Ω–∏—Ö AWS WAF.

### **`wafv2:DeleteAPIKey`**

–ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑ —Ü–∏–º–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏ –∑–º–æ–∂–µ –≤–∏–¥–∞–ª—è—Ç–∏ —ñ—Å–Ω—É—é—á—ñ –∫–ª—é—á—ñ API, —â–æ —Ä–æ–±–∏—Ç—å CAPTCHA –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º —Ç–∞ –ø–µ—Ä–µ—à–∫–æ–¥–∂–∞—î —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É, —è–∫–∏–π –Ω–∞ –Ω—å–æ–º—É “ë—Ä—É–Ω—Ç—É—î—Ç—å—Å—è, —Ç–∞–∫–∏–º —è–∫ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Ñ–æ—Ä–º —Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É. –ó–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ü—ñ—î—ó CAPTCHA, —Ü–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –∞–±–æ –¥–æ –æ–±—Ö—ñ–¥—É CAPTCHA, –∞–±–æ –¥–æ DoS, —è–∫—â–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∞–º–∏ –Ω–µ –Ω–∞–ª–µ–∂–Ω–∏–º —á–∏–Ω–æ–º –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–µ –≤ —Ä–µ—Å—É—Ä—Å—ñ.
```bash
# Delete API key
aws wafv2 delete-api-key --api-key <value> --scope <REGIONAL --region=<value> | CLOUDFRONT --region=us-east-1>
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –í–∏–º–∫–Ω–µ–Ω–Ω—è –∑–∞—Ö–∏—Å—Ç—É CAPTCHA –∞–±–æ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –¥–æ–¥–∞—Ç–∫—É, —â–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–æ—Ä—É—à–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –º–æ–∂–ª–∏–≤–æ—ó –∫—Ä–∞–¥—ñ–∂–∫–∏ –¥–∞–Ω–∏—Ö.

### **`wafv2:TagResource`,¬†`wafv2:UntagResource`**

–ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–æ–∂–µ –¥–æ–¥–∞–≤–∞—Ç–∏, –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∞–±–æ –≤–∏–¥–∞–ª—è—Ç–∏ —Ç–µ–≥–∏ –∑ —Ä–µ—Å—É—Ä—Å—ñ–≤ AWS WAFv2, —Ç–∞–∫–∏—Ö —è–∫ –≤–µ–±-ACL, –≥—Ä—É–ø–∏ –ø—Ä–∞–≤–∏–ª, –Ω–∞–±–æ—Ä–∏ IP-–∞–¥—Ä–µ—Å, –Ω–∞–±–æ—Ä–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–∏—Ö –≤–∏—Ä–∞–∑—ñ–≤ —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∂—É—Ä–Ω–∞–ª—é–≤–∞–Ω–Ω—è.
```bash
# Tag
aws wafv2 tag-resource --resource-arn <value> --tags <value>
# Untag
aws wafv2 untag-resource --resource-arn <value> --tag-keys <value>
```
**–ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏–π –≤–ø–ª–∏–≤**: –í—Ç—Ä—É—á–∞–Ω–Ω—è –≤ —Ä–µ—Å—É—Ä—Å–∏, –≤–∏—Ç—ñ–∫ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó, –º–∞–Ω—ñ–ø—É–ª—é–≤–∞–Ω–Ω—è –≤–∏—Ç—Ä–∞—Ç–∞–º–∏ —Ç–∞ –ø–æ—Ä—É—à–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π.

# –ü–æ—Å–∏–ª–∞–Ω–Ω—è
* [https://www.citrusconsulting.com/aws-web-application-firewall-waf/#:~:text=Conditions%20allow%20you%20to%20specify,user%20via%20a%20web%20application](https://www.citrusconsulting.com/aws-web-application-firewall-waf/#:~:text=Conditions%20allow%20you%20to%20specify,user%20via%20a%20web%20application)
* [https://docs.aws.amazon.com/service-authorization/latest/reference/list_awswafv2.html](https://docs.aws.amazon.com/service-authorization/latest/reference/list_awswafv2.html)

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≤–∑–ª–æ–º GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**–ù–∞–≤—á–∞–Ω–Ω—è HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ—à–∏—Ä—é–π—Ç–µ —Ö–∞–∫–µ—Ä—Å—å–∫—ñ —Ç—Ä—é–∫–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ GitHub.

</details>
{% endhint %}
