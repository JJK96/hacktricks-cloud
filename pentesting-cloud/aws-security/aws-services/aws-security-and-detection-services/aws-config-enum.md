# AWS - Config Enum

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## AWS Config

AWS Config **kaynak değişikliklerini yakalar**, bu nedenle Config tarafından desteklenen bir kaynağa yapılan herhangi bir değişiklik kaydedilebilir, bu da **ne değiştiğini ve diğer yararlı meta verileri kaydeder, hepsi yapılandırma öğesi olarak bilinen bir dosya içinde tutulur**, bir CI. Bu hizmet **bölgeye özgüdür**.

Bir yapılandırma öğesi veya **CI** olarak bilinir, AWS Config'in ana bileşenidir. **Yapılandırma bilgilerini, ilişki bilgilerini ve desteklenen bir kaynağın anlık görüntü görünümü olarak diğer meta verileri içeren bir JSON dosyasından oluşur**. AWS Config'in bir kaynak için kaydedebileceği tüm bilgiler CI içinde yakalanır. Bir CI, desteklenen bir kaynağın yapılandırmasında herhangi bir şekilde bir değişiklik yapıldığında **her seferinde** oluşturulur. Etkilenen kaynağın ayrıntılarını kaydetmenin yanı sıra, AWS Config, değişikliğin bu kaynakları da etkilemediğinden emin olmak için doğrudan ilişkili kaynaklar için de CI'ler kaydeder.

* **Metadata**: Yapılandırma öğesinin kendisi hakkında ayrıntılar içerir. Bir sürüm kimliği ve CI'yi benzersiz şekilde tanımlayan bir yapılandırma kimliği. Diğer bilgiler, aynı kaynağa karşı zaten kaydedilmiş diğer CI'leri karşılaştırmanıza olanak tanıyan bir MD5Hash içerebilir.
* **Attributes**: Bu, **gerçek kaynağa karşı ortak öznitelik bilgilerini** tutar. Bu bölümde, ayrıca benzersiz bir kaynak kimliği ve kaynağa bağlı herhangi bir anahtar değer etiketi bulunur. Kaynak türü de listelenir. Örneğin, bu bir EC2 örneği için bir CI ise, listelenen kaynak türleri ağ arayüzü veya bu EC2 örneği için elastik IP adresi olabilir.
* **Relationships**: Bu, kaynağın sahip olabileceği **herhangi bir bağlantılı ilişki için bilgi tutar**. Bu bölümde, bu kaynağın sahip olduğu diğer kaynaklarla olan herhangi bir ilişkinin açık bir açıklamasını gösterir. Örneğin, CI bir EC2 örneği içinse, ilişki bölümü EC2 örneğinin bulunduğu VPC ve alt ağ ile bağlantıyı gösterebilir.
* **Current configuration:** Bu, AWS CLI tarafından yapılan bir describe veya list API çağrısı yapıldığında oluşturulacak aynı bilgileri görüntüler. AWS Config, aynı bilgileri almak için aynı API çağrılarını kullanır.
* **Related events**: Bu, AWS CloudTrail ile ilgilidir. Bu, **bu CI'nin oluşturulmasını tetikleyen değişiklikle ilgili AWS CloudTrail olay kimliğini** görüntüler. Bir kaynağa yapılan her değişiklik için yeni bir CI oluşturulur. Sonuç olarak, farklı CloudTrail olay kimlikleri oluşturulacaktır.

**Configuration History**: Yapılandırma öğeleri sayesinde kaynakların yapılandırma geçmişini elde etmek mümkündür. Bir yapılandırma geçmişi her 6 saatte bir teslim edilir ve belirli bir kaynak türü için tüm CI'leri içerir.

**Configuration Streams**: Yapılandırma öğeleri, verilerin analizini sağlamak için bir SNS Konusuna gönderilir.

**Configuration Snapshots**: Yapılandırma öğeleri, desteklenen tüm kaynakların belirli bir anlık görüntüsünü oluşturmak için kullanılır.

**S3,** Yapılandırma Geçmişi dosyalarını ve verilerinizin herhangi bir Yapılandırma anlık görüntüsünü tek bir kovada saklamak için kullanılır, bu da Yapılandırma kaydedici içinde tanımlanır. Birden fazla AWS hesabınız varsa, yapılandırma geçmişi dosyalarınızı birincil hesabınızdaki aynı S3 kovasına toplamak isteyebilirsiniz. Ancak, bu hizmet ilkesine, config.amazonaws.com, ve ikincil hesaplarınıza birincil hesabınızdaki S3 kovasına yazma erişimi vermeniz gerekecektir.

### Functioning

* Örneğin güvenlik grubu veya kova erişim kontrol listesinde değişiklikler yaptığınızda —> AWS Config tarafından alınan bir Olay olarak tetiklenir
* Her şeyi S3 kovasında saklar
* Kuruluma bağlı olarak, bir şey değişir değişmez bir lambda işlevini tetikleyebilir VEYA AWS Config ayarlarını periyodik olarak gözden geçirmek için bir lambda işlevi planlayabilir
* Lambda, Config'e geri besleme yapar
* Kural ihlal edilmişse, Config bir SNS başlatır

![](<../../../../.gitbook/assets/image (126).png>)

### Config Rules

Config kuralları, **belirli uyumluluk kontrollerini** **ve kontrolleri kaynaklarınız arasında uygulamanıza yardımcı olmak için harika bir yoldur** ve her kaynak türünüz için ideal bir dağıtım spesifikasyonu benimsemenize olanak tanır. Her kural **temelde bir lambda işlevidir** ve çağrıldığında kaynağı değerlendirir ve kural ile uyumluluk sonucunu belirlemek için basit bir mantık yürütür. **Desteklenen kaynaklarınızdan birine her değişiklik yapıldığında**, **AWS Config, yerinde olan herhangi bir config kuralına karşı uyumluluğu kontrol eder**.\
AWS, kullanıma hazır bir dizi **önceden tanımlanmış kurala** sahiptir. Örneğin, Rds-storage-encrypted. Bu, RDS veritabanı örnekleriniz tarafından depolama şifrelemesinin etkinleştirilip etkinleştirilmediğini kontrol eder. Encrypted-volumes. Bu, bağlı durumda olan herhangi bir EBS hacminin şifrelenip şifrelenmediğini kontrol eder.

* **AWS Managed rules**: Birçok en iyi uygulamayı kapsayan bir dizi önceden tanımlanmış kural, bu nedenle kendi kurallarınızı oluşturmadan önce bu kuralları gözden geçirmek her zaman değerlidir, çünkü kural zaten mevcut olabilir.
* **Custom rules**: Belirli özel yapılandırmaları kontrol etmek için kendi kurallarınızı oluşturabilirsiniz.

Bölge başına 50 config kuralı sınırı vardır, artış için AWS ile iletişime geçmeniz gerekir.\
Uyumsuz sonuçlar SİLİNMEZ.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
