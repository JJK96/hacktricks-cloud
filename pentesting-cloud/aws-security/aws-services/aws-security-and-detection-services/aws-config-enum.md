# AWS - Config Enum

{% hint style="success" %}
Leer en oefen AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer en oefen GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**intekenplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** 💬 [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repo's.

</details>
{% endhint %}

## AWS Config

AWS Config **vang hulpbronveranderings op**, so enige verandering aan 'n hulpbron wat deur Config ondersteun word, kan opgeteken word, wat sal **aanteken wat verander het saam met ander nuttige metadata, alles gehou binne 'n lêer bekend as 'n konfigurasie-item**, 'n CI. Hierdie diens is **streekspesifiek**.

'n Konfigurasie-item of **CI** soos dit bekend staan, is 'n sleutelkomponent van AWS Config. Dit bestaan uit 'n JSON-lêer wat **die konfigurasie-inligting, verhoudingsinligting en ander metadata as 'n tydstip-oorsig van 'n ondersteunde hulpbron bevat**. Al die inligting wat AWS Config vir 'n hulpbron kan aanteken, word binne die CI vasgelê. 'n CI word **elke keer** geskep wanneer 'n ondersteunde hulpbron 'n verandering aan sy konfigurasie ondergaan. Benewens die aantekening van die besonderhede van die geaffekteerde hulpbron, sal AWS Config ook CI's aanteken vir enige direk verwante hulpbronne om te verseker dat die verandering nie daardie hulpbronne ook beïnvloed het nie.

* **Metadata**: Bevat besonderhede oor die konfigurasie-item self. 'n Weergawe-ID en 'n konfigurasie-ID, wat die CI uniek identifiseer. Ander inligting kan 'n MD5Hash insluit wat jou toelaat om ander CI's wat reeds aangeteken is teen dieselfde hulpbron te vergelyk.
* **Attributes**: Dit bevat algemene **eienskapsinligting teen die werklike hulpbron**. Binne hierdie afdeling het ons ook 'n unieke hulpbron-ID, en enige sleutelwaarde-etikette wat met die hulpbron geassosieer word. Die hulpbrontipe word ook gelys. Byvoorbeeld, as dit 'n CI vir 'n EC2-instansie was, kan die hulpbrontipes wat gelys word die netwerk-koppelvlak of die elastiese IP-adres vir daardie EC2-instansie wees.
* **Relationships**: Dit bevat inligting vir enige gekoppelde **verhouding wat die hulpbron mag hê**. So binne hierdie afdeling sal dit 'n duidelike beskrywing toon van enige verhouding met ander hulpbronne wat hierdie hulpbron gehad het. Byvoorbeeld, as die CI vir 'n EC2-instansie was, kan die verhoudingsafdeling die verbinding met 'n VPC saam met die subnet waarin die EC2-instansie geleë is, toon.
* **Current configuration:** Dit sal dieselfde inligting vertoon wat gegenereer sou word as jy 'n beskrywing of lys API-oproep gemaak het deur die AWS CLI. AWS Config gebruik dieselfde API-oproepe om dieselfde inligting te kry.
* **Related events**: Dit hou verband met AWS CloudTrail. Dit sal die **AWS CloudTrail-gebeurtenis-ID vertoon wat verband hou met die verandering wat die skepping van hierdie CI veroorsaak het**. Daar is 'n nuwe CI gemaak vir elke verandering wat teen 'n hulpbron gemaak word. As gevolg hiervan sal verskillende CloudTrail-gebeurtenis-ID's geskep word.

**Configuration History**: Dit is moontlik om die konfigurasiegeskiedenis van hulpbronne te verkry danksy die konfigurasie-items. 'n Konfigurasiegeskiedenis word elke 6 uur afgelewer en bevat alle CI's vir 'n spesifieke hulpbrontipe.

**Configuration Streams**: Konfigurasie-items word na 'n SNS-onderwerp gestuur om die analise van die data moontlik te maak.

**Configuration Snapshots**: Konfigurasie-items word gebruik om 'n tydstip-oorsig van alle ondersteunde hulpbronne te skep.

**S3 word gebruik om** die Konfigurasiegeskiedenis-lêers en enige Konfigurasie-oorsigte van jou data binne 'n enkele emmer te stoor, wat binne die Konfigurasie-opnemer gedefinieer is. As jy verskeie AWS-rekeninge het, wil jy dalk jou konfigurasiegeskiedenis-lêers in dieselfde S3-emmer vir jou primêre rekening saamvoeg. Jy sal egter skryftoegang moet verleen vir hierdie diensbeginsel, config.amazonaws.com, en jou sekondêre rekeninge met skryftoegang tot die S3-emmer in jou primêre rekening.

### Werking

* Wanneer veranderinge gemaak word, byvoorbeeld aan sekuriteitsgroep of emmer-toegangbeheerlys —> stuur dit af as 'n Gebeurtenis wat deur AWS Config opgetel word
* Stoor alles in S3-emmer
* Afhangende van die opstelling, sodra iets verander, kan dit 'n lambda-funksie aktiveer OF 'n lambda-funksie skeduleer om periodiek deur die AWS Config-instellings te kyk
* Lambda voer terug na Config
* As reël gebreek is, aktiveer Config 'n SNS

![](<../../../../.gitbook/assets/image (126).png>)

### Config Rules

Config-reëls is 'n uitstekende manier om jou te help **spesifieke nakomingskontroles en -beheer oor jou hulpbronne af te dwing**, en laat jou toe om 'n ideale implementeringspesifikasie vir elk van jou hulpbrontipes aan te neem. Elke reël **is in wese 'n lambda-funksie** wat, wanneer dit opgeroep word, die hulpbron evalueer en eenvoudige logika uitvoer om die nakomingsresultaat met die reël te bepaal. **Elke keer as 'n verandering gemaak word** aan een van jou ondersteunde hulpbronne, **sal AWS Config die nakoming teen enige config-reëls wat jy in plek het, nagaan**.\
AWS het 'n aantal **voorgedefinieerde reëls** wat onder die sekuriteitsambrella val wat gereed is om te gebruik. Byvoorbeeld, Rds-storage-encrypted. Dit kontroleer of stoor-enkripsie geaktiveer is deur jou RDS-databasisinstansies. Encrypted-volumes. Dit kontroleer of enige EBS-volumes wat 'n gekoppelde toestand het, geënkripteer is.

* **AWS Managed rules**: Stel voorgedefinieerde reëls wat baie beste praktyke dek, so dit is altyd die moeite werd om hierdie reëls eers deur te blaai voordat jy jou eie opstel, aangesien daar 'n kans is dat die reël reeds bestaan.
* **Custom rules**: Jy kan jou eie reëls skep om spesifieke pasgemaakte konfigurasies na te gaan.

Beperking van 50 config-reëls per streek voordat jy AWS moet kontak vir 'n verhoging.\
Nie-nakomende resultate word NIE uitgevee nie.

{% hint style="success" %}
Leer en oefen AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer en oefen GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**intekenplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** 💬 [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repo's.

</details>
{% endhint %}
