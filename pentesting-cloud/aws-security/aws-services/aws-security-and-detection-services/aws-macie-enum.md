# AWS - Macie Enum

{% hint style="success" %}
Jifunze na zoezi la Udukuzi wa AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoezi la Udukuzi wa GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}

# Macie

Amazon Macie inajitokeza kama huduma iliyoundwa kwa **kugundua, kuchambua, na kutambua data** ndani ya akaunti ya AWS. Inatumia **ujifunzaji wa mashine** kufuatilia na kuchambua data kwa usahihi, ikilenga hasa kugundua na kutoa tahadhari dhidi ya shughuli za kawaida au zisizo za kawaida kwa kuchunguza data za matukio ya **cloud trail** na mifano ya tabia ya mtumiaji.

Vipengele muhimu vya Amazon Macie:

1. **Mapitio ya Data ya Moja kwa Moja**: Hutumia ujifunzaji wa mashine kuchunguza data kwa ufanisi wakati hatua mbalimbali zinatokea ndani ya akaunti ya AWS.
2. **Ugunduzi wa Kutoeleweka**: Hutambua shughuli au mifumo ya ufikiaji isiyo ya kawaida, ikitoa tahadhari za kupunguza hatari za ufunuo wa data.
3. **Ufuatiliaji wa Kudumu**: Kiotomatiki hufuatilia na kugundua data mpya kwenye Amazon S3, ikitegemea ujifunzaji wa mashine na akili bandia kuzoea mifumo ya ufikiaji wa data kwa muda.
4. **Uainishaji wa Data na NLP**: Hutumia usindikaji wa lugha asilia (NLP) kuainisha na kufasiri aina tofauti za data, ikitoa alama za hatari kipaumbele cha matokeo.
5. **Ufuatiliaji wa Usalama**: Hutambua data zenye hisia za usalama, ikiwa ni pamoja na funguo za API, funguo za siri, na taarifa za kibinafsi, kusaidia kuzuia uvujaji wa data.

Amazon Macie ni huduma ya **kikanda** na inahitaji jukumu la IAM 'AWSMacieServiceCustomerSetupRole' na AWS CloudTrail iliyoamilishwa kwa utendaji.

## Mfumo wa Tahadhari

Macie inagawa tahadhari katika makundi yaliyopangwa kama:

- Upatikanaji uliofanywa kuwa bila utambulisho
- Uzingatiaji wa data
- Upotezaji wa siri
- Kuongezeka kwa mamlaka
- Ransomware
- Upatikanaji wenye shaka, n.k.

Tahadhari hizi hutoa maelezo ya kina na uchambuzi wa matokeo kwa majibu na ufumbuzi wenye ufanisi.

## Vipengele vya Dashibodi

Dashibodi inagawa data katika sehemu tofauti, ikiwa ni pamoja na:

- Vitu vya S3 (kwa kipindi cha wakati, ACL, PII)
- Matukio/watumiaji wa CloudTrail wenye hatari kubwa
- Maeneo ya Shughuli
- Aina za utambulisho wa mtumiaji wa CloudTrail, na zaidi.

## Uainishaji wa Mtumiaji

Watumiaji wanapangwa katika safu kulingana na kiwango cha hatari cha simu zao za API:

- **Platinum**: Simu za API zenye hatari kubwa, mara nyingi zenye mamlaka ya msimamizi.
- **Gold**: Simu za API zinazohusiana na miundombinu.
- **Silver**: Simu za API zenye hatari ya wastani.
- **Bronze**: Simu za API zenye hatari ndogo.

## Aina za Utambulisho

Aina za utambulisho ni pamoja na Mzizi, Mtumiaji wa IAM, Jukumu lililodhaniwa, Mtumiaji aliyejumuishwa, Akaunti ya AWS, na Huduma ya AWS, ikionyesha chanzo cha maombi.

## Uainishaji wa Data

Uainishaji wa data unajumuisha:

- Aina ya Yaliyomo: Kulingana na aina ya yaliyomo iliyogunduliwa.
- Kifungu cha Faili: Kulingana na kifungu cha faili.
- Mada: Imepangwa kwa maneno muhimu ndani ya faili.
- Regex: Imepangwa kulingana na mifumo maalum ya regex.

Hatari kubwa kati ya vikundi hivi hupima kiwango cha hatari ya mwisho ya faili.

## Utafiti na Uchambuzi

Kazi ya utafiti ya Amazon Macie inaruhusu utaftaji wa desturi kote kwenye data zote za Macie kwa uchambuzi wa kina. Vichujio ni pamoja na Data ya CloudTrail, mali za Bakuli la S3, na Vitu vya S3. Zaidi ya hayo, inasaidia kuwaalika akaunti zingine kushiriki Amazon Macie, ikirahisisha usimamizi wa data wa ushirikiano na ufuatiliaji wa usalama. 

## Urambazaji
```
# Get buckets
aws macie2 describe-buckets

# Org config
aws macie2 describe-organization-configuration

# Get admin account (if any)
aws macie2 get-administrator-account
aws macie2 list-organization-admin-accounts # Run from the management account of the org

# Get macie account members (run this form the admin account)
aws macie2 list-members

# Check if automated sensitive data discovey is enabled
aws macie2 get-automated-discovery-configuration

# Get findings
aws macie2 list-findings
aws macie2 get-findings --finding-ids <ids>
aws macie2 list-findings-filters
aws macie2 get -findings-filters --id <id>

# Get allow lists
aws macie2 list-allow-lists
aws macie2 get-allow-list --id <id>

# Get different info
aws macie2 list-classification-jobs
aws macie2 list-classification-scopes
aws macie2 list-custom-data-identifiers
```
### Baada ya Kutekeleza Shambulizi

{% hint style="success" %}
Kutoka mtazamo wa mshambuliaji, huduma hii haikubuniwi kugundua mshambuliaji, bali kugundua habari nyeti katika faili zilizohifadhiwa. Kwa hivyo, huduma hii inaweza **kusaidia mshambuliaji kupata habari nyeti** ndani ya makasha.\
Hata hivyo, labda mshambuliaji angekuwa na nia pia ya kuivuruga ili kuzuia mwathiriwa kupata tahadhari na kuiba habari hiyo kwa urahisi zaidi.
{% endhint %}

TODO: PRs are welcome!

# Marejeo
* [https://cloudacademy.com/blog/introducing-aws-security-hub/](https://cloudacademy.com/blog/introducing-aws-security-hub/)

{% hint style="success" %}
Jifunze na zoezi la Kuvamia AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoezi la Kuvamia GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
