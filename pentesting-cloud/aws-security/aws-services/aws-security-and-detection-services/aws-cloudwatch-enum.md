# CloudWatch

**CloudWatch** मॉनिटरिंग और ऑपरेशनल **डेटा** को लॉग/मीट्रिक्स/इवेंट्स के रूप में **कलेक्ट करता है** जो AWS संसाधनों, एप्लिकेशन्स और सेवाओं का **एकीकृत दृश्य** प्रदान करता है।\
CloudWatch लॉग इवेंट के प्रत्येक लॉग लाइन पर **256KB की सीमा** होती है।\
इसमें **हाई रेजोल्यूशन अलार्म** सेट किया जा सकता है, **लॉग्स** और **मीट्रिक्स** को साइड बाय साइड विज़ुअलाइज़ किया जा सकता है, स्वचालित क्रियाएँ ली जा सकती हैं, समस्याओं का समाधान किया जा सकता है, और अनुप्रयोगों को अपटिमाइज़ करने के लिए इंसाइट्स खोजने में मदद करता है।

आप उदाहरण के लिए CloudTrail से लॉग्स की मॉनिटरिंग कर सकते हैं। इवेंट्स जो मॉनिटर होते हैं:

* सुरक्षा समूहों और NACLs में परिवर्तन
* EC2 इंस्टेंसेस को शुरू, बंद, रीबूट और टर्मिनेट करना
* IAM और S3 में सुरक्षा नीतियों में परिवर्तन
* AWS प्रबंधन कंसोल में विफल लॉगिन प्रयास
* विफल अधिकृति के परिणामस्वरूप API कॉल्स
* क्लाउडवॉच में खोजने के लिए फ़िल्टर: [https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html)

## मुख्य अवधारणाएँ

### नेमस्पेस

नेमस्पेस एक CloudWatch मीट्रिक्स के लिए एक कंटेनर है। यह मीट्रिक्स को वर्गीकृत और अलग करने में मदद करता है, जिससे उन्हें प्रबंधित और विश्लेषित करना आसान होता है।

- **उदाहरण**: EC2 संबंधित मीट्रिक्स के लिए AWS/EC2, RDS मीट्रिक्स के लिए AWS/RDS।

### मीट्रिक्स

मीट्रिक्स समय के साथ एकत्रित डेटा बिंदु हैं जो AWS संसाधनों के प्रदर्शन या उपयोग को प्रतिनिधित करते हैं। मीट्रिक्स AWS सेवाओं, कस्टम एप्लिकेशन्स या थर्ड-पार्टी इंटीग्रेशन से एकत्रित की जा सकती हैं।

- **उदाहरण**: CPUUtilization, NetworkIn, DiskReadOps।

### डायमेंशन्स

डायमेंशन्स मीट्रिक्स का हिस्सा होने वाले कुंजी-मूल्य जोड़े हैं। ये मीट्रिक्स को अद्वितीय रूप से पहचानने और अतिरिक्त संदर्भ प्रदान करने में मदद करते हैं, 30 सबसे अधिक डायमेंशन्स एक मीट्रिक्स के साथ संबद्ध किए जा सकते हैं। डायमेंशन्स यह भी संदर्भ के आधार पर मीट्रिक्स को फ़िल्टर और समेकित करने की अनुमति देते हैं।

- **उदाहरण**: EC2 इंस्टेंसेस के लिए, डायमेंशन्स में InstanceId, InstanceType, और AvailabilityZone शामिल हो सकते हैं।

### सांख्यिकी

सांख्यिकी मीट्रिक्स डेटा पर किए गए गणितीय गणनाएँ हैं जो समय के अवलोकन के लिए इसे सारांशित करने में मदद करती हैं। सामान्य सांख्यिकी में औसत, योग, न्यूनतम, अधिकतम, और सैंपल काउंट शामिल हैं।

- **उदाहरण**: एक घंटे की अवधि के दौरान औसत CPU उपयोग की गणना करना।

### इकाइयाँ

इकाइयाँ मीट्रिक्स के साथ जुड़े मापन प्रकार हैं। इकाइयाँ मीट्रिक्स डेटा को संदर्भ और अर्थ प्रदान करने में मदद करती हैं। सामान्य इकाइयाँ में प्रतिशत, बाइट्स, सेकंड्स, काउंट शामिल हैं।

- **उदाहरण**: CPUUtilization प्रतिशत में मापा जा सकता है, जबकि NetworkIn बाइट्स में मापा जा सकता है।

## CloudWatch विशेषताएँ

### डैशबोर्ड

**CloudWatch डैशबोर्ड्स** आपको अपने AWS CloudWatch मीट्रिक्स के **कस्टमाइज़ेबल दृश्य** प्रदान करते हैं। डैशबोर्ड बनाने और कॉन्फ़िगर करने की संभावना है ताकि आप डेटा को विज़ुअलाइज़ कर सकें और एक ही दृश्य में संसाधनों की मॉनिटरिंग कर सकें, विभिन्न AWS सेवाओं से विभिन्न मीट्रिक्स को मिलाकर।

**मुख्य विशेषताएँ**:

- **विजेट्स**: डैशबोर्ड के निर्माण खंड, जिसमें ग्राफ़, पाठ, अलार्म, और अधिक शामिल हैं।
- **कस्टमाइज़ेशन**: लेआउट और सामग्री को विशिष्ट मॉनिटरिंग आवश्यकताओं के अनुसार कस्टमाइज़ किया जा सकता है।

**उदाहरण उपयोग मामला**:

- एक ही डैशबोर्ड जो आपके पूरे AWS परिवेश के लिए मुख्य मीट्रिक्स दिखाता है, जिसमें EC2 इंस्टेंसेस, RDS डेटाबेसेस, और S3 बकेट्स शामिल हैं।

### मीट्रिक स्ट्रीम और मीट्रिक डेटा

AWS CloudWatch में **मीट्रिक स्ट्रीम्स** आपको अपनी पसंद के गंतव्य में CloudWatch मीट्रिक्स को नजदीकी समय में लगातार स्ट्रीम करने की संभावना प्रदान करते हैं। यह उन्नत मॉनिटरिंग, विश्लेषण, और कस्टम डैशबोर्ड के लिए विशेष रूप से उपयोगी है जो AWS के बाहर के उपकरणों का उपयोग करते हैं।

मीट्रिक स्ट्रीम्स के भीतर **मीट्रिक डेटा** उन वास्तविक मापनों या डेटा बिंदुओं को संदर्भित करते हैं जो AWS संसाधनों के लिए CPU उपयोग, मेमोरी उपयोग आदि की तुलना करते हैं।

**उदाहरण उपयोग मामला**:

- तीसरे पक्ष की मॉनिटरिंग सेवा के लिए वास्तविक समय में मीट्रिक्स भेजना।
- लंबे समय तक संग्रहण और अनुपालन के लिए अमेज़न S3 बकेट में मीट्रिक्स को संग्रहित करना।

### अलार्म

**CloudWatch अलार्म्स** आपके मीट्रिक्स की मॉनिटरिंग करते हैं और पूर्वनिर्धारित सीमाओं पर आधारित क्रियाएँ करते हैं। जब कोई मीट्रिक्स एक सीमा को उल्लंघन करती है, तो अलार्म एसएनएस के माध्यम से सूचनाएँ भेज सकता है, ऑटो-स्केलिंग नीति को ट्रिगर कर सकता है, या AWS लैम्बडा फ़ंक्शन को चला सकता है।

**मुख्य घटक**:

- **सीमा**: जिस पर अलार्म ट्रिगर होता है।
- **मूल्यांकन अवधियाँ**: डेटा का मूल्यांकन किया जाने वाले अवधियों की संख्या।
- **अलार्म के डेटापॉइंट्स**: अलार्म को ट्रिगर करने के लिए एक सीमा तक पहुंचे हुए अवधियों की संख्या
- **क्रियाएँ**: जब एक अलार्म स्थिति ट्रिगर होती है, तो क्या होता है (उदाहरण के लिए, SNS के माध्य
### CloudWatch मॉनिटरिंग और घटनाएँ

CloudWatch **मूल** डेटा को **हर 5 मिनट** में संग्रहित करता है (विस्तृत वाला यह **हर 1 मिनट** करता है)। संग्रहण के बाद, यह **अलार्म की सीमाएँ जांचता है** यदि एक को ट्रिगर करने की आवश्यकता हो।\
उस स्थिति में, CLoudWatch एक घटना भेजने और कुछ स्वचालित क्रियाएँ करने के लिए तैयार हो सकता है (AWS लैम्बडा फंक्शन, SNS विषय, SQS कतार, Kinesis स्ट्रीम्स)

### एजेंट स्थापना

आप अपनी मशीनों/कंटेनर में एजेंट स्थापित कर सकते हैं ताकि लॉग्स को स्वचालित रूप से CloudWatch में भेजा जा सके।

* **एक** रोल बनाएं और उसे अनुमतियों के साथ इंस्टेंस से डेटा संग्रहित करने की अनुमति देने के लिए CloudWatch को AWS सिस्टम मैनेजर SSM के साथ बातचीत करने की अनुमति देने वाले इंस्टेंस के साथ जोड़ें (CloudWatchAgentAdminPolicy और AmazonEC2RoleforSSM)
* EC2 इंस्टेंस पर एजेंट डाउनलोड और स्थापित करें ([https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip](https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip)). आप इसे EC2 के अंदर से डाउनलोड कर सकते हैं या AWS सिस्टम मैनेजर का उपयोग करके AWS-ConfigureAWSPackage पैकेज का चयन करके स्वचालित रूप से स्थापित कर सकते हैं
* CloudWatch एजेंट को **कॉन्फ़िगर** और **प्रारंभ** करें

एक लॉग समूह में कई स्ट्रीम होती हैं। एक स्ट्रीम में कई घटनाएँ होती हैं। और प्रत्येक स्ट्रीम के अंदर, घटनाएँ क्रम में होने की गारंटी देती हैं।

## गणना
```bash
# Dashboards #

## Returns a list of the dashboards of your account
aws cloudwatch list-dashboards

## Retrieves the details of the specified dashboard
aws cloudwatch get-dashboard --dashboard-name <value>

# Metrics #

## Returns a list of the specified metric
aws cloudwatch list-metrics [--namespace <value>] [--metric-name <value>] [--dimensions <value>] [--include-linked-accounts | --no-include-linked-accounts]

## Retrieves metric data (this operation can include a CloudWatch Metrics Insights query, and one or more metric math functions)
aws cloudwatch get-metric-data --metric-data-queries <value> --start-time <value> --end-time <value>

## Retrieves statistics for the specified metric and namespace over a range of time
aws cloudwatch get-metric-statistics --namespace <value> --metric-name <value> [--dimensions <value>] --start-time <value> --end-time <value> --period <value>

## Returns a list of the metric streams of your account
aws cloudwatch list-metric-streams

## Retrieves information about the specified metric stream
aws cloudwatch get-metric-stream --name <value>

## Retrieve snapshots of the specified metric widgets
aws cloudwatch get-metric-widget-image --metric-widget <value>

# Alarms #

## Retrieves the specified alarm
aws cloudwatch describe-alarms [--alarm-names <value>] [--alarm-name-prefix <value>] [--alarm-types <value>] [--state-value <value>]

## Retrieves the alarms history, even for deleted alarms
aws cloudwatch describe-alarm-history [--alarm-name <value>] [--alarm-types <value>] [--history-item-type <ConfigurationUpdate | StateUpdate | Action>] [--start-date <value>] [--end-date <value>]

## Retrieves standard alarms based on the specified metric
aws cloudwatch escribe-alarms-for-metric --metric-name <value> --namespace <value> [--dimensions <value>]

# Anomaly Detections #

## Lists the anomaly detection models that you have created in your account
aws cloudwatch describe-anomaly-detectors [--namespace <value>] [--metric-name <value>] [--dimensions <value>]

## Lists all the Contributor Insight rules in your account
aws cloudwatch describe-insight-rules

## Retrieves the data collected over a time range for a given Contributor Insight rule
aws cloudwatch get-insight-rule-report --rule-name <value> --start-time <value> --end-time <value> --period <value>

## Lists managed Contributor Insights rules in your account for a specified resource
aws cloudwatch list-managed-insight-rules --resource-arn <value>

# Tags #

## Lists the tags associated with the specified CloudWatch resources
aws cloudwatch list-tags-for-resource --resource-arn <value>

# CloudWatch Logs #
aws logs tail "<log_group_name>" --followaws logs get-log-events --log-group-name "<log_group_name>" --log-stream-name "<log_stream_name>" --output text > <output_file>

# CloudWatch Events #
aws events list-rules
aws events describe-rule --name <name>aws events list-targets-by-rule --rule <name>aws events list-archives
aws events describe-archive --archive-name <name>aws events list-connections
aws events describe-connection --name <name>aws events list-endpoints
aws events describe-endpoint --name <name>aws events list-event-sources
aws events describe-event-source --name <name>aws events list-replays
aws events list-api-destinations
aws events list-event-buses
```
## पोस्ट-एक्सप्लोइटेशन / बायपास

### **`cloudwatch:DeleteAlarms`,`cloudwatch:PutMetricAlarm` , `cloudwatch:PutCompositeAlarm`**

इस अनुमति के साथ एक हमलावर संगठन की मॉनिटरिंग और अलर्ट ढाल बहुत अधिक कमजोर कर सकता है। मौजूदा अलार्म हटाकर, एक हमलावर महत्वपूर्ण अलर्ट को बंद कर सकता है जो प्रशासकों को महत्वपूर्ण प्रदर्शन समस्याओं, सुरक्षा उल्लंघन, या परिचालन विफलताओं की सूचना देते हैं। इसके अतिरिक्त, मेट्रिक अलर्म बनाने या संशोधित करके, हमलावर भी प्रशासकों को गलत अलर्टों से गुमराह कर सकता है या वैध अलर्म को चुप कर सकता है, जाहिराती गतिविधियों को मास्क करके और वास्तविक घटनाओं के समय पर प्रतिक्रिया नहीं देने के कारण दुरुपयोग को रोकता है।

इसके अतिरिक्त, **`cloudwatch:PutCompositeAlarm`** अनुमति के साथ, एक हमलावर को एक संयुक्त अलर्मों के लूप या चक्र बनाने की क्षमता होगी, जहां संयुक्त अलर्म A संयुक्त अलर्म B पर निर्भर करता है, और संयुक्त अलर्म B भी संयुक्त अलर्म A पर निर्भर करता है। इस स्थिति में, जो संयुक्त अलर्म आप नष्ट करना चाहते हैं, उस पर निर्भर कोई संयुक्त अलर्म हमेशा होता है क्योंकि उस अलर्म पर निर्भर कोई संयुक्त अलर्म होता है जिसे आप नष्ट करना चाहते हैं।
```bash
aws cloudwatch put-metric-alarm --cli-input-json <value> | --alarm-name <value> --comparison-operator <value> --evaluation-periods <value> [--datapoints-to-alarm <value>] [--threshold <value>] [--alarm-description <value>] [--alarm-actions <value>] [--metric-name <value>] [--namespace <value>] [--statistic <value>] [--dimensions <value>] [--period <value>]
aws cloudwatch delete-alarms --alarm-names <value>
aws cloudwatch put-composite-alarm --alarm-name <value> --alarm-rule <value> [--no-actions-enabled | --actions-enabled [--alarm-actions <value>] [--insufficient-data-actions <value>] [--ok-actions <value>] ]
```
निम्नलिखित उदाहरण में दिखाया गया है कि कैसे एक मीट्रिक अलार्म को अप्रभावी बनाया जा सकता है:

- यह मीट्रिक अलार्म एक विशिष्ट EC2 इंस्टेंस के औसत CPU उपयोग का मॉनिटर करता है, मीट्रिक का मूल्यांकन हर 300 सेकंड में होता है और 6 मूल्यांकन अवधियों (कुल 30 मिनट) की आवश्यकता होती है। यदि औसत CPU उपयोग कम से कम 4 अवधियों के लिए 60% से अधिक होता है, तो अलार्म ट्रिगर होगा और निर्दिष्ट SNS विषय पर एक सूचना भेजेगा।
- थ्रेशोल्ड को 99% से अधिक सेट करके, पीरियड को 10 सेकंड पर सेट करके, मूल्यांकन अवधियों को 8640 पर सेट करके (क्योंकि 8640 अवधियां 10 सेकंड के बराबर 1 दिन होती है), और डेटापॉइंट्स को अलार्म को भी 8640 पर सेट करके, इसे आवश्यक होगा कि CPU उपयोग पूरे 24 घंटे के दौरान हर 10 सेकंड में 99% से अधिक होना चाहिए ताकि अलार्म ट्रिगर हो।

{% tabs %}
{% tab title="मूल मीट्रिक अलार्म" %}
```json
{
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-01234567890123456"
}
],
"AlarmActions": [
"arn:aws:sns:us-east-1:123456789012:example_sns"
],
"ComparisonOperator": "GreaterThanThreshold",
"DatapointsToAlarm": 4,
"EvaluationPeriods": 6,
"Period": 300,
"Statistic": "Average",
"Threshold": 60,
"AlarmDescription": "CPU Utilization of i-01234567890123456 over 60%",
"AlarmName": "EC2 instance i-01234567890123456 CPU Utilization"
}
```
{% endtab %}
{% tab title="संशोधित मैट्रिक अलार्म" %}
```json
{
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-0645d6d414dadf9f8"
}
],
"AlarmActions": [],
"ComparisonOperator": "GreaterThanThreshold",
"DatapointsToAlarm": 8640,
"EvaluationPeriods": 8640,
"Period": 10,
"Statistic": "Average",
"Threshold": 99,
"AlarmDescription": "CPU Utilization of i-01234567890123456 with 60% as threshold",
"AlarmName": "Instance i-0645d6d414dadf9f8 CPU Utilization"
}

```
{% endtab %}
{% endtabs %}
**संभावित प्रभाव**: महत्वपूर्ण घटनाओं के लिए सूचनाएं की कमी, संभावित अनजाने मुद्दे, गलत चेतावनियाँ, वास्तविक घटनाओं के छूट और वास्तविक घटनाओं के छूटने की संभावना।

### **`cloudwatch:DeleteAlarmActions`, `cloudwatch:EnableAlarmActions` , `cloudwatch:SetAlarmState`**

अलार्म क्रियाएँ हटाकर, हमलावर महत्वपूर्ण चेतावनियों और स्वचालित प्रतिक्रियाएं रोक सकता है जब एक अलार्म स्थिति तक पहुंच जाती है, जैसे प्रशासकों को सूचित करना या ऑटो-स्केलिंग गतिविधियों को प्रेरित करना। अनुपयुक्त रूप से अलार्म क्रियाएँ सक्षम करना या पुनः सक्षम करना भी अप्रत्याशित व्यवहारों में ले जा सकता है, पहले से अक्षम क्रियाएँ पुनः सक्रिय करके या किस क्रियाएँ को प्रेरित किया जाता है, जो घटना प्रतिक्रिया में भ्रम और भटकाव का कारण बन सकता है।

इसके अतिरिक्त, जिसके पास अनुमति है, वह अलार्म स्थितियों को मानिपुलेट कर सकता है, झूठे अलार्म बना सकता है ताकि प्रशासकों को भटकाए और भ्रमित करे, या वास्तविक अलार्म को चुप कर सकता है ताकि चल रही दुराचारी गतिविधियों या महत्वपूर्ण सिस्टम विफलताओं को छुपा सके।

- यदि आप **`SetAlarmState`** का उपयोग एक संयोजित अलार्म पर करते हैं, तो संयोजित अलार्म का वास्तविक स्थिति मान्यता प्राप्त नहीं है। यह उसकी वास्तविक स्थिति में केवल तब लौटता है जब भी उसके किसी भी बच्चों के अलार्म स्थिति बदल जाती है। यह उसकी विन्यास को अपडेट करने पर भी पुनर्मूल्यांकन किया जाता है।
```bash
aws cloudwatch disable-alarm-actions --alarm-names <value>
aws cloudwatch enable-alarm-actions --alarm-names <value>
aws cloudwatch set-alarm-state --alarm-name <value> --state-value <OK | ALARM | INSUFFICIENT_DATA> --state-reason <value> [--state-reason-data <value>]
```
**संभावित प्रभाव**: महत्वपूर्ण घटनाओं के लिए सूचनाएं की कमी, संभावित अनजाने मुद्दे, गलत अलर्ट, वास्तविक घटनाओं के छूटने की संभावना।

### **`cloudwatch:DeleteAnomalyDetector`, `cloudwatch:PutAnomalyDetector`**

एक हमलावर असामान्य पैटर्न या अनियमितताओं की खोज और प्रतिक्रिया की क्षमता को कमजोर कर सकता है। मौजूदा अनियमितता डिटेक्टर को हटाकर, एक हमलावर महत्वपूर्ण अलर्टिंग तंत्र को निषेधित कर सकता है; और उन्हें बनाकर या संशोधित करके, यह या तो गलत रूप से कॉन्फ़िगर कर सकता है या फिर निगरानी को भ्रमित या अधिक करने के लिए झूल सकता है।
```bash
aws cloudwatch delete-anomaly-detector [--cli-input-json <value> | --namespace <value> --metric-name <value> --dimensions <value> --stat <value>]
aws cloudwatch put-anomaly-detector [--cli-input-json <value> | --namespace <value> --metric-name <value> --dimensions <value> --stat <value> --configuration <value> --metric-characteristics <value>]
```
निम्नलिखित उदाहरण में दिखाया गया है कि कैसे एक मीट्रिक विसंगति डिटेक्टर को अप्रभावी बनाया जा सकता है। यह मीट्रिक विसंगति डिटेक्टर एक विशिष्ट EC2 इंस्टेंस के औसत CPU उपयोग का मॉनिटर करता है, और केवल "ExcludedTimeRanges" पैरामीटर को वांछित समय सीमा के साथ जोड़ने से, यह पर्याप्त होगा कि विसंगति डिटेक्टर उस अवधि के दौरान किसी भी प्रासंगिक डेटा का विश्लेषण या चेतावनी न दें।
```json
{
"SingleMetricAnomalyDetector": {
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Stat": "Average",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-0123456789abcdefg"
}
]
}
}
```
{% endtab %}
{% tab title="संशोधित मैट्रिक विसंगति डिटेक्टर" %}
```json
{
"SingleMetricAnomalyDetector": {
"Namespace": "AWS/EC2",
"MetricName": "CPUUtilization",
"Stat": "Average",
"Dimensions": [
{
"Name": "InstanceId",
"Value": "i-0123456789abcdefg"
}
]
},
"Configuration": {
"ExcludedTimeRanges": [
{
"StartTime": "2023-01-01T00:00:00Z",
"EndTime": "2053-01-01T23:59:59Z"
}
],
"Timezone": "Europe/Madrid"
}
}
```
**संभावित प्रभाव**: असामान्य पैटर्न या सुरक्षा खतरों के पता लगाने में सीधा प्रभाव।

### **`cloudwatch:DeleteDashboards`, `cloudwatch:PutDashboard`**

एक हमलावर संगठन के मॉनिटरिंग और विज़ुअलाइज़ेशन क्षमताओं को क्षति पहुंचा सकता है जब वह उसके डैशबोर्ड बनाता, संशोधित करता या हटाता है। यह अनुमतियाँ महत्वपूर्ण दृश्यता को हटाने के लिए उपयुक्त हो सकती हैं, सिस्टमों के प्रदर्शन और स्वास्थ्य में बदलाव करने के लिए डैशबोर्ड को गलत डेटा प्रदर्शित करने या दुर्भाग्यपूर्ण गतिविधियों को छुपाने के लिए इस्तेमाल किया जा सकता है।
```bash
aws cloudwatch delete-dashboards --dashboard-names <value>
aws cloudwatch put-dashboard --dashboard-name <value> --dashboard-body <value>
```
**संभावित प्रभाव**: मॉनिटरिंग दृश्यता का हानि और भ्रांतिकारक जानकारी।

### **`cloudwatch:DeleteInsightRules`, `cloudwatch:PutInsightRule` ,`cloudwatch:PutManagedInsightRule`**

इंसाइट नियम अनैमलीज़ को पहचानने, प्रदर्शन को अनुकूलित करने और संसाधनों को प्रबंधित करने के लिए उपयोग किए जाते हैं। मौजूदा इंसाइट नियमों को हटाकर, एक हमलावर महत्वपूर्ण मॉनिटरिंग क्षमताओं को हटा सकता है, प्रदर्शन समस्याओं और सुरक्षा खतरों के लिए सिस्टम को अंधा छोड़ देते हैं। इसके अतिरिक्त, एक हमलावर भ्रांतिकारक डेटा उत्पन्न करने या संशोधित करने के लिए इंसाइट नियम बना सकता है, जिससे गलत नैदानिकी और संचालन टीम से अनुचित प्रतिक्रियाएं हो सकती हैं।
```bash
aws cloudwatch delete-insight-rules --rule-names <value>
aws cloudwatch put-insight-rule --rule-name <value> --rule-definition <value> [--rule-state <value>]
aws cloudwatch put-managed-insight-rules --managed-rules <value>
```
**संभावित प्रभाव**: प्रदर्शन समस्याओं और विसंगतियों का पता लगाना और उसका संयोजन करना कठिन हो सकता है, गलत निर्णय लेना और संभावित रूप से दुर्भाग्यपूर्ण गतिविधियों या सिस्टम विफलताओं को छुपाना।

### **`cloudwatch:DisableInsightRules`, `cloudwatch:EnableInsightRules`**

महत्वपूर्ण इंसाइट नियमों को अक्षम करके, एक हमलावर संगठन को मुख्य प्रदर्शन और सुरक्षा मैट्रिक्स से अंधा बना सकता है। उल्टा, गुमराहाना नियमों को सक्षम या विनामूलक रूप से कॉन्फ़िगर करके, यह संभावना है कि गलत डेटा उत्पन्न करना, शोर बनाना, या दुर्भाग्यपूर्ण गतिविधि को छुपाना संभव हो।
```bash
aws cloudwatch disable-insight-rules --rule-names <value>
aws cloudwatch enable-insight-rules --rule-names <value>
```
**संभावित प्रभाव**: ऑपरेशन्स टीम के बीच भ्रांति, वास्तविक मुद्दों के लिए विलंबित प्रतिक्रियाएँ और गलत अलर्टों पर आधारित अनावश्यक कार्रवाई में विलम्ब।

### **`cloudwatch:DeleteMetricStream` , `cloudwatch:PutMetricStream` , `cloudwatch:PutMetricData`**

एक हमलावर के पास **`cloudwatch:DeleteMetricStream`** , **`cloudwatch:PutMetricStream`** अनुमतियाँ होने पर मेट्रिक डेटा स्ट्रीम बनाने और हटाने की क्षमता होगी, सुरक्षा, मॉनिटरिंग और डेटा अखंडता को खतरे में डालते हुए:

- **दुर्भाग्यपूर्ण स्ट्रीम बनाना**: संवेदनशील डेटा को अनधिकृत स्थानों पर भेजने के लिए मेट्रिक स्ट्रीम बनाएं।
- **संसाधन में दखल**: अत्यधिक डेटा के साथ नई मेट्रिक स्ट्रीम का निर्माण गलत अलर्ट्स का कारण बन सकता है, जो सही मुद्दों को मास्क कर सकता है।
- **मॉनिटरिंग विघटन**: मेट्रिक स्ट्रीम को हटाकर, हमलावर मॉनिटरिंग डेटा की निरंतर प्रवाह को विघटित करेंगे। इस तरह, उनके दुर्भाग्यपूर्ण गतिविधियाँ प्रभावी ढंग से छिपी रहेंगी।

उसी प्रकार, **`cloudwatch:PutMetricData`** अनुमति के साथ, मेट्रिक स्ट्रीम में डेटा जोड़ना संभव होगा। यह अनुचित डेटा की मात्रा के कारण एक डीओएस हो सकता है, जिससे यह पूरी तरह से अनुपयोगी हो जाए।
```bash
aws cloudwatch delete-metric-stream --name <value>
aws cloudwatch put-metric-stream --name <value> [--include-filters <value>] [--exclude-filters <value>] --firehose-arn <value> --role-arn <value> --output-format <value>
aws cloudwatch put-metric-data --namespace <value> [--metric-data <value>] [--metric-name <value>] [--timestamp <value>] [--unit <value>] [--value <value>] [--dimensions <value>]
```
एक दिए गए EC2 इंस्टेंस पर CPU उपयोग का 70% का डेटा जोड़ने का उदाहरण:
```bash
aws cloudwatch put-metric-data --namespace "AWS/EC2" --metric-name "CPUUtilization" --value 70 --unit "Percent" --dimensions "InstanceId=i-0123456789abcdefg"
```
**संभावित प्रभाव**: मॉनिटरिंग डेटा के फ्लो में विघटन, अनॉमली और घटनाओं के पता लगाने में प्रभावित होना, संसाधन परिवर्तन और अत्यधिक मीट्रिक स्ट्रीम के निर्माण के कारण लागत बढ़ना।

### **`cloudwatch:StopMetricStreams`, `cloudwatch:StartMetricStreams`**

एक हमलावर प्रभावित मीट्रिक डेटा स्ट्रीम के फ्लो को नियंत्रित करेगा (यदि कोई संसाधन प्रतिबंध नहीं है तो हर डेटा स्ट्रीम)। अनुमति के साथ **`cloudwatch:StopMetricStreams`**, हमलावर महत्वपूर्ण मीट्रिक स्ट्रीम को बंद करके अपनी दुराचारी गतिविधियों को छुपा सकता है।
```bash
aws cloudwatch stop-metric-streams --names <value>
aws cloudwatch start-metric-streams --names <value>
```
**संभावित प्रभाव**: मॉनिटरिंग डेटा के फ्लो में विघटन, अनैमलीज और घटनाओं के पता लगाने में प्रभावित हो सकता है।

### **`cloudwatch:TagResource`, `cloudwatch:UntagResource`**

एक हमलावर को क्लाउडवॉच संसाधनों से टैग जोड़ने, संशोधित करने, या हटाने की क्षमता होगी (वर्तमान में केवल अलार्म और योगदानकर्ता इंसाइट्स नियम।) इससे आपके संगठन के एक्सेस नियंत्रण नीतियों पर आधारित अधिकार में विघटन हो सकता है।
```bash
aws cloudwatch tag-resource --resource-arn <value> --tags <value>
aws cloudwatch untag-resource --resource-arn <value> --tag-keys <value>
```
**संभावित प्रभाव**: टैग-आधारित पहुंच नियंत्रण नीतियों का विघटन।

## संदर्भ

* [https://cloudsecdocs.com/aws/services/logging/cloudwatch/](https://cloudsecdocs.com/aws/services/logging/cloudwatch/#general-info)
* [https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazoncloudwatch.html](https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazoncloudwatch.html)
* [https://docs.aws.amazon.com/es_es/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Metric](https://docs.aws.amazon.com/es_es/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Metric)

<details>

<summary><strong>जानें AWS हैकिंग को शून्य से हीरो तक</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks का समर्थन करने के अन्य तरीके:

* यदि आप अपनी **कंपनी का विज्ञापन HackTricks में देखना चाहते हैं** या **HackTricks को PDF में डाउनलोड करना चाहते हैं** तो [**सब्सक्रिप्शन प्लान्स**](https://github.com/sponsors/carlospolop) देखें!
* [**आधिकारिक PEASS & HackTricks स्वैग**](https://peass.creator-spring.com) प्राप्त करें
* हमारे विशेष [**NFTs**](https://opensea.io/collection/the-peass-family) कलेक्शन, [**The PEASS Family**](https://opensea.io/collection/the-peass-family) खोजें
* **जुड़ें** 💬 [**डिस्कॉर्ड समूह**](https://discord.gg/hRep4RUj7f) या [**टेलीग्राम समूह**](https://t.me/peass) में या हमें **ट्विटर** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)** पर फॉलो** करें।
* **हैकिंग ट्रिक्स साझा करें, PRs सबमिट करके** [**HackTricks**](https://github.com/carlospolop/hacktricks) और [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos में।

</details>
