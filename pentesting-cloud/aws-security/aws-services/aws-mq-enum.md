# AWS - MQ Enum

{% hint style="success" %}
Leer & oefen AWS Hack:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

## Amazon MQ

### Inleiding tot Boodskapmakelaars
**Boodskapmakelaars** dien as bemiddelaars, wat kommunikasie tussen verskillende sagtewarestelsels fasiliteer, wat op uiteenlopende platforms gebou kan wees en in verskillende tale geprogrammeer kan wees. **Amazon MQ** vereenvoudig die implementering, werking en instandhouding van boodskapmakelaars op AWS. Dit bied bestuurde dienste vir **Apache ActiveMQ** en **RabbitMQ**, wat sorg vir naadlose voorsiening en outomatiese sagtewareweergawe-opdaterings.

### AWS - RabbitMQ
RabbitMQ is 'n prominente **boodskap-queueing sagteware**, ook bekend as 'n _boodskapmakelaar_ of _queue-bestuurder_. Dit is fundamenteel 'n stelsel waar toue gekonfigureer word. Aansoeke koppel met hierdie toue om **boodskappe te stuur en te ontvang**. Boodskappe in hierdie konteks kan 'n verskeidenheid inligting dra, wat strek van bevele om prosesse op ander aansoeke te begin (moontlik op verskillende bedieners) tot eenvoudige teksboodskappe. Die boodskappe word deur die tou-bestuurdersagteware aangehou totdat hulle deur 'n ontvangende aansoek opgehaal en verwerk word. AWS bied 'n maklike oplossing vir die gasheer en bestuur van RabbitMQ-bedieners.

### AWS - ActiveMQ
Apache ActiveMQ¬Æ is 'n voorste oopbron, Java-gebaseerde **boodskapmakelaar** wat bekend is vir sy veelsydigheid. Dit ondersteun verskeie bedryfsstandaard protokolle, wat omvattende klientverenigbaarheid bied oor 'n wye verskeidenheid van tale en platforms. Gebruikers kan:

- Koppel met kli√´nte wat in JavaScript, C, C++, Python, .Net, en meer geskryf is.
- Die **AMQP**-protokol benut om aansoeke van verskillende platforms te integreer.
- **STOMP** oor websockets gebruik vir webtoepassing boodskapuitruilings.
- IoT-toestelle bestuur met **MQTT**.
- Bestaande **JMS**-infrastruktuur instandhou en sy vermo√´ns uitbrei.

ActiveMQ se robuustheid en buigsaamheid maak dit geskik vir 'n menigte boodskapvereistes.


## Enumerasie
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: Dui aan hoe om RabbitMQ en ActiveMQ intern te ondervra en hoe om na alle toue te luister en data te stuur (stuur 'n PR as jy weet hoe om dit te doen)
{% endhint %}

## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Ongeagte Toegang

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Volharding

As jy die geloofsbriewe ken om toegang tot die RabbitMQ-webkonsol te verkry, kan jy 'n nuwe gebruiker skep met administratiewe regte.

## Verwysings

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

{% hint style="success" %}
Leer & oefen AWS Hack: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
