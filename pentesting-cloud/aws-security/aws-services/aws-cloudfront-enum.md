# AWS - CloudFront Enum

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Κοινοποιήστε κόλπα χάκινγκ υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
{% endhint %}

## CloudFront

Το CloudFront είναι το **δίκτυο παράδοσης περιεχομένου του AWS** που επιταχύνει τη διανομή του στατικού και δυναμικού περιεχομένου σας μέσω του παγκόσμιου δικτύου των edge locations του. Όταν χρησιμοποιείτε ένα αίτημα περιεχομένου που φιλοξενείτε μέσω του Amazon CloudFront, το αίτημα δρομολογείται στην πλησιέστερη edge location που παρέχει τη χαμηλότερη καθυστέρηση για να παρέχει την καλύτερη απόδοση. Όταν **ενεργοποιούνται τα logs πρόσβασης του CloudFront** μπορείτε να καταγράψετε το αίτημα από κάθε χρήστη που ζητά πρόσβαση στον ιστότοπό σας και στη διανομή. Όπως και με τα logs πρόσβασης S3, αυτά τα logs είναι επίσης **αποθηκευμένα στο Amazon S3 για ανθεκτική και μόνιμη αποθήκευση**. Δεν χρεώνονται χρεώσεις για την ενεργοποίηση της καταγραφής καθεαυτής, ωστόσο, καθώς τα logs αποθηκεύονται στο S3, θα χρεωθείτε για την αποθήκευση που χρησιμοποιείται από το S3.

Τα αρχεία καταγραφής καταγράφουν δεδομένα κατά μήκος ενός χρονικού διαστήματος και ανάλογα με το ποσό των αιτήσεων που λαμβάνονται από το Amazon CloudFront για αυτήν τη διανομή, θα εξαρτηθεί το ποσό των αρχείων καταγραφής που δημιουργούνται. Είναι σημαντικό να γνωρίζετε ότι αυτά τα αρχεία καταγραφής δεν δημιουργούνται ή γράφονται στο S3. Το S3 είναι απλώς το μέρος όπου παραδίδονται όταν το αρχείο καταγραφής είναι γεμάτο. **Το Amazon CloudFront διατηρεί αυτά τα logs μέχρι να είναι έτοιμα να παραδοθούν στο S3**. Ξανά, ανάλογα με το μέγεθος αυτών των αρχείων καταγραφής, αυτή η παράδοση μπορεί να διαρκέσει **από ένα έως 24 ώρες**.

**Από προεπιλογή η καταγραφή cookie είναι απενεργοποιημένη** αλλά μπορείτε να την ενεργοποιήσετε.

### Λειτουργίες

Μπορείτε να δημιουργήσετε λειτουργίες στο CloudFront. Αυτές οι λειτουργίες θα έχουν το **σημείο τερματισμού τους στο cloudfront** που έχει καθοριστεί και θα εκτελούν έναν δηλωμένο **κώδικα NodeJS**. Αυτός ο κώδικας θα εκτελείται μέσα σε ένα **sandbox** σε μια μηχανή που λειτουργεί υπό μια διαχειριζόμενη μηχανή AWS (θα χρειαζόσασταν έναν παράκαμψη sandbox για να καταφέρετε να δραπετεύσετε στο υποκείμενο λειτουργικό σύστημα).

Καθώς οι λειτουργίες δεν εκτελούνται στο λογαριασμό AWS των χρηστών, δεν είναι συνδεδεμένος κανένας ρόλος IAM, οπότε δεν είναι δυνατή άμεση αύξηση προνομίων εκμεταλλευόμενοι αυτήν τη λειτουργία.

### Απαρίθμηση
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Μη εξουσιοδοτημένη πρόσβαση

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Μετά την εκμετάλλευση

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 στην [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκινγκ υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
{% endhint %}
