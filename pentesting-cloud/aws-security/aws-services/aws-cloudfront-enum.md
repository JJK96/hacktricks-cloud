# AWS - CloudFront Enum

{% hint style="success" %}
Leer & oefen AWS Hack:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Controleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

## CloudFront

CloudFront is AWS se **inhoudsafleweringsnetwerk wat die verspreiding versnel** van jou statiese en dinamiese inhoud deur sy w√™reldwye netwerk van kantoorlokasies. Wanneer jy 'n versoekinhoud gebruik wat jy deur Amazon CloudFront aanbied, word die versoek na die naaste kantoorlokasie gerouteer wat dit die laagste latentie bied om die beste prestasie te lewer. Wanneer **CloudFront-toegangsjoernale** geaktiveer is, kan jy die versoek van elke gebruiker wat toegang tot jou webwerf en verspreiding versoek, opneem. Net soos met S3-toegangsjoernale, word hierdie joernale ook **op Amazon S3 vir duursame en volhoubare stoor** gestoor. Daar is geen koste vir die aktivering van die log self nie, maar aangesien die joernale in S3 gestoor word, sal jy gestoor word vir die stoor wat deur S3 gebruik word.

Die logl√™ers vang data oor 'n tydperk en afhangende van die hoeveelheid versoek wat deur Amazon CloudFront vir daardie verspreiding ontvang word, sal dit afhang van die hoeveelheid logl√™ers wat gegenereer word. Dit is belangrik om te weet dat hierdie logl√™ers nie op S3 geskep of geskryf word nie. S3 is eenvoudig waarheen hulle afgelewer word sodra die logl√™er vol is. **Amazon CloudFront behou hierdie joernale totdat hulle gereed is om na S3 afgelewer te word**. Weereens, afhangende van die grootte van hierdie logl√™ers kan hierdie aflewering **tussen een en 24 uur** neem.

**Standaard is koekie-loggin deaktiveer** maar jy kan dit aktiveer.

### Funksies

Jy kan funksies in CloudFront skep. Hierdie funksies sal sy **eindpunt in cloudfront** gedefinieer h√™ en sal 'n verklaarde **NodeJS-kode** uitvoer. Hierdie kode sal binne 'n **sandbox** op 'n masjien wat onder 'n AWS-bestuurde masjien loop, uitgevoer word (jy sal 'n sandbox-ontduiking nodig h√™ om te ontsnap na die onderliggende OS).

Aangesien die funksies nie in die gebruikers AWS-rekening uitgevoer word nie, word geen IAM-rolopgedra nie, sodat geen direkte privesc moontlik is om van hierdie funksie misbruik te maak.

### Enumerasie
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Ongeverifieerde Toegang

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Na-Exploitasi

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
Leer & oefen AWS Hack: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Controleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
