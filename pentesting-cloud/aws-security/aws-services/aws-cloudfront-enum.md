# AWS - CloudFront Enum

{% hint style="success" %}
Lernen Sie AWS-Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lernen Sie GCP-Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtzen Sie HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) Github-Repositorys senden.

</details>
{% endhint %}

## CloudFront

CloudFront ist das **Content-Delivery-Netzwerk von AWS, das die Verteilung** Ihres statischen und dynamischen Inhalts √ºber sein weltweites Netzwerk von Edge-Standorten beschleunigt. Wenn Sie eine Anfrage f√ºr Inhalte verwenden, die Sie √ºber Amazon CloudFront hosten, wird die Anfrage an den n√§chstgelegenen Edge-Standort geleitet, der die geringste Latenz bietet, um die beste Leistung zu erzielen. Wenn **CloudFront-Zugriffsprotokolle** aktiviert sind, k√∂nnen Sie die Anfrage von jedem Benutzer aufzeichnen, der auf Ihre Website und Verteilung zugreift. Wie bei S3-Zugriffsprotokollen werden diese Protokolle ebenfalls **auf Amazon S3 f√ºr eine dauerhafte und best√§ndige Speicherung** gespeichert. Es fallen keine Geb√ºhren f√ºr die Aktivierung des Loggings an, jedoch werden die Protokolle aufgrund der Speicherung in S3 f√ºr den von S3 verwendeten Speicherplatz gespeichert.

Die Protokolldateien erfassen Daten √ºber einen bestimmten Zeitraum, und je nach Anzahl der Anfragen, die von Amazon CloudFront f√ºr diese Verteilung empfangen werden, h√§ngt die Anzahl der generierten Protokolldateien ab. Es ist wichtig zu wissen, dass diese Protokolldateien nicht auf S3 erstellt oder geschrieben werden. S3 ist einfach der Ort, an den sie geliefert werden, sobald die Protokolldatei voll ist. **Amazon CloudFront beh√§lt diese Protokolle bei, bis sie bereit sind, an S3 geliefert zu werden**. Auch hier kann je nach Gr√∂√üe dieser Protokolldateien die Lieferung **zwischen einer und 24 Stunden** dauern.

**Standardm√§√üig ist das Cookie-Logging deaktiviert**, aber Sie k√∂nnen es aktivieren.

### Funktionen

Sie k√∂nnen Funktionen in CloudFront erstellen. Diese Funktionen haben ihren **Endpunkt in CloudFront** definiert und f√ºhren einen deklarierten **NodeJS-Code** aus. Dieser Code wird in einer **Sandbox** auf einer von AWS verwalteten Maschine ausgef√ºhrt (Sie br√§uchten einen Sandbox-Bypass, um aus dem zugrunde liegenden Betriebssystem zu entkommen).

Da die Funktionen nicht im AWS-Konto des Benutzers ausgef√ºhrt werden, ist kein IAM-Rolle angeh√§ngt, sodass kein direktes Privesc m√∂glich ist, indem diese Funktion missbraucht wird.

### Enumeration
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Nicht authentifizierter Zugriff

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Post-Exploitation

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
Lernen Sie & √ºben Sie AWS-Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lernen Sie & √ºben Sie GCP-Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtzen Sie HackTricks</summary>

* √úberpr√ºfen Sie die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teilen Sie Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) Github-Repositories einreichen.

</details>
{% endhint %}
