# AWS - CloudFront Enum

{% hint style="success" %}
Impara & pratica l'Hacking AWS: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Impara & pratica l'Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Sostieni HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos di github.

</details>
{% endhint %}

## CloudFront

CloudFront √® la **rete di distribuzione dei contenuti di AWS che velocizza la distribuzione** dei tuoi contenuti statici e dinamici attraverso la sua rete globale di posizioni ai margini. Quando si utilizza una richiesta di contenuto che si sta ospitando tramite Amazon CloudFront, la richiesta viene instradata alla posizione ai margini pi√π vicina che fornisce la latenza pi√π bassa per offrire le migliori prestazioni. Quando **i log di accesso a CloudFront** sono abilitati, √® possibile registrare la richiesta da parte di ciascun utente che richiede l'accesso al tuo sito web e alla distribuzione. Come per i log di accesso a S3, questi log sono anche **archiviati su Amazon S3 per uno storage durevole e persistente**. Non ci sono costi per abilitare il logging in s√©, tuttavia, poich√© i log sono archiviati in S3, verranno memorizzati per lo storage utilizzato da S3.

I file di log catturano i dati nel corso del tempo e a seconda della quantit√† di richieste ricevute da Amazon CloudFront per quella distribuzione, dipender√† dalla quantit√† di file di log generati. √à importante sapere che questi file di log non vengono creati o scritti su S3. S3 √® semplicemente dove vengono consegnati una volta che il file di log √® pieno. **Amazon CloudFront mantiene questi log fino a quando non sono pronti per essere consegnati a S3**. Di nuovo, a seconda delle dimensioni di questi file di log, questa consegna pu√≤ richiedere **tra una e 24 ore**.

**Per impostazione predefinita, il logging dei cookie √® disabilitato** ma √® possibile abilitarlo.

### Funzioni

√à possibile creare funzioni in CloudFront. Queste funzioni avranno il suo **endpoint in cloudfront** definito e eseguiranno un **codice NodeJS** dichiarato. Questo codice verr√† eseguito all'interno di un **sandbox** in una macchina in esecuzione sotto una macchina gestita da AWS (√® necessario un bypass del sandbox per riuscire a sfuggire al sistema operativo sottostante).

Poich√© le funzioni non vengono eseguite nell'account AWS degli utenti, nessun ruolo IAM √® collegato, quindi non √® possibile un privesc diretto sfruttando questa funzionalit√†.

### Enumerazione
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Accesso non autenticato

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Post Esploitation

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
Impara e pratica l'Hacking AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Impara e pratica l'Hacking GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supporta HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
