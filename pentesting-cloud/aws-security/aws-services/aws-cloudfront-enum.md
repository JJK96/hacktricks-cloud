# AWS - CloudFront Enum

{% hint style="success" %}
Učite i vežbajte hakovanje AWS-a:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Obuka AWS Crveni Tim Stručnjak (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Učite i vežbajte hakovanje GCP-a: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Obuka GCP Crveni Tim Stručnjak (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Pomozite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## CloudFront

CloudFront je **mreža za isporuku sadržaja AWS-a koja ubrzava distribuciju** vašeg statičkog i dinamičkog sadržaja putem svoje svetske mreže lokacija na ivici. Kada koristite zahtev sadržaja koji hostujete putem Amazon CloudFront-a, zahtev se rutira do najbliže lokacije na ivici koja pruža najmanju latenciju za pružanje najboljih performansi. Kada su **CloudFront pristupni zapisi** omogućeni, možete zabeležiti zahtev od svakog korisnika koji traži pristup vašem veb-sajtu i distribuciji. Kao i kod S3 pristupnih zapisa, ovi zapisi se takođe **skladište na Amazon S3 radi trajnog i postojanog skladištenja**. Ne naplaćuju se naknade za omogućavanje samog vođenja evidencije, međutim, pošto se zapisi skladište u S3, bićete naplaćeni za skladištenje koje koristi S3.

Datoteke zapisa beleže podatke tokom određenog vremenskog perioda i zaviseći od količine zahteva koji su primljeni od strane Amazon CloudFront-a za tu distribuciju, zavisiće i od količine datoteka zapisa koje su generisane. Važno je znati da ove datoteke zapisa nisu kreirane ili pisane na S3. S3 je jednostavno mesto gde se dostavljaju nakon što je datoteka zapisa puna. **Amazon CloudFront zadržava ove zapise dok ne budu spremni za dostavu na S3**. Ponovo, zavisno o veličini ovih datoteka zapisa, ova dostava može trajati **između jednog i 24 sata**.

**Podrazumevano je onemogućeno vođenje evidencije kolačića** ali ga možete omogućiti.

### Funkcije

Možete kreirati funkcije u CloudFront-u. Ove funkcije će imati svoj **krajnji poen u cloudfront-u** definisan i pokrenuće deklarisani **NodeJS kod**. Ovaj kod će se izvršavati unutar **peska** na mašini koja radi pod upravljanjem AWS upravljane mašine (trebaće vam zaobilaženje peska da biste uspeli da pobegnete do osnovnog OS-a).

Pošto funkcije nisu pokrenute u korisničkom AWS nalogu, nijedna IAM uloga nije pridružena tako da nije moguće zloupotrebiti ovu funkciju za direktno privesc. 

### Enumeracija
```bash
aws cloudfront list-distributions
aws cloudfront get-distribution --id <id> # Just get 1
aws cloudfront get-distribution-config --id <id>

aws cloudfront list-functions
aws cloudfront get-function --name TestFunction function_code.js

aws cloudfront list-distributions | jq ".DistributionList.Items[] | .Id, .Origins.Items[].Id, .Origins.Items[].DomainName, .AliasICPRecordals[].CNAME"
```
## Neautentifikovan pristup

{% content-ref url="../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md" %}
[aws-cloudfront-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-cloudfront-unauthenticated-enum.md)
{% endcontent-ref %}

## Post Eksploatacija

{% content-ref url="../aws-post-exploitation/aws-cloudfront-post-exploitation.md" %}
[aws-cloudfront-post-exploitation.md](../aws-post-exploitation/aws-cloudfront-post-exploitation.md)
{% endcontent-ref %}

{% hint style="success" %}
Učite i vežbajte AWS Hakovanje:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Obuka AWS Crveni Tim Ekspert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Učite i vežbajte GCP Hakovanje: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Obuka GCP Crveni Tim Ekspert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podržite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
