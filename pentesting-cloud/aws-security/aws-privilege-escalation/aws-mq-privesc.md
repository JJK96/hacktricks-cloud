# AWS - MQ Privesc

{% hint style="success" %}
Apprenez et pratiquez le piratage AWS :<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Apprenez et pratiquez le piratage GCP : <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop)!
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts GitHub.

</details>
{% endhint %}

## MQ

Pour plus d'informations sur MQ, consultez :

{% content-ref url="../aws-services/aws-mq-enum.md" %}
[aws-mq-enum.md](../aws-services/aws-mq-enum.md)
{% endcontent-ref %}

### `mq:ListBrokers`, `mq:CreateUser`

Avec ces autorisations, vous pouvez **cr√©er un nouvel utilisateur dans un courtier ActimeMQ** (cela ne fonctionne pas avec RabbitMQ) :

{% code overflow="wrap" %}
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
{% endcode %}

**Impact potentiel :** Acc√©der √† des informations sensibles en naviguant dans ActiveMQ

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

Avec ces autorisations, vous pouvez **cr√©er un nouvel utilisateur dans un courtier ActimeMQ** (cela ne fonctionne pas dans RabbitMQ) :
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
{% endcode %}

**Impact potentiel :** Acc√©der √† des informations sensibles en naviguant dans ActiveMQ

### `mq:ListBrokers`, `mq:UpdateBroker`

Si un courtier utilise **LDAP** pour l'autorisation avec **ActiveMQ**. Il est possible de **modifier** la **configuration** du serveur LDAP utilis√© pour **un contr√¥l√© par l'attaquant**. De cette mani√®re, l'attaquant pourra **voler toutes les informations d'identification envoy√©es via LDAP**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Si vous pouviez somehow trouver les identifiants originaux utilis√©s par ActiveMQ, vous pourriez effectuer une attaque de l'homme du milieu, voler les identifiants, les utiliser sur le serveur d'origine et envoyer la r√©ponse (peut-√™tre en r√©utilisant simplement les identifiants vol√©s vous pourriez le faire).

**Impact potentiel :** Voler les identifiants ActiveMQ

{% hint style="success" %}
Apprenez et pratiquez le Hacking AWS :<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Apprenez et pratiquez le Hacking GCP : <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop)!
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de hacking en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
