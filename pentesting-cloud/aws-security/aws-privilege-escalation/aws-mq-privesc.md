# AWS - MQ Privesc

{% hint style="success" %}
Leer & oefen AWS Hack:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

## MQ

Vir meer inligting oor MQ, kyk:

{% content-ref url="../aws-services/aws-mq-enum.md" %}
[aws-mq-enum.md](../aws-services/aws-mq-enum.md)
{% endcontent-ref %}

### `mq:ListBrokers`, `mq:CreateUser`

Met daardie regte kan jy **'n nuwe gebruiker skep in 'n ActimeMQ makelaar** (dit werk nie in RabbitMQ nie):

{% code overflow="wrap" %}
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potensi√´le Impak:** Toegang tot sensitiewe inligting deur te navigeer deur ActiveMQ

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

Met daardie regte kan jy **'n nuwe gebruiker skep in 'n ActimeMQ makelaar** (dit werk nie in RabbitMQ nie):
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
{% endcode %}

**Potensi√´le Impak:** Toegang tot sensitiewe inligting deur te navigeer deur ActiveMQ

### `mq:ListBrokers`, `mq:UpdateBroker`

Indien 'n makelaar **LDAP** gebruik vir magtiging met **ActiveMQ**. Dit is moontlik om die **konfigurasie** van die LDAP-bediener te **verander na een wat deur die aanvaller beheer word**. Op hierdie manier sal die aanvaller in staat wees om **alle geloofsbriewe wat deur LDAP gestuur word, te steel**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Indien jy die oorspronklike geloofsbriewe wat deur ActiveMQ gebruik is, kon vind, kon jy 'n MitM uitvoer, die geloofsbriewe steel, hulle op die oorspronklike bediener gebruik, en die respons stuur (miskien deur net die gesteelde geloofsbriewe te hergebruik kon jy dit doen).

**Potensi√´le Impak:** Steel ActiveMQ geloofsbriewe

{% hint style="success" %}
Leer & oefen AWS Hack: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
