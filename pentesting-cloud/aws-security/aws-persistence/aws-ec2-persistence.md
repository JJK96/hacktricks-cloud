# AWS - EC2 Μόνιμη Ανθεκτικότητα

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκερ κάνοντας υποβολή PRs** στα αποθετήρια του [**HackTricks**](https://github.com/carlospolop/hacktricks) και του [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## EC2

Για περισσότερες πληροφορίες ελέγξτε:

{% content-ref url="../../aws-security/aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/" %}
[aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum](../../aws-security/aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/)
{% endcontent-ref %}

### Μόνιμη Ανθεκτικότητα Καταγραφής Σύνδεσης Ομάδας Ασφαλείας

Αν ένας υπερασπιστής ανακαλύψει ότι μια **ιδιότητα EC2** έχει διαρρεύσει, πιθανότατα θα προσπαθήσει να **απομονώσει** το **δίκτυο** της μηχανής. Αυτό θα μπορούσε να γίνει με ένα **Ρητό NACL** (αλλά τα NACL επηρεάζουν ολόκληρο το υποδίκτυο), ή **αλλάζοντας την ομάδα ασφαλείας** μην επιτρέποντας **κανένα είδος εισερχόμενης ή εξερχόμενης** κίνησης.

Αν ο επιτιθέμενος είχε ένα **αντίστροφο κέλυφος προερχόμενο από τη μηχανή**, ακόμη κι αν η SG τροποποιηθεί για να μην επιτρέπει εισερχόμενη ή εξερχόμενη κίνηση, η **σύνδεση δεν θα τερματιστεί λόγω** [**Καταγραφής Σύνδεσης Ομάδας Ασφαλείας**](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-connection-tracking.html)**.**

### Διαχειριστής Κύκλου Ζωής EC2

Αυτή η υπηρεσία επιτρέπει το **προγραμματισμό** της **δημιουργίας AMIs και αντιγράφων ασφαλείας** και ακόμη και το **διαμοιρασμό τους με άλλους λογαριασμούς**.\
Ένας επιτιθέμενος θα μπορούσε να διαμορφώσει τη **δημιουργία AMIs ή αντιγράφων ασφαλείας** όλων των εικόνων ή όλων των όγκων **κάθε εβδομάδα** και **να τα μοιραστεί με τον λογαριασμό του**.

### Προγραμματισμένες Εμφανίσεις

Είναι δυνατόν να προγραμματίσετε εμφανίσεις για να τρέχουν καθημερινά, εβδομαδιαία ή ακόμη και μηνιαία. Ένας επιτιθέμενος θα μπορούσε να τρέξει μια μηχανή με υψηλά προνόμια ή ενδιαφέρουσα πρόσβαση όπου θα μπορούσε να έχει πρόσβαση.

### Αίτηση Ομάδας Spot Fleet

Οι spot instances είναι **φθηνότερες** από τις κανονικές instances. Ένας επιτιθέμενος θα μπορούσε να ξεκινήσει μια **μικρή αίτηση spot fleet για 5 χρόνια** (για παράδειγμα), με **αυτόματη ανάθεση IP** και ένα **δεδομένα χρήστη** που στέλνει στον επιτιθέμενο **όταν ξεκινά η spot instance** και τη **διεύθυνση IP** και με ένα **υψηλά προνομιούχο ρόλο IAM**.

### Μηχανές Πίσω Πόρτας

Ένας επιτιθέμενος θα μπορούσε να αποκτήσει πρόσβαση στις μηχανές και να τις βάλει πίσω πόρτα:

* Χρησιμοποιώντας ένα παραδοσιακό **rootkit** για παράδειγμα
* Προσθέτοντας ένα νέο **δημόσιο κλειδί SSH** (ελέγξτε τις [επιλογές προνομίων EC2](../../aws-security/aws-privilege-escalation/aws-ec2-privesc.md))
* Βάζοντας πίσω πόρτα στα **Δεδομένα Χρήστη**

### **Δημιουργία Πίσω Πόρτας Ρύθμισης Εκκίνησης**

* Πίσω πόρτα στη χρησιμοποιούμενη AMI
* Πίσω πόρτα στα Δεδομένα Χρήστη
* Πίσω πόρτα στο Ζεύγος Κλειδιών

### VPN

Δημιουργήστε ένα VPN ώστε ο επιτιθέμενος να μπορεί να συνδεθεί απευθείας μέσω αυτού στο VPC.

### Σύνδεση VPC Peering

Δημιουργήστε μια σύνδεση peering μεταξύ του VPC του θύματος και του VPC του επιτιθέμενου ώστε να μπορεί να έχει πρόσβαση στο VPC του θύματος.

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκερ κάνοντας υποβολή PRs** στα αποθετήρια του [**HackTricks**](https://github.com/carlospolop/hacktricks) και του [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
