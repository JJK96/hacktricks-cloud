# AWS - Uthabiti wa EC2

{% hint style="success" %}
Jifunze na zoezi la Kuvamia AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoezi la Kuvamia GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>unga mkono HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za kuvamia kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}

## EC2

Kwa habari zaidi angalia:

{% content-ref url="../../aws-security/aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/" %}
[aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum](../../aws-security/aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/)
{% endcontent-ref %}

### Ufuatiliaji wa Uunganisho wa Kikundi cha Usalama

Ikiwa mwepesi anagundua kwamba **kifaa cha EC2 kimevamiwa** atajaribu **kutenga** **mtandao** wa kifaa hicho. Anaweza kufanya hivyo kwa kutumia **Deny NACL** (lakini NACLs huathiri subnet nzima), au **kubadilisha kikundi cha usalama** kwa kutokuhalalisha **aina yoyote ya trafiki ya kuingia au kutoka.**

Ikiwa muvamizi alikuwa na **shell ya nyuma iliyotokana na kifaa**, hata kama SG imebadilishwa ili kutokuhalalisha trafiki ya kuingia au kutoka, **unganisho hilo halitakatishwa kutokana na** [**Ufuatiliaji wa Uunganisho wa Kikundi cha Usalama**](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-connection-tracking.html)**.**

### Meneja wa Mzunguko wa EC2

Huduma hii inaruhusu **kupanga** **ujenzi wa AMIs na snapshots** na hata **kushiriki nao na akaunti zingine**.\
Mvamizi anaweza kusanidi **ujenzi wa AMIs au snapshots** za picha zote au diski zote **kila wiki** na **kushiriki nao kwenye akaunti yake**.

### Vifaa Vilivyopangwa

Inawezekana kupanga vifaa viendelee kufanya kazi kila siku, kila wiki au hata kila mwezi. Mvamizi anaweza kuendesha kifaa chenye mamlaka kubwa au ufikivu wa kuvutia ambapo anaweza kupata ufikivu.

### Ombi la Kikundi cha Spot Fleet

Vifaa vya aina ya spot ni **nafuu** kuliko vifaa vya kawaida. Mvamizi anaweza kuzindua **ombi dogo la kikundi cha spot kwa miaka 5** (kwa mfano), na **utoaji wa IP moja kwa moja** na **data ya mtumiaji** ambayo itatuma kwa mvamizi **wakati kifaa cha spot kianza** na **anwani ya IP** na **jukumu la IAM lenye mamlaka makubwa**.

### Vifaa vya Nyuma

Mvamizi anaweza kupata ufikivu wa vifaa na kuvibadilisha:

* Kutumia **rootkit** ya jadi kwa mfano
* Kuongeza **funguo mpya ya SSH ya umma** (angalia [chaguo za EC2 za kuvuka viwango vya mamlaka](../../aws-security/aws-privilege-escalation/aws-ec2-privesc.md))
* Kuvibadilisha **Data ya Mtumiaji**

### **Uzinduzi wa Mipangilio ya Nyuma**

* Kuvibadilisha AMI iliyotumiwa
* Kuvibadilisha Data ya Mtumiaji
* Kuvibadilisha Jozi ya Funguo

### VPN

Unda VPN ili mvamizi aweze kuunganisha moja kwa moja kupitia hiyo kwenye VPC.

### Uunganisho wa VPC Peering

Unda uunganisho wa peering kati ya VPC ya mwathiriwa na VPC ya mvamizi ili aweze kupata ufikivu wa VPC ya mwathiriwa.

{% hint style="success" %}
Jifunze na zoezi la Kuvamia AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoezi la Kuvamia GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>unga mkono HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za kuvamia kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}
