# AWS - Διατήρηση Cognito

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκερ κάνοντας υποβολή PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Cognito

Για περισσότερες πληροφορίες, επισκεφθείτε:

{% content-ref url="../../aws-security/aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../../aws-security/aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Διατήρηση χρήστη

Το Cognito είναι ένα υπηρεσία που επιτρέπει την ανάθεση ρόλων σε μη εξουσιοδοτημένους και εξουσιοδοτημένους χρήστες και τον έλεγχο ενός καταλόγου χρηστών. Μπορούν να τροποποιηθούν διάφορες διαφορετικές ρυθμίσεις για τη διατήρηση ορισμένης διάρκειας, όπως:

* **Προσθήκη ενός User Pool** που ελέγχεται από τον χρήστη σε ένα Identity Pool
* Δώστε έναν **IAM ρόλο σε ένα μη εξουσιοδοτημένο Identity Pool και επιτρέψτε τη ροή βασικής πιστοποίησης**
* Ή σε ένα **εξουσιοδοτημένο Identity Pool** αν ο επιτιθέμενος μπορεί να συνδεθεί
* Ή **βελτιώστε τις άδειες** των δοθέντων ρόλων
* **Δημιουργία, επαλήθευση & ανάδειξη δικαιωμάτων** μέσω ελεγχόμενων χρηστών ή νέων χρηστών σε ένα **User Pool**
* **Επιτροπή εξωτερικών παρόχων ταυτότητας** για σύνδεση σε ένα User Pool ή σε ένα Identity Pool

Ελέγξτε πώς να κάνετε αυτές τις ενέργειες στο

{% content-ref url="../../aws-security/aws-privilege-escalation/aws-cognito-privesc.md" %}
[aws-cognito-privesc.md](../../aws-security/aws-privilege-escalation/aws-cognito-privesc.md)
{% endcontent-ref %}

### `cognito-idp:SetRiskConfiguration`

Ένας επιτιθέμενος με αυτά τα δικαιώματα θα μπορούσε να τροποποιήσει τη διαμόρφωση κινδύνου για να μπορεί να συνδεθεί ως χρήστης Cognito **χωρίς να ενεργοποιούνται συναγερμοί**. [**Ελέγξτε το cli**](https://docs.aws.amazon.com/cli/latest/reference/cognito-idp/set-risk-configuration.html) για να δείτε όλες τις επιλογές:
```bash
aws cognito-idp set-risk-configuration --user-pool-id <pool-id> --compromised-credentials-risk-configuration EventFilter=SIGN_UP,Actions={EventAction=NO_ACTION}
```
{% endcode %}

Από προεπιλογή αυτό είναι απενεργοποιημένο:

<figure><img src="https://lh6.googleusercontent.com/EOiM0EVuEgZDfW3rOJHLQjd09-KmvraCMssjZYpY9sVha6NcxwUjStrLbZxAT3D3j9y08kd5oobvW8a2fLUVROyhkHaB1OPhd7X6gJW3AEQtlZM62q41uYJjTY1EJ0iQg6Orr1O7yZ798EpIJ87og4Tbzw=s2048" alt=""><figcaption></figcaption></figure>

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** 💬 [**στην ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκινγκ υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
{% endhint %}
