# AWS Pentesting

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **Discord grubuna** 💬 [**katılın**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) **bizi takip edin.**
* **HackTricks'e PR göndererek hacking ipuçlarını paylaşın** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına.

</details>
{% endhint %}

## Temel Bilgiler

**AWS ortamında pentesting yapmaya başlamadan önce**, AWS'nin nasıl çalıştığı hakkında bilmeniz gereken birkaç **temel şey** vardır. Bu, ne yapmanız gerektiğini, yanlış yapılandırmaları nasıl bulacağınızı ve bunları nasıl istismar edeceğinizi anlamanıza yardımcı olacaktır.

Organizasyon hiyerarşisi, IAM ve diğer temel kavramlar gibi kavramlar şu belgede açıklanmıştır:

{% content-ref url="aws-basic-information/" %}
[aws-basic-information](aws-basic-information/)
{% endcontent-ref %}

## Öğrenmek için Laboratuvarlar

* [https://github.com/RhinoSecurityLabs/cloudgoat](https://github.com/RhinoSecurityLabs/cloudgoat)
* [https://github.com/BishopFox/iam-vulnerable](https://github.com/BishopFox/iam-vulnerable)
* [https://github.com/nccgroup/sadcloud](https://github.com/nccgroup/sadcloud)
* [https://github.com/bridgecrewio/terragoat](https://github.com/bridgecrewio/terragoat)
* [https://github.com/ine-labs/AWSGoat](https://github.com/ine-labs/AWSGoat)
* [http://flaws.cloud/](http://flaws.cloud/)
* [http://flaws2.cloud/](http://flaws2.cloud/)

Saldırıları simüle etmek için araçlar:

* [https://github.com/Datadog/stratus-red-team/](https://github.com/Datadog/stratus-red-team/)
* [https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main](https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main)

## AWS Pentester/Red Team Metodolojisi

Bir AWS ortamını denetlemek için hangi **hizmetlerin kullanıldığını**, neyin **açıkta olduğunu**, kimin neye **erişimi** olduğunu ve iç AWS hizmetlerinin **dış hizmetlerle** nasıl bağlantılı olduğunu bilmek çok önemlidir.

Red Team bakış açısından, bir AWS ortamını ele geçirmenin **ilk adımı** bazı **kimlik bilgilerini** elde etmektir. İşte bunu yapmanın bazı yolları:

* github (veya benzeri) **Leaks** - OSINT
* **Sosyal** Mühendislik
* **Şifre** yeniden kullanımı (şifre sızıntıları)
* AWS'de Barındırılan Uygulamalardaki Güvenlik Açıkları
* [**Server Side Request Forgery**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf) ile metadata endpoint'e erişim
* **Yerel Dosya Okuma**
* `/home/USERNAME/.aws/credentials`
* `C:\Users\USERNAME\.aws\credentials`
* 3. tarafların **ihlal edilmesi**
* **İç** Çalışan
* [**Cognito** ](aws-services/aws-cognito-enum/#cognito) kimlik bilgileri

Veya **açıkta olan kimlik doğrulaması yapılmamış bir hizmeti** ele geçirerek:

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

Veya bir **inceleme** yapıyorsanız, bu rollere sahip **kimlik bilgilerini** isteyebilirsiniz:

{% content-ref url="aws-permissions-for-a-pentest.md" %}
[aws-permissions-for-a-pentest.md](aws-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
Kimlik bilgilerini elde ettikten sonra, bu kimlik bilgilerinin **kime ait olduğunu** ve **neye erişimleri olduğunu** bilmeniz gerekir, bu yüzden bazı temel enumarasyon işlemleri yapmanız gerekir:
{% endhint %}

## Temel Enumarasyon

### SSRF

AWS içinde bir makinede SSRF bulduysanız, bu sayfada bazı ipuçlarına göz atın:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf" %}

### Whoami

Bilmeniz gereken ilk şeylerden biri, kim olduğunuzdur (hangi hesapta olduğunuz ve AWS ortamı hakkında diğer bilgiler):
```bash
# Easiest way, but might be monitored?
aws sts get-caller-identity
aws iam get-user # This will get your own user

# If you have a Key ID
aws sts get-access-key-info --access-key-id=ASIA1234567890123456

# Get inside error message
aws sns publish --topic-arn arn:aws:sns:us-east-1:*account id*:aaa --message aaa

# From metadata
TOKEN=`curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600"`
curl -H "X-aws-ec2-metadata-token: $TOKEN" http://169.254.169.254/latest/dynamic/instance-identity/document
```
{% hint style="danger" %}
Şirketlerin **tokenlerin çalındığını ve kullanıldığını tespit etmek** için **canary tokenler** kullanabileceğini unutmayın. Bir tokenin canary token olup olmadığını kullanmadan önce kontrol etmeniz önerilir.\
Daha fazla bilgi için [**bu sayfayı kontrol edin**](aws-services/aws-security-and-detection-services/aws-cloudtrail-enum.md#honeytokens-bypass).
{% endhint %}

### Org Enumeration

{% content-ref url="aws-services/aws-organizations-enum.md" %}
[aws-organizations-enum.md](aws-services/aws-organizations-enum.md)
{% endcontent-ref %}

### IAM Enumeration

Yeterli izinlere sahipseniz, **AWS hesabındaki her bir varlığın ayrıcalıklarını kontrol etmek**, sizin ve diğer kimliklerin neler yapabileceğini ve **ayrıcalıkları nasıl yükseltebileceğinizi** anlamanıza yardımcı olacaktır.

IAM'i numaralandırmak için yeterli izinlere sahip değilseniz, onları **bruteforce ile çalabilirsiniz**.\
Numaralandırma ve brute-forcing işlemlerinin nasıl yapılacağını kontrol edin:

{% content-ref url="aws-services/aws-iam-enum.md" %}
[aws-iam-enum.md](aws-services/aws-iam-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
Artık **kimlik bilgileriniz hakkında bazı bilgilere sahipsiniz** (ve eğer bir red team iseniz umarım **tespit edilmediniz**). Ortamda hangi hizmetlerin kullanıldığını anlamanın zamanı geldi.\
Aşağıdaki bölümde **bazı yaygın hizmetleri nasıl numaralandırabileceğinizi** kontrol edebilirsiniz.
{% endhint %}

## Services Enumeration, Post-Exploitation & Persistence

AWS'in şaşırtıcı miktarda hizmeti vardır, aşağıdaki sayfada **temel bilgiler, numaralandırma** hile sayfaları, **tespitten kaçınma**, **kalıcılık sağlama** ve bazıları hakkında diğer **post-exploitation** ipuçlarını bulacaksınız:

{% content-ref url="aws-services/" %}
[aws-services](aws-services/)
{% endcontent-ref %}

Tüm işleri **manuel olarak** yapmanız gerekmediğini unutmayın, bu gönderinin aşağısında **otomatik araçlar hakkında** bir **bölüm** bulabilirsiniz [**otomatik araçlar**](./#automated-tools).

Ayrıca, bu aşamada **kimliği doğrulanmamış kullanıcılara açık daha fazla hizmet keşfetmiş olabilirsiniz**, bunları istismar edebilirsiniz:

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

## Privilege Escalation

Eğer **en azından kendi izinlerinizi** farklı kaynaklar üzerinde kontrol edebiliyorsanız, **daha fazla izin elde edip edemeyeceğinizi kontrol edebilirsiniz**. En azından aşağıda belirtilen izinlere odaklanmalısınız:

{% content-ref url="aws-privilege-escalation/" %}
[aws-privilege-escalation](aws-privilege-escalation/)
{% endcontent-ref %}

## Publicly Exposed Services

AWS hizmetlerini numaralandırırken, bazılarını **internete açık öğelerle** (VM/Konteyner portları, veritabanları veya kuyruk hizmetleri, anlık görüntüler veya kovalar...) bulmuş olabilirsiniz.\
Bir pentester/red teamer olarak her zaman **hassas bilgi / güvenlik açıkları** bulup bulamayacağınızı kontrol etmelisiniz, çünkü bunlar size **AWS hesabına daha fazla erişim sağlayabilir**.

Bu kitapta **açık AWS hizmetlerini nasıl bulacağınız ve nasıl kontrol edeceğiniz** hakkında **bilgi** bulmalısınız. Açık ağ hizmetlerinde **güvenlik açıklarını nasıl bulacağınız** hakkında, belirli **hizmeti** aramanızı öneririm:

{% embed url="https://book.hacktricks.xyz/" %}

## Compromising the Organization

### From the root/management account

Yönetim hesabı organizasyonda yeni hesaplar oluşturduğunda, yeni hesapta **yeni bir rol** oluşturulur, varsayılan olarak **`OrganizationAccountAccessRole`** olarak adlandırılır ve yeni hesaba erişim sağlamak için **yönetim hesabına** **AdministratorAccess** politikası verir.

<figure><img src="../../.gitbook/assets/image (171).png" alt=""><figcaption></figcaption></figure>

Bu nedenle, bir alt hesaba yönetici olarak erişmek için şunlara ihtiyacınız var:

* **Yönetim** hesabını **ele geçirmek** ve **çocuk hesapların** **ID'lerini** ve **rol adlarını** (varsayılan olarak OrganizationAccountAccessRole) bulmak.
* Çocuk hesapları bulmak için aws konsolundaki organizasyonlar bölümüne gidin veya `aws organizations list-accounts` komutunu çalıştırın.
* Rol adlarını doğrudan bulamazsınız, bu yüzden tüm özel IAM politikalarını kontrol edin ve daha önce keşfedilen çocuk hesaplar üzerinde **`sts:AssumeRole`** izni veren herhangi birini arayın.
* **Yönetim hesabında** **çocuk hesaplarındaki rol üzerinde** **`sts:AssumeRole`** iznine sahip bir **prensibi** ele geçirin (hesap, yönetim hesabından herhangi birinin kimliğine bürünmesine izin verse bile, dış bir hesap olduğu için belirli `sts:AssumeRole` izinleri gereklidir).

## Automated Tools

### Recon

* [**aws-recon**](https://github.com/darkbitio/aws-recon): Ruby ile yazılmış, çok iş parçacıklı AWS güvenlik odaklı **envanter toplama aracı**.
```bash
# Install
gem install aws_recon

# Recon and get json
AWS_PROFILE=<profile> aws_recon \
--services S3,EC2 \
--regions global,us-east-1,us-east-2 \
--verbose
```
* [**cloudlist**](https://github.com/projectdiscovery/cloudlist): Cloudlist, Bulut Sağlayıcılarından Varlıklar (Hostnames, IP Adresleri) elde etmek için kullanılan çoklu bulut aracıdır.
* [**cloudmapper**](https://github.com/duo-labs/cloudmapper): CloudMapper, Amazon Web Services (AWS) ortamlarınızı analiz etmenize yardımcı olur. Şimdi güvenlik sorunları için denetim de dahil olmak üzere çok daha fazla işlevsellik içeriyor.
```bash
# Installation steps in github
# Create a config.json file with the aws info, like:
{
"accounts": [
{
"default": true,
"id": "<account id>",
"name": "dev"
}
],
"cidrs":
{
"2.2.2.2/28": {"name": "NY Office"}
}
}

# Enumerate
python3 cloudmapper.py collect --profile dev
## Number of resources discovered
python3 cloudmapper.py stats --accounts dev

# Create HTML report
## In the report you will find all the info already
python3 cloudmapper.py report --accounts dev

# Identify potential issues
python3 cloudmapper.py audit --accounts dev --json > audit.json
python3 cloudmapper.py audit --accounts dev --markdow > audit.md
python3 cloudmapper.py iam_report --accounts dev

# Identify admins
## The permissions search for are in https://github.com/duo-labs/cloudmapper/blob/4df9fd7303e0337ff16a08f5e58f1d46047c4a87/shared/iam_audit.py#L163-L175
python3 cloudmapper.py find_admins --accounts dev

# Identify unused elements
python3 cloudmapper.py find_unused --accounts dev

# Identify publivly exposed resources
python3 cloudmapper.py public --accounts dev

python cloudmapper.py prepare #Prepare webserver
python cloudmapper.py webserver #Show webserver
```
* [**cartography**](https://github.com/lyft/cartography): Cartography, Neo4j veritabanı tarafından desteklenen sezgisel bir grafik görünümünde altyapı varlıklarını ve bunlar arasındaki ilişkileri birleştiren bir Python aracıdır.
```bash
# Install
pip install cartography
## At the time of this writting you need neo4j version 3.5.*

# Get AWS info
AWS_PROFILE=dev cartography --neo4j-uri bolt://127.0.0.1:7687 --neo4j-password-prompt  --neo4j-user neo4j
```
* [**starbase**](https://github.com/JupiterOne/starbase): Starbase, bulut altyapısı, SaaS uygulamaları, güvenlik kontrolleri ve daha fazlasını içeren hizmetler ve sistemlerden varlıkları ve ilişkileri Neo4j veritabanı tarafından desteklenen sezgisel bir grafik görünümüne toplar.
* [**aws-inventory**](https://github.com/nccgroup/aws-inventory): (Python2 kullanır) Bu araç, bir hesapta oluşturulan **tüm [**AWS kaynaklarını**](https://docs.aws.amazon.com/general/latest/gr/glos-chap.html#resource) keşfetmeye çalışır.
* [**aws\_public\_ips**](https://github.com/arkadiyt/aws\_public\_ips): Bir AWS hesabıyla ilişkili **tüm genel IP adreslerini** (hem IPv4/IPv6) almak için bir araçtır.

### Privesc & Exploiting

* [**SkyArk**](https://github.com/cyberark/SkyArk)**:** Taranan AWS ortamındaki en ayrıcalıklı kullanıcıları, AWS Shadow Admins dahil, keşfeder. Powershell kullanır. **Ayrıcalıklı politikaların tanımını** [https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1](https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1) içindeki **`Check-PrivilegedPolicy`** fonksiyonunda bulabilirsiniz.
* [**pacu**](https://github.com/RhinoSecurityLabs/pacu): Pacu, bulut ortamlarına karşı saldırgan güvenlik testi için tasarlanmış açık kaynaklı bir **AWS exploitation framework**'üdür. **Numaralandırabilir**, **yanlış yapılandırmaları** bulabilir ve **sömürebilir**. **Ayrıcalıklı izinlerin tanımını** [https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134](https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134) içindeki **`user_escalation_methods`** sözlüğünde bulabilirsiniz.
* Not: pacu **sadece kendi privescs yollarınızı** (hesap genelinde değil) kontrol eder.
```bash
# Install
## Feel free to use venvs
pip3 install pacu

# Use pacu CLI
pacu
> import_keys <profile_name> # import 1 profile from .aws/credentials
> import_keys --all # import all profiles
> list # list modules
> exec iam__enum_permissions # Get permissions
> exec iam__privesc_scan # List privileged permissions
```
* [**PMapper**](https://github.com/nccgroup/PMapper): Principal Mapper (PMapper), bir AWS hesabı veya bir AWS organizasyonu için AWS Identity and Access Management (IAM) yapılandırmasındaki riskleri belirlemek için kullanılan bir betik ve kütüphanedir. Bir hesaptaki farklı IAM Kullanıcılarını ve Rolleri yönlendirilmiş bir grafik olarak modelleyerek, **yetki yükseltme** ve bir saldırganın AWS'de bir kaynağa veya eyleme erişim sağlamak için izleyebileceği alternatif yolları kontrol etmeyi sağlar. **Yetki yükseltme yollarını bulmak için kullanılan izinleri** [https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing](https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing) adresindeki `_edges.py` ile biten dosya adlarında kontrol edebilirsiniz.
```bash
# Install
pip install principalmapper

# Get data
pmapper --profile dev graph create
pmapper --profile dev graph display # Show basic info
# Generate graph
pmapper --profile dev visualize # Generate svg graph file (can also be png, dot and graphml)
pmapper --profile dev visualize --only-privesc # Only privesc permissions

# Generate analysis
pmapper --profile dev analysis
## Run queries
pmapper --profile dev query 'who can do iam:CreateUser'
pmapper --profile dev query 'preset privesc *' # Get privescs with admins

# Get organization hierarchy data
pmapper --profile dev orgs create
pmapper --profile dev orgs display
```
* [**cloudsplaining**](https://github.com/salesforce/cloudsplaining): Cloudsplaining, en az ayrıcalık ihlallerini belirleyen ve risk öncelikli bir HTML raporu oluşturan bir AWS IAM Güvenlik Değerlendirme aracıdır.\
Size potansiyel olarak **aşırı ayrıcalıklı** müşteri, inline ve aws **politikalarını** ve hangi **prensiplerin bunlara erişimi olduğunu** gösterecektir. (Sadece privesc için değil, aynı zamanda diğer ilginç izinler için de kontrol eder, kullanılması tavsiye edilir).
```bash
# Install
pip install cloudsplaining

# Download IAM policies to check
## Only the ones attached with the versions used
cloudsplaining download --profile dev

# Analyze the IAM policies
cloudsplaining scan --input-file /private/tmp/cloudsplaining/dev.json --output /tmp/files/
```
* [**cloudjack**](https://github.com/prevade/cloudjack): CloudJack, Route53 ve CloudFront yapılandırmalarının ayrılması sonucu oluşan **alt alan adı ele geçirme açıklarını** değerlendirmek için AWS hesaplarını inceler.
* [**ccat**](https://github.com/RhinoSecurityLabs/ccat): ECR depolarını listele -> ECR deposunu çek -> Arka kapı yerleştir -> Arka kapılı imajı geri it
* [**Dufflebag**](https://github.com/bishopfox/dufflebag): Dufflebag, yanlışlıkla bırakılmış olabilecek **gizli bilgileri** bulmak için halka açık Elastic Block Storage (**EBS) anlık görüntülerini** arayan bir araçtır.

### Denetim

* [**cloudsploit**](https://github.com/aquasecurity/cloudsploit)**:** Aqua tarafından geliştirilen CloudSploit, Amazon Web Services (AWS), Microsoft Azure, Google Cloud Platform (GCP), Oracle Cloud Infrastructure (OCI) ve GitHub gibi **bulut altyapısı hesaplarındaki güvenlik risklerini** tespit etmeyi sağlayan açık kaynaklı bir projedir (ShadowAdmins aramaz).
```bash
./index.js --csv=file.csv --console=table --config ./config.js

# Compiance options: --compliance {hipaa,cis,cis1,cis2,pci}
## use "cis" for cis level 1 and 2
```
* [**Prowler**](https://github.com/prowler-cloud/prowler): Prowler, AWS güvenlik en iyi uygulamaları değerlendirmeleri, denetimler, olay müdahalesi, sürekli izleme, sertleştirme ve adli tıp hazırlığı yapmak için Açık Kaynak bir güvenlik aracıdır.
```bash
# Install python3, jq and git
# Install
pip install prowler
prowler -v

# Run
prowler <provider>
prowler aws --profile custom-profile [-M csv json json-asff html]
```
* [**CloudFox**](https://github.com/BishopFox/cloudfox): CloudFox, tanıdık olmayan bulut ortamlarında durumsal farkındalık kazanmanıza yardımcı olur. Penetrasyon test uzmanları ve diğer saldırı güvenliği profesyonellerinin bulut altyapısında istismar edilebilir saldırı yolları bulmalarına yardımcı olmak için oluşturulmuş açık kaynaklı bir komut satırı aracıdır.
```bash
cloudfox aws --profile [profile-name] all-checks
```
* [**ScoutSuite**](https://github.com/nccgroup/ScoutSuite): Scout Suite, bulut ortamlarının güvenlik durumu değerlendirmesini sağlayan açık kaynaklı çoklu bulut güvenlik denetim aracıdır.
```bash
# Install
virtualenv -p python3 venv
source venv/bin/activate
pip install scoutsuite
scout --help

# Get info
scout aws -p dev
```
* [**cs-suite**](https://github.com/SecurityFTW/cs-suite): Cloud Security Suite (python2.7 kullanır ve bakımsız görünüyor)
* [**Zeus**](https://github.com/DenizParlak/Zeus): Zeus, AWS EC2 / S3 / CloudTrail / CloudWatch / KMS için en iyi sertleştirme uygulamaları için güçlü bir araçtır (bakımsız görünüyor). Sadece sistemde varsayılan olarak yapılandırılmış kimlik bilgilerini kontrol eder.

### Sürekli Denetim

* [**cloud-custodian**](https://github.com/cloud-custodian/cloud-custodian): Cloud Custodian, genel bulut hesaplarını ve kaynaklarını yönetmek için bir kurallar motorudur. Kullanıcıların **güvenli ve maliyet açısından optimize edilmiş iyi yönetilen bir bulut altyapısı sağlamak için politikalar tanımlamasına** olanak tanır. Organizasyonların sahip olduğu birçok geçici betiği hafif ve esnek bir araçta birleştirir, birleşik metrikler ve raporlama ile.
* [**pacbot**](https://github.com/tmobile/pacbot)**: Policy as Code Bot (PacBot)**, **bulut için sürekli uyumluluk izleme, uyumluluk raporlama ve güvenlik otomasyonu** platformudur. PacBot'ta, güvenlik ve uyumluluk politikaları kod olarak uygulanır. PacBot tarafından keşfedilen tüm kaynaklar, politika uyumunu ölçmek için bu politikalara karşı değerlendirilir. PacBot **otomatik düzeltme** çerçevesi, politika ihlallerine önceden tanımlanmış eylemlerle otomatik olarak yanıt verme yeteneği sağlar.
* [**streamalert**](https://github.com/airbnb/streamalert)**:** StreamAlert, sunucusuz, **gerçek zamanlı** bir veri analiz çerçevesidir ve **herhangi bir ortamdan veri almanıza, analiz etmenize ve uyarı vermenize** olanak tanır, **tanımladığınız veri kaynaklarını ve uyarı mantığını kullanarak**. Bilgisayar güvenlik ekipleri, olay tespiti ve yanıtı için her gün terabaytlarca günlük verisini taramak için StreamAlert kullanır.

## DEBUG: AWS cli isteklerini yakala
```bash
# Set proxy
export HTTP_PROXY=http://localhost:8080
export HTTPS_PROXY=http://localhost:8080

# Capture with burp nor verifying ssl
aws --no-verify-ssl ...

# Dowload brup cert and transform it to pem
curl http://127.0.0.1:8080/cert --output Downloads/certificate.cer
openssl x509 -inform der -in Downloads/certificate.cer -out Downloads/certificate.pem

# Indicate the ca cert to trust
export AWS_CA_BUNDLE=~/Downloads/certificate.pem

# Run aws cli normally trusting burp cert
aws ...
```
## Referanslar

* [https://www.youtube.com/watch?v=8ZXRw4Ry3mQ](https://www.youtube.com/watch?v=8ZXRw4Ry3mQ)
* [https://cloudsecdocs.com/aws/defensive/tooling/audit/](https://cloudsecdocs.com/aws/defensive/tooling/audit/)

{% hint style="success" %}
AWS Hacking öğren ve pratik yap:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğren ve pratik yap: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekle</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol et!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katıl veya bizi **Twitter**'da takip et 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **HackTricks** ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına PR göndererek hacking ipuçlarını paylaş.

</details>
{% endhint %}
