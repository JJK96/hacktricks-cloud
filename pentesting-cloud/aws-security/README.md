# AWS Pentesting

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtze HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

## Grundlegende Informationen

**Bevor du mit dem Pentesting** einer **AWS**-Umgebung beginnst, gibt es einige **grundlegende Dinge, die du wissen musst** √ºber die Funktionsweise von AWS, um zu verstehen, was du tun musst, wie du Fehlkonfigurationen findest und wie du sie ausnutzen kannst.

Konzepte wie Organisationshierarchie, IAM und andere grundlegende Konzepte werden erkl√§rt in:

{% content-ref url="aws-basic-information/" %}
[aws-basic-information](aws-basic-information/)
{% endcontent-ref %}

## Labs zum Lernen

* [https://github.com/RhinoSecurityLabs/cloudgoat](https://github.com/RhinoSecurityLabs/cloudgoat)
* [https://github.com/BishopFox/iam-vulnerable](https://github.com/BishopFox/iam-vulnerable)
* [https://github.com/nccgroup/sadcloud](https://github.com/nccgroup/sadcloud)
* [https://github.com/bridgecrewio/terragoat](https://github.com/bridgecrewio/terragoat)
* [https://github.com/ine-labs/AWSGoat](https://github.com/ine-labs/AWSGoat)
* [http://flaws.cloud/](http://flaws.cloud/)
* [http://flaws2.cloud/](http://flaws2.cloud/)

Tools zur Simulation von Angriffen:

* [https://github.com/Datadog/stratus-red-team/](https://github.com/Datadog/stratus-red-team/)
* [https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main](https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main)

## AWS Pentester/Red Team Methodik

Um eine AWS-Umgebung zu pr√ºfen, ist es sehr wichtig zu wissen: welche **Dienste verwendet werden**, was **exponiert** wird, wer **Zugriff** auf was hat und wie interne AWS-Dienste und **externe Dienste** verbunden sind.

Aus der Sicht eines Red Teams ist der **erste Schritt, eine AWS-Umgebung zu kompromittieren**, einige **Anmeldeinformationen** zu erhalten. Hier sind einige Ideen, wie man das tun kann:

* **Leaks** in GitHub (oder √§hnliches) - OSINT
* **Social** Engineering
* **Passwort**-Wiederverwendung (Passwort-Leaks)
* Schwachstellen in AWS-gehosteten Anwendungen
* [**Server Side Request Forgery**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf) mit Zugriff auf den Metadata-Endpunkt
* **Lokales Datei-Lesen**
* `/home/USERNAME/.aws/credentials`
* `C:\Users\USERNAME\.aws\credentials`
* 3rd Parties **kompromittiert**
* **Interner** Mitarbeiter
* [**Cognito** ](aws-services/aws-cognito-enum/#cognito)Anmeldeinformationen

Oder durch **Kompromittierung eines nicht authentifizierten Dienstes**, der exponiert ist:

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

Oder wenn du eine **√úberpr√ºfung** durchf√ºhrst, k√∂nntest du einfach **nach Anmeldeinformationen** mit diesen Rollen fragen:

{% content-ref url="aws-permissions-for-a-pentest.md" %}
[aws-permissions-for-a-pentest.md](aws-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
Nachdem du Anmeldeinformationen erhalten hast, musst du wissen, **wem diese Anmeldeinformationen geh√∂ren** und **worauf sie Zugriff haben**, daher musst du einige grundlegende Enumerationen durchf√ºhren:
{% endhint %}

## Grundlegende Enumeration

### SSRF

Wenn du eine SSRF in einer Maschine innerhalb von AWS gefunden hast, √ºberpr√ºfe diese Seite f√ºr Tricks:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf" %}

### Whoami

Eines der ersten Dinge, die du wissen musst, ist, wer du bist (in welchem Konto du dich befindest und andere Informationen √ºber die AWS-Umgebung):
```bash
# Easiest way, but might be monitored?
aws sts get-caller-identity
aws iam get-user # This will get your own user

# If you have a Key ID
aws sts get-access-key-info --access-key-id=ASIA1234567890123456

# Get inside error message
aws sns publish --topic-arn arn:aws:sns:us-east-1:*account id*:aaa --message aaa

# From metadata
TOKEN=`curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600"`
curl -H "X-aws-ec2-metadata-token: $TOKEN" http://169.254.169.254/latest/dynamic/instance-identity/document
```
{% hint style="danger" %}
Beachten Sie, dass Unternehmen **Canary Tokens** verwenden k√∂nnten, um zu erkennen, wann **Tokens gestohlen und verwendet werden**. Es wird empfohlen, zu √ºberpr√ºfen, ob ein Token ein Canary Token ist oder nicht, bevor Sie es verwenden.\
F√ºr weitere Informationen [**diese Seite √ºberpr√ºfen**](aws-services/aws-security-and-detection-services/aws-cloudtrail-enum.md#honeytokens-bypass).
{% endhint %}

### Org Enumeration

{% content-ref url="aws-services/aws-organizations-enum.md" %}
[aws-organizations-enum.md](aws-services/aws-organizations-enum.md)
{% endcontent-ref %}

### IAM Enumeration

Wenn Sie √ºber ausreichende Berechtigungen verf√ºgen, wird das **√úberpr√ºfen der Privilegien jeder Entit√§t innerhalb des AWS-Kontos** Ihnen helfen zu verstehen, was Sie und andere Identit√§ten tun k√∂nnen und wie Sie **Privilegien eskalieren** k√∂nnen.

Wenn Sie nicht √ºber ausreichende Berechtigungen verf√ºgen, um IAM zu enumerieren, k√∂nnen Sie **sie bruteforcen**, um sie herauszufinden.\
√úberpr√ºfen Sie, **wie man die Enumeration und das Brute-Forcing durchf√ºhrt** in:

{% content-ref url="aws-services/aws-iam-enum.md" %}
[aws-iam-enum.md](aws-services/aws-iam-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
Nun, da Sie **einige Informationen √ºber Ihre Anmeldeinformationen** haben (und wenn Sie ein Red Team sind, hoffentlich **wurden Sie nicht entdeckt**). Es ist an der Zeit herauszufinden, welche Dienste in der Umgebung verwendet werden.\
Im folgenden Abschnitt k√∂nnen Sie einige M√∂glichkeiten zur **Enumeration einiger g√§ngiger Dienste** √ºberpr√ºfen.
{% endhint %}

## Services Enumeration, Post-Exploitation & Persistence

AWS hat eine erstaunliche Anzahl von Diensten, auf der folgenden Seite finden Sie **grundlegende Informationen, Enumeration**-Cheatsheets\*\*,\*\* wie man **Erkennung vermeidet**, **Persistenz** erlangt und andere **Post-Exploitation**-Tricks √ºber einige von ihnen:

{% content-ref url="aws-services/" %}
[aws-services](aws-services/)
{% endcontent-ref %}

Beachten Sie, dass Sie **nicht** alle Arbeiten **manuell** durchf√ºhren m√ºssen, unten in diesem Beitrag finden Sie einen **Abschnitt √ºber** [**automatisierte Tools**](./#automated-tools).

Dar√ºber hinaus k√∂nnten Sie in dieser Phase **weitere Dienste entdeckt haben, die f√ºr nicht authentifizierte Benutzer zug√§nglich sind**, die Sie m√∂glicherweise ausnutzen k√∂nnen:

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

## Privilege Escalation

Wenn Sie **zumindest Ihre eigenen Berechtigungen** √ºber verschiedene Ressourcen √ºberpr√ºfen k√∂nnen, k√∂nnten Sie **√ºberpr√ºfen, ob Sie in der Lage sind, weitere Berechtigungen zu erhalten**. Sie sollten sich zumindest auf die in:

{% content-ref url="aws-privilege-escalation/" %}
[aws-privilege-escalation](aws-privilege-escalation/)
{% endcontent-ref %}

## √ñffentlich Exponierte Dienste

W√§hrend der Enumeration von AWS-Diensten k√∂nnten Sie einige gefunden haben, die **Elemente ins Internet exponieren** (VM/Container-Ports, Datenbanken oder Warteschlangendienste, Snapshots oder Buckets...).\
Als Pentester/Red Teamer sollten Sie immer √ºberpr√ºfen, ob Sie **sensible Informationen / Schwachstellen** darauf finden k√∂nnen, da diese Ihnen m√∂glicherweise **weiteren Zugang zum AWS-Konto** verschaffen.

In diesem Buch sollten Sie **Informationen** dar√ºber finden, wie man **exponierte AWS-Dienste findet und √ºberpr√ºft**. Um **Schwachstellen in exponierten Netzwerkdiensten** zu finden, empfehle ich Ihnen, **nach dem spezifischen **Dienst** zu suchen in:

{% embed url="https://book.hacktricks.xyz/" %}

## Kompromittierung der Organisation

### Vom Root-/Verwaltungskonto

Wenn das Verwaltungskonto neue Konten in der Organisation erstellt, wird ein **neue Rolle** im neuen Konto erstellt, standardm√§√üig **`OrganizationAccountAccessRole`** genannt und gibt der **AdministratorAccess**-Richtlinie dem **Verwaltungskonto** Zugriff auf das neue Konto.

<figure><img src="../../.gitbook/assets/image (171).png" alt=""><figcaption></figcaption></figure>

Um also als Administrator auf ein untergeordnetes Konto zuzugreifen, ben√∂tigen Sie:

* **Kompromittieren** Sie das **Verwaltungskonto** und finden Sie die **ID** der **untergeordneten Konten** und die **Namen** der **Rolle** (standardm√§√üig OrganizationAccountAccessRole), die dem Verwaltungskonto den Zugriff als Admin erm√∂glicht.
* Um untergeordnete Konten zu finden, gehen Sie zum Organisationsbereich in der aws-Konsole oder f√ºhren Sie `aws organizations list-accounts` aus.
* Sie k√∂nnen die Namen der Rollen nicht direkt finden, also √ºberpr√ºfen Sie alle benutzerdefinierten IAM-Richtlinien und suchen Sie nach einer, die **`sts:AssumeRole` √ºber die zuvor entdeckten untergeordneten Konten** erlaubt.
* **Kompromittieren** Sie einen **Principal** im Verwaltungskonto mit **`sts:AssumeRole`-Berechtigung √ºber die Rolle in den untergeordneten Konten** (auch wenn das Konto jedem aus dem Verwaltungskonto erlaubt, sich zu impersonieren, sind spezifische `sts:AssumeRole`-Berechtigungen erforderlich).

## Automatisierte Tools

### Recon

* [**aws-recon**](https://github.com/darkbitio/aws-recon): Ein mehrstr√§ngiges AWS-sicherheitsfokussiertes **Inventarsammlungstool** geschrieben in Ruby.
```bash
# Install
gem install aws_recon

# Recon and get json
AWS_PROFILE=<profile> aws_recon \
--services S3,EC2 \
--regions global,us-east-1,us-east-2 \
--verbose
```
* [**cloudlist**](https://github.com/projectdiscovery/cloudlist): Cloudlist ist ein **Multi-Cloud-Tool zum Abrufen von Assets** (Hostnamen, IP-Adressen) von Cloud-Anbietern.
* [**cloudmapper**](https://github.com/duo-labs/cloudmapper): CloudMapper hilft Ihnen, Ihre Amazon Web Services (AWS) Umgebungen zu analysieren. Es enth√§lt jetzt viel mehr Funktionalit√§t, einschlie√ülich Audits f√ºr Sicherheitsprobleme.
```bash
# Installation steps in github
# Create a config.json file with the aws info, like:
{
"accounts": [
{
"default": true,
"id": "<account id>",
"name": "dev"
}
],
"cidrs":
{
"2.2.2.2/28": {"name": "NY Office"}
}
}

# Enumerate
python3 cloudmapper.py collect --profile dev
## Number of resources discovered
python3 cloudmapper.py stats --accounts dev

# Create HTML report
## In the report you will find all the info already
python3 cloudmapper.py report --accounts dev

# Identify potential issues
python3 cloudmapper.py audit --accounts dev --json > audit.json
python3 cloudmapper.py audit --accounts dev --markdow > audit.md
python3 cloudmapper.py iam_report --accounts dev

# Identify admins
## The permissions search for are in https://github.com/duo-labs/cloudmapper/blob/4df9fd7303e0337ff16a08f5e58f1d46047c4a87/shared/iam_audit.py#L163-L175
python3 cloudmapper.py find_admins --accounts dev

# Identify unused elements
python3 cloudmapper.py find_unused --accounts dev

# Identify publivly exposed resources
python3 cloudmapper.py public --accounts dev

python cloudmapper.py prepare #Prepare webserver
python cloudmapper.py webserver #Show webserver
```
* [**cartography**](https://github.com/lyft/cartography): Cartography ist ein Python-Tool, das Infrastruktur-Assets und die Beziehungen zwischen ihnen in einer intuitiven Graph-Ansicht konsolidiert, die von einer Neo4j-Datenbank unterst√ºtzt wird.
```bash
# Install
pip install cartography
## At the time of this writting you need neo4j version 3.5.*

# Get AWS info
AWS_PROFILE=dev cartography --neo4j-uri bolt://127.0.0.1:7687 --neo4j-password-prompt  --neo4j-user neo4j
```
* [**starbase**](https://github.com/JupiterOne/starbase): Starbase sammelt Assets und Beziehungen von Diensten und Systemen, einschlie√ülich Cloud-Infrastruktur, SaaS-Anwendungen, Sicherheitskontrollen und mehr, in einer intuitiven Graph-Ansicht, die von der Neo4j-Datenbank unterst√ºtzt wird.
* [**aws-inventory**](https://github.com/nccgroup/aws-inventory): (Verwendet python2) Dies ist ein Tool, das versucht, **alle** [**AWS-Ressourcen**](https://docs.aws.amazon.com/general/latest/gr/glos-chap.html#resource) zu **entdecken**, die in einem Konto erstellt wurden.
* [**aws\_public\_ips**](https://github.com/arkadiyt/aws\_public\_ips): Es ist ein Tool, um **alle √∂ffentlichen IP-Adressen** (sowohl IPv4/IPv6) zu **holen**, die mit einem AWS-Konto verbunden sind.

### Privesc & Exploiting

* [**SkyArk**](https://github.com/cyberark/SkyArk)**:** Entdecke die privilegiertesten Benutzer in der gescannten AWS-Umgebung, einschlie√ülich der AWS Shadow Admins. Es verwendet powershell. Du kannst die **Definition von privilegierten Richtlinien** in der Funktion **`Check-PrivilegedPolicy`** unter [https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1](https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1) finden.
* [**pacu**](https://github.com/RhinoSecurityLabs/pacu): Pacu ist ein Open-Source **AWS-Exploitation-Framework**, das f√ºr offensive Sicherheitstests gegen Cloud-Umgebungen entwickelt wurde. Es kann **aufz√§hlen**, **Fehlkonfigurationen** finden und **ausnutzen**. Du kannst die **Definition von privilegierten Berechtigungen** unter [https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134](https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134) im **`user_escalation_methods`** dict finden.
* Beachte, dass pacu **nur deine eigenen privescs-Pfade** √ºberpr√ºft (nicht kontoweit).
```bash
# Install
## Feel free to use venvs
pip3 install pacu

# Use pacu CLI
pacu
> import_keys <profile_name> # import 1 profile from .aws/credentials
> import_keys --all # import all profiles
> list # list modules
> exec iam__enum_permissions # Get permissions
> exec iam__privesc_scan # List privileged permissions
```
* [**PMapper**](https://github.com/nccgroup/PMapper): Principal Mapper (PMapper) ist ein Skript und eine Bibliothek zur Identifizierung von Risiken in der Konfiguration von AWS Identity and Access Management (IAM) f√ºr ein AWS-Konto oder eine AWS-Organisation. Es modelliert die verschiedenen IAM-Benutzer und -Rollen in einem Konto als gerichteten Graphen, was √úberpr√ºfungen auf **Privilegieneskalation** und alternative Wege erm√∂glicht, die ein Angreifer nutzen k√∂nnte, um Zugriff auf eine Ressource oder Aktion in AWS zu erlangen. Sie k√∂nnen die **Berechtigungen, die zur Ermittlung von privesc-Pfaden verwendet werden**, in den Dateinamen finden, die auf `_edges.py` enden, unter [https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing](https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing)
```bash
# Install
pip install principalmapper

# Get data
pmapper --profile dev graph create
pmapper --profile dev graph display # Show basic info
# Generate graph
pmapper --profile dev visualize # Generate svg graph file (can also be png, dot and graphml)
pmapper --profile dev visualize --only-privesc # Only privesc permissions

# Generate analysis
pmapper --profile dev analysis
## Run queries
pmapper --profile dev query 'who can do iam:CreateUser'
pmapper --profile dev query 'preset privesc *' # Get privescs with admins

# Get organization hierarchy data
pmapper --profile dev orgs create
pmapper --profile dev orgs display
```
* [**cloudsplaining**](https://github.com/salesforce/cloudsplaining): Cloudsplaining ist ein AWS IAM Security Assessment Tool, das Verst√∂√üe gegen das Prinzip der minimalen Rechte identifiziert und einen risikopriorisierten HTML-Bericht erstellt.\
Es zeigt Ihnen potenziell **√ºberprivilegierte** Kunden-, Inline- und aws-**Richtlinien** und welche **Prinzipale Zugriff darauf haben**. (Es √ºberpr√ºft nicht nur auf privesc, sondern auch auf andere interessante Berechtigungen, empfohlen zur Nutzung).
```bash
# Install
pip install cloudsplaining

# Download IAM policies to check
## Only the ones attached with the versions used
cloudsplaining download --profile dev

# Analyze the IAM policies
cloudsplaining scan --input-file /private/tmp/cloudsplaining/dev.json --output /tmp/files/
```
* [**cloudjack**](https://github.com/prevade/cloudjack): CloudJack bewertet AWS-Konten auf **Subdomain-Hijacking-Schwachstellen** aufgrund entkoppelter Route53- und CloudFront-Konfigurationen.
* [**ccat**](https://github.com/RhinoSecurityLabs/ccat): List ECR repos -> Pull ECR repo -> Backdoor it -> Push backdoored image
* [**Dufflebag**](https://github.com/bishopfox/dufflebag): Dufflebag ist ein Tool, das **√∂ffentliche Elastic Block Storage (**EBS) Snapshots nach Geheimnissen durchsucht**, die m√∂glicherweise versehentlich hinterlassen wurden.

### Audit

* [**cloudsploit**](https://github.com/aquasecurity/cloudsploit)**:** CloudSploit von Aqua ist ein Open-Source-Projekt, das die Erkennung von **Sicherheitsrisiken in Cloud-Infrastruktur-Konten** erm√∂glicht, einschlie√ülich: Amazon Web Services (AWS), Microsoft Azure, Google Cloud Platform (GCP), Oracle Cloud Infrastructure (OCI) und GitHub (Es sucht nicht nach ShadowAdmins).
```bash
./index.js --csv=file.csv --console=table --config ./config.js

# Compiance options: --compliance {hipaa,cis,cis1,cis2,pci}
## use "cis" for cis level 1 and 2
```
* [**Prowler**](https://github.com/prowler-cloud/prowler): Prowler ist ein Open-Source-Sicherheitstool zur Durchf√ºhrung von AWS-Sicherheits-Best-Practice-Bewertungen, Audits, Incident Response, kontinuierlicher √úberwachung, H√§rtung und Forensik-Bereitschaft.
```bash
# Install python3, jq and git
# Install
pip install prowler
prowler -v

# Run
prowler <provider>
prowler aws --profile custom-profile [-M csv json json-asff html]
```
* [**CloudFox**](https://github.com/BishopFox/cloudfox): CloudFox hilft Ihnen, sich in unbekannten Cloud-Umgebungen zurechtzufinden. Es ist ein Open-Source-Befehlszeilentool, das entwickelt wurde, um Penetrationstestern und anderen offensiven Sicherheitsprofis zu helfen, ausnutzbare Angriffspfade in Cloud-Infrastrukturen zu finden.
```bash
cloudfox aws --profile [profile-name] all-checks
```
* [**ScoutSuite**](https://github.com/nccgroup/ScoutSuite): Scout Suite ist ein Open-Source-Multi-Cloud-Sicherheitsaudit-Tool, das die Bewertung der Sicherheitslage von Cloud-Umgebungen erm√∂glicht.
```bash
# Install
virtualenv -p python3 venv
source venv/bin/activate
pip install scoutsuite
scout --help

# Get info
scout aws -p dev
```
* [**cs-suite**](https://github.com/SecurityFTW/cs-suite): Cloud Security Suite (verwendet python2.7 und scheint nicht gepflegt zu werden)
* [**Zeus**](https://github.com/DenizParlak/Zeus): Zeus ist ein leistungsstarkes Tool f√ºr AWS EC2 / S3 / CloudTrail / CloudWatch / KMS Best Practices zur H√§rtung (scheint nicht gepflegt zu werden). Es √ºberpr√ºft nur standardm√§√üig konfigurierte Anmeldeinformationen im System.

### St√§ndige √úberpr√ºfung

* [**cloud-custodian**](https://github.com/cloud-custodian/cloud-custodian): Cloud Custodian ist eine Regel-Engine zur Verwaltung von √∂ffentlichen Cloud-Konten und -Ressourcen. Es erm√∂glicht Benutzern, **Richtlinien zu definieren, um eine gut verwaltete Cloud-Infrastruktur zu erm√∂glichen**, die sowohl sicher als auch kostenoptimiert ist. Es konsolidiert viele der Ad-hoc-Skripte, die Organisationen haben, in ein leichtgewichtiges und flexibles Tool mit einheitlichen Metriken und Berichten.
* [**pacbot**](https://github.com/tmobile/pacbot)**: Policy as Code Bot (PacBot)** ist eine Plattform f√ºr **kontinuierliche Compliance-√úberwachung, Compliance-Berichterstattung und Sicherheitsautomatisierung f√ºr die Cloud**. In PacBot werden Sicherheits- und Compliance-Richtlinien als Code implementiert. Alle von PacBot entdeckten Ressourcen werden anhand dieser Richtlinien bewertet, um die Richtlinieneinhaltung zu messen. Das PacBot **Auto-Fix**-Framework bietet die M√∂glichkeit, automatisch auf Richtlinienverst√∂√üe zu reagieren, indem vordefinierte Aktionen ausgef√ºhrt werden.
* [**streamalert**](https://github.com/airbnb/streamalert)**:** StreamAlert ist ein serverloses, **Echtzeit**-Datenanalyse-Framework, das es Ihnen erm√∂glicht, **Daten aus jeder Umgebung zu erfassen, zu analysieren und zu alarmieren**, **unter Verwendung von Datenquellen und Alarmierungslogik, die Sie definieren**. Computer-Sicherheitsteams verwenden StreamAlert, um t√§glich Terabytes von Protokolldaten auf Vorfallserkennung und -reaktion zu scannen.

## DEBUG: AWS CLI-Anfragen erfassen
```bash
# Set proxy
export HTTP_PROXY=http://localhost:8080
export HTTPS_PROXY=http://localhost:8080

# Capture with burp nor verifying ssl
aws --no-verify-ssl ...

# Dowload brup cert and transform it to pem
curl http://127.0.0.1:8080/cert --output Downloads/certificate.cer
openssl x509 -inform der -in Downloads/certificate.cer -out Downloads/certificate.pem

# Indicate the ca cert to trust
export AWS_CA_BUNDLE=~/Downloads/certificate.pem

# Run aws cli normally trusting burp cert
aws ...
```
## Referenzen

* [https://www.youtube.com/watch?v=8ZXRw4Ry3mQ](https://www.youtube.com/watch?v=8ZXRw4Ry3mQ)
* [https://cloudsecdocs.com/aws/defensive/tooling/audit/](https://cloudsecdocs.com/aws/defensive/tooling/audit/)

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Unterst√ºtze HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Teile Hacking-Tricks, indem du PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}
