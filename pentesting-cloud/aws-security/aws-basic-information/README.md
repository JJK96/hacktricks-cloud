# AWS - Basic Information

{% hint style="success" %}
AWS Hacking рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХреЛ рд╕рдорд░реНрдерди рджреЗрдВ</summary>

* [**subscription plans**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram group**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рд╣рдореЗрдВ **Twitter** ЁЯРж рдкрд░ рдлреЙрд▓реЛ рдХрд░реЗрдВ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>
{% endhint %}

## Organization Hierarchy

![](<../../../.gitbook/assets/image (151).png>)

### Accounts

AWS рдореЗрдВ рдПрдХ **root account** рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреА **organization** рдХреЗ рд▓рд┐рдП **рд╕рднреА accounts рдХрд╛ parent container** рд╣реЛрддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдкрдХреЛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрд╕ рдЦрд╛рддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЖрдк **рдЕрд▓рдЧ-рдЕрд▓рдЧ AWS** рдЕрд╡рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдЕрдиреНрдп рдЦрд╛рддреЗ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ**ред

рдпрд╣ **рд╕реБрд░рдХреНрд╖рд╛** рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдмрд╣реБрдд рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ **рдПрдХ рдЦрд╛рддрд╛ рджреВрд╕рд░реЗ рдЦрд╛рддреЗ рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рдкрд╛рдПрдЧрд╛** (рдЬрдм рддрдХ рдХрд┐ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдкреБрд▓ рдирд╣реАрдВ рдмрдирд╛рдП рдЬрд╛рддреЗ), рдЗрд╕ рддрд░рд╣ рдЖрдк рддреИрдирд╛рддреА рдХреЗ рдмреАрдЪ рд╕реАрдорд╛рдПрдВ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

рдЗрд╕рд▓рд┐рдП, рдПрдХ рд╕рдВрдЧрдарди рдореЗрдВ **рджреЛ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЦрд╛рддреЗ рд╣реЛрддреЗ рд╣реИрдВ** (рд╣рдо AWS рдЦрд╛рддреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ рди рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ): рдПрдХ рдЦрд╛рддрд╛ рдЬрд┐рд╕реЗ рдкреНрд░рдмрдВрдзрди рдЦрд╛рддрд╛ рдирд╛рдорд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рд╕рджрд╕реНрдп рдЦрд╛рддреЗред

*   **рдкреНрд░рдмрдВрдзрди рдЦрд╛рддрд╛ (root account)** рд╡рд╣ рдЦрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдк рд╕рдВрдЧрдарди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддреЗ рд╣реИрдВред рд╕рдВрдЧрдарди рдХреЗ рдкреНрд░рдмрдВрдзрди рдЦрд╛рддреЗ рд╕реЗ, рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

* рд╕рдВрдЧрдарди рдореЗрдВ рдЦрд╛рддреЗ рдмрдирд╛рдПрдВ
* рдЕрдиреНрдп рдореМрдЬреВрджрд╛ рдЦрд╛рддреЛрдВ рдХреЛ рд╕рдВрдЧрдарди рдореЗрдВ рдЖрдордВрддреНрд░рд┐рдд рдХрд░реЗрдВ
* рдЦрд╛рддреЛрдВ рдХреЛ рд╕рдВрдЧрдарди рд╕реЗ рд╣рдЯрд╛рдПрдВ
* рдЖрдордВрддреНрд░рдг рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░реЗрдВ
* рд╕рдВрдЧрдарди рдХреЗ рднреАрддрд░ рд╕рдВрд╕реНрдерд╛рдУрдВ (roots, OUs, рдпрд╛ accounts) рдкрд░ рдиреАрддрд┐рдпрд╛рдВ рд▓рд╛рдЧреВ рдХрд░реЗрдВ
* рд╕рдВрдЧрдарди рдХреЗ рд╕рднреА рдЦрд╛рддреЛрдВ рдореЗрдВ рд╕реЗрд╡рд╛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерд┐рдд AWS рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдПрдХреАрдХрд░рдг рд╕рдХреНрд╖рдо рдХрд░реЗрдВред
* рдЗрд╕ root account/organization рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдИрдореЗрд▓ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ root user рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧрд┐рди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред

рдкреНрд░рдмрдВрдзрди рдЦрд╛рддреЗ рдХреА **рднреБрдЧрддрд╛рдирдХрд░реНрддрд╛ рдЦрд╛рддреЗ рдХреА рдЬрд┐рдореНрдореЗрджрд╛рд░рд┐рдпрд╛рдВ** рд╣реЛрддреА рд╣реИрдВ рдФрд░ рдпрд╣ рд╕рджрд╕реНрдп рдЦрд╛рддреЛрдВ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдП рдЧрдП рд╕рднреА рд╢реБрд▓реНрдХреЛрдВ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реЛрддрд╛ рд╣реИред рдЖрдк рдХрд┐рд╕реА рд╕рдВрдЧрдарди рдХреЗ рдкреНрд░рдмрдВрдзрди рдЦрд╛рддреЗ рдХреЛ рдирд╣реАрдВ рдмрджрд▓ рд╕рдХрддреЗред
* **рд╕рджрд╕реНрдп рдЦрд╛рддреЗ** рд╕рдВрдЧрдарди рдХреЗ рд╕рднреА рд╢реЗрд╖ рдЦрд╛рддреЛрдВ рдХреЛ рдмрдирд╛рддреЗ рд╣реИрдВред рдПрдХ рдЦрд╛рддрд╛ рдПрдХ рд╕рдордп рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рд╕рдВрдЧрдарди рдХрд╛ рд╕рджрд╕реНрдп рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдЖрдк рдХреЗрд╡рд▓ рдЙрд╕ рдПрдХ рдЦрд╛рддреЗ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЦрд╛рддреЗ рд╕реЗ рдПрдХ рдиреАрддрд┐ рд╕рдВрд▓рдЧреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* рд╕рджрд╕реНрдп рдЦрд╛рддреЛрдВ рдореЗрдВ **рдорд╛рдиреНрдп рдИрдореЗрд▓ рдкрддрд╛** рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдЙрдирдХрд╛ **рдирд╛рдо** рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░ рд╡реЗ рдмрд┐рд▓рд┐рдВрдЧ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗ (рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдЗрд╕рдХреА рдкрд╣реБрдВрдЪ рджреА рдЬрд╛ рд╕рдХрддреА рд╣реИ)ред
```
aws organizations create-account --account-name testingaccount --email testingaccount@lalala1233fr.com
```
### **Organization Units**

Accounts рдХреЛ **Organization Units (OU)** рдореЗрдВ рд╕рдореВрд╣рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕ рддрд░рд╣, рдЖрдк Organization Unit рдХреЗ рд▓рд┐рдП **policies** рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ **рд╕рднреА children accounts рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрдВрдЧреА**ред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдПрдХ OU рдХреЗ children рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдиреНрдп OUs рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред
```bash
# You can get the root id from aws organizations list-roots
aws organizations create-organizational-unit --parent-id r-lalala --name TestOU
```
### Service Control Policy (SCP)

рдПрдХ **рд╕реЗрд╡рд╛ рдирд┐рдпрдВрддреНрд░рдг рдиреАрддрд┐ (SCP)** рдПрдХ рдиреАрддрд┐ рд╣реИ рдЬреЛ рдЙрди рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреА рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рднреВрдорд┐рдХрд╛рдПрдВ рдЙрди рдЦрд╛рддреЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рди рдкрд░ SCP рдкреНрд░рднрд╛рд╡ рдбрд╛рд▓рддрд╛ рд╣реИред SCPs **IAM рдЕрдиреБрдорддрд┐рдпреЛрдВ рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рдорд╛рди** рд╣реИрдВ рд╕рд┐рд╡рд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рд╡реЗ **рдХреЛрдИ рднреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддреЗ**ред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, SCPs рдПрдХ рд╕рдВрдЧрдарди, рд╕рдВрдЧрдардирд╛рддреНрдордХ рдЗрдХрд╛рдИ (OU), рдпрд╛ рдЦрд╛рддреЗ рдХреЗ рд▓рд┐рдП **рдЕрдзрд┐рдХрддрдо рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВред рдЬрдм рдЖрдк рдЕрдкрдиреЗ рд╕рдВрдЧрдарди рдХреА рдЬрдбрд╝ рдпрд╛ OU рд╕реЗ рдПрдХ SCP рд╕рдВрд▓рдЧреНрди рдХрд░рддреЗ рд╣реИрдВ, рддреЛ **SCP рд╕рджрд╕реНрдп рдЦрд╛рддреЛрдВ рдореЗрдВ рд╕рдВрд╕реНрдерд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рддрд╛ рд╣реИ**ред

рдпрд╣ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ **рдпрд╣рд╛рдВ рддрдХ рдХрд┐ рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рднреА рдХреБрдЫ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ CloudTrail рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдпрд╛ рдмреИрдХрдЕрдк рдХреЛ рд╣рдЯрд╛рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред\
рдЗрд╕рд╕реЗ рдмрдЪрдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рдпрд╣ рд╣реИ рдХрд┐ **рдорд╛рд╕реНрдЯрд░ рдЦрд╛рддрд╛** рднреА рд╕рдордЭреМрддрд╛ рдХрд┐рдпрд╛ рдЬрд╛рдП рдЬреЛ SCPs рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ (рдорд╛рд╕реНрдЯрд░ рдЦрд╛рддрд╛ рдЕрд╡рд░реБрджреНрдз рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛)ред

{% hint style="warning" %}
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **SCPs рдХреЗрд╡рд▓ рдЦрд╛рддреЗ рдореЗрдВ рдкреНрд░рдореБрдЦреЛрдВ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рддреЗ рд╣реИрдВ**, рдЗрд╕рд▓рд┐рдП рдЕрдиреНрдп рдЦрд╛рддреЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдПрдХ SCP рдХрд╛ `s3:GetObject` рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдирд╛ рдЖрдкрдХреЗ рдЦрд╛рддреЗ рдореЗрдВ **рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ S3 рдмрдХреЗрдЯ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рд╕реЗ рд▓реЛрдЧреЛрдВ рдХреЛ рдирд╣реАрдВ рд░реЛрдХреЗрдЧрд╛**ред
{% endhint %}

SCP рдЙрджрд╛рд╣рд░рдг:

* рд░реВрдЯ рдЦрд╛рддреЗ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ
* рдХреЗрд╡рд▓ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ
* рдХреЗрд╡рд▓ рд╢реНрд╡реЗрдд-рд╕реВрдЪреАрдмрджреНрдз рд╕реЗрд╡рд╛рдУрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ
* GuardDuty, CloudTrail, рдФрд░ S3 Public Block Access рдХреЛ рдЕрдХреНрд╖рдо рд╣реЛрдиреЗ рд╕реЗ

  рд░реЛрдХреЗрдВ
* рд╕реБрд░рдХреНрд╖рд╛/рдШрдЯрдирд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдпрд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рд╕реЗ

  рд░реЛрдХреЗрдВред
* рдмреИрдХрдЕрдк рдХреЛ рд╣рдЯрд╛рдиреЗ рд╕реЗ рд░реЛрдХреЗрдВред
* IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬрд┐рдпрд╛рдБ рдмрдирд╛рдиреЗ рд╕реЗ рд░реЛрдХреЗрдВ

**JSON рдЙрджрд╛рд╣рд░рдг** рдЦреЛрдЬреЗрдВ [https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_manage\_policies\_scps\_examples.html](https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_manage\_policies\_scps\_examples.html)

### ARN

**Amazon Resource Name** рд╡рд╣ **рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рдо** рд╣реИ рдЬреЛ AWS рдХреЗ рдЕрдВрджрд░ рд╣рд░ рд╕рдВрд╕рд╛рдзрди рдХрд╛ рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реЛрддрд╛ рд╣реИ:
```
arn:partition:service:region:account-id:resource-type/resource-id
arn:aws:elasticbeanstalk:us-west-1:123456789098:environment/App/Env
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ AWS рдореЗрдВ 4 рдкрд╛рд░реНрдЯрд┐рд╢рди рд╣реИрдВ рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рдХреЗрд╡рд▓ 3 рддрд░реАрдХреЗ рд╣реИрдВ:

* AWS Standard: `aws`
* AWS China: `aws-cn`
* AWS US public Internet (GovCloud): `aws-us-gov`
* AWS Secret (US Classified): `aws`

## IAM - Identity and Access Management

IAM рд╡рд╣ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ AWS рдЦрд╛рддреЗ рдХреЗ рдЕрдВрджрд░ **Authentication**, **Authorization** рдФрд░ **Access Control** рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧреАред

* **Authentication** - рдПрдХ рдкрд╣рдЪрд╛рди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдФрд░ рдЙрд╕ рдкрд╣рдЪрд╛рди рдХреА рд╕рддреНрдпрд╛рдкрди рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ред рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЙрдкрд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рдкрд╣рдЪрд╛рди рдФрд░ рд╕рддреНрдпрд╛рдкрдиред
* **Authorization** - рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдПрдХ рдкрд╣рдЪрд╛рди рдХреЛ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рднреАрддрд░ рдХреНрдпрд╛ рдПрдХреНрд╕реЗрд╕ рдкреНрд░рд╛рдкреНрдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдЬрдм рдЗрд╕реЗ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛред
* **Access Control** - рд╕реБрд░рдХреНрд╖рд┐рдд рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪ рдХреИрд╕реЗ рджреА рдЬрд╛рддреА рд╣реИ, рдЗрд╕рдХрд╛ рддрд░реАрдХрд╛ рдФрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛

IAM рдХреЛ рдЗрд╕рдХреА рдХреНрд╖рдорддрд╛ рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЖрдкрдХреЗ AWS рдЦрд╛рддреЗ рдХреЗ рднреАрддрд░ рдЖрдкрдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд╣рдЪрд╛рди рдХреА рдкреНрд░рдорд╛рдгреАрдХрд░рдг, рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдФрд░ рдПрдХреНрд╕реЗрд╕ рдирд┐рдпрдВрддреНрд░рдг рддрдВрддреНрд░ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд, рдирд┐рдпрдВрддреНрд░рд┐рдд рдФрд░ рд╢рд╛рд╕рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред

### [AWS account root user](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_root-user.html) <a href="#id_root" id="id_root"></a>

рдЬрдм рдЖрдк рдкрд╣рд▓реА рдмрд╛рд░ рдПрдХ Amazon Web Services (AWS) рдЦрд╛рддрд╛ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдПрдХрд▓ рд╕рд╛рдЗрди-рдЗрди рдкрд╣рдЪрд╛рди рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдЦрд╛рддреЗ рдореЗрдВ рд╕рднреА AWS рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ **рдкреВрд░реНрдг рдкрд╣реБрдВрдЪ** рд╣реЛрддреА рд╣реИред рдпрд╣ AWS рдЦрд╛рддрд╛ _**root user**_ рд╣реИ рдФрд░ рдЗрд╕реЗ **рдИрдореЗрд▓ рдкрддрд╛ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб** рдХреЗ рд╕рд╛рде рд╕рд╛рдЗрди рдЗрди рдХрд░рдХреЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдкрдиреЗ рдЦрд╛рддрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдерд╛ред

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдПрдХ рдирдпрд╛ **admin user** рдХреЗ рдкрд╛рд╕ **root user** рд╕реЗ рдХрдо рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛрдВрдЧреАред

рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рдпрд╣ рдЕрдиреБрд╢рдВрд╕рд╛ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдПрдБ рдФрд░ рдЗрд╕ рдПрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░реЗрдВред

### [IAM users](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_users.html) <a href="#id_iam-users" id="id_iam-users"></a>

рдПрдХ IAM _user_ рдПрдХ рдЗрдХрд╛рдИ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк AWS рдореЗрдВ рдмрдирд╛рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ **рд╡реНрдпрдХреНрддрд┐ рдпрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдЬреЛ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ **AWS рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП** рдХрд░рддрд╛ рд╣реИред AWS рдореЗрдВ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдирд╛рдо рдФрд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ (рдкрд╛рд╕рд╡рд░реНрдб рдФрд░ рджреЛ рддрдХ рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬрд┐рдпрд╛рдБ) рд╣реЛрддреЗ рд╣реИрдВред

рдЬрдм рдЖрдк рдПрдХ IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕реЗ **рдЕрдиреБрдорддрд┐рдпрд╛рдБ** рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдЗрд╕реЗ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣ рдХрд╛ рд╕рджрд╕реНрдп** рдмрдирд╛рдХрд░ рдЬрд┐рд╕рдореЗрдВ рдЙрдкрдпреБрдХреНрдд рдЕрдиреБрдорддрд┐ рдиреАрддрд┐рдпрд╛рдБ рд╕рдВрд▓рдЧреНрди рд╣реЛрддреА рд╣реИрдВ (рдЕрдиреБрд╢рдВрд╕рд┐рдд), рдпрд╛ **рдиреАрддрд┐рдпреЛрдВ рдХреЛ рд╕реАрдзреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рд╕рдВрд▓рдЧреНрди рдХрд░рдХреЗ**ред

рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдкрд╛рд╕ **MFA рд╕рдХреНрд╖рдо рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП** рдХрдВрд╕реЛрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред MFA рд╕рдХреНрд╖рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ API рдЯреЛрдХрди MFA рджреНрд╡рд╛рд░рд╛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред рдпрджрд┐ рдЖрдк **MFA рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА API рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреА рдкрд╣реБрдВрдЪ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рддреЛ рдЖрдкрдХреЛ рдиреАрддрд┐ рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдХреБрдЫ рдХреНрд░рд┐рдпрд╛рдПрдБ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП MFA рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг [**рдпрд╣рд╛рдБ**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_mfa\_configure-api-require.html))ред

#### CLI

* **Access Key ID**: 20 рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЕрдкрд░рдХреЗрд╕ рдЕрд▓реНрдлрд╝рд╛рдиреНрдпреВрдореЗрд░рд┐рдХ рд╡рд░реНрдг рдЬреИрд╕реЗ AKHDNAPO86BSHKDIRYT
* **Secret access key ID**: 40 рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЕрдкрд░ рдФрд░ рд▓реЛрдЕрд░рдХреЗрд╕ рд╡рд░реНрдг: S836fh/J73yHSb64Ag3Rkdi/jaD6sPl6/antFtU (рдЦреЛрдИ рд╣реБрдИ рдЧреБрдкреНрдд рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА рдЖрдИрдбреА рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИ)ред

рдЬрдм рднреА рдЖрдкрдХреЛ **Access Key рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ** рддреЛ рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЖрдкрдХреЛ рдкрд╛рд▓рди рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП:\
_рдирдИ рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА рдмрдирд╛рдПрдБ -> рдирдИ рдХреБрдВрдЬреА рдХреЛ рд╕рд┐рд╕реНрдЯрдо/рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкрд░ рд▓рд╛рдЧреВ рдХрд░реЗрдВ -> рдореВрд▓ рдХреБрдВрдЬреА рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдВ -> рдирдИ рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА рдХрд╛рдо рдХрд░ рд░рд╣реА рд╣реИ рдпрд╣ рдкрд░реАрдХреНрд╖рдг рдФрд░ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ -> рдкреБрд░рд╛рдиреА рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА рд╣рдЯрд╛рдПрдБ_

### MFA - Multi Factor Authentication

рдпрд╣ рдЖрдкрдХреЗ рдореМрдЬреВрджрд╛ рддрд░реАрдХреЛрдВ рдЬреИрд╕реЗ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд **рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рд░рдХ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП** рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд╛ рдПрдХ рдмрд╣реБ-рдХрд╛рд░рдХ рд╕реНрддрд░ рдмрдирд╛рдирд╛ред\
рдЖрдк рдПрдХ **рдореБрдлреНрдд рд╡рд░реНрдЪреБрдЕрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдпрд╛ рдПрдХ рднреМрддрд┐рдХ рдбрд┐рд╡рд╛рдЗрд╕** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк AWS рдореЗрдВ MFA рдХреЛ рд╕рдХреНрд░рд┐рдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореБрдлреНрдд рдореЗрдВ google authentication рдЬреИрд╕реЗ рдРрдкреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

MFA рд╢рд░реНрддреЛрдВ рдХреЗ рд╕рд╛рде рдиреАрддрд┐рдпрд╛рдБ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗ рд╕рдВрд▓рдЧреНрди рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ:

* рдПрдХ IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рд╕рдореВрд╣
* рдПрдХ рд╕рдВрд╕рд╛рдзрди рдЬреИрд╕реЗ Amazon S3 рдмрдХреЗрдЯ, Amazon SQS рдХрддрд╛рд░, рдпрд╛ Amazon SNS рд╡рд┐рд╖рдп
* рдПрдХ IAM рднреВрдорд┐рдХрд╛ рдХреА рдЯреНрд░рд╕реНрдЯ рдиреАрддрд┐ рдЬрд┐рд╕реЗ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдЧреНрд░рд╣рдг рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ

рдпрджрд┐ рдЖрдк **CLI рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ** рдПрдХ рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЬреЛ **MFA рдХреА рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рд╣реИ** рддреЛ рдЖрдкрдХреЛ **`GetSessionToken`** рдХреЙрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдпрд╣ рдЖрдкрдХреЛ MFA рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде рдПрдХ рдЯреЛрдХрди рджреЗрдЧрд╛ред\
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **`AssumeRole` рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдореЗрдВ рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ**ред
```bash
aws sts get-session-token --serial-number <arn_device> --token-code <code>
```
рдЬреИрд╕рд╛ рдХрд┐ [**рдпрд╣рд╛рдБ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_mfa\_configure-api-require.html), рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдорд╛рдорд▓реЗ рд╣реИрдВ рдЬрд╣рд╛рдБ **MFA рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛**ред

### [IAM user groups](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_groups.html) <a href="#id_iam-groups" id="id_iam-groups"></a>

рдПрдХ IAM [user group](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_groups.html) рдПрдХ рддрд░реАрдХрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ **рдХрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдПрдХ рдмрд╛рд░ рдореЗрдВ рдиреАрддрд┐рдпрд╛рдБ рд╕рдВрд▓рдЧреНрди рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ**, рдЬрд┐рд╕рд╕реЗ рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред **Roles рдФрд░ groups рдХрд┐рд╕реА group рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ**ред

рдЖрдк рдПрдХ **identity-based policy рдХреЛ user group рд╕реЗ рд╕рдВрд▓рдЧреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рддрд╛рдХрд┐ user group рдХреЗ рд╕рднреА **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** **рдиреАрддрд┐ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ**ред рдЖрдк рдПрдХ **user group** рдХреЛ **`Principal`** рдХреЗ рд░реВрдк рдореЗрдВ **рдиреАрддрд┐** (рдЬреИрд╕реЗ resource-based policy) рдореЗрдВ рдкрд╣рдЪрд╛рди рдирд╣реАрдВ рд╕рдХрддреЗ рдХреНрдпреЛрдВрдХрд┐ groups рдЕрдиреБрдорддрд┐рдпреЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИрдВ, рдкреНрд░рдорд╛рдгреАрдХрд░рдг рд╕реЗ рдирд╣реАрдВ, рдФрд░ principals рдкреНрд░рдорд╛рдгрд┐рдд IAM entities рд╣реИрдВред

рдпрд╣рд╛рдБ user groups рдХреА рдХреБрдЫ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рд╣реИрдВ:

* рдПрдХ user **group** рдореЗрдВ **рдХрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ**, рдФрд░ рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** **рдХрдИ groups рдХрд╛ рд╕рджрд╕реНрдп рд╣реЛ рд╕рдХрддрд╛ рд╣реИ**ред
* **User groups рдХреЛ nested рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛**; рд╡реЗ рдХреЗрд╡рд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЕрдиреНрдп user groups рдХреЛ рдирд╣реАрдВред
* **рдХреЛрдИ рдбрд┐рдлрд╝реЙрд▓реНрдЯ user group рдирд╣реАрдВ рд╣реИ рдЬреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ AWS рдЦрд╛рддреЗ рдХреЗ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ**ред рдпрджрд┐ рдЖрдк рдРрд╕рд╛ user group рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЗрд╕реЗ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЗрд╕рдореЗрдВ рдЕрд╕рд╛рдЗрди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред
* AWS рдЦрд╛рддреЗ рдореЗрдВ IAM рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдЖрдХрд╛рд░, рдЬреИрд╕реЗ groups рдХреА рд╕рдВрдЦреНрдпрд╛, рдФрд░ groups рдХреА рд╕рдВрдЦреНрдпрд╛ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рджрд╕реНрдп рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд╕реАрдорд┐рдд рд╣реИрдВред рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, [IAM рдФрд░ AWS STS quotas](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference\_iam-quotas.html) рджреЗрдЦреЗрдВред

### [IAM roles](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_roles.html) <a href="#id_iam-roles" id="id_iam-roles"></a>

рдПрдХ IAM **role** рдПрдХ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** рдХреЗ рд╕рдорд╛рди рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдПрдХ **рдкрд╣рдЪрд╛рди рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЕрдиреБрдорддрд┐ рдиреАрддрд┐рдпрд╛рдБ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреА рд╣реИрдВ рдХрд┐** рдпрд╣ AWS рдореЗрдВ рдХреНрдпрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдХреНрдпрд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдПрдХ role рдХреЗ рд╕рд╛рде **рдХреЛрдИ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕** (рдкрд╛рд╕рд╡рд░реНрдб рдпрд╛ рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬрд┐рдпрд╛рдБ) рд╕рдВрдмрджреНрдз рдирд╣реАрдВ рд╣реЛрддреА рд╣реИрдВред рдПрдХ рд╡реНрдпрдХреНрддрд┐ рдХреЗ рд╕рд╛рде рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рдВрдмрджреНрдз рд╣реЛрдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдПрдХ role рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп **рдХрд┐рд╕реА рднреА рд╡реНрдпрдХреНрддрд┐ рджреНрд╡рд╛рд░рд╛ рдЧреНрд░рд╣рдг рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдФрд░ рдкрд░реНрдпрд╛рдкреНрдд рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ)**ред рдПрдХ **IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ** рдПрдХ role рдЧреНрд░рд╣рдг рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХреЗред рдПрдХ role рдХреЛ [**federated user**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_roles\_providers.html) рдХреЛ рдЕрд╕рд╛рдЗрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ IAM рдХреЗ рдмрдЬрд╛рдп рдПрдХ рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд╛рдЗрди рдЗрди рдХрд░рддрд╛ рд╣реИред

рдПрдХ IAM role рдореЗрдВ **рджреЛ рдкреНрд░рдХрд╛рд░ рдХреА рдиреАрддрд┐рдпрд╛рдБ** рд╣реЛрддреА рд╣реИрдВ: рдПрдХ **trust policy**, рдЬреЛ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА, рдЬреЛ **рдХреМрди role рдЧреНрд░рд╣рдг рдХрд░ рд╕рдХрддрд╛ рд╣реИ** рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреА рд╣реИ, рдФрд░ рдПрдХ **permissions policy**, рдЬреЛ рдЦрд╛рд▓реА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА, рдЬреЛ **рдпрд╣ рдХреНрдпрд╛ рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХрддрд╛ рд╣реИ** рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреА рд╣реИред

#### AWS Security Token Service (STS)

AWS Security Token Service (STS) рдПрдХ рд╡реЗрдм рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ **рдЕрд╕реНрдерд╛рдпреА, рд╕реАрдорд┐рдд-рдЕрдзрд┐рдХрд╛рд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ рдЬрд╛рд░реА рдХрд░рдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ**ред рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рд╣реИ:

### [Temporary credentials in IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_temp.html) <a href="#id_temp-creds" id="id_temp-creds"></a>

**рдЕрд╕реНрдерд╛рдпреА рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ IAM roles рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ**, рд▓реЗрдХрд┐рди рдЗрдирдХреЗ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧ рднреА рд╣реИрдВред рдЖрдк рдЕрд╕реНрдерд╛рдпреА рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рдЖрдкрдХреЗ рдорд╛рдирдХ IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИред рдпрд╣ **рдЖрдкрдХреЛ рдЙрди рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдЧрд▓рддреА рд╕реЗ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИ рдЬреЛ рдЕрдзрд┐рдХ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрдордд рдирд╣реАрдВ рд╣реИрдВ**ред рдЕрд╕реНрдерд╛рдпреА рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХрд╛ рдПрдХ рд▓рд╛рдн рдпрд╣ рд╣реИ рдХрд┐ рд╡реЗ рдПрдХ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╕рдордп рдХреЗ рдмрд╛рдж рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреА рд╡реИрдзрддрд╛ рдХреА рдЕрд╡рдзрд┐ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд╣реЛрддрд╛ рд╣реИред

### Policies

#### Policy Permissions

рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЕрд╕рд╛рдЗрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИрдВред рдЗрд╕рдХреЗ 2 рдкреНрд░рдХрд╛рд░ рд╣реИрдВ:

* AWS managed policies (AWS рджреНрд╡рд╛рд░рд╛ рдкреВрд░реНрд╡-рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ)
* Customer Managed Policies: рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИред рдЖрдк AWS managed policies рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдиреАрддрд┐рдпрд╛рдБ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ (рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдХреЗ рдФрд░ рдЕрдкрдиреА рдЦреБрдж рдХреА рдмрдирд╛рдХрд░), policy generator рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ (рдПрдХ GUI рджреГрд╢реНрдп рдЬреЛ рдЖрдкрдХреЛ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рджреЗрдиреЗ рдФрд░ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ) рдпрд╛ рдЕрдкрдиреА рдЦреБрдж рдХреА рд▓рд┐рдЦрдХрд░ред

**рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдПрдХреНрд╕реЗрд╕** **рдЕрд╕реНрд╡реАрдХреГрдд** рд╣реИ, рдПрдХреНрд╕реЗрд╕ рддрдм рджреА рдЬрд╛рдПрдЧреА рдЬрдм рдПрдХ рд╕реНрдкрд╖реНрдЯ role рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛред\
рдпрджрд┐ **рдПрдХрд▓ "Deny" рдореМрдЬреВрдж рд╣реИ, рддреЛ рдпрд╣ "Allow" рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░реЗрдЧрд╛**, рд╕рд┐рд╡рд╛рдп рдЙрди рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рдЬреЛ AWS рдЦрд╛рддреЗ рдХреЗ root security credentials рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ (рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдиреБрдордд рд╣реИрдВ)ред
```javascript
{
"Version": "2012-10-17",  //Version of the policy
"Statement": [  //Main element, there can be more than 1 entry in this array
{
"Sid": "Stmt32894y234276923" //Unique identifier (optional)
"Effect": "Allow", //Allow or deny
"Action": [  //Actions that will be allowed or denied
"ec2:AttachVolume",
"ec2:DetachVolume"
],
"Resource": [ //Resource the action and effect will be applied to
"arn:aws:ec2:*:*:volume/*",
"arn:aws:ec2:*:*:instance/*"
],
"Condition": { //Optional element that allow to control when the permission will be effective
"ArnEquals": {"ec2:SourceInstanceARN": "arn:aws:ec2:*:*:instance/instance-id"}
}
}
]
}
```
[рдХрд┐рд╕реА рднреА рд╕реЗрд╡рд╛ рдореЗрдВ рд╢рд░реНрддреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ рд╡реИрд╢реНрд╡рд┐рдХ рдлрд╝реАрд▓реНрдб рдпрд╣рд╛рдБ рдкреНрд░рд▓реЗрдЦрд┐рдд рд╣реИрдВ](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference\_policies\_condition-keys.html#condition-keys-resourceaccount)ред\
[рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рд╢рд░реНрддреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдлрд╝реАрд▓реНрдб рдпрд╣рд╛рдБ рдкреНрд░рд▓реЗрдЦрд┐рдд рд╣реИрдВ](https://docs.aws.amazon.com/service-authorization/latest/reference/reference\_policies\_actions-resources-contextkeys.html)ред

#### Inline Policies

рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдиреАрддрд┐рдпрд╛рдБ **рдкреНрд░рддреНрдпрдХреНрд╖ рд░реВрдк рд╕реЗ** рдХрд┐рд╕реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛, рд╕рдореВрд╣ рдпрд╛ рднреВрдорд┐рдХрд╛ рдХреЛ рд╕реМрдВрдк рджреА рдЬрд╛рддреА рд╣реИрдВред рдлрд┐рд░, рд╡реЗ рдиреАрддрд┐рдпреЛрдВ рдХреА рд╕реВрдЪреА рдореЗрдВ рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреЗрддреАрдВ рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рдЕрдиреНрдп рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред\
Inline policies рддрдм рдЙрдкрдпреЛрдЧреА рд╣реЛрддреА рд╣реИрдВ рдЬрдм рдЖрдк **рдиреАрддрд┐ рдФрд░ рдкрд╣рдЪрд╛рди рдХреЗ рдмреАрдЪ рдПрдХ рд╕рдЦреНрдд рдПрдХ-рд╕реЗ-рдПрдХ рд╕рдВрдмрдВрдз рдмрдирд╛рдП рд░рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ** рдЬрд┐рд╕ рдкрд░ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдиреАрддрд┐ рдореЗрдВ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ рдХрд┐рд╕реА рдЕрдиреНрдп рдкрд╣рдЪрд╛рди рдХреЛ рдирд╣реАрдВ рд╕реМрдВрдкреА рдЧрдИ рд╣реИрдВ рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рд╡реЗ рдЕрднрд┐рдкреНрд░реЗрдд рдирд╣реАрдВ рд╣реИрдВред рдЬрдм рдЖрдк рдПрдХ inline policy рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдиреАрддрд┐ рдореЗрдВ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ рдЧрд▓рдд рдкрд╣рдЪрд╛рди рд╕реЗ рдЬреБрдбрд╝реА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреАрдВред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдм рдЖрдк AWS Management Console рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрд╕ рдкрд╣рдЪрд╛рди рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реИрдВ, рддреЛ рдкрд╣рдЪрд╛рди рдореЗрдВ рдПрдореНрдмреЗрдб рдХреА рдЧрдИ рдиреАрддрд┐рдпрд╛рдБ рднреА рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИрдВред рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдкреНрд░рдореБрдЦ рдЗрдХрд╛рдИ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИрдВред

#### Resource Bucket Policies

рдпреЗ **рдиреАрддрд┐рдпрд╛рдБ** рд╣реИрдВ рдЬреЛ **рд╕рдВрд╕рд╛рдзрдиреЛрдВ** рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред **AWS рдХреЗ рд╕рднреА рд╕рдВрд╕рд╛рдзрди рдЗрдиреНрд╣реЗрдВ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреЗ**ред

рдпрджрд┐ рдХрд┐рд╕реА рдкреНрд░рдореБрдЦ рдкрд░ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЗрдирдХрд╛рд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдПрдХ рд╕рдВрд╕рд╛рдзрди рдиреАрддрд┐ рдЙрдиреНрд╣реЗрдВ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рддреА рд╣реИред

### IAM Boundaries

IAM boundaries рдХрд╛ рдЙрдкрдпреЛрдЧ **рдХрд┐рд╕реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рднреВрдорд┐рдХрд╛ рдХреЛ рджреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП** рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕ рддрд░рд╣, рднрд▓реЗ рд╣реА рдХрд┐рд╕реА **рдЕрд▓рдЧ рдиреАрддрд┐** рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рдЕрд▓рдЧ рд╕реЗрдЯ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛ, рдСрдкрд░реЗрд╢рди **рдЕрд╕рдлрд▓** рд╣реЛ рдЬрд╛рдПрдЧрд╛ рдпрджрд┐ рд╡рд╣ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИред

рдПрдХ boundary рдХреЗрд╡рд▓ рдПрдХ рдиреАрддрд┐ рд╣реИ рдЬреЛ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдЬреБрдбрд╝реА рд╣реЛрддреА рд╣реИ рдЬреЛ **рд╕рдВрдХреЗрдд рдХрд░рддреА рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рднреВрдорд┐рдХрд╛ рдХреЗ рдкрд╛рд╕ рдЕрдзрд┐рдХрддрдо рд╕реНрддрд░ рдХреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ**ред рддреЛ, **рднрд▓реЗ рд╣реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕ Administrator рдкрд╣реБрдВрдЪ рд╣реЛ**, рдпрджрд┐ boundary рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рд╡рд╣ рдХреЗрд╡рд▓ S3 buckets рдкрдврд╝ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЕрдзрд┐рдХрддрдо рд╣реИ рдЬреЛ рд╡рд╣ рдХрд░ рд╕рдХрддрд╛ рд╣реИред

**рдпрд╣**, **SCPs** рдФрд░ **рдХрдо рд╕реЗ рдХрдо рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░** рд╕рд┐рджреНрдзрд╛рдВрдд рдХрд╛ рдкрд╛рд▓рди рдХрд░рдирд╛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рд╣реИрдВ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдкрд╛рд╕ рдЖрд╡рд╢реНрдпрдХ рд╕реЗ рдЕрдзрд┐рдХ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдирд╣реАрдВ рд╣реИрдВред

### Session Policies

рдПрдХ session policy рдПрдХ **рдиреАрддрд┐ рд╣реИ рдЬреЛ рдХрд┐рд╕реА рднреВрдорд┐рдХрд╛ рдХреЛ рдХрд┐рд╕реА рддрд░рд╣ рд╕реЗ рдЧреНрд░рд╣рдг рдХрд░рдиреЗ рдкрд░ рд╕реЗрдЯ рдХреА рдЬрд╛рддреА рд╣реИ**ред рдпрд╣ **рдЙрд╕ рд╕рддреНрд░ рдХреЗ рд▓рд┐рдП рдПрдХ IAM boundary рдХреА рддрд░рд╣ рд╣реЛрдЧреА**: рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ session policy рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдирд╣реАрдВ рджреЗрддреА рдмрд▓реНрдХрд┐ **рдиреАрддрд┐ рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХреА рдЧрдИ рдЕрдиреБрдорддрд┐рдпреЛрдВ рддрдХ рдЙрдиреНрд╣реЗрдВ рд╕реАрдорд┐рдд рдХрд░рддреА рд╣реИ** (рдЕрдзрд┐рдХрддрдо рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╡реЗ рд╣реИрдВ рдЬреЛ рднреВрдорд┐рдХрд╛ рдХреЗ рдкрд╛рд╕ рд╣реИрдВ)ред

рдпрд╣ **рд╕реБрд░рдХреНрд╖рд╛ рдЙрдкрд╛рдпреЛрдВ** рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИ: рдЬрдм рдХреЛрдИ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдПрдХ рдмрд╣реБрдд рд╣реА рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рднреВрдорд┐рдХрд╛ рдЧреНрд░рд╣рдг рдХрд░рдиреЗ рдЬрд╛ рд░рд╣рд╛ рд╣реИ, рддреЛ рд╡рд╣ рд╕рддреНрд░ рдиреАрддрд┐ рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХреА рдЧрдИ рдЕрдиреБрдорддрд┐рдпреЛрдВ рддрдХ рд╣реА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдпрджрд┐ рд╕рддреНрд░ рд╕реЗ рд╕рдордЭреМрддрд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред
```bash
aws sts assume-role \
--role-arn <value> \
--role-session-name <value> \
[--policy-arns <arn_custom_policy1> <arn_custom_policy2>]
[--policy <file://policy.json>]
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ **AWS рд╕рддреНрд░ рдиреАрддрд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реИ** рдЬреЛ рддреАрд╕рд░реЗ рдХрд╛рд░рдгреЛрдВ рд╕реЗ рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╕рддреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, [unauthenticated cognito assumed roles](../aws-services/aws-cognito-enum/cognito-identity-pools.md#accessing-iam-roles) рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ (рдЙрдиреНрдирдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП), AWS **рд╕рддреНрд░ рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╕рддреНрд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕** рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛ рдЬреЛ рдЙрд╕ рд╕рддреНрд░ рджреНрд╡рд╛рд░рд╛ рдПрдХреНрд╕реЗрд╕ рдХреА рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рддрд╛ рд╣реИ [**рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реВрдЪреА**](https://docs.aws.amazon.com/cognito/latest/developerguide/iam-roles.html#access-policies-scope-down-services) рддрдХред

рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдХрд┐рд╕реА рдмрд┐рдВрджреБ рдкрд░ рдЖрдкрдХреЛ рддреНрд░реБрдЯрд┐ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИ "... рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рд╕рддреНрд░ рдиреАрддрд┐ рдЗрд╕рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддреА рд╣реИ ...", рдФрд░ рднреВрдорд┐рдХрд╛ рдХреЛ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдХрд╛рд░рдг **рдПрдХ рд╕рддреНрд░ рдиреАрддрд┐ рдЗрд╕реЗ рд░реЛрдХ рд░рд╣реА рд╣реИ**ред

### Identity Federation

Identity federation **рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛рдУрдВ рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ AWS рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ** рдмрд┐рдирд╛ рд╡реИрдз IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЦрд╛рддреЗ рд╕реЗ AWS рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдкреНрд░рджрд╛рди рдХрд┐рдПред\
рдПрдХ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдЖрдкрдХрд╛ рдЕрдкрдирд╛ рдХреЙрд░реНрдкреЛрд░реЗрдЯ **Microsoft Active Directory** (via **SAML**) рдпрд╛ **OpenID** рд╕реЗрд╡рд╛рдПрдВ (рдЬреИрд╕реЗ **Google**) рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рд╕рдВрдШреАрдХреГрдд рдкрд╣реБрдВрдЪ рддрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ AWS рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧреАред

рдЗрд╕ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ **IAM Identity Provider (SAML рдпрд╛ OAuth)** рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ **рдЕрдиреНрдп рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕** рдХрд░реЗрдЧрд╛ред рдлрд┐рд░, рдХрдо рд╕реЗ рдХрдо рдПрдХ **IAM рднреВрдорд┐рдХрд╛ (рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рдиреЗ рд╡рд╛рд▓реА) рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХреЛ рд╕реМрдВрдк рджреА рдЬрд╛рддреА рд╣реИ**ред рдпрджрд┐ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рд╕реЗ рдХреЛрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ AWS рддрдХ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рднреВрдорд┐рдХрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╣реБрдВрдЪ рд░рд╣рд╛ рд╣реЛрдЧрд╛ред

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдк рдЖрдорддреМрд░ рдкрд░ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рдореВрд╣ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХ рдЕрд▓рдЧ рднреВрдорд┐рдХрд╛ рджреЗрдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ** рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдореЗрдВред рдлрд┐рд░, рдХрдИ **IAM рднреВрдорд┐рдХрд╛рдПрдВ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░ рд╕рдХрддреА рд╣реИрдВ** рдФрд░ рддреАрд╕рд░рд╛ рдкрдХреНрд╖ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдПрдХ рднреВрдорд┐рдХрд╛ рдпрд╛ рджреВрд╕рд░реА рднреВрдорд┐рдХрд╛ рдЧреНрд░рд╣рдг рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред

<figure><img src="../../../.gitbook/assets/image (247).png" alt=""><figcaption></figcaption></figure>

### IAM Identity Center

AWS IAM Identity Center (AWS Single Sign-On рдХрд╛ рдЙрддреНрддрд░рд╛рдзрд┐рдХрд╛рд░реА) AWS Identity and Access Management (IAM) рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдФрд░ рдЙрдирдХреЗ AWS рдЦрд╛рддреЛрдВ рдФрд░ рдХреНрд▓рд╛рдЙрдб рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рдкреНрд░рд╢рд╛рд╕рди рдХреЛ рдПрдХ рдХреЗрдВрджреНрд░реАрдп рд╕реНрдерд╛рди** рдкрд░ рд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред

рд▓реЙрдЧрд┐рди рдбреЛрдореЗрди рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╣реЛрдЧрд╛ `<user_input>.awsapps.com`ред

рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд▓реЙрдЧрд┐рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, 3 рдкрд╣рдЪрд╛рди рд╕реНрд░реЛрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

* Identity Center Directory: рдирд┐рдпрдорд┐рдд AWS рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛
* Active Directory: рд╡рд┐рднрд┐рдиреНрди рдХрдиреЗрдХреНрдЯрд░ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ
* External Identity Provider: рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рд╕рдореВрд╣ рдмрд╛рд╣рд░реА рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ (IdP) рд╕реЗ рдЖрддреЗ рд╣реИрдВ

<figure><img src="../../../.gitbook/assets/image (279).png" alt=""><figcaption></figcaption></figure>

Identity Center рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреЗ рд╕рдмрд╕реЗ рд╕рд░рд▓ рдорд╛рдорд▓реЗ рдореЗрдВ, **Identity Center рдХреЗ рдкрд╛рд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдФрд░ рд╕рдореВрд╣реЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реЛрдЧреА** рдФрд░ рд╡рд╣ **рдЙрдиреНрд╣реЗрдВ рдХрд┐рд╕реА рднреА рдЦрд╛рддреЗ** рдХреЛ **рдиреАрддрд┐рдпрд╛рдВ рд╕реМрдВрдкрдиреЗ** рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛ред

Identity Center рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛/рд╕рдореВрд╣ рдХреЛ рдХрд┐рд╕реА рдЦрд╛рддреЗ рддрдХ рдкрд╣реБрдВрдЪ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ **SAML Identity Provider рдЬреЛ Identity Center рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рддрд╛ рд╣реИ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛**, рдФрд░ рдЧрдВрддрд╡реНрдп рдЦрд╛рддреЗ рдореЗрдВ **рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рдиреЗ рд╡рд╛рд▓реА рдПрдХ рднреВрдорд┐рдХрд╛ рдмрдирд╛рдИ рдЬрд╛рдПрдЧреА**ред

#### AwsSSOInlinePolicy

рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ **IAM Identity Center рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдирд╛рдИ рдЧрдИ рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐рдпреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдиреБрдорддрд┐рдпрд╛рдВ рджреА рдЬрд╛рдПрдВ**ред рдЬрд┐рди рдЦрд╛рддреЛрдВ рдореЗрдВ рднреВрдорд┐рдХрд╛рдПрдВ рдмрдирд╛рдИ рдЬрд╛ рд░рд╣реА рд╣реИрдВ **AWS Identity Center рдореЗрдВ рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде** рдЙрди рднреВрдорд┐рдХрд╛рдУрдВ рдХреЗ рдкрд╛рд╕ рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐ рдореЗрдВ рдпреЗ рдЕрдиреБрдорддрд┐рдпрд╛рдВ рд╣реЛрдВрдЧреА рдЬрд┐рд╕реЗ **`AwsSSOInlinePolicy`** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред

рдЗрд╕рд▓рд┐рдП, рднрд▓реЗ рд╣реА рдЖрдк 2 рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рдПрдХ рдЗрдирд▓рд╛рдЗрди рдиреАрддрд┐ рдХреЗ рд╕рд╛рде рджреЗрдЦреЗрдВ рдЬрд┐рд╕реЗ **`AwsSSOInlinePolicy`** рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рдХрд╛ **рдорддрд▓рдм рдпрд╣ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЙрдирдХреЗ рдкрд╛рд╕ рд╕рдорд╛рди рдЕрдиреБрдорддрд┐рдпрд╛рдВ рд╣реИрдВ**ред

### Cross Account Trusts and Roles

**рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛** (рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛) рдХреБрдЫ рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ Cross Account Role рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░, **рджреВрд╕рд░реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЕрдиреБрдорддрд┐ рджреЗ рд╕рдХрддрд╛ рд╣реИ** (рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп) **рдЕрдкрдиреЗ рдЦрд╛рддреЗ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП** рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ **рдирдИ рднреВрдорд┐рдХрд╛ рдиреАрддрд┐рдпреЛрдВ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдкрд╣реБрдВрдЪ рдХреЗ рд╕рд╛рде**ред рдЗрд╕реЗ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╕ рдПрдХ рдирдИ рднреВрдорд┐рдХрд╛ рдмрдирд╛рдПрдВ рдФрд░ Cross Account Role рдЪреБрдиреЗрдВред Cross-Account Access рдХреЗ рд▓рд┐рдП рднреВрдорд┐рдХрд╛рдПрдВ рджреЛ рд╡рд┐рдХрд▓реНрдк рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВред рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╡рд╛рд▓реЗ AWS рдЦрд╛рддреЛрдВ рдХреЗ рдмреАрдЪ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рдирд╛, рдФрд░ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╡рд╛рд▓реЗ рдЦрд╛рддреЗ рдФрд░ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ AWS рдЦрд╛рддреЗ рдХреЗ рдмреАрдЪ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ред\
рдпрд╣ рдЕрдиреБрд╢рдВрд╕рд╛ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ **рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ рдФрд░ рдХреБрдЫ рд╕рд╛рдорд╛рдиреНрдп рдЪреАрдЬрд╝ рди рдбрд╛рд▓реЗрдВ** рдХреНрдпреЛрдВрдХрд┐ рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдЕрдиреНрдп рдкреНрд░рдорд╛рдгрд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЬреИрд╕реЗ рд╕рдВрдШреАрдХреГрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рднреА рдЗрд╕ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗрдВрдЧреЗред

### AWS Simple AD

рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ:

* Trust Relations
* AD Admin Center
* Full PS API support
* AD Recycle Bin
* Group Managed Service Accounts
* Schema Extensions
* No Direct access to OS or Instances

#### Web Federation or OpenID Authentication

рдРрдк AssumeRoleWithWebIdentity рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрд╕реНрдерд╛рдпреА рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдмрдирд╛рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ AWS рдХрдВрд╕реЛрд▓ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдХреЗрд╡рд▓ AWS рдХреЗ рднреАрддрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

### Other IAM options

* рдЖрдк **рдкрд╛рд╕рд╡рд░реНрдб рдиреАрддрд┐ рд╕реЗрдЯрд┐рдВрдЧ** рд╡рд┐рдХрд▓реНрдк рдЬреИрд╕реЗ рдиреНрдпреВрдирддрдо рд▓рдВрдмрд╛рдИ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* рдЖрдк **"Credential Report" рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ** рдЬрд┐рд╕рдореЗрдВ рд╡рд░реНрддрдорд╛рди рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реЛрддреА рд╣реИ (рдЬреИрд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд░реНрдорд╛рдг рд╕рдордп, рдкрд╛рд╕рд╡рд░реНрдб рд╕рдХреНрд╖рдо рд╣реИ рдпрд╛ рдирд╣реАрдВ...)ред рдЖрдк рд╣рд░ **рдЪрд╛рд░ рдШрдВрдЯреЗ** рдореЗрдВ рдПрдХ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рд░рд┐рдкреЛрд░реНрдЯ рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

AWS Identity and Access Management (IAM) рдкреВрд░реЗ AWS рдореЗрдВ **рд╕реВрдХреНрд╖реНрдо рдкрд╣реБрдВрдЪ рдирд┐рдпрдВрддреНрд░рдг** рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред IAM рдХреЗ рд╕рд╛рде, рдЖрдк рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ **рдХреМрди рдХреМрди рд╕реА рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИ**, рдФрд░ рдХрд┐рди рд╢рд░реНрддреЛрдВ рдХреЗ рддрд╣рддред IAM рдиреАрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде, рдЖрдк рдЕрдкрдиреЗ рдХрд╛рд░реНрдпрдмрд▓ рдФрд░ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ **рдХрдо рд╕реЗ рдХрдо-рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдЕрдиреБрдорддрд┐рдпреЛрдВ** рдХреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

### IAM ID Prefixes

[**рдЗрд╕ рдкреГрд╖реНрда**](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference\_identifiers.html#identifiers-unique-ids) рдкрд░ рдЖрдк **IAM ID prefixes** рдХреА рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рдЙрдирдХреА рдкреНрд░рдХреГрддрд┐ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ:

| ABIA | [AWS STS service bearer token](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_credentials\_bearer.html)                                                                                                         |
| ---- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ACCA | Context-specific credential                                                                                                                                                                                           |
| AGPA | User group                                                                                                                                                                                                            |
| AIDA | IAM user                                                                                                                                                                                                              |
| AIPA | Amazon EC2 instance profile                                                                                                                                                                                           |
| AKIA | Access key                                                                                                                                                                                                            |
| ANPA | Managed policy                                                                                                                                                                                                        |
| ANVA | Version in a managed policy                                                                                                                                                                                           |
| APKA | Public key                                                                                                                                                                                                            |
| AROA | Role                                                                                                                                                                                                                  |
| ASCA | Certificate                                                                                                                                                                                                           |
| ASIA | [Temporary (AWS STS) access key IDs](https://docs.aws.amazon.com/STS/latest/APIReference/API\_Credentials.html) use this prefix, but are unique only in combination with the secret access key and the session token. |

### Recommended permissions to audit accounts

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд╡рд┐рднрд┐рдиреНрди рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЗ рдкрдврд╝рдиреЗ рдХреА рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ:

* `arn:aws:iam::aws:policy/SecurityAudit`
* `arn:aws:iam::aws:policy/job-function/ViewOnlyAccess`
* `codebuild:ListProjects`
* `config:Describe*`
* `cloudformation:ListStacks`
* `logs:DescribeMetricFilters`
* `directconnect:DescribeConnections`
* `dynamodb:ListTables`

## Misc

### CLI Authentication

рдПрдХ рдирд┐рдпрдорд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП CLI рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ AWS рдХреЛ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЗ рдкрд╛рд╕ **рд╕реНрдерд╛рдиреАрдп рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕** рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЖрдк рдЙрдиреНрд╣реЗрдВ **рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ** `~/.aws/credentials` рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ **рдЪрд▓рд╛рдХрд░** `aws configure`ред\
рдЙрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ, рдпрджрд┐ **рдХреЛрдИ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓** рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рддреЛ **aws cli** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдЙрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ **`[default]`** рдирд╛рдордХ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред\
рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрджрд╛рд╣рд░рдг:
```
[default]
aws_access_key_id = AKIA5ZDCUJHF83HDTYUT
aws_secret_access_key = uOcdhof683fbOUGFYEQug8fUGIf68greoihef

[Admin]
aws_access_key_id = AKIA8YDCu7TGTR356SHYT
aws_secret_access_key = uOcdhof683fbOUGFYEQuR2EIHG34UY987g6ff7
region = eu-west-2
```
рдпрджрд┐ рдЖрдкрдХреЛ **рд╡рд┐рднрд┐рдиреНрди AWS accounts** рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреА рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рдЙрди рдЦрд╛рддреЛрдВ рдХреЗ рдЕрдВрджрд░ **рдПрдХ рднреВрдорд┐рдХрд╛ рдЧреНрд░рд╣рдг рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЧрдИ рд╣реИ**, рддреЛ рдЖрдкрдХреЛ рд╣рд░ рдмрд╛рд░ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ STS рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ (`aws sts assume-role --role-arn <role-arn> --role-session-name sessname`) рдФрд░ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред

рдЖрдк `~/.aws/config` рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ [ **рдХрд┐рд╕ рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рдЧреНрд░рд╣рдг рдХрд░рдирд╛ рд╣реИ**](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html) рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ `--profile` рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП `assume-role` рдкрд╛рд░рджрд░реНрд╢реА рддрд░реАрдХреЗ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛)ред\
рдПрдХ config рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрджрд╛рд╣рд░рдг:
```
[profile acc2]
region=eu-west-2
role_arn=arn:aws:iam::<account-id>:role/<role-path>
role_session_name = <session_name>
source_profile = <profile_with_assume_role>
sts_regional_endpoints = regional
```
рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдЖрдк рдлрд┐рд░ aws cli рдХрд╛ рдЙрдкрдпреЛрдЧ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:
```
aws --profile acc2 ...
```
рдпрджрд┐ рдЖрдк **рдмреНрд░рд╛рдЙрдЬрд╝рд░** рдХреЗ рд▓рд┐рдП рдХреБрдЫ **рд╕рдорд╛рди** рдЦреЛрдЬ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдк **рдПрдХреНрд╕рдЯреЗрдВрд╢рди** [**AWS Extend Switch Roles**](https://chrome.google.com/webstore/detail/aws-extend-switch-roles/jpmkfafbacpgapdghgdpembnojdlgkdl?hl=en) рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред

## рд╕рдВрджрд░реНрдн

* [https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_getting-started\_concepts.html](https://docs.aws.amazon.com/organizations/latest/userguide/orgs\_getting-started\_concepts.html)
* [https://aws.amazon.com/iam/](https://aws.amazon.com/iam/)
* [https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html](https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html)

{% hint style="success" %}
AWS Hacking рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХреЛ рд╕рдорд░реНрдерди рджреЗрдВ</summary>

* [**рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдкреНрд▓рд╛рдиреНрд╕**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ рд╣рдореЗрдВ **Twitter** ЁЯРж рдкрд░ **рдлреЙрд▓реЛ** рдХрд░реЗрдВ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos рдореЗрдВред

</details>
{% endhint %}
