# AWS - CodeBuild Post Exploitation

{% hint style="success" %}
Leer en oefen AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer en oefen GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**intekenplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repo's.

</details>
{% endhint %}

## CodeBuild

Vir meer inligting, kyk:

{% content-ref url="../../aws-services/aws-codebuild-enum.md" %}
[aws-codebuild-enum.md](../../aws-services/aws-codebuild-enum.md)
{% endcontent-ref %}

### Misbruik CodeBuild Repo Toegang

Om **CodeBuild** te konfigureer, sal dit **toegang tot die kode-repo** benodig wat dit gaan gebruik. Verskeie platforms kan hierdie kode huisves:

<figure><img src="../../../../.gitbook/assets/image (96).png" alt=""><figcaption></figcaption></figure>

Die **CodeBuild-projek moet toegang h√™** tot die gekonfigureerde bronverskaffer, √≥f via **IAM-rol** of met 'n github/bitbucket **token of OAuth-toegang**.

'n Aanvaller met **verhoogde toestemmings oor 'n CodeBuild** kan hierdie gekonfigureerde toegang misbruik om die kode van die gekonfigureerde repo en ander waar die gestelde geloofsbriewe toegang het, te lek.\
Om dit te doen, sal 'n aanvaller net die **repository URL moet verander na elke repo waartoe die konfigurasie-geloofsbriewe toegang het** (let daarop dat die aws-web al die repos vir jou sal lys):

<figure><img src="../../../../.gitbook/assets/image (107).png" alt=""><figcaption></figcaption></figure>

En **verander die Buildspec-opdragte om elke repo te eksfiltreer**.

{% hint style="warning" %}
Maar, hierdie **taak is herhalend en vervelig** en as 'n github-token met **skryftoestemmings** gekonfigureer is, sal 'n aanvaller **nie daardie toestemmings kan (mis)bruik** nie, aangesien hy nie toegang tot die token het nie.\
Of het hy? Kyk na die volgende afdeling
{% endhint %}

### Lek Toegang Tokens van AWS CodeBuild

Jy kan toegang wat in CodeBuild gegee is aan platforms soos Github lek. Kyk of enige toegang tot eksterne platforms gegee is met:
```bash
aws codebuild list-source-credentials
```
{% content-ref url="aws-codebuild-token-leakage.md" %}
[aws-codebuild-token-leakage.md](aws-codebuild-token-leakage.md)
{% endcontent-ref %}

### `codebuild:DeleteProject`

'n Aanvaller kan 'n hele CodeBuild-projek uitvee, wat verlies van projekkonfigurasie veroorsaak en toepassings wat op die projek staatmaak, be√Ønvloed.
```bash
aws codebuild delete-project --name <value>
```
**Potensi√´le Impak**: Verlies van projekkonfigurasie en diensonderbreking vir toepassings wat die verwyderde projek gebruik.

### `codebuild:TagResource` , `codebuild:UntagResource`

'n Aanvaller kan etikette byvoeg, wysig, of verwyder van CodeBuild-hulpbronne, wat jou organisasie se koste-toewysing, hulpbronopsporing, en toegangsbeheerbeleide gebaseer op etikette kan ontwrig.
```bash
aws codebuild tag-resource --resource-arn <value> --tags <value>
aws codebuild untag-resource --resource-arn <value> --tag-keys <value>
```
**Potensi√´le Impak**: Ontwrigting van koste-toewysing, hulpbronopsporing, en tag-gebaseerde toegangsbeheerbeleide.

### `codebuild:DeleteSourceCredentials`

'n Aanvaller kan bronbewyse vir 'n Git-bewaarplek uitvee, wat die normale funksionering van toepassings wat op die bewaarplek staatmaak, kan be√Ønvloed.
```sql
aws codebuild delete-source-credentials --arn <value>
```
**Potensi√´le Impak**: Ontwrigting van normale funksionering vir toepassings wat staatmaak op die betrokke bewaarplek as gevolg van die verwydering van bronbewyse.

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**intekenplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-bewaarplekke.

</details>
{% endhint %}
