# AWS - Adım Fonksiyonları Sonrası Sömürü

<details>

<summary><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı) ile sıfırdan kahraman olmaya kadar AWS hackleme öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamını görmek istiyorsanız** veya **HackTricks'i PDF olarak indirmek istiyorsanız** [**ABONELİK PLANLARI**]'na göz atın (https://github.com/sponsors/carlospolop)!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family)
* **Katılın** 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)** takip edin**.
* **Hacking püf noktalarınızı paylaşarak PR'lar göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>

## Adım Fonksiyonları

Bu AWS hizmeti hakkında daha fazla bilgi için şu adrese bakın:

{% content-ref url="../aws-services/aws-stepfunctions-enum.md" %}
[aws-stepfunctions-enum.md](../aws-services/aws-stepfunctions-enum.md)
{% endcontent-ref %}

### `states:DeleteStateMachine`, `states:DeleteStateMachineVersion`, `states:DeleteStateMachineAlias`

Bu izinlere sahip bir saldırgan, durum makinelerini, versiyonlarını ve takma adlarını kalıcı olarak silebilir. Bu kritik iş akışlarını bozabilir, veri kaybına neden olabilir ve etkilenen durum makinelerini kurtarmak ve geri yüklemek için önemli zaman gerektirebilir. Ayrıca, saldırganın kullandığı izleri örtmesine, adli incelemeleri bozmasına ve temel otomasyon süreçlerini ve durum yapılandırmalarını kaldırarak operasyonları felç edebilir.

{% hint style="info" %}

- Bir durum makinesini sildiğinizde, tüm ilişkili versiyonları ve takma adları da silersiniz.
- Bir durum makinesi takma adını sildiğinizde, bu takma adıyla referans verilen durum makinesi versiyonlarını silmezsiniz.
- Bir veya daha fazla takma ad tarafından şu anda referans verilen bir durum makinesi versiyonunu silmek mümkün değildir.

{% endhint %}
```bash
# Delete state machine
aws stepfunctions delete-state-machine --state-machine-arn <value>
# Delete state machine version
aws stepfunctions delete-state-machine-version --state-machine-version-arn <value>
# Delete state machine alias
aws stepfunctions delete-state-machine-alias --state-machine-alias-arn <value>
```
- **Potansiyel Etki**: Kritik iş akışlarının bozulması, veri kaybı ve operasyonel süreksizlik.

### `states:UpdateMapRun`

Bu izne sahip bir saldırgan, Harita Çalıştırma başarısızlık yapılandırmasını ve paralel ayarını manipüle edebilir, maksimum çocuk iş akışı yürütme sayısını artırabilir veya azaltabilir, doğrudan hizmetin performansını etkileyebilir. Ayrıca, bir saldırgan hoşgörülen başarısızlık yüzdesi ve sayısını değiştirebilir, bu değeri 0'a düşürebilir, böylece her bir öğe başarısız olduğunda, tüm harita çalışması başarısız olur, doğrudan durum makinesi yürütmesini etkiler ve kritik iş akışlarını bozabilir.
```bash
aws stepfunctions update-map-run --map-run-arn <value> [--max-concurrency <value>] [--tolerated-failure-percentage <value>] [--tolerated-failure-count <value>]
```
- **Potansiyel Etki**: Performans bozulması ve kritik iş akışlarının kesintiye uğraması.

### `states:StopExecution`

Bu izne sahip bir saldırgan, herhangi bir durum makinesinin yürütmesini durdurabilir, devam eden iş akışlarını ve süreçleri bozabilir. Bu, eksik işlemlere, durdurulmuş iş operasyonlarına ve potansiyel veri bozulmalarına yol açabilir.

{% hint style="warning" %}
Bu eylem, **express durum makineleri** tarafından desteklenmemektedir.
{% endhint %}
```bash
aws stepfunctions stop-execution --execution-arn <value> [--error <value>] [--cause <value>]
```
- **Potansiyel Etki**: Devam eden iş akışlarının bozulması, operasyonel süreksizlik ve potansiyel veri bozulması.

### `states:TagResource`, `states:UntagResource`

Bir saldırgan, Step Functions kaynaklarından etiketleri ekleyebilir, değiştirebilir veya kaldırabilir, kuruluşunuzun maliyet tahsisi, kaynak takibi ve etiketlere dayalı erişim kontrol politikalarını bozabilir.
```bash
aws stepfunctions tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws stepfunctions untag-resource --resource-arn <value> --tag-keys <key>
```
**Potansiyel Etki**: Maliyet tahsisi, kaynak izleme ve etiket tabanlı erişim kontrol politikalarının bozulması.

<details>

<summary><strong>AWS hacklemeyi sıfırdan kahraman seviyesine öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamını görmek istiyorsanız** veya **HackTricks'i PDF olarak indirmek istiyorsanız** [**ABONELİK PLANLARI**]'na göz atın (https://github.com/sponsors/carlospolop)!
* [**Resmi PEASS & HackTricks ürünleri**]'ni edinin (https://peass.creator-spring.com)
* [**The PEASS Ailesi**]'ni keşfedin (https://opensea.io/collection/the-peass-family), özel [**NFT'ler**] koleksiyonumuz (https://opensea.io/collection/the-peass-family)
* **Katılın** 💬 [**Discord grubuna**] (https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**] veya bizi **Twitter** 🐦 [**@hacktricks_live**] (https://twitter.com/hacktricks_live)**'da takip edin.**
* **Hacking püf noktalarınızı paylaşarak PR göndererek** [**HackTricks**] (https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**] (https://github.com/carlospolop/hacktricks-cloud) github depolarına.

</details>
