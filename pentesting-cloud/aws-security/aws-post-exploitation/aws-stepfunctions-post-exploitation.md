# AWS - Step Functions Na-uitbuiting

{% hint style="success" %}
Leer & oefen AWS Hack:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Rooi Span Kenner (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Rooi Span Kenner (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}

## Stap Funksies

Vir meer inligting oor hierdie AWS-diens, kyk:

{% content-ref url="../aws-services/aws-stepfunctions-enum.md" %}
[aws-stepfunctions-enum.md](../aws-services/aws-stepfunctions-enum.md)
{% endcontent-ref %}

### `states:DeleteStateMachine`, `states:DeleteStateMachineVersion`, `states:DeleteStateMachineAlias`

'n Aanvaller met hierdie regte sou in staat wees om staatmasjiene, hul weergawes, en aliase permanent te verwyder. Dit kan kritieke werkstrome ontwrig, data verlies veroorsaak, en aansienlike tyd verg om die geaffekteerde staatmasjiene te herstel en te herstel. Daarbenewens sou dit 'n aanvaller in staat stel om die spore wat gebruik is, te verdoof, forensiese ondersoeke te ontwrig, en moontlik operasies te verlam deur noodsaaklike outomatiseringsprosesse en staatkonfigurasies te verwyder.

{% hint style="info" %}

- Deur 'n staatmasjien te verwyder, verwyder jy ook al sy geassosieerde weergawes en aliase.
- Deur 'n staatmasjien alias te verwyder, verwyder jy nie die staatmasjien weergawes wat na hierdie alias verwys nie.
- Dit is nie moontlik om 'n staatmasjien weergawe te verwyder wat tans deur een of meer aliase verwys word nie.

{% endhint %}
```bash
# Delete state machine
aws stepfunctions delete-state-machine --state-machine-arn <value>
# Delete state machine version
aws stepfunctions delete-state-machine-version --state-machine-version-arn <value>
# Delete state machine alias
aws stepfunctions delete-state-machine-alias --state-machine-alias-arn <value>
```
- **Potensi√´le Impak**: Versteuring van kritieke werkstrome, dataverlies, en operasionele afbreektyd.

### `states:UpdateMapRun`

'n Aanvaller met hierdie toestemming sou in staat wees om die Map Run mislukkingkonfigurasie en parallelle instelling te manipuleer, en sodoende die maksimum aantal kindwerkstroomuitvoerings te verhoog of te verlaag, wat direk die prestasie van die diens be√Ønvloed. Daarbenewens sou 'n aanvaller kan morrel met die aanvaarde mislukkingspersentasie en telling, en sodoende hierdie waarde tot 0 kan verlaag sodat elke keer as 'n item misluk, die hele kaartloop sou misluk, wat direk die uitvoering van die staatmasjien be√Ønvloed en moontlik kritieke werkstrome versteur.
```bash
aws stepfunctions update-map-run --map-run-arn <value> [--max-concurrency <value>] [--tolerated-failure-percentage <value>] [--tolerated-failure-count <value>]
```
- **Potensi√´le Impak**: Prestasie-agteruitgang, en ontwrigting van kritieke werkstrome.

### `states:StopExecution`

'n Aanvaller met hierdie toestemming kan die uitvoering van enige staatmasjien stop, wat aan die gang werkstrome en prosesse ontwrig. Dit kan lei tot onvolledige transaksies, gestopte besigheidsoperasies, en potensi√´le dataverstoring.

{% hint style="warning" %}
Hierdie aksie word nie ondersteun deur **uitdruklike staatmasjiene** nie.
{% endhint %}
```bash
aws stepfunctions stop-execution --execution-arn <value> [--error <value>] [--cause <value>]
```
- **Potensi√´le Impak**: Versteuring van aanhoudende werkstrome, operasionele afbreek, en potensi√´le data korrupsie.

### `states:TagResource`, `states:UntagResource`

'n Aanvaller kan etikette byvoeg, wysig, of verwyder van Step Functions bronne, wat jou organisasie se koste-toewysing, bron-opsporing, en toegangsbeheerbeleid gebaseer op etikette kan versteur.
```bash
aws stepfunctions tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws stepfunctions untag-resource --resource-arn <value> --tag-keys <key>
```
**Potensi√´le Impak**: Versteuring van koste-toewysing, hulpbron-opsporing, en tag-gebaseerde toegangsbeheerbeleid.

{% hint style="success" %}
Leer & oefen AWS Hack: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hack: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kontroleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hack-truuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}
