# AWS - Μετά την Εκμετάλλευση των Λειτουργιών Βήματος

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκερ υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
{% endhint %}

## Λειτουργίες Βήματος

Για περισσότερες πληροφορίες σχετικά με αυτήν την υπηρεσία του AWS, ελέγξτε:

{% content-ref url="../aws-services/aws-stepfunctions-enum.md" %}
[aws-stepfunctions-enum.md](../aws-services/aws-stepfunctions-enum.md)
{% endcontent-ref %}

### `states:DeleteStateMachine`, `states:DeleteStateMachineVersion`, `states:DeleteStateMachineAlias`

Ένας επιτιθέμενος με αυτές τις άδειες θα μπορούσε να διαγράψει μόνιμα μηχανές καταστάσεων, τις εκδόσεις τους και τα ψευδώνυμά τους. Αυτό μπορεί να διαταράξει κρίσιμες ροές εργασίας, να οδηγήσει σε απώλεια δεδομένων και να απαιτήσει σημαντικό χρόνο για ανάκτηση και επαναφορά των επηρεασμένων μηχανών κατάστασης. Επιπλέον, θα επέτρεπε σε έναν επιτιθέμενο να καλύψει τα ίχνη που χρησιμοποιήθηκαν, να διαταράξει τις διατάξεις διατροφής, και πιθανώς να αναστείλει τις λειτουργίες αφαιρώντας τις απαραίτητες διαδικασίες αυτοματοποίησης και διαμορφώσεις κατάστασης. 

{% hint style="info" %}

- Με τη διαγραφή μιας μηχανής κατάστασης διαγράφετε επίσης όλες τις συσχετιζόμενες εκδόσεις και ψευδώνυμα.
- Με τη διαγραφή ενός ψευδώνυμου μηχανής κατάστασης δεν διαγράφετε τις εκδόσεις της μηχανής κατάστασης που αναφέρονται σε αυτό το Ϩευδώνυμο.
- Δεν είναι δυνατή η διαγραφή μιας εκδοχής μηχανής κατάστασης που αναφέρεται επί του παρόντος από ένα ή περισσότερα Ϩευδώνυμα.

{% endhint %}
```bash
# Delete state machine
aws stepfunctions delete-state-machine --state-machine-arn <value>
# Delete state machine version
aws stepfunctions delete-state-machine-version --state-machine-version-arn <value>
# Delete state machine alias
aws stepfunctions delete-state-machine-alias --state-machine-alias-arn <value>
```
- **Πιθανή Επίπτωση**: Διακοπή κρίσιμων ροών εργασίας, απώλεια δεδομένων και λειτουργική διακοπή.

### `states:UpdateMapRun`

Ένας επιτιθέμενος με αυτήν την άδεια θα μπορούσε να χειριστεί τη διαμόρφωση αποτυχίας του Map Run και την παράλληλη ρύθμιση, έχοντας τη δυνατότητα να αυξήσει ή να μειώσει το μέγιστο αριθμό εκτελέσεων παιδικών ροών εργασίας που επιτρέπονται, επηρεάζοντας άμεσα την απόδοση της υπηρεσίας. Επιπλέον, ένας επιτιθέμενος θα μπορούσε να παρεμβαίνει στο ποσοστό και τον αριθμό αποδεκτών αποτυχιών, έχοντας τη δυνατότητα να μειώσει αυτήν την τιμή σε 0, ώστε κάθε φορά που αποτυγχάνει ένα στοιχείο, ολόκληρη η εκτέλεση του χάρτη θα αποτύχει, επηρεάζοντας άμεσα την εκτέλεση της μηχανής κατάστασης και πιθανότατα διακόπτοντας κρίσιμες ροές εργασίας.
```bash
aws stepfunctions update-map-run --map-run-arn <value> [--max-concurrency <value>] [--tolerated-failure-percentage <value>] [--tolerated-failure-count <value>]
```
- **Πιθανή Επίπτωση**: Υποβάθμιση της απόδοσης και διακοπή κρίσιμων ροών εργασιών.

### `states:StopExecution`

Ένας επιτιθέμενος με αυτήν την άδεια θα μπορούσε να σταματήσει την εκτέλεση οποιασδήποτε μηχανής καταστάσεων, διακόπτοντας τις ενεργές ροές εργασιών και διαδικασιών. Αυτό θα μπορούσε να οδηγήσει σε μη ολοκληρωμένες συναλλαγές, διακοπές στις επιχειρηματικές λειτουργίες και πιθανή διάβρωση δεδομένων.

{% hint style="warning" %}
Αυτή η ενέργεια δεν υποστηρίζεται από τις **express state machines**.
{% endhint %}
```bash
aws stepfunctions stop-execution --execution-arn <value> [--error <value>] [--cause <value>]
```
- **Πιθανή Επίδραση**: Διακοπή των συνεχιζόμενων ροών εργασίας, λειτουργική διακοπή και πιθανή διαφθορά δεδομένων.

### `states:TagResource`, `states:UntagResource`

Ένας επιτιθέμενος θα μπορούσε να προσθέσει, να τροποποιήσει ή να αφαιρέσει ετικέτες από πόρους των Step Functions, διαταράσσοντας την πολιτική κατανομής κόστους, την παρακολούθηση πόρων και τις πολιτικές ελέγχου πρόσβασης βασισμένες σε ετικέτες του οργανισμού σας.
```bash
aws stepfunctions tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws stepfunctions untag-resource --resource-arn <value> --tag-keys <key>
```
**Πιθανή Επίπτωση**: Διαταραχή της κατανομής του κόστους, της παρακολούθησης πόρων και των πολιτικών ελέγχου πρόσβασης βασισμένων σε ετικέτες.

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Συμμετέχετε** 💬 στην [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Κοινοποιήστε κόλπα χάκινγκ υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
{% endhint %}
