# AWS - Adım Fonksiyonları Sonrası Sömürü

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

- [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
- 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
- **Hacking püf noktalarını paylaşarak PR'ler göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>
{% endhint %}

## Adım Fonksiyonları

Bu AWS hizmeti hakkında daha fazla bilgi için şu adrese bakın:

{% content-ref url="../aws-services/aws-stepfunctions-enum.md" %}
[aws-stepfunctions-enum.md](../aws-services/aws-stepfunctions-enum.md)
{% endcontent-ref %}

### `states:DeleteStateMachine`, `states:DeleteStateMachineVersion`, `states:DeleteStateMachineAlias`

Bu izinlere sahip bir saldırgan, durum makinelerini, versiyonlarını ve takma adları kalıcı olarak silebilir. Bu kritik iş akışlarını bozabilir, veri kaybına neden olabilir ve etkilenen durum makinelerini kurtarmak ve geri yüklemek için önemli zaman gerektirebilir. Ayrıca, saldırganın kullandığı izleri örtmesine, adli incelemeleri bozmasına ve temel otomasyon süreçlerini ve durum yapılandırmalarını kaldırarak operasyonları felç edebilir.

{% hint style="info" %}

- Bir durum makinesini sildiğinizde, tüm ilişkili versiyonlarını ve takma adlarını da silersiniz.
- Bir durum makinesi takma adını sildiğinizde, bu takma adını referans alan durum makinesi versiyonlarını silmezsiniz.
- Bir veya daha fazla takma ad tarafından şu anda referans alınan bir durum makinesi versiyonunu silmek mümkün değildir.

{% endhint %}
```bash
# Delete state machine
aws stepfunctions delete-state-machine --state-machine-arn <value>
# Delete state machine version
aws stepfunctions delete-state-machine-version --state-machine-version-arn <value>
# Delete state machine alias
aws stepfunctions delete-state-machine-alias --state-machine-alias-arn <value>
```
- **Potansiyel Etki**: Kritik iş akışlarının bozulması, veri kaybı ve operasyonel süreksizlik.

### `states:UpdateMapRun`

Bu izne sahip bir saldırgan, Harita Çalıştırma başarısızlık yapılandırmasını ve paralel ayarını manipüle edebilir, maksimum çocuk iş akışı yürütme sayısını artırabilir veya azaltabilir, doğrudan hizmetin performansını etkileyebilir. Ayrıca, bir saldırgan hoşgörülen başarısızlık yüzdesi ve sayısını değiştirebilir, bu değeri 0'a düşürebilir, böylece her bir öğe başarısız olduğunda, tüm harita çalıştırma başarısız olur, doğrudan durum makinesi yürütmesini etkiler ve kritik iş akışlarını potansiyel olarak bozabilir.
```bash
aws stepfunctions update-map-run --map-run-arn <value> [--max-concurrency <value>] [--tolerated-failure-percentage <value>] [--tolerated-failure-count <value>]
```
- **Potansiyel Etki**: Performans bozulması ve kritik iş akışlarının kesintiye uğraması.

### `states:StopExecution`

Bu izne sahip bir saldırgan, herhangi bir durum makinesinin yürütmesini durdurabilir, devam eden iş akışlarını ve süreçleri bozabilir. Bu, eksik işlemlere, durdurulmuş iş operasyonlarına ve potansiyel veri bozulmasına yol açabilir.

{% hint style="warning" %}
Bu eylem, **express durum makineleri** tarafından desteklenmemektedir.
{% endhint %}
```bash
aws stepfunctions stop-execution --execution-arn <value> [--error <value>] [--cause <value>]
```
- **Potansiyel Etki**: Devam eden iş akışlarının bozulması, operasyonel süreksizlik ve potansiyel veri bozulması.

### `states:TagResource`, `states:UntagResource`

Saldırgan, Step Functions kaynaklarından etiketleri ekleyebilir, değiştirebilir veya kaldırabilir, kuruluşunuzun maliyet tahsisi, kaynak takibi ve etiketlere dayalı erişim kontrol politikalarını bozabilir.
```bash
aws stepfunctions tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws stepfunctions untag-resource --resource-arn <value> --tag-keys <key>
```
**Potansiyel Etki**: Maliyet tahsisi, kaynak izleme ve etiket tabanlı erişim kontrol politikalarının bozulması.

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarını paylaşarak PR göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>
{% endhint %}
