# AWS - Μετεκμηκυνση Βημάτων

<details>

<summary><strong>Μάθετε χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Αν θέλετε να δείτε την **εταιρεία σας διαφημισμένη στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια του github.

</details>

## Βήματα Λειτουργιών

Για περισσότερες πληροφορίες σχετικά με αυτήν την υπηρεσία του AWS, ελέγξτε:

{% content-ref url="../aws-services/aws-stepfunctions-enum.md" %}
[aws-stepfunctions-enum.md](../aws-services/aws-stepfunctions-enum.md)
{% endcontent-ref %}

### `states:DeleteStateMachine`, `states:DeleteStateMachineVersion`, `states:DeleteStateMachineAlias`

Ένας επιτιθέμενος με αυτές τις άδειες θα μπορούσε να διαγράψει μόνιμα μηχανές καταστάσεων, τις εκδόσεις τους και τους ψευδώνυμους. Αυτό μπορεί να διαταράξει κρίσιμες ροές εργασίας, να οδηγήσει σε απώλεια δεδομένων και να απαιτήσει σημαντικό χρόνο για ανάκτηση και επαναφορά των επηρεασμένων μηχανών καταστάσεων. Επιπλέον, θα επέτρεπε σε έναν επιτιθέμενο να καλύψει τα ίχνη που χρησιμοποιήθηκαν, να διαταράξει τις διατριβές δικαστικής ιχνηλάτησης και πιθανώς να αναστείλει τις λειτουργίες αφαιρώντας τις απαραίτητες διαδικασίες αυτοματοποίησης και τις διαμορφώσεις καταστάσεων. 

{% hint style="info" %}

- Με τη διαγραφή μιας μηχανής καταστάσεων διαγράφετε επίσης όλες τις συσχετισμένες εκδόσεις και Ϩψευδώνυμα.
- Με τη διαγραφή ενός ψευδώνυμου μη διαγράφετε τις εκδόσεις της μηχανής καταστάσεων που αναφέρονται σε αυτό το ψευδώνυμο.
- Δεν είναι δυνατή η διαγραφή μιας εκδοχής μηχανής καταστάσεων που αναφέρεται επί του παρόντος από έναν ή περισσότερους Ϩψευδώνυμα.

{% endhint %}
```bash
# Delete state machine
aws stepfunctions delete-state-machine --state-machine-arn <value>
# Delete state machine version
aws stepfunctions delete-state-machine-version --state-machine-version-arn <value>
# Delete state machine alias
aws stepfunctions delete-state-machine-alias --state-machine-alias-arn <value>
```
- **Πιθανή Επίπτωση**: Διακοπή κρίσιμων ροών εργασίας, απώλεια δεδομένων και λειτουργική διακοπή.

### `states:UpdateMapRun`

Ένας επιτιθέμενος με αυτήν την άδεια θα μπορούσε να χειριστεί τη διαμόρφωση αποτυχίας του Map Run και τη ρύθμιση παράλληλης εκτέλεσης, έχοντας τη δυνατότητα να αυξήσει ή να μειώσει το μέγιστο αριθμό εκτελέσεων παιδικών ροών εργασίας που επιτρέπονται, επηρεάζοντας άμεσα την απόδοση της υπηρεσίας. Επιπλέον, ένας επιτιθέμενος θα μπορούσε να παρεμβαίνει στο ποσοστό και τον αριθμό αποδεκτών αποτυχιών, έχοντας τη δυνατότητα να μειώσει αυτήν την τιμή σε 0, ώστε κάθε φορά που αποτυγχάνει ένα στοιχείο, ολόκληρη η εκτέλεση του χάρτη θα αποτύχει, επηρεάζοντας άμεσα την εκτέλεση της μηχανής κατάστασης και πιθανότατα διακόπτοντας κρίσιμες ροές εργασίας.
```bash
aws stepfunctions update-map-run --map-run-arn <value> [--max-concurrency <value>] [--tolerated-failure-percentage <value>] [--tolerated-failure-count <value>]
```
- **Πιθανή Επίπτωση**: Υποβάθμιση της απόδοσης και διακοπή κρίσιμων ροών εργασιών.

### `states:StopExecution`

Ένας επιτιθέμενος με αυτήν την άδεια θα μπορούσε να σταματήσει την εκτέλεση οποιασδήποτε μηχανής καταστάσεων, διακόπτοντας τις ενεργές ροές εργασιών και διαδικασιών. Αυτό θα μπορούσε να οδηγήσει σε μη ολοκληρωμένες συναλλαγές, διακοπές στις επιχειρηματικές λειτουργίες και πιθανή διάβρωση δεδομένων.

{% hint style="warning" %}
Αυτή η ενέργεια δεν υποστηρίζεται από τις **express state machines**.
{% endhint %}
```bash
aws stepfunctions stop-execution --execution-arn <value> [--error <value>] [--cause <value>]
```
- **Πιθανή Επίδραση**: Διακοπή των συνεχιζόμενων ροών εργασίας, χρόνος αδράνειας λειτουργίας και πιθανή διαφθορά δεδομένων.

### `states:TagResource`, `states:UntagResource`

Ένας επιτιθέμενος θα μπορούσε να προσθέσει, να τροποποιήσει ή να αφαιρέσει ετικέτες από πόρους των Step Functions, διαταράσσοντας την πολιτική κατανομής κόστους, την παρακολούθηση πόρων και τις πολιτικές ελέγχου πρόσβασης βασισμένες σε ετικέτες του οργανισμού σας.
```bash
aws stepfunctions tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws stepfunctions untag-resource --resource-arn <value> --tag-keys <key>
```
**Πιθανή Επίπτωση**: Διαταραχή της κατανομής του κόστους, της παρακολούθησης πόρων και των πολιτικών ελέγχου πρόσβασης με βάση ετικέτες. 

<details>

<summary><strong>Μάθετε το χάκινγκ στο AWS από το μηδέν μέχρι τον ήρωα με το</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Ειδικός Red Team του HackTricks AWS)</strong></a><strong>!</strong></summary>

Άλλοι τρόποι υποστήριξης του HackTricks:

* Αν θέλετε να δείτε την **εταιρεία σας να διαφημίζεται στο HackTricks** ή να **κατεβάσετε το HackTricks σε μορφή PDF** ελέγξτε τα [**ΣΧΕΔΙΑ ΣΥΝΔΡΟΜΗΣ**](https://github.com/sponsors/carlospolop)!
* Αποκτήστε το [**επίσημο PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ανακαλύψτε [**την Οικογένεια PEASS**](https://opensea.io/collection/the-peass-family), τη συλλογή μας από αποκλειστικά [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Εγγραφείτε στη** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Μοιραστείτε τα χάκινγκ κόλπα σας υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο GitHub.

</details>
