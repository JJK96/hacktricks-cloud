# AWS - S3 Sonrası Sızma

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarını paylaşarak** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına PR gönderin.

</details>
{% endhint %}

## S3

Daha fazla bilgi için kontrol edin:

{% content-ref url="../aws-services/aws-s3-athena-and-glacier-enum.md" %}
[aws-s3-athena-and-glacier-enum.md](../aws-services/aws-s3-athena-and-glacier-enum.md)
{% endcontent-ref %}

### Hassas Bilgiler

Bazen okunabilir biçimde hassas bilgileri kovalayabilirsiniz. Örneğin, terraform durum sırları.

### Pivoting

Farklı platformlar S3'ü hassas varlıkları depolamak için kullanabilir.\
Örneğin, **airflow** orada **DAG'lerin kodunu** depolayabilir veya **web sayfaları** doğrudan S3'ten sunulabilir. Yazma izinlerine sahip bir saldırgan, bu kovandan **kodu değiştirerek** diğer platformlara **geçiş yapabilir** veya JS dosyalarını değiştirerek **hesapları ele geçirebilir**.

### S3 Fidye Yazılımı

Bu senaryoda, **saldırgan kendi AWS hesabında veya başka bir kompormize edilmiş hesapta bir KMS (Anahtar Yönetimi Servisi) anahtarı oluşturur**. Daha sonra bu **anahtarı dünyadaki herkese erişilebilir hale getirir**, böylece herhangi bir AWS kullanıcısı, rolü veya hesabı bu anahtarı kullanarak nesneleri şifreleyebilir. Ancak nesneler şifrelenemez.

Saldırgan bir hedef **S3 kovasını belirler ve çeşitli yöntemlerle yazma düzeyinde erişim kazanır**. Bu genellikle, kova yapılandırmasının kötü olması veya saldırganın AWS ortamına erişim kazanması nedeniyle olabilir. Saldırgan genellikle kişisel tanımlayıcı bilgiler (PII), korunan sağlık bilgileri (PHI), günlükler, yedeklemeler ve daha fazlasını içeren kovaları hedef alır.

Kovanın fidye yazılımı için hedef alınıp alınamayacağını belirlemek için saldırgan yapılandırmasını kontrol eder. Bu, **S3 Nesne Sürümleme**nin etkin olup olmadığını ve **çok faktörlü kimlik doğrulama silme (MFA silme) özelliğinin etkin olup olmadığını** doğrulamayı içerir. Nesne Sürümleme etkin değilse, saldırgan devam edebilir. Nesne Sürümleme etkinse ancak MFA silme devre dışı bırakılmışsa, saldırgan **Nesne Sürümlemeyi devre dışı bırakabilir**. Nesne Sürümleme ve MFA silme ikisi de etkinse, saldırganın o belirli kovayı fidye yazılımı için hedef alması daha zor hale gelir.

AWS API'sini kullanarak, saldırgan kovadaki her nesneyi kendi KMS anahtarlarını kullanarak şifrelenmiş bir kopya ile değiştirir. Bu, kovadaki verileri şifreleyerek anahtar olmadan erişilemez hale getirir.

Daha fazla baskı uygulamak için, saldırgan saldırıda kullanılan KMS anahtarının silinmesini planlar. Bu, hedefe verilerini kurtarmak için anahtarın silinmeden önce 7 günlük bir pencere verir ve veriler kalıcı olarak kaybolmadan önce silinir.

Son olarak, saldırgan genellikle "ransom-note.txt" adında bir son dosya yükleyebilir, bu dosya hedefe dosyalarını nasıl kurtaracakları konusunda talimatlar içerir. Bu dosya şifrelenmeden yüklenir, muhtemelen hedefin dikkatini çekmek ve onları fidye yazılımı saldırısından haberdar etmek için.

**Daha fazla bilgi için** [**orijinal araştırmayı kontrol edin**](https://rhinosecuritylabs.com/aws/s3-ransomware-part-1-attack-vector/)**.**

{% hint style="success" %}
AWS Hacking'i öğrenin ve uygulayın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve uygulayın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking püf noktalarını paylaşarak** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına PR gönderin.

</details>
{% endhint %}
