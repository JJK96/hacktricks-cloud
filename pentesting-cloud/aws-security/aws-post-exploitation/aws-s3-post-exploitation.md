# AWS - Uchimbaji wa Baada ya Exploitation wa S3

{% hint style="success" %}
Jifunze na zoea Uchimbaji wa AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoea Uchimbaji wa GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>unga mkono HackTricks</summary>

* Angalia [**mpango wa michango**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za uchimbaji kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}

## S3

Kwa maelezo zaidi angalia:

{% content-ref url="../aws-services/aws-s3-athena-and-glacier-enum.md" %}
[aws-s3-athena-and-glacier-enum.md](../aws-services/aws-s3-athena-and-glacier-enum.md)
{% endcontent-ref %}

### Taarifa Zenye Hisia

Maranyingi utaweza kupata taarifa zenye hisia zinazoweza kusomwa kwenye makasha. Kwa mfano, siri za hali ya hewa ya terraform.

### Kupindua

Jukwaa tofauti linaweza kutumia S3 kuhifadhi mali zenye hisia. Kwa mfano, **airflow** inaweza kuhifadhi **mimba** **za kanuni** hapo, au **kurasa za wavuti** zinaweza kutumika moja kwa moja kutoka S3. Mshambuliaji mwenye ruhusa ya kuandika anaweza **kurekebisha kanuni** kutoka kwenye kasha ili **kupindua** kwenye majukwaa mengine, au **kuchukua akaunti** kwa kurekebisha faili za JS.

### Ransomware ya S3

Katika hali hii, **mshambuliaji anaunda ufunguo wa KMS (Key Management Service) kwenye akaunti yao ya AWS** au akaunti nyingine iliyovamiwa. Kisha wanafanya ufunguo huu uwe **upatikane kwa kila mtu duniani**, kuruhusu mtumiaji yeyote wa AWS, jukumu, au akaunti kuchipua vitu kwa kutumia ufunguo huu. Hata hivyo, vitu hivyo haviwezi kufunguliwa.

Mshambuliaji anatambua **kasha la S3 la lengo na kupata ufikiaji wa kiwango cha kuandika** kwake kwa kutumia njia mbalimbali. Hii inaweza kuwa kutokana na usanidi duni wa kasha ambao unauweka wazi au mshambuliaji kupata ufikiaji wa mazingira ya AWS yenyewe. Mshambuliaji kwa kawaida ananuia makasha yanayohifadhi taarifa zenye hisia kama vile taarifa inayoweza kutambulika kibinafsi (PII), taarifa iliyolindwa ya afya (PHI), magogo, nakala rudufu, na zaidi.

Ili kubaini ikiwa kasha linaweza kulengwa kwa ransomware, mshambuliaji anachunguza usanidi wake. Hii ni pamoja na kuhakiki ikiwa **S3 Object Versioning** imeanzishwa na ikiwa **kufuta kwa uthibitishaji wa hatua maradufu (MFA delete) kumewezeshwa**. Ikiwa Object Versioning haijaanzishwa, mshambuliaji anaweza kuendelea. Ikiwa Object Versioning imeanzishwa lakini MFA delete imelemazwa, mshambuliaji anaweza **kulemaza Object Versioning**. Ikiwa Object Versioning na MFA delete zimeanzishwa, inakuwa ngumu zaidi kwa mshambuliaji kufanya ransomware kwenye kasha maalum.

Kwa kutumia API ya AWS, mshambuliaji **anachukua nafasi ya kila kitu kwenye kasha na nakala iliyofungwa kwa kutumia ufunguo wao wa KMS**. Hii kimsingi inafanya data kwenye kasha iwe imefungwa, ikifanya isiweze kufikiwa bila ufunguo.

Kuongeza shinikizo zaidi, mshambuliaji anapanga kufuta ufunguo wa KMS uliotumiwa kwenye shambulio. Hii inampa lengo siku 7 za kupona data yao kabla ya ufunguo kufutwa na data kuwa imepotea kabisa.

Hatimaye, mshambuliaji anaweza kupakia faili ya mwisho, kawaida iitwayo "ransom-note.txt," ambayo ina maagizo kwa lengo juu ya jinsi ya kupata faili zao. Faili hii inapakiwa bila kufungwa, labda ili kuvutia tahadhari ya lengo na kuwafanya waweze kufahamu shambulio la ransomware.

**Kwa maelezo zaidi** [**angalia utafiti wa awali**](https://rhinosecuritylabs.com/aws/s3-ransomware-part-1-attack-vector/)**.**

{% hint style="success" %}
Jifunze na zoea Uchimbaji wa AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoea Uchimbaji wa GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>unga mkono HackTricks</summary>

* Angalia [**mpango wa michango**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za uchimbaji kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}
