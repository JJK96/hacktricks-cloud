# AWS - Cognito Unauthenticated Enum

{% hint style="success" %}
Jifunze na zoezi la Udukuzi wa AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na zoezi la Udukuzi wa GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}

## Cognito Isiyothibitishwa

Cognito ni huduma ya AWS inayowezesha watengenezaji kutoa **watumiaji wa programu yao ufikiaji wa huduma za AWS**. Watengenezaji watatoa **vivutio vya IAM kwa watumiaji waliothibitishwa** kwenye programu yao (labda watu wanaweza tu kujiandikisha) na wanaweza pia kutoa **vivutio vya IAM kwa watumiaji wasiothibitishwa**.

Kwa habari za msingi kuhusu Cognito angalia:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Moduli za Pacu kwa udukuzi na uchambuzi

[Pacu](https://github.com/RhinoSecurityLabs/pacu), fremu ya kutumia AWS, sasa inajumuisha moduli za "cognito__enum" na "cognito__attack" ambazo zinautomatisha uchambuzi wa mali zote za Cognito kwenye akaunti na kuashiria mipangilio dhaifu, sifa za mtumiaji zinazotumiwa kwa kudhibiti ufikiaji, n.k., na pia kiotomatiki uundaji wa mtumiaji (ikiwa ni pamoja na usaidizi wa MFA) na upandishaji wa mamlaka kulingana na sifa za kawaida zinazoweza kubadilishwa, vitambulisho vya kitambulisho vinavyoweza kutumiwa, majukumu yanayoweza kudhaniwa katika alama za kitambulisho, n.k.

Kwa maelezo ya kazi za moduli angalia sehemu ya 2 ya [machapisho ya blogi](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2). Kwa maelekezo ya usakinishaji angalia ukurasa wa kuu wa [Pacu](https://github.com/RhinoSecurityLabs/pacu).

### Matumizi

Matumizi ya mfano ya shambulio la cognito__attack kujaribu uundaji wa mtumiaji na vekta zote za upandishaji wa mamlaka dhidi ya dimbwi la kitambulisho lililotolewa na mteja wa dimbwi la mtumiaji:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
**Matumizi ya cognito__enum kuchukua mifuko yote ya watumiaji, wateja wa mifuko ya watumiaji, mifuko ya utambulisho, watumiaji, n.k. inayoonekana katika akaunti ya AWS ya sasa:**
```bash
Pacu (new:test) > run cognito__enum
```
### Kitambulisho cha Dimbwi la Utambulisho

Dimbwi la Utambulisho linaweza kutoa **vivutio vya IAM kwa watumiaji wasiothibitishwa** ambao tu **wanajua Kitambulisho cha Dimbwi la Utambulisho** (ambacho ni cha kawaida **kupata**), na mshambuliaji mwenye habari hii anaweza kujaribu **kupata hicho jukumu la IAM** na kulitumia. Zaidi ya hayo, vivutio vya IAM vinaweza pia kupewa **watumiaji waliothibitishwa** wanaoingia kwenye Dimbwi la Utambulisho. Ikiwa mshambuliaji anaweza **kujiandikisha kama mtumiaji** au tayari ana **upatikanaji wa mtoa huduma ya utambulisho** uliotumiwa katika dimbwi la utambulisho, unaweza kupata **jukumu la IAM linalotolewa kwa watumiaji waliothibitishwa** na kutumia mamlaka yake.

[**Angalia jinsi ya kufanya hivyo hapa**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### Kitambulisho cha Dimbwi la Watumiaji

Kwa chaguo-msingi, Cognito inaruhusu **kujiandikisha kama mtumiaji mpya**. Kuweza kujiandikisha kama mtumiaji kunaweza kukupa **upatikanaji** kwenye **programu inayofunika** au kwenye **jukumu la ufikiaji wa IAM uliothibitishwa wa Dimbwi la Utambulisho** ambalo linakubali kama mtoa huduma ya utambulisho Dimbwi la Watumiaji wa Cognito. [**Angalia jinsi ya kufanya hivyo hapa**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).
