# AWS - Απαράμιλλη Απαρίθμηση Cognito

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** στη 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στη [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκερ υποβάλλοντας PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Απαράμιλλη Cognito

Το Cognito είναι ένα υπηρεσία του AWS που επιτρέπει στους προγραμματιστές να **χορηγούν στους χρήστες των εφαρμογών τους πρόσβαση σε υπηρεσίες του AWS**. Οι προγραμματιστές θα χορηγήσουν **ρόλους IAM σε ελεγμένους χρήστες** στην εφαρμογή τους (ενδεχομένως οι άνθρωποι θα μπορούν απλώς να εγγραφούν) και μπορούν επίσης να χορηγήσουν έναν **ρόλο IAM σε μη ελεγμένους χρήστες**.

Για βασικές πληροφορίες σχετικά με το Cognito, ελέγξτε:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Ενότητες Pacu για pentesting και απαρίθμηση

Το [Pacu](https://github.com/RhinoSecurityLabs/pacu), το πλαίσιο εκμετάλλευσης του AWS, περιλαμβάνει τώρα τις ενότητες "cognito__enum" και "cognito__attack" που αυτοματοποιούν την απαρίθμηση όλων των περιουσιακών στοιχείων του Cognito σε ένα λογαριασμό και επισημαίνουν αδύναμες ρυθμίσεις, χαρακτηριστικά χρήστη που χρησιμοποιούνται για τον έλεγχο πρόσβασης, κ.λπ., και αυτοματοποιούν επίσης τη δημιουργία χρηστών (συμπεριλαμβανομένης της υποστήριξης MFA) και την ανάδειξη προνομίων με βάση τα τροποποιήσιμα προσαρμοσμένα χαρακτηριστικά, διαθέσιμα διαπιστευτήρια ομάδας ταυτότητας, ρόλους που μπορούν να υιοθετηθούν σε αναγνωριστικά ταυτότητας, κ.λπ.

Για μια περιγραφή των λειτουργιών των ενοτήτων, δείτε το μέρος 2 της [ανάρτησης στο blog](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2). Για οδηγίες εγκατάστασης, δείτε την κύρια σελίδα του [Pacu](https://github.com/RhinoSecurityLabs/pacu).

### Χρήση

Δείγμα χρήσης της επίθεσης cognito__attack για να προσπαθήσετε τη δημιουργία χρήστη και όλων των διανυσματικών προνομίων εναντίον ενός συγκεκριμένου ομαδικού ταυτότητας και πελάτη ομάδας χρηστών:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
Δείγμα χρήσης του cognito__enum για τη συλλογή όλων των user pools, user pool clients, identity pools, χρηστών, κλπ. που είναι ορατά στο τρέχον AWS λογαριασμό:
```bash
Pacu (new:test) > run cognito__enum
```
### Αναγνωριστικό Πισίνας Ταυτότητας

Οι Πισίνες Ταυτότητας μπορούν να χορηγήσουν **ρόλους IAM σε μη εξουσιοδοτημένους χρήστες** που απλώς **γνωρίζουν το Αναγνωριστικό της Πισίνας Ταυτότητας** (το οποίο είναι αρκετά συνηθισμένο να **βρεθεί**), και ένας επιτιθέμενος με αυτές τις πληροφορίες θα μπορούσε να προσπαθήσει να **έχει πρόσβαση σε αυτόν τον ρόλο IAM** και να τον εκμεταλλευτεί.\
Επιπλέον, οι ρόλοι IAM θα μπορούσαν επίσης να ανατεθούν σε **εξουσιοδοτημένους χρήστες** που έχουν πρόσβαση στην Πισίνα Ταυτότητας. Αν ένας επιτιθέμενος μπορεί να **καταχωρίσει έναν χρήστη** ή ήδη έχει **πρόσβαση στον πάροχο ταυτότητας** που χρησιμοποιείται στην πισίνα ταυτότητας, μπορεί να έχει πρόσβαση στον **ρόλο IAM που δίνεται στους εξουσιοδοτημένους** χρήστες και να καταχραστεί τα προνόμιά τους.

[**Ελέγξτε πώς να το κάνετε αυτό εδώ**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### Αναγνωριστικό Πισίνας Χρηστών

Από προεπιλογή, το Cognito επιτρέπει τη **καταχώριση νέου χρήστη**. Η δυνατότητα να καταχωρίσετε έναν χρήστη μπορεί να σας δώσει **πρόσβαση** στην **υποκείμενη εφαρμογή** ή στον **εξουσιοδοτημένο ρόλο πρόσβασης IAM μιας Πισίνας Ταυτότητας** που αποδέχεται ως πάροχο ταυτότητας την Πισίνα Χρηστών Cognito. [**Ελέγξτε πώς να το κάνετε αυτό εδώ**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).
