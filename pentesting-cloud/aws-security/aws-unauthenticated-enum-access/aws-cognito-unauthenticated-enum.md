# AWS - Cognito рдЕрдирдЕрдереЗрдВрдЯрд┐рдХреЗрдЯреЗрдб рдПрдиреБрдо

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг AWS рд░реЗрдб рдЯреАрдо рдПрдХреНрд╕рдкрд░реНрдЯ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг GCP рд░реЗрдб рдЯреАрдо рдПрдХреНрд╕рдкрд░реНрдЯ (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ **рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВред

</details>
{% endhint %}

## рдЕрдирдЕрдереЗрдВрдЯрд┐рдХреЗрдЯреЗрдб Cognito

Cognito рдПрдХ AWS рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ **рдЕрдкрдиреЗ рдРрдк рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ AWS рд╕реЗрд╡рд╛рдУрдВ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐** рджреЗрддреА рд╣реИред рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЕрдкрдиреЗ рдРрдк рдореЗрдВ **рдкреНрд░рдорд╛рдгрд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ IAM рднреВрдорд┐рдХрд╛рдПрдВ рдкреНрд░рджрд╛рди** рдХрд░реЗрдВрдЧреЗ (рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рд▓реЛрдЧ рдХреЗрд╡рд▓ рд╕рд╛рдЗрди рдЕрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ) рдФрд░ рд╡реЗ рдПрдХ **IAM рднреВрдорд┐рдХрд╛ рдХреЛ рдЕрдкреНрд░рдорд╛рдгрд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреА рдкреНрд░рджрд╛рди** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

Cognito рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдореМрд▓рд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### рдкреЗрдВрдЯреЗрд╕реНрдЯрд┐рдВрдЧ рдФрд░ рдПрдиреБрдорд░реЗрд╢рди рдХреЗ рд▓рд┐рдП Pacu рдореЙрдбреНрдпреВрд▓реНрд╕

[Pacu](https://github.com/RhinoSecurityLabs/pacu), AWS рд╢реЛрд╖рдг рдлреНрд░реЗрдорд╡рд░реНрдХ, рдЕрдм "cognito__enum" рдФрд░ "cognito__attack" рдореЙрдбреНрдпреВрд▓реНрд╕ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдПрдХ рдЦрд╛рддреЗ рдореЗрдВ рд╕рднреА Cognito рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рдХрд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдПрдиреБрдорд░реЗрд╢рди рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдХрдордЬреЛрд░ рд╡рд┐рдиреНрдпрд╛рд╕, рдЙрдкрдпреЛрдЧ рдХрдВрдЯреНрд░реЛрд▓ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЧреБрдг, рдЖрджрд┐ рдХреЛ рдзреНрд╡рдЬрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд░реНрдорд╛рдг (рдПрдордПрдлрдП рд╕рдорд░реНрдерди рд╕рд╣рд┐рдд) рдФрд░ рд╕реБрд╡рд┐рдзрд╛ рдЙрдиреНрдирдпрди рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рд╕рдВрд╢реЛрдзрди рдпреЛрдЧреНрдп рдХрд╕реНрдЯрдо рдЧреБрдгреЛрдВ, рдЙрдкрдпреЛрдЧреА рдкрд╣рдЪрд╛рди рд╕рдореВрд╣ рдкреНрд░рдорд╛рдгрдкрддреНрд░, рдЖрджрд┐ рдореЗрдВ рдЕрд╕реБрдореНрдп рднреВрдорд┐рдХрд╛рдПрдВред

рдореЙрдбреНрдпреВрд▓ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рд╡рд┐рд╡рд░рдг рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП [рдмреНрд▓реЙрдЧ рдкреЛрд╕реНрдЯ](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2) рдХреЗ рднрд╛рдЧ 2 рджреЗрдЦреЗрдВред рд╕реНрдерд╛рдкрдирд╛ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рд▓рд┐рдП рдореБрдЦреНрдп [Pacu](https://github.com/RhinoSecurityLabs/pacu) рдкреЗрдЬ рджреЗрдЦреЗрдВред

### рдЙрдкрдпреЛрдЧ

рдПрдХ рджрд┐рдП рдЧрдП рдкрд╣рдЪрд╛рди рд╕рдореВрд╣ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рдЦрд┐рд▓рд╛рдл рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд░реНрдорд╛рдг рдФрд░ рд╕рднреА рдкреНрд░рд┐рд╡реЗрд╕реНрдХ рд╡реЗрдХреНрдЯрд░ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирдореВрдирд╛ cognito__attack рдЙрдкрдпреЛрдЧ:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
рд╡рд░реНрддрдорд╛рди AWS рдЦрд╛рддреЗ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреВрд▓, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреВрд▓ рдХреНрд▓рд╛рдЗрдВрдЯ, рдкрд╣рдЪрд╛рди рдкреВрд▓, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЖрджрд┐ рдХреЛ рдПрдХрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП cognito__enum рдЙрдкрдпреЛрдЧ рдХрд╛ рдирдореВрдирд╛:
```bash
Pacu (new:test) > run cognito__enum
```
### рдкрд╣рдЪрд╛рди рдкреВрд▓ рдЖрдИрдбреА

рдкрд╣рдЪрд╛рди рдкреВрд▓ рдЙрди рдкреНрд░рдорд╛рдгреАрдХреГрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ **IAM рднреВрдорд┐рдХрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдХреЗрд╡рд▓ рдкрд╣рдЪрд╛рди рдкреВрд▓ рдЖрдИрдбреА** (рдЬреЛ рдЦреЛрдЬрдирд╛ рдЕрдзрд┐рдХ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ) **рдЬрд╛рдирддреЗ рд╣реИрдВ**, рдФрд░ рдЗрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде рд╣рдорд▓рд╛рд╡рд░ рдЙрд╕ IAM рднреВрдорд┐рдХрд╛ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рд╢реЛрд╖рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред\
рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, IAM рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рднреА **рдкрд╣рдЪрд╛рди рдкреВрд▓ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рдорд╛рдгреАрдХреГрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рджреА рдЬрд╛ рд░рд╣реА IAM рднреВрдорд┐рдХрд╛** рдкрд╣реБрдВрдЪрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИред рдпрджрд┐ рдХреЛрдИ рд╣рдорд▓рд╛рд╡рд░ **рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ** рдпрд╛ рдкрд╣рдЪрд╛рди рдкреВрд▓ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рддрдХ рдкрд╣реБрдВрдЪ рд░рдЦрддрд╛ рд╣реИ, рддреЛ рдЖрдк **рдкреНрд░рдорд╛рдгреАрдХреГрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рджреА рдЬрд╛ рд░рд╣реА IAM рднреВрдорд┐рдХрд╛** рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХреА рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

[**рдпрд╣рд╛рдВ рджреЗрдЦреЗрдВ рдХрд┐ рдРрд╕рд╛ рдХреИрд╕реЗ рдХрд░реЗрдВ**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреВрд▓ рдЖрдИрдбреА

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдХреЛрдЧреНрдирд┐рдЯреЛ рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ **рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ**ред рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛрдирд╛ рдЖрдкрдХреЛ **рдЕрдзреАрдирд╕реНрде рдПрдкреНрд▓рд┐рдХреЗрд╢рди** рдпрд╛ **рдкрд╣рдЪрд╛рди рдкреВрд▓ рдХреА рдкреНрд░рдорд╛рдгреАрдХреГрдд IAM рдкрд╣реБрдВрдЪ рднреВрдорд┐рдХрд╛** рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдХреЛрдЧреНрдирд┐рдЯреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреВрд▓ рдХреЛ рдкрд╣рдЪрд╛рди рдкреНрд░рджрд╛рддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рд░рд╣рд╛ рд╣реИред [**рдпрд╣рд╛рдВ рджреЗрдЦреЗрдВ рдХрд┐ рдРрд╕рд╛ рдХреИрд╕реЗ рдХрд░реЗрдВ**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).
