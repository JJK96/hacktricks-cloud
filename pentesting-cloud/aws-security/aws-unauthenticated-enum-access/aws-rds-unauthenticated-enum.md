# AWS - RDS Unauthenticated Enum

{% hint style="success" %}
AWS ‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP ‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ‡§ï‡•ã ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§¶‡•á‡§Ç</summary>

* [**‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç**](https://github.com/sponsors/carlospolop) ‡§ï‡•Ä ‡§ú‡§æ‡§Å‡§ö ‡§ï‡§∞‡•á‡§Ç!
* **üí¨ [**Discord ‡§∏‡§Æ‡•Ç‡§π**](https://discord.gg/hRep4RUj7f) ‡§Ø‡§æ [**telegram ‡§∏‡§Æ‡•Ç‡§π**](https://t.me/peass) ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç ‡§Ø‡§æ ‡§π‡§Æ‡•á‡§Ç **Twitter** üê¶ ‡§™‡§∞ **‡§´‡•â‡§≤‡•ã ‡§ï‡§∞‡•á‡§Ç** [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç** [**HackTricks**](https://github.com/carlospolop/hacktricks) ‡§î‡§∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ‡§ó‡§ø‡§ü‡§π‡§¨ ‡§∞‡§ø‡§™‡•ã‡§ú‡§º‡§ø‡§ü‡§∞‡•Ä ‡§Æ‡•á‡§Ç PRs ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§ï‡•á‡•§

</details>
{% endhint %}

## RDS

‡§Ö‡§ß‡§ø‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡•á‡§ñ‡•á‡§Ç:

{% content-ref url="../aws-services/aws-relational-database-rds-enum.md" %}
[aws-relational-database-rds-enum.md](../aws-services/aws-relational-database-rds-enum.md)
{% endcontent-ref %}

## Public Port

**‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§∏‡•á ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏** ‡§ï‡•ã ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§¶‡•á‡§®‡§æ ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à‡•§ ‡§π‡§Æ‡§≤‡§æ‡§µ‡§∞ ‡§ï‡•ã ‡§Ö‡§≠‡•Ä ‡§≠‡•Ä **‡§Ø‡•Ç‡§ú‡§º‡§∞‡§®‡•á‡§Æ ‡§î‡§∞ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°,** IAM ‡§è‡§ï‡•ç‡§∏‡•á‡§∏, ‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï **‡§è‡§ï‡•ç‡§∏‡§™‡•ç‡§≤‡•â‡§á‡§ü** ‡§ú‡§æ‡§®‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•ã‡§ó‡•Ä‡•§

## Public RDS Snapshots

AWS **‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•ã ‡§≠‡•Ä RDS ‡§∏‡•ç‡§®‡•à‡§™‡§∂‡•â‡§ü ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø** ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§Ö‡§™‡§®‡•á ‡§ñ‡§æ‡§§‡•á ‡§∏‡•á ‡§á‡§® ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï RDS ‡§∏‡•ç‡§®‡•à‡§™‡§∂‡•â‡§ü‡•ç‡§∏ ‡§ï‡•ã ‡§¨‡§π‡•Å‡§§ ‡§Ü‡§∏‡§æ‡§®‡•Ä ‡§∏‡•á ‡§∏‡•Ç‡§ö‡•Ä‡§¨‡§¶‡•ç‡§ß ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç:
```bash
# Public RDS snapshots
aws rds describe-db-snapshots --include-public

## Search by account ID
aws rds describe-db-snapshots --include-public --query 'DBSnapshots[?contains(DBSnapshotIdentifier, `284546856933:`) == `true`]'
## To share a RDS snapshot with everybody the RDS DB cannot be encrypted (so the snapshot won't be encryted)
## To share a RDS encrypted snapshot you need to share the KMS key also with the account


# From the own account you can check if there is any public snapshot with:
aws rds describe-db-snapshots --snapshot-type public [--region us-west-2]
## Even if in the console appear as there are public snapshot it might be public
## snapshots from other accounts used by the current account
```
### Public URL template

### ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï URL ‡§ü‡•á‡§Æ‡•ç‡§™‡§≤‡•á‡§ü

```html
https://rds.amazonaws.com/
?Action=DescribeDBInstances
&Version=2014-10-31
```

### Example Request

### ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß

```bash
$ curl "https://rds.amazonaws.com/?Action=DescribeDBInstances&Version=2014-10-31"
```

### Response

### ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ

```xml
<DescribeDBInstancesResponse xmlns="http://rds.amazonaws.com/doc/2014-10-31/">
  <DescribeDBInstancesResult>
    <DBInstances>
      <DBInstance>
        <DBInstanceIdentifier>mydbinstance</DBInstanceIdentifier>
        <DBInstanceClass>db.t2.micro</DBInstanceClass>
        <Engine>mysql</Engine>
        <DBInstanceStatus>available</DBInstanceStatus>
        <MasterUsername>admin</MasterUsername>
        <Endpoint>
          <Address>mydbinstance.123456789012.us-east-1.rds.amazonaws.com</Address>
          <Port>3306</Port>
        </Endpoint>
        <AllocatedStorage>20</AllocatedStorage>
        <InstanceCreateTime>2021-01-01T12:00:00Z</InstanceCreateTime>
        <PreferredBackupWindow>07:00-09:00</PreferredBackupWindow>
        <BackupRetentionPeriod>7</BackupRetentionPeriod>
        <DBSecurityGroups/>
        <VpcSecurityGroups>
          <VpcSecurityGroupMembership>
            <VpcSecurityGroupId>sg-12345678</VpcSecurityGroupId>
            <Status>active</Status>
          </VpcSecurityGroupMembership>
        </VpcSecurityGroups>
        <DBParameterGroups>
          <DBParameterGroup>
            <DBParameterGroupName>default.mysql5.7</DBParameterGroupName>
            <ParameterApplyStatus>in-sync</ParameterApplyStatus>
          </DBParameterGroup>
        </DBParameterGroups>
        <AvailabilityZone>us-east-1a</AvailabilityZone>
        <DBSubnetGroup>
          <DBSubnetGroupName>default</DBSubnetGroupName>
          <DBSubnetGroupDescription>default</DBSubnetGroupDescription>
          <VpcId>vpc-12345678</VpcId>
          <SubnetGroupStatus>Complete</SubnetGroupStatus>
          <Subnets>
            <Subnet>
              <SubnetIdentifier>subnet-12345678</SubnetIdentifier>
              <SubnetAvailabilityZone>
                <Name>us-east-1a</Name>
              </SubnetAvailabilityZone>
              <SubnetStatus>Active</SubnetStatus>
            </Subnet>
          </Subnets>
        </DBSubnetGroup>
        <PreferredMaintenanceWindow>mon:03:00-mon:04:00</PreferredMaintenanceWindow>
        <PendingModifiedValues/>
        <MultiAZ>false</MultiAZ>
        <EngineVersion>5.7.22</EngineVersion>
        <AutoMinorVersionUpgrade>true</AutoMinorVersionUpgrade>
        <ReadReplicaDBInstanceIdentifiers/>
        <LicenseModel>general-public-license</LicenseModel>
        <OptionGroupMemberships>
          <OptionGroupMembership>
            <OptionGroupName>default:mysql-5-7</OptionGroupName>
            <Status>in-sync</Status>
          </OptionGroupMembership>
        </OptionGroupMemberships>
        <PubliclyAccessible>true</PubliclyAccessible>
        <StorageType>gp2</StorageType>
        <StorageEncrypted>false</StorageEncrypted>
        <DbiResourceId>db-ABCDEFGHIJKLMNOPQRSTU1VWZ</DbiResourceId>
        <CACertificateIdentifier>rds-ca-2019</CACertificateIdentifier>
        <DomainMemberships/>
        <CopyTagsToSnapshot>false</CopyTagsToSnapshot>
        <MonitoringInterval>0</MonitoringInterval>
        <EnhancedMonitoringResourceArn/>
        <IAMDatabaseAuthenticationEnabled>false</IAMDatabaseAuthenticationEnabled>
        <PerformanceInsightsEnabled>false</PerformanceInsightsEnabled>
        <DeletionProtection>false</DeletionProtection>
        <AssociatedRoles/>
        <TagList/>
        <CustomerOwnedIpEnabled>false</CustomerOwnedIpEnabled>
        <AwsBackupRecoveryPointArn/>
        <ActivityStreamStatus>stopped</ActivityStreamStatus>
        <ActivityStreamKmsKeyId/>
        <ActivityStreamMode/>
        <ActivityStreamEngineNativeAuditFieldsIncluded>false</ActivityStreamEngineNativeAuditFieldsIncluded>
        <AutomationMode>full</AutomationMode>
        <ResumeFullAutomationModeTime/>
        <CustomIamInstanceProfile/>
        <BackupTarget/>
        <NetworkType>IPV4</NetworkType>
        <ActivityStreamPolicyStatus>locked</ActivityStreamPolicyStatus>
        <StorageThroughput>0</StorageThroughput>
        <DBSystemId/>
        <MasterUserSecret>
          <SecretArn/>
          <KmsKeyId/>
          <SecretStatus>rotating</SecretStatus>
        </MasterUserSecret>
        <CertificateDetails>
          <CaIdentifier>rds-ca-2019</CaIdentifier>
          <ValidTill>2024-08-22T00:00:00Z</ValidTill>
        </CertificateDetails>
      </DBInstance>
    </DBInstances>
  </DescribeDBInstancesResult>
  <ResponseMetadata>
    <RequestId>12345678-1234-1234-1234-123456789012</RequestId>
  </ResponseMetadata>
</DescribeDBInstancesResponse>
```
```
mysql://{user_provided}.{random_id}.{region}.rds.amazonaws.com:3306
postgres://{user_provided}.{random_id}.{region}.rds.amazonaws.com:5432
```
{% hint style="success" %}
AWS Hacking ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ‡§ï‡•ã ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§¶‡•á‡§Ç</summary>

* [**‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç**](https://github.com/sponsors/carlospolop) ‡§ï‡•Ä ‡§ú‡§æ‡§Å‡§ö ‡§ï‡§∞‡•á‡§Ç!
* üí¨ [**Discord ‡§∏‡§Æ‡•Ç‡§π**](https://discord.gg/hRep4RUj7f) ‡§Ø‡§æ [**telegram ‡§∏‡§Æ‡•Ç‡§π**](https://t.me/peass) ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç ‡§Ø‡§æ ‡§π‡§Æ‡•á‡§Ç **Twitter** üê¶ ‡§™‡§∞ **‡§´‡•â‡§≤‡•ã** ‡§ï‡§∞‡•á‡§Ç [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **PRs ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§ï‡•á ‡§π‡•à‡§ï‡§ø‡§Ç‡§ó ‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç** [**HackTricks**](https://github.com/carlospolop/hacktricks) ‡§î‡§∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos ‡§Æ‡•á‡§Ç‡•§

</details>
{% endhint %}
