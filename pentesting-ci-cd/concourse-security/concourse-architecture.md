# Concourse Architecture

## Concourse Architecture

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

[**Relevant data from Concourse documentation:**](https://concourse-ci.org/internals.html)

### Architecture

![](<../../.gitbook/assets/image (187).png>)

#### ATC: web UI & build scheduler

ATC Concourse ‡§ï‡§æ ‡§¶‡§ø‡§≤ ‡§π‡•à‡•§ ‡§Ø‡§π **web UI ‡§î‡§∞ API** ‡§ö‡§≤‡§æ‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§∏‡§≠‡•Ä pipeline **scheduling** ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞ ‡§π‡•à‡•§ ‡§Ø‡§π **PostgreSQL ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§ü** ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§ú‡§ø‡§∏‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó pipeline ‡§°‡•á‡§ü‡§æ (‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç build logs ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à‡§Ç) ‡§ï‡•ã ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§

[checker](https://concourse-ci.org/checker.html) ‡§ï‡•Ä ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä ‡§®‡§è ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£‡•ã‡§Ç ‡§ï‡•Ä ‡§®‡§ø‡§∞‡§Ç‡§§‡§∞ ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡§®‡§æ ‡§π‡•à‡•§ [scheduler](https://concourse-ci.org/scheduler.html) ‡§è‡§ï job ‡§ï‡•á ‡§≤‡§ø‡§è builds ‡§ï‡•ã schedule ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞ ‡§π‡•à ‡§î‡§∞ [build tracker](https://concourse-ci.org/build-tracker.html) ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä scheduled builds ‡§ï‡•ã ‡§ö‡§≤‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞ ‡§π‡•à‡•§ [garbage collector](https://concourse-ci.org/garbage-collector.html) ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§Ö‡§™‡•ç‡§∞‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§Ø‡§æ ‡§™‡•Å‡§∞‡§æ‡§®‡•á objects, ‡§ú‡•à‡§∏‡•á containers ‡§î‡§∞ volumes ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§´‡§æ‡§à ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§π‡•à‡•§

#### TSA: worker registration & forwarding

TSA ‡§è‡§ï **custom-built SSH server** ‡§π‡•à ‡§ú‡§ø‡§∏‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•á‡§µ‡§≤ [**workers**](https://concourse-ci.org/internals.html#architecture-worker) ‡§ï‡•ã [ATC](https://concourse-ci.org/internals.html#component-atc) ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á **register** ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§

TSA **default ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§™‡•ã‡§∞‡•ç‡§ü `2222` ‡§™‡§∞ ‡§∏‡•Å‡§®‡§§‡§æ ‡§π‡•à**, ‡§î‡§∞ ‡§Ü‡§Æ‡§§‡•å‡§∞ ‡§™‡§∞ [ATC](https://concourse-ci.org/internals.html#component-atc) ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡•ç‡§•‡§ø‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§è‡§ï load balancer ‡§ï‡•á ‡§™‡•Ä‡§õ‡•á ‡§¨‡•à‡§†‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§

**TSA SSH ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§™‡§∞ CLI ‡§ï‡•ã ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§§‡§æ ‡§π‡•à**, ‡§ú‡•ã [**‡§á‡§® commands**](https://concourse-ci.org/internals.html#component-tsa) ‡§ï‡§æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§

#### Workers

Tasks ‡§ï‡•ã execute ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è concourse ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§ï‡•Å‡§õ workers ‡§π‡•ã‡§®‡•á ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§Ø‡•á workers [TSA](https://concourse-ci.org/internals.html#component-tsa) ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á **‡§∏‡•ç‡§µ‡§Ø‡§Ç ‡§ï‡•ã register** ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ [**Garden**](https://github.com/cloudfoundry-incubator/garden) ‡§î‡§∞ [**Baggageclaim**](https://github.com/concourse/baggageclaim) ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§ö‡§≤‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§

* **Garden**: ‡§Ø‡§π **Container Manage API** ‡§π‡•à, ‡§ú‡•ã ‡§Ü‡§Æ‡§§‡•å‡§∞ ‡§™‡§∞ **HTTP** ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á **‡§™‡•ã‡§∞‡•ç‡§ü 7777** ‡§™‡§∞ ‡§ö‡§≤‡§§‡§æ ‡§π‡•à‡•§
* **Baggageclaim**: ‡§Ø‡§π **Volume Management API** ‡§π‡•à, ‡§ú‡•ã ‡§Ü‡§Æ‡§§‡•å‡§∞ ‡§™‡§∞ **HTTP** ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á **‡§™‡•ã‡§∞‡•ç‡§ü 7788** ‡§™‡§∞ ‡§ö‡§≤‡§§‡§æ ‡§π‡•à‡•§

## References

* [https://concourse-ci.org/internals.html](https://concourse-ci.org/internals.html)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
