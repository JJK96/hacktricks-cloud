# Concourse Architecture

## Concourse Architecture

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

[**Relevant data from Concourse documentation:**](https://concourse-ci.org/internals.html)

### Architecture

![](<../../.gitbook/assets/image (187).png>)

#### ATC: web UI & build scheduler

ATC는 Concourse의 핵심입니다. **웹 UI와 API**를 실행하며 모든 파이프라인 **스케줄링**을 담당합니다. **PostgreSQL에 연결**하여 파이프라인 데이터를 저장합니다(빌드 로그 포함).

[checker](https://concourse-ci.org/checker.html)의 책임은 리소스의 새로운 버전을 지속적으로 확인하는 것입니다. [scheduler](https://concourse-ci.org/scheduler.html)는 작업의 빌드를 스케줄링하는 역할을 하며, [build tracker](https://concourse-ci.org/build-tracker.html)는 스케줄된 빌드를 실행하는 역할을 합니다. [garbage collector](https://concourse-ci.org/garbage-collector.html)는 컨테이너 및 볼륨과 같은 사용되지 않거나 오래된 객체를 제거하는 정리 메커니즘입니다.

#### TSA: worker registration & forwarding

TSA는 [**workers**](https://concourse-ci.org/internals.html#architecture-worker)를 [ATC](https://concourse-ci.org/internals.html#component-atc)에 **안전하게 등록**하기 위해 사용되는 **커스텀 SSH 서버**입니다.

TSA는 **기본적으로 `2222` 포트에서 대기**하며, 일반적으로 [ATC](https://concourse-ci.org/internals.html#component-atc)와 함께 배치되고 로드 밸런서 뒤에 위치합니다.

**TSA는 SSH 연결을 통한 CLI를 구현**하며, [**이 명령어들**](https://concourse-ci.org/internals.html#component-tsa)을 지원합니다.

#### Workers

작업을 실행하기 위해 concourse는 몇몇 workers를 필요로 합니다. 이 workers는 [TSA](https://concourse-ci.org/internals.html#component-tsa)를 통해 **자신을 등록**하고 [**Garden**](https://github.com/cloudfoundry-incubator/garden) 및 [**Baggageclaim**](https://github.com/concourse/baggageclaim) 서비스를 실행합니다.

* **Garden**: 이는 **컨테이너 관리 API**로, 일반적으로 **HTTP를 통해 7777 포트**에서 실행됩니다.
* **Baggageclaim**: 이는 **볼륨 관리 API**로, 일반적으로 **HTTP를 통해 7788 포트**에서 실행됩니다.

## References

* [https://concourse-ci.org/internals.html](https://concourse-ci.org/internals.html)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
