# Concourse Architecture

## Concourse Architecture

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

[**Relevant data from Concourse documentation:**](https://concourse-ci.org/internals.html)

### Architecture

![](<../../.gitbook/assets/image (187).png>)

#### ATC: web UI & build scheduler

O ATC √© o cora√ß√£o do Concourse. Ele executa a **web UI e API** e √© respons√°vel por todo o **agendamento** de pipelines. Ele **conecta-se ao PostgreSQL**, que √© usado para armazenar dados de pipeline (incluindo logs de build).

A responsabilidade do [checker](https://concourse-ci.org/checker.html) √© verificar continuamente novas vers√µes de recursos. O [scheduler](https://concourse-ci.org/scheduler.html) √© respons√°vel por agendar builds para um job e o [build tracker](https://concourse-ci.org/build-tracker.html) √© respons√°vel por executar qualquer build agendado. O [garbage collector](https://concourse-ci.org/garbage-collector.html) √© o mecanismo de limpeza para remover quaisquer objetos n√£o utilizados ou desatualizados, como containers e volumes.

#### TSA: worker registration & forwarding

O TSA √© um **servidor SSH personalizado** usado exclusivamente para **registrar** com seguran√ßa [**workers**](https://concourse-ci.org/internals.html#architecture-worker) com o [ATC](https://concourse-ci.org/internals.html#component-atc).

O TSA por **padr√£o escuta na porta `2222`**, e geralmente est√° colocalizado com o [ATC](https://concourse-ci.org/internals.html#component-atc) e atr√°s de um balanceador de carga.

O **TSA implementa CLI sobre a conex√£o SSH**, suportando [**estes comandos**](https://concourse-ci.org/internals.html#component-tsa).

#### Workers

Para executar tarefas, o Concourse deve ter alguns workers. Esses workers **se registram** via o [TSA](https://concourse-ci.org/internals.html#component-tsa) e executam os servi√ßos [**Garden**](https://github.com/cloudfoundry-incubator/garden) e [**Baggageclaim**](https://github.com/concourse/baggageclaim).

* **Garden**: Esta √© a **Container Manage API**, geralmente executada na **porta 7777** via **HTTP**.
* **Baggageclaim**: Esta √© a **Volume Management API**, geralmente executada na **porta 7788** via **HTTP**.

## References

* [https://concourse-ci.org/internals.html](https://concourse-ci.org/internals.html)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
