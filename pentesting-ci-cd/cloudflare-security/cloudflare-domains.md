# Cloudflare Domains

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter**'da **bizi takip edin** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}

Cloudflare'da yapılandırılmış her TLD'de bazı **genel ayarlar ve hizmetler** yapılandırılabilir. Bu sayfada her bölümün **güvenlikle ilgili ayarlarını analiz edeceğiz:**

<figure><img src="../../.gitbook/assets/image (101).png" alt=""><figcaption></figcaption></figure>

### Genel Bakış

* [ ] Hesabın **hizmetlerinin ne kadarının** **kullanıldığını** anlamak
* [ ] **Zone ID** ve **account ID**'yi bulmak

### Analitik

* [ ] **`Security`** bölümünde herhangi bir **Rate limiting** olup olmadığını kontrol edin

### DNS

* [ ] DNS **kayıtlarındaki** **ilginç** (hassas?) verileri kontrol edin
* [ ] **İsim** (örneğin admin173865324.domin.com) temelinde **hassas bilgi** içerebilecek **alt alan adlarını** kontrol edin
* [ ] **Proxylenmemiş** web sayfalarını kontrol edin
* [ ] CNAME veya IP adresi ile **doğrudan erişilebilen** **proxylenmiş web sayfalarını** kontrol edin
* [ ] **DNSSEC**'in **etkin** olduğunu kontrol edin
* [ ] **Tüm CNAME'lerde** **CNAME Flattening**'in **kullanıldığını** kontrol edin
* Bu, **alt alan adı ele geçirme açıklarını gizlemek** ve yükleme sürelerini iyileştirmek için faydalı olabilir
* Alan adlarının [**sahtecilik için savunmasız olmadığını**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing) kontrol edin

### **E-posta**

TODO

### Spektrum

TODO

### SSL/TLS

#### **Genel Bakış**

* [ ] **SSL/TLS şifrelemesi** **Full** veya **Full (Strict)** olmalıdır. Diğer herhangi bir seçenek, bir noktada **düz metin trafiği** gönderecektir.
* [ ] **SSL/TLS Recommender** etkin olmalıdır

#### Edge Sertifikaları

* [ ] **Always Use HTTPS** **etkin** olmalıdır
* [ ] **HTTP Strict Transport Security (HSTS)** **etkin** olmalıdır
* [ ] **Minimum TLS Versiyonu 1.2** olmalıdır
* [ ] **TLS 1.3** **etkin** olmalıdır
* [ ] **Automatic HTTPS Rewrites** **etkin** olmalıdır
* [ ] **Certificate Transparency Monitoring** **etkin** olmalıdır

### **Güvenlik**

* [ ] **`WAF`** bölümünde, **Firewall** ve **rate limiting kurallarının kullanıldığını** kontrol etmek ilginçtir.
* **`Bypass`** eylemi, bir isteğe yönelik **Cloudflare güvenlik** özelliklerini **devre dışı bırakır**. Kullanılmamalıdır.
* [ ] **`Page Shield`** bölümünde, herhangi bir sayfa kullanılıyorsa **etkin** olduğunu kontrol etmek önerilir
* [ ] **`API Shield`** bölümünde, Cloudflare'da herhangi bir API açığa çıkmışsa **etkin** olduğunu kontrol etmek önerilir
* [ ] **`DDoS`** bölümünde **DDoS korumalarının** etkinleştirilmesi önerilir
* [ ] **`Settings`** bölümünde:
* [ ] **`Security Level`**'nin **orta** veya daha yüksek olduğunu kontrol edin
* [ ] **`Challenge Passage`**'nin en fazla 1 saat olduğunu kontrol edin
* [ ] **`Browser Integrity Check`**'in **etkin** olduğunu kontrol edin
* [ ] **`Privacy Pass Support`**'un **etkin** olduğunu kontrol edin

#### **CloudFlare DDoS Koruması**

* Eğer mümkünse, **Bot Fight Mode** veya **Super Bot Fight Mode**'u etkinleştirin. Eğer programatik olarak erişilen bir API'yi koruyorsanız (örneğin bir JS ön yüz sayfasından). Bu erişimi bozmadığınız sürece bunu etkinleştiremeyebilirsiniz.
* **WAF**'da: **URL yolu** veya **doğrulanmış botlar** için **rate limit** oluşturabilirsiniz (Rate limiting kuralları), veya IP, Cookie, referans vb. temelinde **erişimi engelleyebilirsiniz**. Böylece bir web sayfasından gelmeyen veya bir çerezi olmayan istekleri engelleyebilirsiniz.
* Eğer saldırı **doğrulanmış bir bot** tarafından yapılıyorsa, en azından **botlar için bir rate limit** ekleyin.
* Eğer saldırı **belirli bir yola** ise, önleme mekanizması olarak bu yolda bir **rate limit** ekleyin.
* **WAF**'daki **Tools** bölümünden IP adreslerini, IP aralıklarını, ülkeleri veya ASN'leri **beyaz listeye alabilirsiniz**.
* **Managed rules**'un da açık istismarlarını önlemeye yardımcı olup olamayacağını kontrol edin.
* **Tools** bölümünde belirli IP'lere ve **kullanıcı ajanlarına** **engelleme veya zorlama** yapabilirsiniz.
* DDoS'da bazı kuralları **daha kısıtlayıcı hale getirmek için geçersiz kılabilirsiniz**.
* **Ayarlar**: **Security Level**'i **Yüksek** ve **Under Attack** olarak ayarlayın eğer saldırı altındaysanız ve **Browser Integrity Check** etkinse.
* Cloudflare Domains -> Analytics -> Security -> **rate limit**'in etkin olup olmadığını kontrol edin
* Cloudflare Domains -> Security -> Events -> **tespit edilen kötü niyetli olayları** kontrol edin

### Erişim

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

### Hız

_Güvenlikle ilgili herhangi bir seçenek bulamadım_

### Önbellekleme

* [ ] **`Configuration`** bölümünde **CSAM Tarama Aracı**'nı etkinleştirmeyi düşünün

### **Workers Routes**

_Zaten_ [_cloudflare workers_](./#workers) _kontrol etmiş olmalısınız_

### Kurallar

TODO

### Ağ

* [ ] Eğer **`HTTP/2`** **etkinse**, **`HTTP/2 to Origin`** **etkin** olmalıdır
* [ ] **`HTTP/3 (with QUIC)`** **etkin** olmalıdır
* [ ] Eğer **kullanıcılarınızın** **gizliliği** önemliyse, **`Onion Routing`**'in **etkin** olduğundan emin olun

### **Trafik**

TODO

### Özel Sayfalar

* [ ] Güvenlikle ilgili bir hata tetiklendiğinde (örneğin bir engelleme, rate limiting veya saldırı altındayım modu) özel sayfaları yapılandırmak isteğe bağlıdır

### Uygulamalar

TODO

### Scrape Shield

* [ ] **E-posta Adresi Gizleme**'nin **etkin** olduğunu kontrol edin
* [ ] **Sunucu tarafı Hariç Tutmalar**'ın **etkin** olduğunu kontrol edin

### **Zaraz**

TODO

### **Web3**

TODO

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1).png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter**'da **bizi takip edin** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}
