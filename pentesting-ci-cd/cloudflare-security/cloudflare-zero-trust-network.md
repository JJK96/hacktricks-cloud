# Red de Confianza Cero de Cloudflare

<details>

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya a HackTricks</summary>

* Revisa los [**planes de suscripci√≥n**](https://github.com/sponsors/carlospolop)!
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠guenos** en **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>
{% endhint %}

En una cuenta de **Red de Confianza Cero de Cloudflare** hay algunas **configuraciones y servicios** que se pueden configurar. En esta p√°gina vamos a **analizar las configuraciones relacionadas con la seguridad de cada secci√≥n:**

<figure><img src="../../.gitbook/assets/image (206).png" alt=""><figcaption></figcaption></figure>

## An√°lisis

* [ ] √ötil para **conocer el entorno**

## **Gateway**

* [ ] En **`Pol√≠ticas`** es posible generar pol√≠ticas para **restringir** por **DNS**, **red** o solicitud **HTTP** qui√©n puede acceder a las aplicaciones.
* Si se utiliza, las **pol√≠ticas** podr√≠an crearse para **restringir** el acceso a sitios maliciosos.
* Esto es **solo relevante si se est√° utilizando un gateway**, de lo contrario, no hay raz√≥n para crear pol√≠ticas defensivas.

## Acceso

### Aplicaciones

En cada aplicaci√≥n:

* [ ] Verifica **qui√©n** puede acceder a la aplicaci√≥n en las **Pol√≠ticas** y aseg√∫rate de que **solo** los **usuarios** que **necesitan acceso** a la aplicaci√≥n puedan acceder.
* Para permitir el acceso se van a utilizar **`Grupos de Acceso`** (y tambi√©n se pueden establecer **reglas adicionales**)
* [ ] Verifica los **proveedores de identidad disponibles** y aseg√∫rate de que no sean demasiado abiertos
* [ ] En **`Configuraci√≥n`**:
* [ ] Verifica que **CORS no est√© habilitado** (si est√° habilitado, verifica que sea **seguro** y que no permita todo)
* [ ] Las cookies deben tener el atributo **Strict Same-Site**, **HTTP Only** y la **cookie de enlace** debe estar **habilitada** si la aplicaci√≥n es HTTP.
* [ ] Considera habilitar tambi√©n el **renderizado del navegador** para una mejor **protecci√≥n. M√°s informaci√≥n sobre** [**aislamiento remoto del navegador aqu√≠**](https://blog.cloudflare.com/cloudflare-and-remote-browser-isolation/)**.**

### **Grupos de Acceso**

* [ ] Verifica que los grupos de acceso generados est√©n **correctamente restringidos** a los usuarios que deber√≠an permitir.
* [ ] Es especialmente importante verificar que el **grupo de acceso predeterminado no sea muy abierto** (no est√© permitiendo a demasiadas personas) ya que por **defecto** cualquiera en ese **grupo** podr√° **acceder a las aplicaciones**.
* Ten en cuenta que es posible dar **acceso** a **TODOS** y a otras **pol√≠ticas muy abiertas** que no se recomiendan a menos que sea 100% necesario.

### Autenticaci√≥n de Servicio

* [ ] Verifica que todos los tokens de servicio **caduquen en 1 a√±o o menos**

### T√∫neles

TODO

## Mi Equipo

TODO

## Registros

* [ ] Puedes buscar **acciones inesperadas** de los usuarios

## Configuraciones

* [ ] Verifica el **tipo de plan**
* [ ] Es posible ver el nombre del propietario de la **tarjeta de cr√©dito**, los **√∫ltimos 4 d√≠gitos**, la fecha de **vencimiento** y la **direcci√≥n**
* [ ] Se recomienda **agregar una Expiraci√≥n de Asiento de Usuario** para eliminar usuarios que realmente no utilizan este servicio

<details>

{% hint style="success" %}
Aprende y practica Hacking en AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Aprende y practica Hacking en GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya a HackTricks</summary>

* Revisa los [**planes de suscripci√≥n**](https://github.com/sponsors/carlospolop)!
* **√önete al** üí¨ [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s√≠guenos** en **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>
{% endhint %}
