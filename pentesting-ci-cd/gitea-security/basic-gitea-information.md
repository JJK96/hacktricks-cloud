# Basic Gitea Information

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Structure

基本的なGitea環境の構造は、**組織**ごとにリポジトリをグループ化することです。各組織には**複数のリポジトリ**と**複数のチーム**が含まれる場合があります。ただし、githubと同様に、ユーザーは組織外にリポジトリを持つことができます。

さらに、**ユーザー**は**異なる組織**の**メンバー**になることができます。組織内では、ユーザーは**各リポジトリに対して異なる権限**を持つことができます。

ユーザーはまた、**異なるリポジトリに対して異なる権限を持つ異なるチーム**の一部である場合もあります。

最後に、**リポジトリには特別な保護メカニズム**がある場合があります。

## Permissions

### Organizations

**組織が作成される**と、**Owners**というチームが**作成され**、ユーザーがその中に入れられます。このチームは**組織に対する管理アクセス**を提供し、その**権限**とチームの**名前**は**変更できません**。

**組織管理者**（オーナー）は、組織の**可視性**を選択できます：

* Public
* Limited (ログインユーザーのみ)
* Private (メンバーのみ)

**組織管理者**はまた、**リポジトリ管理者**がチームの**アクセスを追加または削除**できるかどうかを指定できます。リポジトリの最大数も指定できます。

新しいチームを作成する際には、いくつかの重要な設定が選択されます：

* チームのメンバーがアクセスできる**組織のリポジトリ**を指定します：特定のリポジトリ（チームが追加されたリポジトリ）またはすべて。
* メンバーが新しいリポジトリを作成できるかどうかも指定します（作成者は管理アクセスを取得します）。
* リポジトリの**メンバー**が持つ**権限**：
* **管理者**アクセス
* **特定の**アクセス：

![](<../../.gitbook/assets/image (118).png>)

### Teams & Users

リポジトリでは、**組織管理者**および（組織が許可する場合）**リポジトリ管理者**が、コラボレーター（他のユーザー）およびチームに与えられる**役割を管理**できます。**3つ**の可能な**役割**があります：

* 管理者
* 書き込み
* 読み取り

## Gitea Authentication

### Web Access

**ユーザー名 + パスワード**と、可能であれば（推奨）2FAを使用します。

### **SSH Keys**

アカウントを1つまたは複数の公開鍵で設定し、関連する**秘密鍵があなたの代わりにアクションを実行できるようにします。** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPG Keys**

これらの鍵を使用して**ユーザーを偽装することはできません**が、使用しない場合、**署名なしでコミットを送信することで発見される可能性**があります。

### **Personal Access Tokens**

個人用アクセス トークンを生成して、**アプリケーションにアカウントへのアクセスを許可**できます。個人用アクセス トークンはアカウント全体へのアクセスを提供します: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauth Applications

個人用アクセス トークンと同様に、**Oauth アプリケーション**はアカウントおよびアカウントがアクセスできる場所に対して**完全なアクセス権**を持ちます。なぜなら、[docs](https://docs.gitea.io/en-us/oauth2-provider/#scopes)に記載されているように、スコープはまだサポートされていないからです：

![](<../../.gitbook/assets/image (194).png>)

### Deploy keys

デプロイキーはリポジトリへの読み取り専用または書き込みアクセスを持つ場合があり、特定のリポジトリを侵害するために興味深いものとなる可能性があります。

## Branch Protections

ブランチ保護は、**リポジトリの完全な制御をユーザーに与えないように設計**されています。目的は、**いくつかの保護方法を設けて、特定のブランチにコードを書き込む前に保護すること**です。

**リポジトリのブランチ保護**は _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_ にあります。

{% hint style="info" %}
**組織レベルでブランチ保護を設定することはできません**。したがって、すべてのリポジトリで宣言する必要があります。
{% endhint %}

ブランチに対して適用できるさまざまな保護（例えば、masterに対して）：

* **プッシュを無効にする**：誰もこのブランチにプッシュできません
* **プッシュを有効にする**：アクセス権を持つ人は誰でもプッシュできますが、強制プッシュはできません。
* **ホワイトリスト制限付きプッシュ**：選択されたユーザー/チームのみがこのブランチにプッシュできます（ただし強制プッシュはできません）
* **マージホワイトリストを有効にする**：ホワイトリストに登録されたユーザー/チームのみがPRをマージできます。
* **ステータスチェックを有効にする**：マージする前にステータスチェックが合格する必要があります。
* **承認を要求する**：PRをマージする前に必要な承認の数を指定します。
* **ホワイトリストに登録されたユーザー/チームに承認を制限する**：PRを承認できるユーザー/チームを指定します。
* **拒否されたレビューでマージをブロックする**：変更が要求された場合、他のチェックが合格してもマージできません。
* **公式レビューリクエストでマージをブロックする**：公式レビューリクエストがある場合、マージできません。
* **古い承認を無効にする**：新しいコミットがあると、古い承認は無効になります。
* **署名付きコミットを要求する**：コミットは署名されている必要があります。
* **プルリクエストが古い場合はマージをブロックする**
* **保護/非保護ファイルパターン**：変更に対して保護/非保護するファイルのパターンを指定します。

{% hint style="info" %}
ご覧のとおり、ユーザーの資格情報を取得したとしても、**リポジトリが保護されているため、例えばCI/CDパイプラインを侵害するためにmasterにコードをプッシュすることができない場合があります**。
{% endhint %}

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
