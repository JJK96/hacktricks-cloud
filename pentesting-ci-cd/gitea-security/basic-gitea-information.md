# Basic Gitea Information

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Structure

A estrutura b√°sica do ambiente Gitea √© agrupar reposit√≥rios por **organiza√ß√£o(√µes),** cada uma delas pode conter **v√°rios reposit√≥rios** e **v√°rias equipes.** No entanto, observe que, assim como no github, os usu√°rios podem ter reposit√≥rios fora da organiza√ß√£o.

Al√©m disso, um **usu√°rio** pode ser **membro** de **diferentes organiza√ß√µes**. Dentro da organiza√ß√£o, o usu√°rio pode ter **diferentes permiss√µes sobre cada reposit√≥rio**.

Um usu√°rio tamb√©m pode fazer **parte de diferentes equipes** com diferentes permiss√µes sobre diferentes reposit√≥rios.

E, finalmente, **reposit√≥rios podem ter mecanismos de prote√ß√£o especiais**.

## Permissions

### Organizations

Quando uma **organiza√ß√£o √© criada**, uma equipe chamada **Owners** √© **criada** e o usu√°rio √© colocado dentro dela. Esta equipe dar√° **acesso de administrador** sobre a **organiza√ß√£o**, essas **permiss√µes** e o **nome** da equipe **n√£o podem ser modificados**.

**Admins da organiza√ß√£o** (owners) podem selecionar a **visibilidade** da organiza√ß√£o:

* P√∫blica
* Limitada (apenas usu√°rios logados)
* Privada (apenas membros)

**Admins da organiza√ß√£o** tamb√©m podem indicar se os **admins do reposit√≥rio** podem **adicionar e/ou remover acesso** para equipes. Eles tamb√©m podem indicar o n√∫mero m√°ximo de reposit√≥rios.

Ao criar uma nova equipe, v√°rias configura√ß√µes importantes s√£o selecionadas:

* √â indicado os **reposit√≥rios da organiza√ß√£o que os membros da equipe poder√£o acessar**: reposit√≥rios espec√≠ficos (reposit√≥rios onde a equipe √© adicionada) ou todos.
* Tamb√©m √© indicado **se os membros podem criar novos reposit√≥rios** (o criador ter√° acesso de administrador a ele)
* As **permiss√µes** que os **membros** do reposit√≥rio **ter√£o**:
* Acesso de **Administrador**
* Acesso **Espec√≠fico**:

![](<../../.gitbook/assets/image (118).png>)

### Teams & Users

Em um reposit√≥rio, o **admin da organiza√ß√£o** e os **admins do reposit√≥rio** (se permitido pela organiza√ß√£o) podem **gerenciar os pap√©is** dados a colaboradores (outros usu√°rios) e equipes. Existem **3** poss√≠veis **pap√©is**:

* Administrador
* Escrita
* Leitura

## Gitea Authentication

### Web Access

Usando **nome de usu√°rio + senha** e potencialmente (e recomendado) um 2FA.

### **SSH Keys**

Voc√™ pode configurar sua conta com uma ou v√°rias chaves p√∫blicas permitindo que a **chave privada relacionada execute a√ß√µes em seu nome.** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPG Keys**

Voc√™ **n√£o pode se passar pelo usu√°rio com essas chaves**, mas se voc√™ n√£o us√°-las, pode ser poss√≠vel que voc√™ **seja descoberto por enviar commits sem uma assinatura**.

### **Personal Access Tokens**

Voc√™ pode gerar um token de acesso pessoal para **dar a um aplicativo acesso √† sua conta**. Um token de acesso pessoal d√° acesso total √† sua conta: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauth Applications

Assim como os tokens de acesso pessoal, **aplica√ß√µes Oauth** ter√£o **acesso completo** √† sua conta e aos lugares que sua conta tem acesso porque, conforme indicado na [documenta√ß√£o](https://docs.gitea.io/en-us/oauth2-provider/#scopes), escopos ainda n√£o s√£o suportados:

![](<../../.gitbook/assets/image (194).png>)

### Deploy keys

Deploy keys podem ter acesso de leitura ou escrita ao reposit√≥rio, ent√£o podem ser interessantes para comprometer reposit√≥rios espec√≠ficos.

## Branch Protections

As prote√ß√µes de branch s√£o projetadas para **n√£o dar controle completo de um reposit√≥rio** aos usu√°rios. O objetivo √© **colocar v√°rios m√©todos de prote√ß√£o antes de poder escrever c√≥digo dentro de algum branch**.

As **prote√ß√µes de branch de um reposit√≥rio** podem ser encontradas em _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
**N√£o √© poss√≠vel definir uma prote√ß√£o de branch no n√≠vel da organiza√ß√£o**. Portanto, todas elas devem ser declaradas em cada reposit√≥rio.
{% endhint %}

Diferentes prote√ß√µes podem ser aplicadas a um branch (como ao master):

* **Disable Push**: Ningu√©m pode fazer push para este branch
* **Enable Push**: Qualquer pessoa com acesso pode fazer push, mas n√£o for√ßar o push.
* **Whitelist Restricted Push**: Apenas usu√°rios/equipes selecionados podem fazer push para este branch (mas n√£o for√ßar o push)
* **Enable Merge Whitelist**: Apenas usu√°rios/equipes na lista de permiss√µes podem mesclar PRs.
* **Enable Status checks:** Requer verifica√ß√µes de status antes de mesclar.
* **Require approvals**: Indica o n√∫mero de aprova√ß√µes necess√°rias antes que um PR possa ser mesclado.
* **Restrict approvals to whitelisted**: Indica usu√°rios/equipes que podem aprovar PRs.
* **Block merge on rejected reviews**: Se mudan√ßas forem solicitadas, n√£o pode ser mesclado (mesmo se os outros cheques passarem)
* **Block merge on official review requests**: Se houver solicita√ß√µes de revis√£o oficial, n√£o pode ser mesclado
* **Dismiss stale approvals**: Quando novos commits, aprova√ß√µes antigas ser√£o descartadas.
* **Require Signed Commits**: Commits devem ser assinados.
* **Block merge if pull request is outdated**
* **Protected/Unprotected file patterns**: Indica padr√µes de arquivos para proteger/desproteger contra mudan√ßas

{% hint style="info" %}
Como voc√™ pode ver, mesmo que voc√™ consiga obter algumas credenciais de um usu√°rio, **reposit√≥rios podem estar protegidos evitando que voc√™ fa√ßa push de c√≥digo para o master** por exemplo para comprometer o pipeline CI/CD.
{% endhint %}

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
