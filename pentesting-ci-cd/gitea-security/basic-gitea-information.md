# Osnovne informacije o Gitea

{% hint style="success" %}
Naučite i vežbajte AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Naučite i vežbajte GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podržite HackTricks</summary>

* Pogledajte [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Delite hakovanje trikove podnošenjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## Osnovna struktura

Osnovna struktura Gitea okruženja je grupisanje repozitorijuma po **organizacijama**, od kojih svaka može sadržati **nekoliko repozitorijuma** i **nekoliko timova.** Međutim, imajte na umu da, kao i na github-u, korisnici mogu imati repozitorijume van organizacije.

Pored toga, **korisnik** može biti **član** **različitih organizacija**. Unutar organizacije korisnik može imati **različite dozvole nad svakim repozitorijumom**.

Korisnik takođe može biti **deo različitih timova** sa različitim dozvolama nad različitim repozitorijumima.

I na kraju, **repozitorijumi mogu imati posebne mehanizme zaštite**.

## Dozvole

### Organizacije

Kada se **organizacija kreira**, tim pod nazivom **Owners** se **kreira** i korisnik se stavlja u njega. Ovaj tim će dati **administratorski pristup** nad **organizacijom**, te **dozvole** i **ime** tima **ne mogu biti izmenjeni**.

**Administratori organizacije** (vlasnici) mogu odabrati **vidljivost** organizacije:

* Javno
* Ograničeno (samo prijavljeni korisnici)
* Privatno (samo članovi)

**Administratori organizacije** takođe mogu naznačiti da li **administratori repozitorijuma** mogu **dodavati i/ili uklanjati pristup** za timove. Takođe mogu naznačiti maksimalan broj repozitorijuma.

Kada se kreira novi tim, biraju se nekoliko važnih postavki:

* Naznačeni su **repozitorijumi organizacije kojima će članovi tima moći pristupiti**: specifični repozitorijumi (repozitorijumi gde je tim dodat) ili svi.
* Takođe je naznačeno **da li članovi mogu kreirati nove repozitorijume** (kreator će dobiti administratorski pristup).
* **Dozvole** koje će **članovi** repozitorijuma **imati**:
* **Administratorski** pristup
* **Specifičan** pristup:

![](<../../.gitbook/assets/image (118).png>)

### Timovi i korisnici

U repozitorijumu, **administrator organizacije** i **administratori repozitorijuma** (ako je dozvoljeno od strane organizacije) mogu **upravljati ulogama** dodeljenim saradnicima (drugim korisnicima) i timovima. Postoje **3** moguće **uloge**:

* Administrator
* Pisanje
* Čitanje

## Gitea autentifikacija

### Web pristup

Korišćenjem **korisničkog imena + lozinke** i potencijalno (i preporučeno) 2FA.

### **SSH ključevi**

Možete konfigurisati svoj nalog sa jednim ili više javnih ključeva omogućavajući povezani **privatni ključ da izvršava radnje u vaše ime.** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPG ključevi**

Ne možete se predstavljati kao korisnik sa ovim ključevima, ali ako ih ne koristite, moguće je da ćete **biti otkriveni zbog slanja commit-ova bez potpisa**.

### **Lični pristupni tokeni**

Možete generisati lični pristupni token da **date aplikaciji pristup vašem nalogu**. Lični pristupni token daje potpuni pristup vašem nalogu: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauth aplikacije

Kao i lični pristupni tokeni, **Oauth aplikacije** će imati **potpuni pristup** vašem nalogu i mestima kojima vaš nalog ima pristup jer, kako je naznačeno u [dokumentaciji](https://docs.gitea.io/en-us/oauth2-provider/#scopes), opsezi još nisu podržani:

![](<../../.gitbook/assets/image (194).png>)

### Deploy ključevi

Deploy ključevi mogu imati pristup samo za čitanje ili za pisanje repozitorijuma, tako da mogu biti interesantni za kompromitovanje specifičnih repozitorijuma.

## Zaštita grana

Zaštita grana je dizajnirana da **ne daje potpunu kontrolu nad repozitorijumom** korisnicima. Cilj je da se **postavi nekoliko zaštitnih metoda pre nego što se može pisati kod unutar neke grane**.

**Zaštita grana repozitorijuma** može se naći na _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
**Nije moguće postaviti zaštitu grane na nivou organizacije**. Dakle, sve moraju biti deklarisane na svakom repozitorijumu.
{% endhint %}

Različite zaštite mogu se primeniti na granu (kao na master):

* **Onemogući Push**: Niko ne može push-ovati na ovu granu
* **Omogući Push**: Svi sa pristupom mogu push-ovati, ali ne i forsirati push.
* **Whitelist Restricted Push**: Samo odabrani korisnici/timovi mogu push-ovati na ovu granu (ali ne i forsirati push)
* **Omogući Merge Whitelist**: Samo korisnici/timovi sa belog spiska mogu spajati PR-ove.
* **Omogući statusne provere:** Zahtevaj da statusne provere prođu pre spajanja.
* **Zahtevaj odobrenja**: Naznačite broj odobrenja potrebnih pre nego što se PR može spojiti.
* **Ograniči odobrenja na belom spisku**: Naznačite korisnike/timove koji mogu odobriti PR-ove.
* **Blokiraj spajanje na odbijene recenzije**: Ako su zatražene izmene, ne može se spojiti (čak i ako ostale provere prođu)
* **Blokiraj spajanje na zvanične zahteve za recenziju**: Ako postoje zvanični zahtevi za recenziju, ne može se spojiti
* **Odbaci zastarela odobrenja**: Kada se dodaju novi commit-ovi, stara odobrenja će biti odbačena.
* **Zahtevaj potpisane commit-ove**: Commit-ovi moraju biti potpisani.
* **Blokiraj spajanje ako je pull request zastareo**
* **Zaštićeni/Nezaštićeni obrasci datoteka**: Naznačite obrasce datoteka koje treba zaštititi/nezaštititi od promena

{% hint style="info" %}
Kao što možete videti, čak i ako ste uspeli da dobijete neke korisničke podatke, **repozitorijumi mogu biti zaštićeni sprečavajući vas da push-ujete kod na master** na primer da kompromitujete CI/CD pipeline.
{% endhint %}

{% hint style="success" %}
Naučite i vežbajte AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Naučite i vežbajte GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podržite HackTricks</summary>

* Pogledajte [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Delite hakovanje trikove podnošenjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
