# Βασικές Πληροφορίες Gitea

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε hacking tricks υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο github.

</details>
{% endhint %}

## Βασική Δομή

Η βασική δομή του περιβάλλοντος Gitea είναι να ομαδοποιεί τα repos ανά **οργανισμό(ούς),** καθένας από τους οποίους μπορεί να περιέχει **αρκετά αποθετήρια** και **αρκετές ομάδες.** Ωστόσο, σημειώστε ότι όπως και στο github, οι χρήστες μπορούν να έχουν repos εκτός του οργανισμού.

Επιπλέον, ένας **χρήστης** μπορεί να είναι **μέλος** **διαφορετικών οργανισμών**. Μέσα στον οργανισμό, ο χρήστης μπορεί να έχει **διαφορετικά δικαιώματα σε κάθε αποθετήριο**.

Ένας χρήστης μπορεί επίσης να είναι **μέρος διαφορετικών ομάδων** με διαφορετικά δικαιώματα σε διαφορετικά repos.

Και τέλος, **τα αποθετήρια μπορεί να έχουν ειδικούς μηχανισμούς προστασίας**.

## Δικαιώματα

### Οργανισμοί

Όταν δημιουργείται ένας **οργανισμός**, δημιουργείται μια ομάδα που ονομάζεται **Ιδιοκτήτες** και ο χρήστης τοποθετείται μέσα σε αυτήν. Αυτή η ομάδα θα δώσει **διαχειριστική πρόσβαση** στον **οργανισμό**, αυτά τα **δικαιώματα** και το **όνομα** της ομάδας **δεν μπορούν να τροποποιηθούν**.

Οι **διαχειριστές του οργανισμού** (ιδιοκτήτες) μπορούν να επιλέξουν την **ορατότητα** του οργανισμού:

* Δημόσιο
* Περιορισμένο (μόνο για συνδεδεμένους χρήστες)
* Ιδιωτικό (μόνο για μέλη)

Οι **διαχειριστές του οργανισμού** μπορούν επίσης να υποδείξουν αν οι **διαχειριστές του repo** μπορούν να **προσθέσουν ή να αφαιρέσουν πρόσβαση** για ομάδες. Μπορούν επίσης να υποδείξουν τον μέγιστο αριθμό repos.

Όταν δημιουργείται μια νέα ομάδα, επιλέγονται αρκετές σημαντικές ρυθμίσεις:

* Υποδεικνύεται τα **repos του οργανισμού που τα μέλη της ομάδας θα μπορούν να έχουν πρόσβαση**: συγκεκριμένα repos (repos όπου προστίθεται η ομάδα) ή όλα.
* Υποδεικνύεται επίσης αν τα **μέλη μπορούν να δημιουργήσουν νέα repos** (ο δημιουργός θα έχει διαχειριστική πρόσβαση σε αυτό)
* Τα **δικαιώματα** που θα έχουν τα **μέλη** του repo:
* **Διαχειριστική** πρόσβαση
* **Συγκεκριμένη** πρόσβαση:

![](<../../.gitbook/assets/image (118).png>)

### Ομάδες & Χρήστες

Σε ένα repo, ο **διαχειριστής του οργανισμού** και οι **διαχειριστές του repo** (αν επιτρέπεται από τον οργανισμό) μπορούν να **διαχειριστούν τους ρόλους** που δίνονται στους συνεργάτες (άλλους χρήστες) και στις ομάδες. Υπάρχουν **3** πιθανοί **ρόλοι**:

* Διαχειριστής
* Γράψιμο
* Ανάγνωση

## Αυθεντικοποίηση Gitea

### Πρόσβαση μέσω Web

Χρησιμοποιώντας **όνομα χρήστη + κωδικό πρόσβασης** και ενδεχομένως (και συνιστάται) 2FA.

### **SSH Keys**

Μπορείτε να ρυθμίσετε τον λογαριασμό σας με ένα ή περισσότερα δημόσια κλειδιά επιτρέποντας στο σχετικό **ιδιωτικό κλειδί να εκτελεί ενέργειες εκ μέρους σας.** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPG Keys**

Δεν μπορείτε να υποδυθείτε τον χρήστη με αυτά τα κλειδιά, αλλά αν δεν το χρησιμοποιήσετε μπορεί να είναι δυνατό να **ανακαλυφθείτε για την αποστολή commits χωρίς υπογραφή**.

### **Προσωπικά Access Tokens**

Μπορείτε να δημιουργήσετε προσωπικό access token για να **δώσετε σε μια εφαρμογή πρόσβαση στον λογαριασμό σας**. Ένα προσωπικό access token δίνει πλήρη πρόσβαση στον λογαριασμό σας: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauth Εφαρμογές

Όπως και τα προσωπικά access tokens, οι **Oauth εφαρμογές** θα έχουν **πλήρη πρόσβαση** στον λογαριασμό σας και στα μέρη που έχει πρόσβαση ο λογαριασμός σας, επειδή, όπως αναφέρεται στα [docs](https://docs.gitea.io/en-us/oauth2-provider/#scopes), οι scopes δεν υποστηρίζονται ακόμα:

![](<../../.gitbook/assets/image (194).png>)

### Deploy keys

Τα deploy keys μπορεί να έχουν πρόσβαση μόνο για ανάγνωση ή για εγγραφή στο repo, οπότε μπορεί να είναι ενδιαφέρον να παραβιάσετε συγκεκριμένα repos.

## Προστασίες Κλάδων

Οι προστασίες κλάδων έχουν σχεδιαστεί για να **μην δίνουν πλήρη έλεγχο ενός αποθετηρίου** στους χρήστες. Ο στόχος είναι να **τοποθετηθούν διάφορες μέθοδοι προστασίας πριν μπορέσει να γραφτεί κώδικας σε κάποιον κλάδο**.

Οι **προστασίες κλάδων ενός αποθετηρίου** μπορούν να βρεθούν στο _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
Δεν είναι **δυνατό να οριστεί προστασία κλάδου σε επίπεδο οργανισμού**. Έτσι, όλες πρέπει να δηλωθούν σε κάθε repo.
{% endhint %}

Διάφορες προστασίες μπορούν να εφαρμοστούν σε έναν κλάδο (όπως στον master):

* **Απενεργοποίηση Push**: Κανείς δεν μπορεί να κάνει push σε αυτόν τον κλάδο
* **Ενεργοποίηση Push**: Όποιος έχει πρόσβαση μπορεί να κάνει push, αλλά όχι force push.
* **Λίστα επιτρεπόμενων περιορισμένων Push**: Μόνο επιλεγμένοι χρήστες/ομάδες μπορούν να κάνουν push σε αυτόν τον κλάδο (αλλά όχι force push)
* **Ενεργοποίηση Λίστας επιτρεπόμενων Συγχωνεύσεων**: Μόνο οι επιτρεπόμενοι χρήστες/ομάδες μπορούν να συγχωνεύσουν PRs.
* **Ενεργοποίηση Ελέγχων Κατάστασης:** Απαιτείται οι έλεγχοι κατάστασης να περάσουν πριν από τη συγχώνευση.
* **Απαιτούνται εγκρίσεις**: Υποδείξτε τον αριθμό των εγκρίσεων που απαιτούνται πριν από τη συγχώνευση ενός PR.
* **Περιορισμός εγκρίσεων σε επιτρεπόμενους**: Υποδείξτε χρήστες/ομάδες που μπορούν να εγκρίνουν PRs.
* **Αποκλεισμός συγχώνευσης σε απορριφθείσες κριτικές**: Εάν ζητηθούν αλλαγές, δεν μπορεί να συγχωνευθεί (ακόμα και αν περάσουν οι άλλοι έλεγχοι)
* **Αποκλεισμός συγχώνευσης σε επίσημα αιτήματα κριτικής**: Εάν υπάρχουν επίσημα αιτήματα κριτικής, δεν μπορεί να συγχωνευθεί
* **Απόρριψη παλαιών εγκρίσεων**: Όταν υπάρχουν νέες commits, οι παλιές εγκρίσεις θα απορρίπτονται.
* **Απαιτούνται Υπογεγραμμένα Commits**: Τα commits πρέπει να είναι υπογεγραμμένα.
* **Αποκλεισμός συγχώνευσης αν το pull request είναι παρωχημένο**
* **Προστατευμένα/Μη προστατευμένα μοτίβα αρχείων**: Υποδείξτε μοτίβα αρχείων για προστασία/μη προστασία από αλλαγές

{% hint style="info" %}
Όπως βλέπετε, ακόμα και αν καταφέρετε να αποκτήσετε κάποια διαπιστευτήρια ενός χρήστη, **τα repos μπορεί να είναι προστατευμένα αποτρέποντάς σας να κάνετε push κώδικα στον master** για παράδειγμα για να παραβιάσετε το CI/CD pipeline.
{% endhint %}

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε hacking tricks υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο github.

</details>
{% endhint %}
