# Okta Hardening

{% hint style="success" %}
Jifunze na kufanya mazoezi ya AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na kufanya mazoezi ya GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mipango ya usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwenye** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Directory

### People

Kutoka kwa mtazamo wa mshambulizi, hii ni ya kuvutia sana kwani utaweza kuona **watumiaji wote waliosajiliwa**, anwani zao za **barua pepe**, **vikundi** walivyo sehemu yake, **profaili** na hata **vifaa** (simu za mkononi pamoja na OS zao).

Kwa ukaguzi wa whitebox hakikisha kuwa hakuna "**Hatua ya mtumiaji inayosubiri**" na "**Weka upya nenosiri**".

### Groups

Hapa ndipo unapopata vikundi vyote vilivyoundwa katika Okta. ni muhimu kuelewa vikundi tofauti (seti ya **ruhusa**) ambazo zinaweza kutolewa kwa **watumiaji**.\
Inawezekana kuona **watu waliomo ndani ya vikundi** na **programu zilizotengwa** kwa kila kikundi.

Bila shaka, kikundi chochote chenye jina la **admin** ni cha kuvutia, hasa kikundi cha **Global Administrators**, angalia wanachama ili kujua ni nani wanachama wenye haki zaidi.

Kutoka kwa ukaguzi wa whitebox, **hapapaswi kuwa na zaidi ya wasimamizi wakuu 5** (bora ikiwa kuna 2 au 3 tu).

### Devices

Pata hapa **orodha ya vifaa vyote** vya watumiaji wote. Unaweza pia kuona kama inasimamiwa **kwa ufanisi** au la.

### Profile Editor

Hapa inawezekana kuona jinsi taarifa muhimu kama majina ya kwanza, majina ya mwisho, barua pepe, majina ya watumiaji... zinavyoshirikiwa kati ya Okta na programu zingine. Hii ni ya kuvutia kwa sababu ikiwa mtumiaji anaweza **kubadilisha shamba katika Okta** (kama jina lake au barua pepe) ambalo kisha linatumika na **programu ya nje** kutambua mtumiaji, mtu wa ndani anaweza kujaribu **kuchukua akaunti zingine**.

Zaidi ya hayo, katika profaili **`User (default)`** kutoka Okta unaweza kuona **ni mashamba gani** kila **mtumiaji** anayo na ni yapi yanaweza kuandikwa na watumiaji. Ikiwa huwezi kuona jopo la msimamizi, nenda tu kwa **sasisha taarifa yako ya profaili** na utaona ni mashamba gani unaweza kusasisha (kumbuka kuwa ili kusasisha anwani ya barua pepe utahitaji kuithibitisha).

### Directory Integrations

Directories hukuruhusu kuagiza watu kutoka vyanzo vilivyopo. Nadhani hapa utaona watumiaji walioagizwa kutoka directories zingine.

Sijaona, lakini nadhani hii ni ya kuvutia kujua **directories zingine ambazo Okta inatumia kuagiza watumiaji** hivyo ikiwa **utachukua directory hiyo** unaweza kuweka baadhi ya maadili ya sifa katika watumiaji walioundwa katika Okta na **labda kuchukua mazingira ya Okta**.

### Profile Sources

Chanzo cha profaili ni **programu inayofanya kama chanzo cha ukweli** kwa sifa za profaili ya mtumiaji. Mtumiaji anaweza tu kuwa na chanzo na programu moja au directory kwa wakati mmoja.

Sijaona, hivyo taarifa yoyote kuhusu usalama na udukuzi kuhusu chaguo hili inathaminiwa.

## Customizations

### Brands

Angalia katika kichupo cha **Domains** cha sehemu hii anwani za barua pepe zinazotumika kutuma barua pepe na domain maalum ndani ya Okta ya kampuni (ambayo pengine tayari unajua).

Zaidi ya hayo, katika kichupo cha **Setting**, ikiwa wewe ni msimamizi, unaweza "**Tumia ukurasa wa kujiondoa maalum**" na kuweka URL maalum.

### SMS

Hakuna kitu cha kuvutia hapa.

### End-User Dashboard

Unaweza kupata hapa programu zilizosanidiwa, lakini tutaona maelezo ya hizo baadaye katika sehemu tofauti.

### Other

Mipangilio ya kuvutia, lakini hakuna kitu cha kuvutia sana kutoka kwa mtazamo wa usalama.

## Applications

### Applications

Hapa unaweza kupata programu zote **zilizosanikishwa** na maelezo yao: Nani ana upatikanaji wa hizo, jinsi ilivyosanikishwa (SAML, OPenID), URL ya kuingia, ramani kati ya Okta na programu...

Katika kichupo cha **`Sign On`** kuna uwanja unaoitwa **`Password reveal`** ambao utamruhusu mtumiaji **kufichua nenosiri lake** wakati wa kuangalia mipangilio ya programu. Ili kuangalia mipangilio ya programu kutoka kwa Jopo la Mtumiaji, bonyeza nukta 3:

<figure><img src="../../.gitbook/assets/image (283).png" alt=""><figcaption></figcaption></figure>

Na unaweza kuona maelezo zaidi kuhusu programu (kama kipengele cha kufichua nenosiri, ikiwa kimewezeshwa):

<figure><img src="../../.gitbook/assets/image (220).png" alt=""><figcaption></figcaption></figure>

## Identity Governance

### Access Certifications

Tumia Access Certifications kuunda kampeni za ukaguzi ili kupitia upatikanaji wa watumiaji wako kwa rasilimali mara kwa mara na kuidhinisha au kubatilisha upatikanaji kiotomatiki inapohitajika.

Sijaona ikitumika, lakini nadhani kutoka kwa mtazamo wa ulinzi ni kipengele kizuri.

## Security

### General

* **Barua pepe za arifa za usalama**: Zote zinapaswa kuwezeshwa.
* **CAPTCHA integration**: Inapendekezwa kuweka angalau reCaptcha isiyoonekana
* **Usalama wa Shirika**: Kila kitu kinaweza kuwezeshwa na barua pepe za uanzishaji hazipaswi kudumu kwa muda mrefu (siku 7 ni sawa)
* **Kuzuia orodha ya watumiaji**: Zote zinapaswa kuwezeshwa
* Kumbuka kuwa Kuzuia Orodha ya Watumiaji haina athari ikiwa hali yoyote ya zifuatazo inaruhusiwa (Tazama [Usimamizi wa watumiaji](https://help.okta.com/oie/en-us/Content/Topics/users-groups-profiles/usgp-main.htm) kwa maelezo zaidi):
* Usajili wa Kujitegemea
* JIT flows with email authentication
* **Mipangilio ya Okta ThreatInsight**: Ingia na tekeleza usalama kulingana na kiwango cha tishio

### HealthInsight

Hapa inawezekana kupata **mipangilio** iliyosanidiwa **sawa na hatari**.

### Authenticators

Hapa unaweza kupata njia zote za uthibitishaji ambazo mtumiaji anaweza kutumia: Nenosiri, simu, barua pepe, msimbo, WebAuthn... Kubonyeza katika uthibitishaji wa Nenosiri unaweza kuona **sera ya nenosiri**. Angalia kuwa ni imara.

Katika kichupo cha **Enrollment** unaweza kuona jinsi zile zinazohitajika au za hiari:

<figure><img src="../../.gitbook/assets/image (143).png" alt=""><figcaption></figcaption></figure>

Inapendekezwa kuzima Simu. Zenye nguvu zaidi pengine ni mchanganyiko wa nenosiri, barua pepe na WebAuthn.

### Authentication policies

Kila programu ina sera ya uthibitishaji. Sera ya uthibitishaji inathibitisha kuwa watumiaji wanaojaribu kuingia kwenye programu wanakidhi masharti maalum, na inatekeleza mahitaji ya vipengele kulingana na masharti hayo.

Hapa unaweza kupata **mahitaji ya kufikia kila programu**. Inapendekezwa kuomba angalau nenosiri na njia nyingine kwa kila programu. Lakini kama mshambulizi ukipata kitu dhaifu zaidi unaweza kujaribu kukishambulia.

### Global Session Policy

Hapa unaweza kupata sera za kikao zilizotengwa kwa vikundi tofauti. Kwa mfano:

<figure><img src="../../.gitbook/assets/image (245).png" alt=""><figcaption></figcaption></figure>

Inapendekezwa kuomba MFA, kupunguza muda wa kikao kwa saa kadhaa, usihifadhi vidakuzi vya kikao kwenye viendelezi vya kivinjari na kupunguza eneo na Mtoa Utambulisho (ikiwa inawezekana). Kwa mfano, ikiwa kila mtumiaji anapaswa kuingia kutoka nchi fulani unaweza kuruhusu eneo hilo tu.

### Identity Providers

Identity Providers (IdPs) ni huduma zinazodhibiti **akaunti za watumiaji**. Kuongeza IdPs katika Okta inawawezesha watumiaji wako wa mwisho **kujisajili wenyewe** na programu zako maalum kwa kwanza kuthibitisha na akaunti ya kijamii au kadi ya smart.

Kwenye ukurasa wa Identity Providers, unaweza kuongeza logins za kijamii (IdPs) na kusanidi Okta kama mtoa huduma (SP) kwa kuongeza inbound SAML. Baada ya kuongeza IdPs, unaweza kuweka sheria za uelekezaji ili kuelekeza watumiaji kwa IdP kulingana na muktadha, kama eneo la mtumiaji, kifaa, au domain ya barua pepe.

**Ikiwa mtoa utambulisho yeyote amesanidiwa** kutoka kwa mtazamo wa mshambulizi na mlinzi angalia usanidi huo na **ikiwa chanzo ni cha kuaminika kweli** kwani mshambulizi akichukua chanzo hicho anaweza pia kupata mazingira ya Okta.

### Delegated Authentication

Uthibitishaji uliokabidhiwa unaruhusu watumiaji kuingia kwenye Okta kwa kuingiza sifa za **Active Directory (AD) au LDAP** ya shirika lao.

Tena, angalia tena hii, kwani mshambulizi akichukua AD ya shirika anaweza kuweza kuhamia Okta kutokana na mipangilio hii.

### Network

Eneo la mtandao ni mpaka unaoweza kusanidi ambao unaweza kutumia **kutoa au kuzuia upatikanaji wa kompyuta na vifaa** katika shirika lako kulingana na **anwani ya IP** inayotaka upatikanaji. Unaweza kufafanua eneo la mtandao kwa kubainisha anwani moja au zaidi za IP, safu za anwani za IP, au maeneo ya kijiografia.

Baada ya kufafanua eneo moja au zaidi la mtandao, unaweza **kutumia katika Sera za Kikao za Ulimwengu**, **sera za uthibitishaji**, arifa za VPN, na **sheria za uelekezaji**.

Kutoka kwa mtazamo wa mshambulizi ni muhimu kujua ni **IPs gani zinazoruhusiwa** (na angalia kama **IPs yoyote ina haki zaidi** kuliko nyingine). Kutoka kwa mtazamo wa mshambulizi, ikiwa watumiaji wanapaswa kuwa wanapata kutoka anwani ya IP au eneo maalum angalia kuwa kipengele hiki kinatumika vizuri.

### Device Integrations

* **Usimamizi wa Endpoint**: Usimamizi wa endpoint ni hali inayoweza kutumika katika sera ya uthibitishaji ili kuhakikisha kuwa vifaa vilivyosimamiwa vina upatikanaji wa programu.
* Sijaona hii ikitumika bado. TODO
* **Huduma za arifa**: Sijaona hii ikitumika bado. TODO

### API

Unaweza kuunda tokeni za API za Okta katika ukurasa huu, na kuona zile ambazo zimeundwa, **haki zao**, muda wa **kuisha** na **URL za Asili**. Kumbuka kuwa tokeni za API zinatengenezwa na ruhusa za mtumiaji aliyeunda tokeni na ni halali tu ikiwa **mtumiaji** aliyeziunda yuko **hai**.

**Asili Zilizotegemewa** zinatoa upatikanaji kwa tovuti unazodhibiti na kuamini kupata shirika lako la Okta kupitia API ya Okta.

Hapapaswi kuwa na tokeni nyingi za API, kwani ikiwa zipo mshambulizi anaweza kujaribu kuzipata na kuzitumia.

## Workflow

### Automations

Automations hukuruhusu kuunda vitendo vya kiotomatiki vinavyofanyika kulingana na seti ya hali za kichocheo zinazotokea wakati wa mzunguko wa maisha ya watumiaji wa mwisho.

Kwa mfano hali inaweza kuwa "Kutokuwepo kwa mtumiaji katika Okta" au "Muda wa nenosiri wa mtumiaji kuisha katika Okta" na kitendo kinaweza kuwa "Tuma barua pepe kwa mtumiaji" au "Badilisha hali ya mzunguko wa maisha ya mtumiaji katika Okta".

## Reports

### Reports

Pakua magogo. Yanatumwa kwa **anwani ya barua pepe** ya akaunti ya sasa.

### System Log

Hapa unaweza kupata **magogo ya vitendo vilivyofanywa na watumiaji** na maelezo mengi kama kuingia katika Okta au katika programu kupitia Okta.

### Import Monitoring

Hii inaweza **kuagiza magogo kutoka kwa majukwaa mengine** yaliyopatikana na Okta.

### Rate limits

Angalia mipaka ya kiwango cha API iliyofikiwa.

## Settings

### Account

Hapa unaweza kupata **taarifa za jumla** kuhusu mazingira ya Okta, kama jina la kampuni, anwani, **anwani ya barua pepe ya bili**, **anwani ya barua pepe ya kiufundi** na pia nani anapaswa kupokea masasisho ya Okta na ni aina gani ya masasisho ya Okta.

### Downloads

Hapa unaweza kupakua mawakala wa Okta ili kusawazisha Okta na teknolojia zingine.

{% hint style="success" %}
Jifunze na kufanya mazoezi ya AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Jifunze na kufanya mazoezi ya GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mipango ya usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwenye** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
