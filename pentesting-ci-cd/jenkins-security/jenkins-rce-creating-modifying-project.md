# Jenkins RCE Creating/Modifying Project

{% hint style="success" %}
Aprende y practica AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Aprende y practica GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya HackTricks</summary>

* Revisa los [**planes de suscripción**](https://github.com/sponsors/carlospolop)!
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **síguenos** en **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Creando un Proyecto

Este método es muy ruidoso porque tienes que crear un proyecto completamente nuevo (obviamente esto solo funcionará si tu usuario tiene permiso para crear un nuevo proyecto).

1. **Crea un nuevo proyecto** (proyecto Freestyle) haciendo clic en "New Item" o en `/view/all/newJob`
2. Dentro de la sección **Build** establece **Execute shell** y pega un lanzador de powershell Empire o un powershell meterpreter (se puede obtener usando _unicorn_). Inicia la carga útil con _PowerShell.exe_ en lugar de usar _powershell._
3. Haz clic en **Build now**
1. Si el botón **Build now** no aparece, aún puedes ir a **configure** --> **Build Triggers** --> `Build periodically` y establecer un cron de `* * * * *`
2. En lugar de usar cron, puedes usar la configuración "**Trigger builds remotely**" donde solo necesitas establecer el nombre del token de la API para activar el trabajo. Luego ve a tu perfil de usuario y **genera un token de API** (llama a este token de API como llamaste al token de API para activar el trabajo). Finalmente, activa el trabajo con: **`curl <username>:<api_token>@<jenkins_url>/job/<job_name>/build?token=<api_token_name>`**

![](<../../.gitbook/assets/image (165).png>)

## Modificando un Proyecto

Ve a los proyectos y verifica **si puedes configurar alguno** de ellos (busca el botón "Configure"):

![](<../../.gitbook/assets/image (265).png>)

Si **no puedes** ver ningún **botón de configuración** entonces probablemente **no puedas** **configurarlo** (pero revisa todos los proyectos ya que podrías poder configurar algunos de ellos y otros no).

O **intenta acceder a la ruta** `/job/<proj-name>/configure` o `/me/my-views/view/all/job/<proj-name>/configure` \_\_ en cada proyecto (ejemplo: `/job/Project0/configure` o `/me/my-views/view/all/job/Project0/configure`).

## Ejecución

Si tienes permiso para configurar el proyecto, puedes **hacer que ejecute comandos cuando una build sea exitosa**:

![](<../../.gitbook/assets/image (98).png>)

Haz clic en **Save** y **build** el proyecto y tu **comando será ejecutado**.\
Si no estás ejecutando una reverse shell sino un comando simple, puedes **ver la salida del comando dentro de la salida de la build**.

{% hint style="success" %}
Aprende y practica AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Aprende y practica GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Apoya HackTricks</summary>

* Revisa los [**planes de suscripción**](https://github.com/sponsors/carlospolop)!
* **Únete al** 💬 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **síguenos** en **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Comparte trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
