# Temel Jenkins Bilgisi

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) **bizi takip edin.**
* **HackTricks'e PR göndererek hacking ipuçlarını paylaşın** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub depolarında.

</details>
{% endhint %}

## Erişim

### Kullanıcı Adı + Şifre

Jenkins'e giriş yapmanın en yaygın yolu kullanıcı adı veya şifre ile yapılır.

### Çerez

Eğer **yetkili bir çerez çalınırsa**, kullanıcının oturumuna erişmek için kullanılabilir. Çerez genellikle `JSESSIONID.*` olarak adlandırılır. (Bir kullanıcı tüm oturumlarını sonlandırabilir, ancak önce bir çerezin çalındığını öğrenmesi gerekir).

### SSO/Eklentiler

Jenkins, eklentiler kullanılarak **üçüncü taraf SSO aracılığıyla erişilebilir** olacak şekilde yapılandırılabilir.

### Tokenlar

**Kullanıcılar tokenlar oluşturabilir** ve bu tokenlar, uygulamalara CLI veya REST API aracılığıyla onları taklit etme yetkisi verir.

### SSH Anahtarları

Bu bileşen, Jenkins için yerleşik bir SSH sunucusu sağlar. Bu, [Jenkins CLI](https://www.jenkins.io/doc/book/managing/cli/) için alternatif bir arayüzdür ve komutlar herhangi bir SSH istemcisi kullanılarak bu şekilde çağrılabilir. ([dokümanlardan](https://plugins.jenkins.io/sshd))

## Yetkilendirme

`/configureSecurity` adresinde **Jenkins'in yetkilendirme yöntemini yapılandırmak** mümkündür. Birkaç seçenek vardır:

* **Herkes her şeyi yapabilir**: Anonim erişim bile sunucuyu yönetebilir.
* **Eski mod**: Jenkins <1.164 ile aynı. Eğer **"admin" rolüne** sahipseniz, sistem üzerinde **tam kontrol** hakkı verilir ve **aksi takdirde** (anonim kullanıcılar dahil) **okuma** erişimi sağlanır.
* **Giriş yapmış kullanıcılar her şeyi yapabilir**: Bu modda, her **giriş yapmış kullanıcı Jenkins üzerinde tam kontrol** hakkına sahiptir. Tam kontrol hakkına sahip olmayan tek kullanıcı **anonim kullanıcıdır**, bu kullanıcı sadece **okuma erişimi** alır.
* **Matris tabanlı güvenlik**: Bir tabloda **kimin ne yapabileceğini** yapılandırabilirsiniz. Her **sütun** bir **izin** temsil eder. Her **satır** bir **kullanıcı veya grup/rol** temsil eder. Bu, **kimliği doğrulanmamış kullanıcıları** temsil eden özel bir kullanıcı '**anonim**' ve **tüm kimliği doğrulanmış kullanıcıları** temsil eden '**kimliği doğrulanmış**' kullanıcılarını içerir.

![](<../../.gitbook/assets/image (149).png>)

* **Proje tabanlı Matris Yetkilendirme Stratejisi:** Bu mod, her proje için ayrı bir ACL matrisi **tanımlanmasına izin veren** "**Matris tabanlı güvenlik**"nin bir **uzantısıdır.**
* **Rol Tabanlı Strateji:** Yetkilendirmeleri **rol tabanlı bir strateji** kullanarak tanımlamayı sağlar. `/role-strategy` adresinde rolleri yönetin.

## **Güvenlik Alanı**

`/configureSecurity` adresinde **güvenlik alanını yapılandırmak** mümkündür. Varsayılan olarak Jenkins, birkaç farklı Güvenlik Alanı için destek içerir:

* **Servlet konteynerine devret**: **Jenkins denetleyicisini çalıştıran bir servlet konteynerine kimlik doğrulamasını devretmek** için, örneğin [Jetty](https://www.eclipse.org/jetty/).
* **Jenkins’in kendi kullanıcı veritabanı:** Kimlik doğrulaması için **Jenkins’in kendi yerleşik kullanıcı veri deposunu** kullanın, harici bir sisteme devretmek yerine. Bu varsayılan olarak etkindir.
* **LDAP**: Tüm kimlik doğrulamasını, kullanıcılar ve gruplar dahil olmak üzere yapılandırılmış bir LDAP sunucusuna devredin.
* **Unix kullanıcı/grup veritabanı**: **Kimlik doğrulamasını Jenkins denetleyicisindeki** temel Unix OS düzeyindeki kullanıcı veritabanına devreder. Bu mod, yetkilendirme için Unix gruplarının yeniden kullanılmasına da izin verir.

Eklentiler, Jenkins'i mevcut kimlik sistemlerine entegre etmek için yararlı olabilecek ek güvenlik alanları sağlayabilir, örneğin:

* [Active Directory](https://plugins.jenkins.io/active-directory)
* [GitHub Authentication](https://plugins.jenkins.io/github-oauth)
* [Atlassian Crowd 2](https://plugins.jenkins.io/crowd2)

## Jenkins Düğümleri, Ajanlar ve Yürütücüler

[Dokümanlardan](https://www.jenkins.io/doc/book/managing/nodes/) tanımlar:

**Düğümler**, yapı **ajanlarının çalıştığı** **makinelerdir**. Jenkins, her bağlı düğümü disk alanı, boş geçici alan, boş takas, saat zamanı/senkronizasyon ve yanıt süresi için izler. Bu değerlerden herhangi biri yapılandırılmış eşiklerin dışına çıkarsa, bir düğüm çevrimdışı alınır.

**Ajanlar**, Jenkins denetleyicisi adına **görev yürütmeyi** **yürütücüler kullanarak** **yönetir**. Bir ajan, Java'yı destekleyen herhangi bir işletim sistemini kullanabilir. Yapılar ve testler için gerekli araçlar, ajanın çalıştığı düğüme kurulur; bunlar **doğrudan veya bir konteynerde (Docker veya Kubernetes) kurulabilir**. Her **ajan, ana makinede kendi PID'sine sahip bir süreçtir**.

Bir **yürütücü**, **görevlerin yürütülmesi için bir yuva**dır; etkili bir şekilde, **ajandaki bir iş parçacığıdır**. Bir düğümdeki **yürütücü sayısı**, o düğümde aynı anda yürütülebilecek **eşzamanlı görevlerin** sayısını tanımlar. Başka bir deyişle, bu, o düğümde aynı anda yürütülebilecek **eşzamanlı Pipeline `aşamalarının`** sayısını belirler.

## Jenkins Sırları

### Sırların ve Kimlik Bilgilerinin Şifrelenmesi

[Dokümanlardan](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials) tanım: Jenkins, sırları, kimlik bilgilerini ve bunların ilgili şifreleme anahtarlarını **şifrelemek ve korumak için AES kullanır**. Bu şifreleme anahtarları, `$JENKINS_HOME/secrets/` içinde, bu anahtarları korumak için kullanılan ana anahtarla birlikte saklanır. Bu dizin, yalnızca Jenkins denetleyicisinin çalıştığı işletim sistemi kullanıcısının bu dizine okuma ve yazma erişimi olacak şekilde yapılandırılmalıdır (yani, `chmod` değeri `0700` veya uygun dosya öznitelikleri kullanılarak). **Ana anahtar** (kriptografik jargonla bazen "anahtar şifreleme anahtarı" olarak adlandırılır) **şifrelenmemiş** olarak Jenkins denetleyici dosya sisteminde **`$JENKINS_HOME/secrets/master.key`** içinde saklanır ve bu dosyaya doğrudan erişimi olan saldırganlara karşı koruma sağlamaz. Çoğu kullanıcı ve geliştirici, bu şifreleme anahtarlarını dolaylı olarak ya genel sır verilerini şifrelemek için [Secret](https://javadoc.jenkins.io/byShortName/Secret) API'si aracılığıyla ya da kimlik bilgileri API'si aracılığıyla kullanacaktır. Kriptografi meraklıları için, Jenkins, PKCS#5 dolgu ve rastgele IV'lerle şifre blok zincirleme (CBC) modunda AES kullanarak [CryptoConfidentialKey](https://javadoc.jenkins.io/byShortName/CryptoConfidentialKey) örneklerini şifreler ve bunlar `$JENKINS_HOME/secrets/` içinde `CryptoConfidentialKey` kimliğine karşılık gelen bir dosya adıyla saklanır. Yaygın anahtar kimlikleri şunları içerir:

* `hudson.util.Secret`: genel sırlar için kullanılır;
* `com.cloudbees.plugins.credentials.SecretBytes.KEY`: bazı kimlik bilgisi türleri için kullanılır;
* `jenkins.model.Jenkins.crumbSalt`: [CSRF koruma mekanizması](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery) tarafından kullanılır; ve

### Kimlik Bilgilerine Erişim

Kimlik bilgileri, herhangi bir yapılandırılmış proje tarafından erişilebilen **küresel sağlayıcılara** (`/credentials/`) veya **belirli projelere** (`/job/<project-name>/configure`) atanabilir ve bu nedenle yalnızca belirli projeden erişilebilir.

[**Dokümanlara**](https://www.jenkins.io/blog/2019/02/21/credentials-masking/) göre: Kapsamda olan kimlik bilgileri, sınırsız olarak pipeline'a sunulur. **Yapı günlüğünde kazara ifşayı önlemek** için, kimlik bilgileri **normal çıktılardan maskelenir**, bu nedenle `env` (Linux) veya `set` (Windows) çağrısı veya ortamlarını veya parametrelerini yazdıran programlar, kimlik bilgilerine erişimi olmayan kullanıcılara yapı günlüğünde ifşa etmez.

**Bu nedenle, bir saldırganın kimlik bilgilerini dışarı çıkarmak için, örneğin, base64 ile kodlaması gerekir.**

## Referanslar

* [https://www.jenkins.io/doc/book/security/managing-security/](https://www.jenkins.io/doc/book/security/managing-security/)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)
* [https://www.jenkins.io/doc/developer/security/secrets/](https://www.jenkins.io/doc/developer/security/secrets/)
* [https://www.jenkins.io/blog/2019/02/21/credentials-masking/](https://www.jenkins.io/blog/2019/02/21/credentials-masking/)
* [https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery)
* [https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live) **bizi takip edin.**
* **HackTricks'e PR göndererek hacking ipuçlarını paylaşın** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub depolarında.

</details>
{% endhint %}
