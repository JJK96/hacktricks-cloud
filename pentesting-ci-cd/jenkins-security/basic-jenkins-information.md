# Basiese Jenkins Inligting

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**intekenplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Toegang

### Gebruikersnaam + Wagwoord

Die mees algemene manier om in Jenkins aan te meld is met 'n gebruikersnaam of 'n wagwoord.

### Koekie

As 'n **gemagtigde koekie gesteel word**, kan dit gebruik word om toegang tot die gebruiker se sessie te kry. Die koekie word gewoonlik `JSESSIONID.*` genoem. (‚Äôn Gebruiker kan al sy sessies be√´indig, maar hy sal eers moet uitvind dat ‚Äôn koekie gesteel is).

### SSO/Plugins

Jenkins kan gekonfigureer word met behulp van plugins om **toeganklik te wees via derdeparty SSO**.

### Tokens

**Gebruikers kan tokens genereer** om toegang te gee aan toepassings om hulle na te boots via CLI of REST API.

### SSH Sleutels

Hierdie komponent verskaf 'n ingeboude SSH-bediener vir Jenkins. Dit is 'n alternatiewe koppelvlak vir die [Jenkins CLI](https://www.jenkins.io/doc/book/managing/cli/), en opdragte kan op hierdie manier uitgevoer word met enige SSH-kli√´nt. (Van die [dokumentasie](https://plugins.jenkins.io/sshd/))

## Magtiging

In `/configureSecurity` is dit moontlik om **die magtigingsmetode van Jenkins te konfigureer**. Daar is verskeie opsies:

* **Enigiemand kan enigiets doen**: Selfs anonieme toegang kan die bediener administreer.
* **Legacy mode**: Dieselfde as Jenkins <1.164. As jy die **"admin" rol** het, sal jy **volle beheer** oor die stelsel h√™, en **andersins** (insluitend **anonieme** gebruikers) sal jy **lees** toegang h√™.
* **Ingelogde gebruikers kan enigiets doen**: In hierdie modus kry elke **ingelogde gebruiker volle beheer** oor Jenkins. Die enigste gebruiker wat nie volle beheer sal h√™ nie, is **anonieme gebruiker**, wat slegs **lees toegang** kry.
* **Matrix-gebaseerde sekuriteit**: Jy kan **wie wat kan doen** in 'n tabel konfigureer. Elke **kolom** verteenwoordig 'n **toestemming**. Elke **ry** **verteenwoordig** 'n **gebruiker of 'n groep/rol.** Dit sluit 'n spesiale gebruiker '**anoniem**' in, wat **ongemagtigde gebruikers** verteenwoordig, sowel as '**geoutentiseerde**', wat **alle geoutentiseerde gebruikers** verteenwoordig.

![](<../../.gitbook/assets/image (149).png>)

* **Projek-gebaseerde Matrix Magtiging Strategie:** Hierdie modus is 'n **uitbreiding** van "**Matrix-gebaseerde sekuriteit**" wat toelaat dat bykomende ACL-matrix **vir elke projek afsonderlik gedefinieer word.**
* **Rol-gebaseerde Strategie:** Maak dit moontlik om magtigings te definieer met behulp van 'n **rol-gebaseerde strategie**. Bestuur die rolle in `/role-strategy`.

## **Sekuriteitsgebied**

In `/configureSecurity` is dit moontlik om **die sekuriteitsgebied te konfigureer.** Standaard sluit Jenkins ondersteuning in vir 'n paar verskillende Sekuriteitsgebiede:

* **Delegeer na servlet houer**: Vir **delegering van verifikasie aan 'n servlet houer wat die Jenkins beheerder bedryf**, soos [Jetty](https://www.eclipse.org/jetty/).
* **Jenkins se eie gebruikersdatabasis:** Gebruik **Jenkins se eie ingeboude gebruikersdatastore** vir verifikasie in plaas daarvan om aan 'n eksterne stelsel te delegeer. Dit is standaard geaktiveer.
* **LDAP**: Delegeer alle verifikasie aan 'n gekonfigureerde LDAP-bediener, insluitend beide gebruikers en groepe.
* **Unix gebruikers/groep databasis**: **Delegeer die verifikasie aan die onderliggende Unix** OS-vlak gebruikersdatabasis op die Jenkins beheerder. Hierdie modus sal ook hergebruik van Unix-groepe vir magtiging toelaat.

Plugins kan bykomende sekuriteitsgebiede verskaf wat nuttig kan wees vir die inkorporering van Jenkins in bestaande identiteitsisteme, soos:

* [Active Directory](https://plugins.jenkins.io/active-directory)
* [GitHub Authentication](https://plugins.jenkins.io/github-oauth)
* [Atlassian Crowd 2](https://plugins.jenkins.io/crowd2)

## Jenkins Nodes, Agente & Uitvoerders

Definisies van die [dokumentasie](https://www.jenkins.io/doc/book/managing/nodes/):

**Nodes** is die **masjiene** waarop bou **agente loop**. Jenkins monitor elke gekoppelde node vir skyfspasie, vrye tydelike spasie, vrye wisselgeheue, kloktyd/sinkronisasie en reaksietyd. 'n Node word vanlyn geneem as enige van hierdie waardes buite die gekonfigureerde drempel gaan.

**Agente** **bestuur** die **taakuitvoering** namens die Jenkins beheerder deur **uitvoerders te gebruik**. 'n Agent kan enige bedryfstelsel gebruik wat Java ondersteun. Gereedskap wat benodig word vir bou en toetse word op die node ge√Ønstalleer waar die agent loop; hulle kan **direk of in 'n houer** (Docker of Kubernetes) ge√Ønstalleer word. Elke **agent is effektief 'n proses met sy eie PID** op die gasheer masjien.

'n **Uitvoerder** is 'n **gleuf vir uitvoering van take**; effektief, dit is **'n draad in die agent**. Die **aantal uitvoerders** op 'n node bepaal die aantal **gelyktydige take** wat op daardie node op een slag uitgevoer kan word. Met ander woorde, dit bepaal die **aantal gelyktydige Pyplyn `stages`** wat op daardie node op een slag kan uitvoer.

## Jenkins Geheime

### Enkripsie van Geheime en Geloofsbriewe

Definisie van die [dokumentasie](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials): Jenkins gebruik **AES om geheime en geloofsbriewe te enkripteer en te beskerm**, sowel as hul onderskeie enkripsiesleutels. Hierdie enkripsiesleutels word gestoor in `$JENKINS_HOME/secrets/` saam met die hoofsleutel wat gebruik word om genoemde sleutels te beskerm. Hierdie gids moet so gekonfigureer word dat slegs die bedryfstelselgebruiker wat die Jenkins beheerder bedryf lees- en skryftoegang tot hierdie gids het (d.w.s. 'n `chmod` waarde van `0700` of deur toepaslike l√™erkenmerke te gebruik). Die **hoofsleutel** (soms na verwys as 'n "sleutel enkripsie sleutel" in kriptojargon) word **gestoor \_onge√´nkripteer**\_ op die Jenkins beheerder l√™erstelsel in **`$JENKINS_HOME/secrets/master.key`** wat nie beskerming bied teen aanvallers met direkte toegang tot daardie l√™er nie. Die meeste gebruikers en ontwikkelaars sal hierdie enkripsiesleutels indirek gebruik via √≥f die [Secret](https://javadoc.jenkins.io/byShortName/Secret) API vir die enkripsie van generiese geheime data of deur die geloofsbriewe API. Vir die kriptokurieuse, gebruik Jenkins AES in cipher block chaining (CBC) modus met PKCS#5 opvulling en ewekansige IVs om gevalle van [CryptoConfidentialKey](https://javadoc.jenkins.io/byShortName/CryptoConfidentialKey) te enkripteer wat gestoor word in `$JENKINS_HOME/secrets/` met 'n l√™ernaam wat ooreenstem met hul `CryptoConfidentialKey` id. Algemene sleutel-ids sluit in:

* `hudson.util.Secret`: gebruik vir generiese geheime;
* `com.cloudbees.plugins.credentials.SecretBytes.KEY`: gebruik vir sommige geloofsbriewe tipes;
* `jenkins.model.Jenkins.crumbSalt`: gebruik deur die [CSRF beskermingsmeganisme](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery); en

### Geloofsbriewe Toegang

Geloofsbriewe kan **geskopeer word na globale verskaffers** (`/credentials/`) wat deur enige geconfigureerde projek verkry kan word, of kan geskopeer word na **spesifieke projekte** (`/job/<project-name>/configure`) en dus slegs toeganklik wees vanaf die spesifieke projek.

Volgens [**die dokumentasie**](https://www.jenkins.io/blog/2019/02/21/credentials-masking/): Geloofsbriewe wat binne die bestek is, word sonder beperking aan die pyplyn beskikbaar gestel. Om **toevallige blootstelling in die boulog te voorkom**, word geloofsbriewe **gemasker** van gewone uitset, so 'n aanroep van `env` (Linux) of `set` (Windows), of programme wat hul omgewing of parameters druk, sal **hulle nie in die boulog openbaar** aan gebruikers wat andersins nie toegang tot die geloofsbriewe sou h√™ nie.

**Dit is hoekom 'n aanvaller, om die geloofsbriewe te eksfiltreer, byvoorbeeld, hulle moet base64.**

## Verwysings

* [https://www.jenkins.io/doc/book/security/managing-security/](https://www.jenkins.io/doc/book/security/managing-security/)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)
* [https://www.jenkins.io/doc/developer/security/secrets/](https://www.jenkins.io/doc/developer/security/secrets/)
* [https://www.jenkins.io/blog/2019/02/21/credentials-masking/](https://www.jenkins.io/blog/2019/02/21/credentials-masking/)
* [https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery)
* [https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**intekenplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
