# Βασικές Πληροφορίες TravisCI

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Γίνετε μέλος της** 💬 [**ομάδας Discord**](https://discord.gg/hRep4RUj7f) ή της [**ομάδας telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε hacking tricks υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο github.

</details>
{% endhint %}

## Πρόσβαση

Το TravisCI ενσωματώνεται άμεσα με διάφορες πλατφόρμες git όπως το Github, Bitbucket, Assembla, και Gitlab. Θα ζητήσει από τον χρήστη να δώσει δικαιώματα στο TravisCI για πρόσβαση στα αποθετήρια που θέλει να ενσωματώσει με το TravisCI.

Για παράδειγμα, στο Github θα ζητήσει τις ακόλουθες άδειες:

* `user:email` (μόνο για ανάγνωση)
* `read:org` (μόνο για ανάγνωση)
* `repo`: Παρέχει δικαιώματα ανάγνωσης και εγγραφής στον κώδικα, τις καταστάσεις commit, τους συνεργάτες και τις καταστάσεις ανάπτυξης για δημόσια και ιδιωτικά αποθετήρια και οργανισμούς.

## Κρυπτογραφημένα Μυστικά

### Μεταβλητές Περιβάλλοντος

Στο TravisCI, όπως και σε άλλες πλατφόρμες CI, είναι δυνατό να **αποθηκεύσετε σε επίπεδο αποθετηρίου μυστικά** που θα αποθηκευτούν κρυπτογραφημένα και θα **αποκρυπτογραφηθούν και θα προωθηθούν στη μεταβλητή περιβάλλοντος** της μηχανής που εκτελεί την κατασκευή.

![](<../../.gitbook/assets/image (203).png>)

Είναι δυνατό να υποδείξετε τους **κλάδους στους οποίους θα είναι διαθέσιμα τα μυστικά** (από προεπιλογή σε όλους) και επίσης αν το TravisCI **πρέπει να κρύψει την αξία τους** αν εμφανιστεί **στα logs** (από προεπιλογή θα το κάνει).

### Προσαρμοσμένα Κρυπτογραφημένα Μυστικά

Για **κάθε αποθετήριο** το TravisCI δημιουργεί ένα **RSA keypair**, **κρατάει** το **ιδιωτικό** και κάνει το **δημόσιο κλειδί του αποθετηρίου διαθέσιμο** σε αυτούς που έχουν **πρόσβαση** στο αποθετήριο.

Μπορείτε να αποκτήσετε πρόσβαση στο δημόσιο κλειδί ενός αποθετηρίου με:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Then, you can use this setup to **encrypt secrets and add them to your `.travis.yaml`**. The secrets will be **decrypted when the build is run** and accessible in the **environment variables**.

![](<../../.gitbook/assets/image (139).png>)

Σημειώστε ότι τα μυστικά που κρυπτογραφούνται με αυτόν τον τρόπο δεν θα εμφανίζονται καταγεγραμμένα στις μεταβλητές περιβάλλοντος των ρυθμίσεων.

### Custom Encrypted Files

Same way as before, TravisCI also allows to **encrypt files and then decrypt them during the build**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Note that when encrypting a file 2 Env Variables will be configured inside the repo such as:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Το Travis CI Enterprise είναι μια **on-prem έκδοση του Travis CI**, την οποία μπορείτε να αναπτύξετε **στην υποδομή σας**. Σκεφτείτε την 'server' έκδοση του Travis CI. Η χρήση του Travis CI σας επιτρέπει να ενεργοποιήσετε ένα εύχρηστο σύστημα Συνεχούς Ενσωμάτωσης/Συνεχούς Ανάπτυξης (CI/CD) σε ένα περιβάλλον, το οποίο μπορείτε να διαμορφώσετε και να ασφαλίσετε όπως θέλετε.

**Το Travis CI Enterprise αποτελείται από δύο κύρια μέρη:**

1. TCI **υπηρεσίες** (ή TCI Core Services), υπεύθυνες για την ενσωμάτωση με συστήματα ελέγχου εκδόσεων, την εξουσιοδότηση builds, τον προγραμματισμό εργασιών build, κ.λπ.
2. TCI **Worker** και εικόνες περιβάλλοντος build (επίσης γνωστές ως εικόνες OS).

**Οι βασικές υπηρεσίες TCI απαιτούν τα εξής:**

1. Μια **βάση δεδομένων PostgreSQL11** (ή νεότερη).
2. Μια υποδομή για την ανάπτυξη ενός Kubernetes cluster. Μπορεί να αναπτυχθεί σε ένα cluster διακομιστών ή σε μία μόνο μηχανή αν απαιτείται.
3. Ανάλογα με τη ρύθμισή σας, μπορεί να θέλετε να αναπτύξετε και να διαμορφώσετε ορισμένα από τα στοιχεία μόνοι σας, π.χ., RabbitMQ - δείτε το [Setting up Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) για περισσότερες λεπτομέρειες.

**Ο TCI Worker απαιτεί τα εξής:**

1. Μια υποδομή όπου μπορεί να αναπτυχθεί μια εικόνα docker που περιέχει τον **Worker και μια συνδεδεμένη εικόνα build**.
2. Συνδεσιμότητα με ορισμένα στοιχεία των Travis CI Core Services - δείτε το [Setting Up Worker](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) για περισσότερες λεπτομέρειες.

Η ποσότητα των αναπτυγμένων TCI Worker και των εικόνων περιβάλλοντος build OS θα καθορίσει τη συνολική ταυτόχρονη χωρητικότητα της ανάπτυξης του Travis CI Enterprise στην υποδομή σας.

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
Μάθετε & εξασκηθείτε στο AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε στην** 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε hacking tricks υποβάλλοντας PRs στα** [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) αποθετήρια στο github.

</details>
{% endhint %}
