# Temel TravisCI Bilgisi

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'da takip edin.**
* **HackTricks'e PR göndererek hacking ipuçlarını paylaşın** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına.

</details>
{% endhint %}

## Erişim

TravisCI, Github, Bitbucket, Assembla ve Gitlab gibi farklı git platformlarıyla doğrudan entegre olur. Kullanıcıdan, TravisCI ile entegre etmek istediği depolara erişim izni vermesini isteyecektir.

Örneğin, Github'da aşağıdaki izinleri isteyecektir:

* `user:email` (salt okunur)
* `read:org` (salt okunur)
* `repo`: Genel ve özel depolar ve organizasyonlar için koda, commit durumlarına, işbirlikçilerine ve dağıtım durumlarına okuma ve yazma erişimi sağlar.

## Şifrelenmiş Sırlar

### Ortam Değişkenleri

TravisCI'de, diğer CI platformlarında olduğu gibi, **depo seviyesinde sırları kaydetmek** mümkündür. Bu sırlar şifrelenmiş olarak saklanır ve **build'i gerçekleştiren makinenin ortam değişkenine** **şifre çözülerek** eklenir.

![](<../../.gitbook/assets/image (203).png>)

Sırların **hangi dallarda kullanılabilir olacağını** (varsayılan olarak hepsi) ve ayrıca TravisCI'nin **değerini gizleyip gizlemeyeceğini** (varsayılan olarak gizler) belirtebilirsiniz.

### Özel Şifrelenmiş Sırlar

**Her depo** için TravisCI bir **RSA anahtar çifti** oluşturur, **özel** olanı saklar ve deponun **genel anahtarını** depoya **erişimi olanlara** sunar.

Bir deponun genel anahtarına şu şekilde erişebilirsiniz:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Sonrasında, bu kurulumu kullanarak **gizli bilgileri şifreleyebilir ve bunları `.travis.yaml` dosyanıza ekleyebilirsiniz**. Gizli bilgiler **build çalıştırıldığında şifresi çözülür** ve **çevresel değişkenlerde** erişilebilir olur.

![](<../../.gitbook/assets/image (139).png>)

Bu şekilde şifrelenen gizli bilgilerin ayarların çevresel değişkenler listesinde görünmeyeceğini unutmayın.

### Özel Şifreli Dosyalar

Daha önceki gibi, TravisCI ayrıca **dosyaları şifrelemeye ve build sırasında şifrelerini çözmeye** de izin verir:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Dikkat edin, bir dosyayı şifrelerken repo içinde 2 Çevre Değişkeni yapılandırılacaktır, örneğin:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI Enterprise, **Travis CI'nin yerinde (on-prem) versiyonudur**, ki bu versiyonu **kendi altyapınıza** dağıtabilirsiniz. Travis CI'nin 'sunucu' versiyonu olarak düşünebilirsiniz. Travis CI kullanarak, istediğiniz gibi yapılandırıp güvenli hale getirebileceğiniz bir ortamda kullanımı kolay bir Sürekli Entegrasyon/Sürekli Dağıtım (CI/CD) sistemi etkinleştirebilirsiniz.

**Travis CI Enterprise iki ana bölümden oluşur:**

1. TCI **hizmetleri** (veya TCI Çekirdek Hizmetleri), sürüm kontrol sistemleri ile entegrasyon, derlemeleri yetkilendirme, derleme işlerini planlama vb. sorumludur.
2. TCI **Worker** ve derleme ortamı görüntüleri (OS görüntüleri olarak da adlandırılır).

**TCI Çekirdek hizmetleri şunları gerektirir:**

1. **PostgreSQL11** (veya daha yeni) bir veritabanı.
2. Bir Kubernetes kümesi dağıtmak için bir altyapı; gerekirse bir sunucu kümesinde veya tek bir makinede dağıtılabilir.
3. Kurulumunuza bağlı olarak, bazı bileşenleri kendiniz dağıtmak ve yapılandırmak isteyebilirsiniz, örneğin RabbitMQ - daha fazla ayrıntı için [Travis CI Enterprise Kurulumu](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) bölümüne bakın.

**TCI Worker şunları gerektirir:**

1. **Worker ve bağlı bir derleme görüntüsünü içeren bir docker görüntüsünün dağıtılabileceği** bir altyapı.
2. Belirli Travis CI Çekirdek Hizmetleri bileşenlerine bağlantı - daha fazla ayrıntı için [Worker Kurulumu](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) bölümüne bakın.

Dağıtılan TCI Worker ve derleme ortamı OS görüntülerinin miktarı, altyapınızdaki Travis CI Enterprise dağıtımının toplam eşzamanlı kapasitesini belirleyecektir.

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
AWS Hacking öğrenin ve pratik yapın:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
GCP Hacking öğrenin ve pratik yapın: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'ı takip edin.**
* **HackTricks'e PR göndererek hacking ipuçlarını paylaşın** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına.

</details>
{% endhint %}
