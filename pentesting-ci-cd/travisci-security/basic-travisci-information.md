# Informazioni di base su TravisCI

{% hint style="success" %}
Impara e pratica AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Impara e pratica GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supporta HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos di github.

</details>
{% endhint %}

## Accesso

TravisCI si integra direttamente con diverse piattaforme git come Github, Bitbucket, Assembla e Gitlab. Chieder√† all'utente di dare a TravisCI i permessi per accedere ai repository che vuole integrare con TravisCI.

Ad esempio, in Github chieder√† i seguenti permessi:

* `user:email` (solo lettura)
* `read:org` (solo lettura)
* `repo`: Concede accesso in lettura e scrittura al codice, agli stati dei commit, ai collaboratori e agli stati di deployment per i repository e le organizzazioni pubbliche e private.

## Segreti Criptati

### Variabili d'Ambiente

In TravisCI, come in altre piattaforme CI, √® possibile **salvare a livello di repo segreti** che saranno salvati criptati e **decriptati e inseriti nella variabile d'ambiente** della macchina che esegue il build.

![](<../../.gitbook/assets/image (203).png>)

√à possibile indicare i **branch ai quali i segreti saranno disponibili** (per impostazione predefinita tutti) e anche se TravisCI **dovrebbe nascondere il loro valore** se appare **nei log** (per impostazione predefinita lo far√†).

### Segreti Criptati Personalizzati

Per **ogni repo** TravisCI genera una **coppia di chiavi RSA**, **conserva** quella **privata** e rende la **chiave pubblica del repository disponibile** a coloro che hanno **accesso** al repository.

Puoi accedere alla chiave pubblica di un repo con:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Poi, puoi usare questa configurazione per **crittografare i segreti e aggiungerli al tuo `.travis.yaml`**. I segreti saranno **decrittografati quando viene eseguita la build** e accessibili nelle **variabili d'ambiente**.

![](<../../.gitbook/assets/image (139).png>)

Nota che i segreti crittografati in questo modo non appariranno elencati nelle variabili d'ambiente delle impostazioni.

### File Crittografati Personalizzati

Allo stesso modo di prima, TravisCI consente anche di **crittografare i file e poi decrittografarli durante la build**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Nota che quando si cripta un file, 2 variabili d'ambiente verranno configurate all'interno del repository come:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI Enterprise √® una **versione on-prem di Travis CI**, che puoi distribuire **nella tua infrastruttura**. Pensa alla versione 'server' di Travis CI. Utilizzare Travis CI ti consente di abilitare un sistema di Continuous Integration/Continuous Deployment (CI/CD) facile da usare in un ambiente che puoi configurare e proteggere come desideri.

**Travis CI Enterprise √® composto da due parti principali:**

1. Servizi **TCI** (o TCI Core Services), responsabili dell'integrazione con i sistemi di controllo versione, autorizzazione delle build, pianificazione dei job di build, ecc.
2. **Worker** TCI e immagini dell'ambiente di build (chiamate anche immagini OS).

**I servizi Core TCI richiedono quanto segue:**

1. Un database **PostgreSQL11** (o successivo).
2. Un'infrastruttura per distribuire un cluster Kubernetes; pu√≤ essere distribuito in un cluster di server o in una singola macchina se necessario.
3. A seconda della tua configurazione, potresti voler distribuire e configurare alcuni dei componenti da solo, ad esempio RabbitMQ - vedi [Setting up Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) per maggiori dettagli.

**Il Worker TCI richiede quanto segue:**

1. Un'infrastruttura dove un'immagine docker contenente il **Worker e un'immagine di build collegata possa essere distribuita**.
2. Connettivit√† a determinati componenti dei servizi Core di Travis CI - vedi [Setting Up Worker](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) per maggiori dettagli.

La quantit√† di Worker TCI distribuiti e le immagini OS dell'ambiente di build determineranno la capacit√† totale concorrente della distribuzione di Travis CI Enterprise nella tua infrastruttura.

![](<../../.gitbook/assets/image (199).png>)

{% hint style="success" %}
Impara e pratica AWS Hacking:<img src="/.gitbook/assets/image.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/image.png" alt="" data-size="line">\
Impara e pratica GCP Hacking: <img src="/.gitbook/assets/image (2).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/image (2).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supporta HackTricks</summary>

* Controlla i [**piani di abbonamento**](https://github.com/sponsors/carlospolop)!
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repo di github.

</details>
{% endhint %}
